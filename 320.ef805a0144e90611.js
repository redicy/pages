"use strict";(self.webpackChunkseller=self.webpackChunkseller||[]).push([[320],{9320:(j,_,m)=>{m.r(_),m.d(_,{OzonModule:()=>Rr});var g=m(177),S=m(9909),O=m(467),b=m(4412),E=m(5964),C=m(6977),v=m(8141),y=m(9437),p=m(983),r=m(2180),a=m(4153),e=m(4438),l=m(6557),c=m(5779),f=m(8805),h=m(345),I=m(4238),T=m(1141),w=m(612),$=m(491),z=m(9417),A=m(1455),Z=m(9335),ie=m(563),ne=m(9071),B=m(8542),D=m(4420),X=m(3306),N=m(5998),V=m(2816),J=m(1512),se=m(2423),oe=m(1880),Re=m(5434);const le=n=>({height:n}),we=(n,s)=>({"p-multiselect-item":!0,"p-disabled":n,"p-focus":s}),De=n=>({"p-variant-filled":n}),xe=n=>({"p-highlight":n}),ce=n=>({$implicit:n});function je(n,s){1&n&&e.nrm(0,"CheckIcon",7),2&n&&(e.Y8G("styleClass","p-checkbox-icon"),e.BMQ("aria-hidden",!0))}function Me(n,s){}function Pe(n,s){1&n&&e.DNE(0,Me,0,0,"ng-template")}function Ge(n,s){if(1&n&&(e.j41(0,"span",8),e.DNE(1,Pe,1,0,null,9),e.k0s()),2&n){const t=e.XpG(2);e.BMQ("aria-hidden",!0),e.R7$(),e.Y8G("ngTemplateOutlet",t.checkIconTemplate)}}function Be(n,s){}function ze(n,s){1&n&&e.DNE(0,Be,0,0,"ng-template")}function Le(n,s){if(1&n&&(e.j41(0,"span",8),e.DNE(1,ze,1,0,null,4),e.k0s()),2&n){const t=e.XpG(2);e.BMQ("aria-hidden",!0),e.R7$(),e.Y8G("ngTemplateOutlet",t.itemCheckboxIconTemplate)("ngTemplateOutletContext",e.eq3(3,ce,t.selected))}}function Ae(n,s){if(1&n&&(e.qex(0),e.DNE(1,je,1,2,"CheckIcon",5)(2,Ge,2,2,"span",6)(3,Le,2,5,"span",6),e.bVm()),2&n){const t=e.XpG();e.R7$(),e.Y8G("ngIf",!t.checkIconTemplate&&!t.itemCheckboxIconTemplate),e.R7$(),e.Y8G("ngIf",t.checkIconTemplate),e.R7$(),e.Y8G("ngIf",t.itemCheckboxIconTemplate)}}function $e(n,s){if(1&n&&(e.j41(0,"span"),e.EFF(1),e.k0s()),2&n){let t;const o=e.XpG();e.R7$(),e.JRh(null!==(t=o.label)&&void 0!==t?t:"empty")}}function Ve(n,s){1&n&&e.eu8(0)}const Ne=["container"],Xe=["overlay"],Ye=["filterInput"],He=["focusInput"],Ue=["items"],We=["scroller"],Je=["lastHiddenFocusableEl"],Ke=["firstHiddenFocusableEl"],qe=["headerCheckbox"],Qe=[[["p-header"]],[["p-footer"]]],Ze=["p-header","p-footer"],et=(n,s)=>({$implicit:n,removeChip:s}),tt=n=>({"p-disabled":n}),nt=n=>({"max-height":n}),ve=n=>({options:n}),it=(n,s)=>({"p-variant-filled":n,"p-checkbox-disabled":s}),ot=(n,s,t)=>({"p-highlight":n,"p-focus":s,"p-disabled":t}),at=(n,s)=>({$implicit:n,partialSelected:s}),be=(n,s)=>({$implicit:n,options:s}),rt=()=>({});function lt(n,s){if(1&n&&(e.qex(0),e.EFF(1),e.bVm()),2&n){const t=e.XpG(2);e.R7$(),e.JRh(t.label()||"empty")}}function ut(n,s){if(1&n){const t=e.RV6();e.j41(0,"TimesCircleIcon",31),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2).$implicit,u=e.XpG(3);return e.Njj(u.removeOption(i,u.event))})("keydown",function(i){e.eBV(t);const u=e.XpG(2).$implicit,d=e.XpG(3);return e.Njj(d.onremoveTokenIconKeyDown(i,u))}),e.k0s()}if(2&n){const t=e.XpG(2).$implicit,o=e.XpG(3);e.Y8G("ngClass",e.eq3(5,tt,o.isOptionDisabled(t)))("styleClass","p-multiselect-token-icon"),e.BMQ("tabindex",0)("data-pc-section","clearicon")("aria-hidden",!0)}}function st(n,s){1&n&&e.eu8(0)}function ct(n,s){if(1&n){const t=e.RV6();e.j41(0,"span",32),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2).$implicit,u=e.XpG(3);return e.Njj(u.removeOption(i,u.event))})("keydown",function(i){e.eBV(t);const u=e.XpG(2).$implicit,d=e.XpG(3);return e.Njj(d.onremoveTokenIconKeyDown(i,u))}),e.DNE(1,st,1,0,"ng-container",33),e.k0s()}if(2&n){const t=e.XpG(5);e.BMQ("tabindex",0)("data-pc-section","clearicon")("aria-hidden",!0),e.R7$(),e.Y8G("ngTemplateOutlet",t.removeTokenIconTemplate)}}function pt(n,s){if(1&n&&(e.qex(0),e.DNE(1,ut,1,7,"TimesCircleIcon",29)(2,ct,2,4,"span",30),e.bVm()),2&n){const t=e.XpG(4);e.R7$(),e.Y8G("ngIf",!t.removeTokenIconTemplate),e.R7$(),e.Y8G("ngIf",t.removeTokenIconTemplate)}}function dt(n,s){if(1&n&&(e.j41(0,"div",27,4)(2,"span",28),e.EFF(3),e.k0s(),e.DNE(4,pt,3,2,"ng-container",20),e.k0s()),2&n){const t=s.$implicit,o=e.XpG(3);e.R7$(3),e.JRh(o.getLabelByValue(t)),e.R7$(),e.Y8G("ngIf",!o.disabled)}}function _t(n,s){if(1&n&&(e.qex(0),e.EFF(1),e.bVm()),2&n){const t=e.XpG(3);e.R7$(),e.JRh(t.placeholder()||t.defaultLabel||"empty")}}function ft(n,s){if(1&n&&(e.qex(0),e.DNE(1,dt,5,2,"div",26)(2,_t,2,1,"ng-container",20),e.bVm()),2&n){const t=e.XpG(2);e.R7$(),e.Y8G("ngForOf",t.chipSelectedItems()),e.R7$(),e.Y8G("ngIf",!t.modelValue()||0===t.modelValue().length)}}function mt(n,s){if(1&n&&(e.qex(0),e.DNE(1,lt,2,1,"ng-container",20)(2,ft,3,2,"ng-container",20),e.bVm()),2&n){const t=e.XpG();e.R7$(),e.Y8G("ngIf","comma"===t.display),e.R7$(),e.Y8G("ngIf","chip"===t.display)}}function ht(n,s){1&n&&e.eu8(0)}function gt(n,s){if(1&n){const t=e.RV6();e.j41(0,"TimesIcon",36),e.bIt("click",function(i){e.eBV(t);const u=e.XpG(2);return e.Njj(u.clear(i))}),e.k0s()}2&n&&(e.Y8G("styleClass","p-multiselect-clear-icon"),e.BMQ("data-pc-section","clearicon")("aria-hidden",!0))}function vt(n,s){}function bt(n,s){1&n&&e.DNE(0,vt,0,0,"ng-template")}function yt(n,s){if(1&n){const t=e.RV6();e.j41(0,"span",37),e.bIt("click",function(i){e.eBV(t);const u=e.XpG(2);return e.Njj(u.clear(i))}),e.DNE(1,bt,1,0,null,33),e.k0s()}if(2&n){const t=e.XpG(2);e.BMQ("data-pc-section","clearicon")("aria-hidden",!0),e.R7$(),e.Y8G("ngTemplateOutlet",t.clearIconTemplate)}}function Ot(n,s){if(1&n&&(e.qex(0),e.DNE(1,gt,1,3,"TimesIcon",34)(2,yt,2,3,"span",35),e.bVm()),2&n){const t=e.XpG();e.R7$(),e.Y8G("ngIf",!t.clearIconTemplate),e.R7$(),e.Y8G("ngIf",t.clearIconTemplate)}}function St(n,s){1&n&&e.eu8(0)}function Et(n,s){if(1&n&&(e.qex(0),e.DNE(1,St,1,0,"ng-container",33),e.bVm()),2&n){const t=e.XpG(2);e.R7$(),e.Y8G("ngTemplateOutlet",t.loadingIconTemplate)}}function Ct(n,s){if(1&n&&e.nrm(0,"span",40),2&n){const t=e.XpG(3);e.Y8G("ngClass","p-multiselect-trigger-icon pi-spin "+t.loadingIcon)}}function kt(n,s){1&n&&e.nrm(0,"span",41),2&n&&e.HbH("p-multiselect-trigger-icon pi pi-spinner pi-spin")}function It(n,s){if(1&n&&(e.qex(0),e.DNE(1,Ct,1,1,"span",38)(2,kt,1,2,"span",39),e.bVm()),2&n){const t=e.XpG(2);e.R7$(),e.Y8G("ngIf",t.loadingIcon),e.R7$(),e.Y8G("ngIf",!t.loadingIcon)}}function Ft(n,s){if(1&n&&(e.qex(0),e.DNE(1,Et,2,1,"ng-container",20)(2,It,3,2,"ng-container",20),e.bVm()),2&n){const t=e.XpG();e.R7$(),e.Y8G("ngIf",t.loadingIconTemplate),e.R7$(),e.Y8G("ngIf",!t.loadingIconTemplate)}}function Tt(n,s){if(1&n&&e.nrm(0,"span",45),2&n){const t=e.XpG(3);e.Y8G("ngClass",t.dropdownIcon),e.BMQ("data-pc-section","triggericon")("aria-hidden",!0)}}function Rt(n,s){1&n&&e.nrm(0,"ChevronDownIcon",46),2&n&&(e.Y8G("styleClass","p-multiselect-trigger-icon"),e.BMQ("data-pc-section","triggericon")("aria-hidden",!0))}function wt(n,s){if(1&n&&(e.qex(0),e.DNE(1,Tt,1,3,"span",43)(2,Rt,1,3,"ChevronDownIcon",44),e.bVm()),2&n){const t=e.XpG(2);e.R7$(),e.Y8G("ngIf",t.dropdownIcon),e.R7$(),e.Y8G("ngIf",!t.dropdownIcon)}}function Dt(n,s){}function xt(n,s){1&n&&e.DNE(0,Dt,0,0,"ng-template")}function jt(n,s){if(1&n&&(e.j41(0,"span",47),e.DNE(1,xt,1,0,null,33),e.k0s()),2&n){const t=e.XpG(2);e.BMQ("data-pc-section","triggericon")("aria-hidden",!0),e.R7$(),e.Y8G("ngTemplateOutlet",t.dropdownIconTemplate)}}function Mt(n,s){if(1&n&&e.DNE(0,wt,3,2,"ng-container",20)(1,jt,2,3,"span",42),2&n){const t=e.XpG();e.Y8G("ngIf",!t.dropdownIconTemplate),e.R7$(),e.Y8G("ngIf",t.dropdownIconTemplate)}}function Pt(n,s){1&n&&e.eu8(0)}function Gt(n,s){1&n&&e.eu8(0)}function Bt(n,s){if(1&n&&(e.qex(0),e.DNE(1,Gt,1,0,"ng-container",21),e.bVm()),2&n){const t=e.XpG(3);e.R7$(),e.Y8G("ngTemplateOutlet",t.filterTemplate)("ngTemplateOutletContext",e.eq3(2,ve,t.filterOptions))}}function zt(n,s){1&n&&e.nrm(0,"CheckIcon",46),2&n&&(e.Y8G("styleClass","p-checkbox-icon"),e.BMQ("aria-hidden",!0))}function Lt(n,s){if(1&n&&(e.qex(0),e.DNE(1,zt,1,2,"CheckIcon",44),e.bVm()),2&n){const t=e.XpG(6);e.R7$(),e.Y8G("ngIf",t.allSelected())}}function At(n,s){}function $t(n,s){1&n&&e.DNE(0,At,0,0,"ng-template")}function Vt(n,s){if(1&n&&(e.j41(0,"span",63),e.DNE(1,$t,1,0,null,21),e.k0s()),2&n){const t=e.XpG(6);e.BMQ("aria-hidden",!0),e.R7$(),e.Y8G("ngTemplateOutlet",t.checkIconTemplate)("ngTemplateOutletContext",e.eq3(3,ce,t.allSelected()))}}function Nt(n,s){}function Xt(n,s){1&n&&e.DNE(0,Nt,0,0,"ng-template")}function Yt(n,s){if(1&n&&(e.j41(0,"span",63),e.DNE(1,Xt,1,0,null,21),e.k0s()),2&n){const t=e.XpG(6);e.BMQ("aria-hidden",!0),e.R7$(),e.Y8G("ngTemplateOutlet",t.headerCheckboxIconTemplate)("ngTemplateOutletContext",e.l_i(3,at,t.allSelected(),t.partialSelected()))}}function Ht(n,s){if(1&n&&(e.qex(0),e.DNE(1,Lt,2,1,"ng-container",20)(2,Vt,2,5,"span",62)(3,Yt,2,6,"span",62),e.bVm()),2&n){const t=e.XpG(5);e.R7$(),e.Y8G("ngIf",!t.checkIconTemplate&&!t.headerCheckboxIconTemplate),e.R7$(),e.Y8G("ngIf",t.checkIconTemplate),e.R7$(),e.Y8G("ngIf",t.headerCheckboxIconTemplate)}}function Ut(n,s){if(1&n){const t=e.RV6();e.j41(0,"div",59),e.bIt("click",function(i){e.eBV(t);const u=e.XpG(4);return e.Njj(u.onToggleAll(i))})("keydown",function(i){e.eBV(t);const u=e.XpG(4);return e.Njj(u.onHeaderCheckboxKeyDown(i))}),e.j41(1,"div",16)(2,"input",60,9),e.bIt("focus",function(){e.eBV(t);const i=e.XpG(4);return e.Njj(i.onHeaderCheckboxFocus())})("blur",function(){e.eBV(t);const i=e.XpG(4);return e.Njj(i.onHeaderCheckboxBlur())}),e.k0s()(),e.j41(4,"div",61),e.DNE(5,Ht,4,3,"ng-container",20),e.k0s()()}if(2&n){const t=e.XpG(4);e.Y8G("ngClass",e.l_i(10,it,"filled"===t.variant||"filled"===t.config.inputStyle(),t.disabled||t.toggleAllDisabled)),e.R7$(),e.BMQ("data-p-hidden-accessible",!0),e.R7$(),e.Y8G("readonly",t.readonly)("disabled",t.disabled||t.toggleAllDisabled),e.BMQ("checked",t.allSelected())("aria-label",t.toggleAllAriaLabel),e.R7$(2),e.Y8G("ngClass",e.sMw(13,ot,t.allSelected(),t.headerCheckboxFocus,t.disabled||t.toggleAllDisabled)),e.BMQ("aria-label",t.toggleAllAriaLabel)("aria-checked",t.allSelected()),e.R7$(),e.Y8G("ngIf",t.allSelected()||t.partialSelected())}}function Wt(n,s){1&n&&e.nrm(0,"SearchIcon",46),2&n&&e.Y8G("styleClass","p-multiselect-filter-icon")}function Jt(n,s){}function Kt(n,s){1&n&&e.DNE(0,Jt,0,0,"ng-template")}function qt(n,s){if(1&n&&(e.j41(0,"span",67),e.DNE(1,Kt,1,0,null,33),e.k0s()),2&n){const t=e.XpG(5);e.R7$(),e.Y8G("ngTemplateOutlet",t.filterIconTemplate)}}function Qt(n,s){if(1&n){const t=e.RV6();e.j41(0,"div",64)(1,"input",65,10),e.bIt("input",function(i){e.eBV(t);const u=e.XpG(4);return e.Njj(u.onFilterInputChange(i))})("keydown",function(i){e.eBV(t);const u=e.XpG(4);return e.Njj(u.onFilterKeyDown(i))})("click",function(i){e.eBV(t);const u=e.XpG(4);return e.Njj(u.onInputClick(i))})("blur",function(i){e.eBV(t);const u=e.XpG(4);return e.Njj(u.onFilterBlur(i))}),e.k0s(),e.DNE(3,Wt,1,1,"SearchIcon",44)(4,qt,2,1,"span",66),e.k0s()}if(2&n){const t=e.XpG(4);e.R7$(),e.Y8G("value",t._filterValue()||"")("disabled",t.disabled),e.BMQ("autocomplete",t.autocomplete)("placeholder",t.filterPlaceHolder)("aria-owns",t.id+"_list")("aria-activedescendant",t.focusedOptionId)("placeholder",t.filterPlaceHolder)("aria-label",t.ariaFilterLabel),e.R7$(2),e.Y8G("ngIf",!t.filterIconTemplate),e.R7$(),e.Y8G("ngIf",t.filterIconTemplate)}}function Zt(n,s){1&n&&e.nrm(0,"TimesIcon",46),2&n&&e.Y8G("styleClass","p-multiselect-close-icon")}function en(n,s){}function tn(n,s){1&n&&e.DNE(0,en,0,0,"ng-template")}function nn(n,s){if(1&n&&(e.j41(0,"span",68),e.DNE(1,tn,1,0,null,33),e.k0s()),2&n){const t=e.XpG(4);e.R7$(),e.Y8G("ngTemplateOutlet",t.closeIconTemplate)}}function on(n,s){if(1&n){const t=e.RV6();e.DNE(0,Ut,6,17,"div",55)(1,Qt,5,10,"div",56),e.j41(2,"button",57),e.bIt("click",function(i){e.eBV(t);const u=e.XpG(3);return e.Njj(u.close(i))}),e.DNE(3,Zt,1,1,"TimesIcon",44)(4,nn,2,1,"span",58),e.k0s()}if(2&n){const t=e.XpG(3);e.Y8G("ngIf",t.isSelectionAllDisabled()),e.R7$(),e.Y8G("ngIf",t.filter),e.R7$(),e.BMQ("aria-label",t.closeAriaLabel),e.R7$(),e.Y8G("ngIf",!t.closeIconTemplate),e.R7$(),e.Y8G("ngIf",t.closeIconTemplate)}}function an(n,s){if(1&n&&(e.j41(0,"div",54),e.SdG(1),e.DNE(2,Pt,1,0,"ng-container",33)(3,Bt,2,4,"ng-container",23)(4,on,5,5,"ng-template",null,8,e.C5r),e.k0s()),2&n){const t=e.sdS(5),o=e.XpG(2);e.R7$(2),e.Y8G("ngTemplateOutlet",o.headerTemplate),e.R7$(),e.Y8G("ngIf",o.filterTemplate)("ngIfElse",t)}}function rn(n,s){1&n&&e.eu8(0)}function ln(n,s){if(1&n&&e.DNE(0,rn,1,0,"ng-container",21),2&n){const t=s.$implicit,o=s.options;e.XpG(2);const i=e.sdS(8);e.Y8G("ngTemplateOutlet",i)("ngTemplateOutletContext",e.l_i(2,be,t,o))}}function un(n,s){1&n&&e.eu8(0)}function sn(n,s){if(1&n&&e.DNE(0,un,1,0,"ng-container",21),2&n){const t=s.options,o=e.XpG(4);e.Y8G("ngTemplateOutlet",o.loaderTemplate)("ngTemplateOutletContext",e.eq3(2,ve,t))}}function cn(n,s){1&n&&(e.qex(0),e.DNE(1,sn,1,4,"ng-template",70),e.bVm())}function pn(n,s){if(1&n){const t=e.RV6();e.j41(0,"p-scroller",69,11),e.bIt("onLazyLoad",function(i){e.eBV(t);const u=e.XpG(2);return e.Njj(u.onLazyLoad.emit(i))}),e.DNE(2,ln,1,5,"ng-template",25)(3,cn,2,0,"ng-container",20),e.k0s()}if(2&n){const t=e.XpG(2);e.Aen(e.eq3(9,le,t.scrollHeight)),e.Y8G("items",t.visibleOptions())("itemSize",t.virtualScrollItemSize||t._itemSize)("autoSize",!0)("tabindex",-1)("lazy",t.lazy)("options",t.virtualScrollOptions),e.R7$(3),e.Y8G("ngIf",t.loaderTemplate)}}function dn(n,s){1&n&&e.eu8(0)}function _n(n,s){if(1&n&&(e.qex(0),e.DNE(1,dn,1,0,"ng-container",21),e.bVm()),2&n){e.XpG();const t=e.sdS(8),o=e.XpG();e.R7$(),e.Y8G("ngTemplateOutlet",t)("ngTemplateOutletContext",e.l_i(3,be,o.visibleOptions(),e.lJ4(2,rt)))}}function fn(n,s){if(1&n&&(e.j41(0,"span"),e.EFF(1),e.k0s()),2&n){const t=e.XpG(2).$implicit,o=e.XpG(3);e.R7$(),e.JRh(o.getOptionGroupLabel(t.optionGroup))}}function mn(n,s){1&n&&e.eu8(0)}function hn(n,s){if(1&n&&(e.qex(0),e.j41(1,"li",74),e.DNE(2,fn,2,1,"span",20)(3,mn,1,0,"ng-container",21),e.k0s(),e.bVm()),2&n){const t=e.XpG(),o=t.$implicit,i=t.index,u=e.XpG().options,d=e.XpG(2);e.R7$(),e.Y8G("ngStyle",e.eq3(5,le,u.itemSize+"px")),e.BMQ("id",d.id+"_"+d.getOptionIndex(i,u)),e.R7$(),e.Y8G("ngIf",!d.groupTemplate),e.R7$(),e.Y8G("ngTemplateOutlet",d.groupTemplate)("ngTemplateOutletContext",e.eq3(7,ce,o.optionGroup))}}function gn(n,s){if(1&n){const t=e.RV6();e.qex(0),e.j41(1,"p-multiSelectItem",75),e.bIt("onClick",function(i){e.eBV(t);const u=e.XpG().index,d=e.XpG().options,k=e.XpG(2);return e.Njj(k.onOptionSelect(i,!1,k.getOptionIndex(u,d)))})("onMouseEnter",function(i){e.eBV(t);const u=e.XpG().index,d=e.XpG().options,k=e.XpG(2);return e.Njj(k.onOptionMouseEnter(i,k.getOptionIndex(u,d)))}),e.k0s(),e.bVm()}if(2&n){const t=e.XpG(),o=t.$implicit,i=t.index,u=e.XpG().options,d=e.XpG(2);e.R7$(),e.Y8G("id",d.id+"_"+d.getOptionIndex(i,u))("option",o)("selected",d.isSelected(o))("label",d.getOptionLabel(o))("disabled",d.isOptionDisabled(o))("template",d.itemTemplate)("checkIconTemplate",d.checkIconTemplate)("itemCheckboxIconTemplate",d.itemCheckboxIconTemplate)("itemSize",u.itemSize)("focused",d.focusedOptionIndex()===d.getOptionIndex(i,u))("ariaPosInset",d.getAriaPosInset(d.getOptionIndex(i,u)))("ariaSetSize",d.ariaSetSize)}}function vn(n,s){if(1&n&&e.DNE(0,hn,4,9,"ng-container",20)(1,gn,2,12,"ng-container",20),2&n){const t=s.$implicit,o=e.XpG(3);e.Y8G("ngIf",o.isOptionGroup(t)),e.R7$(),e.Y8G("ngIf",!o.isOptionGroup(t))}}function bn(n,s){if(1&n&&(e.qex(0),e.EFF(1),e.bVm()),2&n){const t=e.XpG(4);e.R7$(),e.SpI(" ",t.emptyFilterMessageLabel," ")}}function yn(n,s){1&n&&e.eu8(0,null,13)}function On(n,s){if(1&n&&(e.j41(0,"li",76),e.DNE(1,bn,2,1,"ng-container",23)(2,yn,2,0,"ng-container",33),e.k0s()),2&n){const t=e.XpG().options,o=e.XpG(2);e.Y8G("ngStyle",e.eq3(4,le,t.itemSize+"px")),e.R7$(),e.Y8G("ngIf",!o.emptyFilterTemplate&&!o.emptyTemplate)("ngIfElse",o.emptyFilter),e.R7$(),e.Y8G("ngTemplateOutlet",o.emptyFilterTemplate||o.emptyTemplate)}}function Sn(n,s){if(1&n&&(e.qex(0),e.EFF(1),e.bVm()),2&n){const t=e.XpG(4);e.R7$(),e.SpI(" ",t.emptyMessageLabel," ")}}function En(n,s){1&n&&e.eu8(0,null,14)}function Cn(n,s){if(1&n&&(e.j41(0,"li",76),e.DNE(1,Sn,2,1,"ng-container",23)(2,En,2,0,"ng-container",33),e.k0s()),2&n){const t=e.XpG().options,o=e.XpG(2);e.Y8G("ngStyle",e.eq3(4,le,t.itemSize+"px")),e.R7$(),e.Y8G("ngIf",!o.emptyTemplate)("ngIfElse",o.empty),e.R7$(),e.Y8G("ngTemplateOutlet",o.emptyTemplate)}}function kn(n,s){if(1&n&&(e.j41(0,"ul",71,12),e.DNE(2,vn,2,2,"ng-template",72)(3,On,3,6,"li",73)(4,Cn,3,6,"li",73),e.k0s()),2&n){const t=s.$implicit,o=s.options,i=e.XpG(2);e.Y8G("ngClass",o.contentStyleClass)("ngStyle",o.contentStyle),e.BMQ("aria-label",i.listLabel),e.R7$(2),e.Y8G("ngForOf",t),e.R7$(),e.Y8G("ngIf",i.hasFilter()&&i.isEmpty()),e.R7$(),e.Y8G("ngIf",!i.hasFilter()&&i.isEmpty())}}function In(n,s){1&n&&e.eu8(0)}function Fn(n,s){if(1&n&&(e.j41(0,"div",77),e.SdG(1,1),e.DNE(2,In,1,0,"ng-container",33),e.k0s()),2&n){const t=e.XpG(2);e.R7$(2),e.Y8G("ngTemplateOutlet",t.footerTemplate)}}function Tn(n,s){if(1&n){const t=e.RV6();e.j41(0,"div",48)(1,"span",49,5),e.bIt("focus",function(i){e.eBV(t);const u=e.XpG();return e.Njj(u.onFirstHiddenFocus(i))}),e.k0s(),e.DNE(3,an,6,3,"div",50),e.j41(4,"div",51),e.DNE(5,pn,4,11,"p-scroller",52)(6,_n,2,6,"ng-container",20)(7,kn,5,6,"ng-template",null,6,e.C5r),e.k0s(),e.DNE(9,Fn,3,1,"div",53),e.j41(10,"span",49,7),e.bIt("focus",function(i){e.eBV(t);const u=e.XpG();return e.Njj(u.onLastHiddenFocus(i))}),e.k0s()()}if(2&n){const t=e.XpG();e.HbH(t.panelStyleClass),e.Y8G("ngClass","p-multiselect-panel p-component")("ngStyle",t.panelStyle),e.BMQ("id",t.id+"_list"),e.R7$(),e.BMQ("tabindex",0)("data-p-hidden-accessible",!0)("data-p-hidden-focusable",!0),e.R7$(2),e.Y8G("ngIf",t.showHeader),e.R7$(),e.Y8G("ngStyle",e.eq3(16,nt,t.virtualScroll?"auto":t.scrollHeight||"auto")),e.R7$(),e.Y8G("ngIf",t.virtualScroll),e.R7$(),e.Y8G("ngIf",!t.virtualScroll),e.R7$(3),e.Y8G("ngIf",t.footerFacet||t.footerTemplate),e.R7$(),e.BMQ("tabindex",0)("data-p-hidden-accessible",!0)("data-p-hidden-focusable",!0)}}const Rn={provide:z.kq,useExisting:(0,e.Rfq)(()=>ae),multi:!0};let wn=(()=>{class n{config;id;option;selected;label;disabled;itemSize;focused;ariaPosInset;ariaSetSize;template;checkIconTemplate;itemCheckboxIconTemplate;onClick=new e.bkB;onMouseEnter=new e.bkB;constructor(t){this.config=t}onOptionClick(t){this.onClick.emit({originalEvent:t,option:this.option,selected:this.selected}),t.stopPropagation()}onOptionMouseEnter(t){this.onMouseEnter.emit({originalEvent:t,option:this.option,selected:this.selected})}static \u0275fac=function(o){return new(o||n)(e.rXU(c.r1))};static \u0275cmp=e.VBU({type:n,selectors:[["p-multiSelectItem"]],hostAttrs:[1,"p-element"],inputs:{id:"id",option:"option",selected:[2,"selected","selected",e.L39],label:"label",disabled:[2,"disabled","disabled",e.L39],itemSize:[2,"itemSize","itemSize",e.Udg],focused:[2,"focused","focused",e.L39],ariaPosInset:"ariaPosInset",ariaSetSize:"ariaSetSize",template:"template",checkIconTemplate:"checkIconTemplate",itemCheckboxIconTemplate:"itemCheckboxIconTemplate"},outputs:{onClick:"onClick",onMouseEnter:"onMouseEnter"},features:[e.GFd],decls:6,vars:28,consts:[["pRipple","","role","option",1,"p-multiselect-item",3,"click","mouseenter","ngStyle","ngClass","id"],[1,"p-checkbox","p-component",3,"ngClass"],[1,"p-checkbox-box",3,"ngClass"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"styleClass",4,"ngIf"],["class","p-checkbox-icon",4,"ngIf"],[3,"styleClass"],[1,"p-checkbox-icon"],[4,"ngTemplateOutlet"]],template:function(o,i){1&o&&(e.j41(0,"li",0),e.bIt("click",function(d){return i.onOptionClick(d)})("mouseenter",function(d){return i.onOptionMouseEnter(d)}),e.j41(1,"div",1)(2,"div",2),e.DNE(3,Ae,4,3,"ng-container",3),e.k0s()(),e.DNE(4,$e,2,1,"span",3)(5,Ve,1,0,"ng-container",4),e.k0s()),2&o&&(e.Y8G("ngStyle",e.eq3(17,le,i.itemSize+"px"))("ngClass",e.l_i(19,we,i.disabled,i.focused))("id",i.id),e.BMQ("aria-label",i.label)("aria-setsize",i.ariaSetSize)("aria-posinset",i.ariaPosInset)("aria-selected",i.selected)("data-p-focused",i.focused)("data-p-highlight",i.selected)("data-p-disabled",i.disabled)("aria-checked",i.selected),e.R7$(),e.Y8G("ngClass",e.eq3(22,De,"filled"===i.config.inputStyle())),e.R7$(),e.Y8G("ngClass",e.eq3(24,xe,i.selected)),e.R7$(),e.Y8G("ngIf",i.selected),e.R7$(),e.Y8G("ngIf",!i.template),e.R7$(),e.Y8G("ngTemplateOutlet",i.template)("ngTemplateOutletContext",e.eq3(26,ce,i.option)))},dependencies:()=>[g.YU,g.bT,g.T3,g.B3,ie.n,X.S],encapsulation:2})}return n})(),ae=(()=>{class n{el;renderer;cd;zone;filterService;config;overlayService;id;ariaLabel;style;styleClass;panelStyle;panelStyleClass;inputId;disabled;readonly;group;filter=!0;filterPlaceHolder;filterLocale;overlayVisible;tabindex=0;variant="outlined";appendTo;dataKey;name;ariaLabelledBy;set displaySelectedLabel(t){this._displaySelectedLabel=t}get displaySelectedLabel(){return this._displaySelectedLabel}set maxSelectedLabels(t){this._maxSelectedLabels=t}get maxSelectedLabels(){return this._maxSelectedLabels}selectionLimit;selectedItemsLabel;showToggleAll=!0;emptyFilterMessage="";emptyMessage="";resetFilterOnHide=!1;dropdownIcon;optionLabel;optionValue;optionDisabled;optionGroupLabel="label";optionGroupChildren="items";showHeader=!0;filterBy;scrollHeight="200px";lazy=!1;virtualScroll;loading=!1;virtualScrollItemSize;loadingIcon;virtualScrollOptions;overlayOptions;ariaFilterLabel;filterMatchMode="contains";tooltip="";tooltipPosition="right";tooltipPositionStyle="absolute";tooltipStyleClass;autofocusFilter=!0;display="comma";autocomplete="off";showClear=!1;autofocus;get autoZIndex(){return this._autoZIndex}set autoZIndex(t){this._autoZIndex=t,console.warn("The autoZIndex property is deprecated since v14.2.0, use overlayOptions property instead.")}get baseZIndex(){return this._baseZIndex}set baseZIndex(t){this._baseZIndex=t,console.warn("The baseZIndex property is deprecated since v14.2.0, use overlayOptions property instead.")}get showTransitionOptions(){return this._showTransitionOptions}set showTransitionOptions(t){this._showTransitionOptions=t,console.warn("The showTransitionOptions property is deprecated since v14.2.0, use overlayOptions property instead.")}get hideTransitionOptions(){return this._hideTransitionOptions}set hideTransitionOptions(t){this._hideTransitionOptions=t,console.warn("The hideTransitionOptions property is deprecated since v14.2.0, use overlayOptions property instead.")}set defaultLabel(t){this._defaultLabel=t,console.warn("defaultLabel property is deprecated since 16.6.0, use placeholder instead")}get defaultLabel(){return this._defaultLabel}set placeholder(t){this._placeholder.set(t)}get placeholder(){return this._placeholder.asReadonly()}get options(){return this._options()}set options(t){D.BF.deepEquals(this._options(),t)||this._options.set(t)}get filterValue(){return this._filterValue()}set filterValue(t){this._filterValue.set(t)}get itemSize(){return this._itemSize}set itemSize(t){this._itemSize=t,console.warn("The itemSize property is deprecated, use virtualScrollItemSize property instead.")}get selectAll(){return this._selectAll}set selectAll(t){this._selectAll=t}focusOnHover=!1;filterFields;selectOnFocus=!1;autoOptionFocus=!0;onChange=new e.bkB;onFilter=new e.bkB;onFocus=new e.bkB;onBlur=new e.bkB;onClick=new e.bkB;onClear=new e.bkB;onPanelShow=new e.bkB;onPanelHide=new e.bkB;onLazyLoad=new e.bkB;onRemove=new e.bkB;onSelectAllChange=new e.bkB;containerViewChild;overlayViewChild;filterInputChild;focusInputViewChild;itemsViewChild;scroller;lastHiddenFocusableElementOnOverlay;firstHiddenFocusableElementOnOverlay;headerCheckboxViewChild;footerFacet;headerFacet;templates;searchValue;searchTimeout;_selectAll=null;_autoZIndex;_baseZIndex;_showTransitionOptions;_hideTransitionOptions;_defaultLabel;_placeholder=(0,e.vPA)(void 0);_itemSize;_selectionLimit;_disableTooltip=!1;value;_filteredOptions;onModelChange=()=>{};onModelTouched=()=>{};valuesAsString;focus;filtered;itemTemplate;groupTemplate;loaderTemplate;headerTemplate;filterTemplate;footerTemplate;emptyFilterTemplate;emptyTemplate;selectedItemsTemplate;checkIconTemplate;loadingIconTemplate;filterIconTemplate;removeTokenIconTemplate;closeIconTemplate;clearIconTemplate;dropdownIconTemplate;itemCheckboxIconTemplate;headerCheckboxIconTemplate;headerCheckboxFocus;filterOptions;preventModelTouched;preventDocumentDefault;focused=!1;itemsWrapper;_displaySelectedLabel=!0;_maxSelectedLabels=3;modelValue=(0,e.vPA)(null);_filterValue=(0,e.vPA)(null);_options=(0,e.vPA)(null);startRangeIndex=(0,e.vPA)(-1);focusedOptionIndex=(0,e.vPA)(-1);selectedOptions;clickInProgress=!1;get containerClass(){return{"p-multiselect p-component p-inputwrapper":!0,"p-disabled":this.disabled,"p-multiselect-clearable":this.showClear&&!this.disabled,"p-multiselect-chip":"chip"===this.display,"p-focus":this.focused,"p-variant-filled":"filled"===this.variant||"filled"===this.config.inputStyle()}}get inputClass(){return{"p-multiselect-label p-inputtext":!0,"p-placeholder":(this.placeholder()||this.defaultLabel)&&(this.label()===this.placeholder()||this.label()===this.defaultLabel),"p-multiselect-label-empty":!this.selectedItemsTemplate&&("p-emptylabel"===this.label()||0===this.label().length)}}get panelClass(){return{"p-multiselect-panel p-component":!0,"p-input-filled":"filled"===this.config.inputStyle(),"p-ripple-disabled":!1===this.config.ripple}}get labelClass(){return{"p-multiselect-label":!0,"p-placeholder":this.label()===this.placeholder()||this.label()===this.defaultLabel,"p-multiselect-label-empty":!(this.placeholder()||this.defaultLabel||this.modelValue()&&0!==this.modelValue().length)}}get emptyMessageLabel(){return this.emptyMessage||this.config.getTranslation(c.Yj.EMPTY_MESSAGE)}get emptyFilterMessageLabel(){return this.emptyFilterMessage||this.config.getTranslation(c.Yj.EMPTY_FILTER_MESSAGE)}get filled(){return"string"==typeof this.modelValue()?!!this.modelValue():D.BF.isNotEmpty(this.modelValue())}get isVisibleClearIcon(){return null!=this.modelValue()&&""!==this.modelValue()&&D.BF.isNotEmpty(this.modelValue())&&this.showClear&&!this.disabled&&this.filled}get toggleAllAriaLabel(){return this.config.translation.aria?this.config.translation.aria[this.allSelected()?"selectAll":"unselectAll"]:void 0}get closeAriaLabel(){return this.config.translation.aria?this.config.translation.aria.close:void 0}get listLabel(){return this.config.getTranslation(c.Yj.ARIA).listLabel}getAllVisibleAndNonVisibleOptions(){return this.group?this.flatOptions(this.options):this.options||[]}visibleOptions=(0,e.EWP)(()=>{const t=this.getAllVisibleAndNonVisibleOptions(),o=D.BF.isArray(t)&&D.BF.isObject(t[0]);if(this._filterValue()){let i;if(i=o?this.filterService.filter(t,this.searchFields(),this._filterValue(),this.filterMatchMode,this.filterLocale):t.filter(u=>u.toString().toLocaleLowerCase().includes(this._filterValue().toLocaleLowerCase())),this.group){const d=[];return(this.options||[]).forEach(k=>{const x=this.getOptionGroupChildren(k).filter(G=>i.includes(G));x.length>0&&d.push({...k,["string"==typeof this.optionGroupChildren?this.optionGroupChildren:"items"]:[...x]})}),this.flatOptions(d)}return i}return t});label=(0,e.EWP)(()=>{let t;const o=this.modelValue();if(o&&o.length&&this.displaySelectedLabel){if(D.BF.isNotEmpty(this.maxSelectedLabels)&&o.length>this.maxSelectedLabels)return this.getSelectedItemsLabel();t="";for(let i=0;i<o.length;i++)0!==i&&(t+=", "),t+=this.getLabelByValue(o[i])}else t=this.placeholder()||this.defaultLabel||"";return t});chipSelectedItems=(0,e.EWP)(()=>D.BF.isNotEmpty(this.maxSelectedLabels)&&this.modelValue()&&this.modelValue().length>this.maxSelectedLabels?this.modelValue().slice(0,this.maxSelectedLabels):this.modelValue());constructor(t,o,i,u,d,k,R){this.el=t,this.renderer=o,this.cd=i,this.zone=u,this.filterService=d,this.config=k,this.overlayService=R,(0,e.QZP)(()=>{const x=this.modelValue(),G=this.visibleOptions();G&&D.BF.isNotEmpty(G)&&(this.selectedOptions=this.optionValue&&this.optionLabel&&x?G.filter(P=>x.includes(P[this.optionLabel])||x.includes(P[this.optionValue])):x,this.cd.markForCheck())})}ngOnInit(){this.id=this.id||(0,D._Y)(),this.autoUpdateModel(),this.filterBy&&(this.filterOptions={filter:t=>this.onFilterInputChange(t),reset:()=>this.resetFilter()})}maxSelectionLimitReached(){return D.BF.isNotEmpty(this.selectionLimit)&&this.modelValue()&&this.modelValue().length===this.selectionLimit}ngAfterContentInit(){this.templates.forEach(t=>{switch(t.getType()){case"item":default:this.itemTemplate=t.template;break;case"group":this.groupTemplate=t.template;break;case"selectedItems":this.selectedItemsTemplate=t.template;break;case"header":this.headerTemplate=t.template;break;case"filter":this.filterTemplate=t.template;break;case"emptyfilter":this.emptyFilterTemplate=t.template;break;case"empty":this.emptyTemplate=t.template;break;case"footer":this.footerTemplate=t.template;break;case"loader":this.loaderTemplate=t.template;break;case"checkicon":this.checkIconTemplate=t.template,console.warn("checkicon is deprecated and will removed in v18. Use itemcheckboxicon or headercheckboxicon templates instead.");break;case"headercheckboxicon":this.headerCheckboxIconTemplate=t.template;break;case"loadingicon":this.loadingIconTemplate=t.template;break;case"filtericon":this.filterIconTemplate=t.template;break;case"removetokenicon":this.removeTokenIconTemplate=t.template;break;case"closeicon":this.closeIconTemplate=t.template;break;case"clearicon":this.clearIconTemplate=t.template;break;case"dropdownicon":this.dropdownIconTemplate=t.template;break;case"itemcheckboxicon":this.itemCheckboxIconTemplate=t.template}})}ngAfterViewInit(){this.overlayVisible&&this.show()}ngAfterViewChecked(){this.filtered&&(this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.overlayViewChild?.alignOverlay()},1)}),this.filtered=!1)}flatOptions(t){return(t||[]).reduce((o,i,u)=>{o.push({optionGroup:i,group:!0,index:u});const d=this.getOptionGroupChildren(i);return d&&d.forEach(k=>o.push(k)),o},[])}autoUpdateModel(){if(this.selectOnFocus&&this.autoOptionFocus&&!this.hasSelectedOption()){this.focusedOptionIndex.set(this.findFirstFocusedOptionIndex());const t=this.getOptionValue(this.visibleOptions()[this.focusedOptionIndex()]);this.onOptionSelect({originalEvent:null,option:[t]})}}updateModel(t,o){this.value=t,this.onModelChange(t),this.modelValue.set(t)}onInputClick(t){t.stopPropagation(),t.preventDefault(),this.focusedOptionIndex.set(-1)}onOptionSelect(t,o=!1,i=-1){const{originalEvent:u,option:d}=t;if(this.disabled||this.isOptionDisabled(d))return;let R=null;this.isSelected(d)?(R=this.modelValue().filter(x=>!D.BF.equals(x,this.getOptionValue(d),this.equalityKey())),this.onRemove.emit({newValue:this.value,removed:this.getOptionValue(d)})):R=[...this.modelValue()||[],this.getOptionValue(d)],this.updateModel(R,u),-1!==i&&this.focusedOptionIndex.set(i),o&&A.D.focus(this.focusInputViewChild?.nativeElement),this.onChange.emit({originalEvent:{...t,selected:!t.selected},value:R,itemValue:d})}findSelectedOptionIndex(){return this.hasSelectedOption()?this.visibleOptions().findIndex(t=>this.isValidSelectedOption(t)):-1}onOptionSelectRange(t,o=-1,i=-1){if(-1===o&&(o=this.findNearestSelectedOptionIndex(i,!0)),-1===i&&(i=this.findNearestSelectedOptionIndex(o)),-1!==o&&-1!==i){const u=Math.min(o,i),d=Math.max(o,i),k=this.visibleOptions().slice(u,d+1).filter(R=>this.isValidOption(R)).map(R=>this.getOptionValue(R));this.updateModel(k,t)}}searchFields(){return(this.filterBy||this.optionLabel||"label").split(",")}findNearestSelectedOptionIndex(t,o=!1){let i=-1;return this.hasSelectedOption()&&(o?(i=this.findPrevSelectedOptionIndex(t),i=-1===i?this.findNextSelectedOptionIndex(t):i):(i=this.findNextSelectedOptionIndex(t),i=-1===i?this.findPrevSelectedOptionIndex(t):i)),i>-1?i:t}findPrevSelectedOptionIndex(t){const o=this.hasSelectedOption()&&t>0?D.BF.findLastIndex(this.visibleOptions().slice(0,t),i=>this.isValidSelectedOption(i)):-1;return o>-1?o:-1}findFirstFocusedOptionIndex(){const t=this.findFirstSelectedOptionIndex();return t<0?this.findFirstOptionIndex():t}findFirstOptionIndex(){return this.visibleOptions().findIndex(t=>this.isValidOption(t))}findFirstSelectedOptionIndex(){return this.hasSelectedOption()?this.visibleOptions().findIndex(t=>this.isValidSelectedOption(t)):-1}findNextSelectedOptionIndex(t){const o=this.hasSelectedOption()&&t<this.visibleOptions().length-1?this.visibleOptions().slice(t+1).findIndex(i=>this.isValidSelectedOption(i)):-1;return o>-1?o+t+1:-1}equalityKey(){return this.optionValue?null:this.dataKey}hasSelectedOption(){return D.BF.isNotEmpty(this.modelValue())}isSelectionAllDisabled(){return this.showToggleAll&&D.BF.isEmpty(this.selectionLimit)}isValidSelectedOption(t){return this.isValidOption(t)&&this.isSelected(t)}isOptionGroup(t){return(this.group||this.optionGroupLabel)&&t.optionGroup&&t.group}isValidOption(t){return t&&!(this.isOptionDisabled(t)||this.isOptionGroup(t))}isOptionDisabled(t){return!(!this.maxSelectionLimitReached()||this.isSelected(t))||(this.optionDisabled?D.BF.resolveFieldData(t,this.optionDisabled):!(!t||void 0===t.disabled)&&t.disabled)}isSelected(t){const o=this.getOptionValue(t);return(this.modelValue()||[]).some(i=>D.BF.equals(i,o,this.equalityKey()))}isOptionMatched(t){return this.isValidOption(t)&&this.getOptionLabel(t).toString().toLocaleLowerCase(this.filterLocale).startsWith(this.searchValue.toLocaleLowerCase(this.filterLocale))}isEmpty(){return!this._options()||this.visibleOptions()&&0===this.visibleOptions().length}getOptionIndex(t,o){return this.virtualScrollerDisabled?t:o&&o.getItemOptions(t).index}getAriaPosInset(t){return(this.optionGroupLabel?t-this.visibleOptions().slice(0,t).filter(o=>this.isOptionGroup(o)).length:t)+1}get ariaSetSize(){return this.visibleOptions().filter(t=>!this.isOptionGroup(t)).length}getLabelByValue(t){const i=(this.group?this.flatOptions(this._options()):this._options()||[]).find(u=>!this.isOptionGroup(u)&&D.BF.equals(this.getOptionValue(u),t,this.equalityKey()));return i?this.getOptionLabel(i):null}getSelectedItemsLabel(){let t=/{(.*?)}/,o=this.selectedItemsLabel?this.selectedItemsLabel:this.config.getTranslation(c.Yj.SELECTION_MESSAGE);return t.test(o)?o.replace(o.match(t)[0],this.modelValue().length+""):o}getOptionLabel(t){return this.optionLabel?D.BF.resolveFieldData(t,this.optionLabel):t&&null!=t.label?t.label:t}getOptionValue(t){return this.optionValue?D.BF.resolveFieldData(t,this.optionValue):!this.optionValue&&t&&void 0!==t.value?t.value:t}getOptionGroupLabel(t){return this.optionGroupLabel?D.BF.resolveFieldData(t,this.optionGroupLabel):t&&null!=t.label?t.label:t}getOptionGroupChildren(t){return this.optionGroupChildren?D.BF.resolveFieldData(t,this.optionGroupChildren):t.items}onKeyDown(t){if(this.disabled)return void t.preventDefault();const o=t.metaKey||t.ctrlKey;switch(t.code){case"ArrowDown":this.onArrowDownKey(t);break;case"ArrowUp":this.onArrowUpKey(t);break;case"Home":this.onHomeKey(t);break;case"End":this.onEndKey(t);break;case"PageDown":this.onPageDownKey(t);break;case"PageUp":this.onPageUpKey(t);break;case"Enter":case"Space":this.onEnterKey(t);break;case"Escape":this.onEscapeKey(t);break;case"Tab":this.onTabKey(t);break;case"ShiftLeft":case"ShiftRight":this.onShiftKey();break;default:if("KeyA"===t.code&&o){const i=this.visibleOptions().filter(u=>this.isValidOption(u)).map(u=>this.getOptionValue(u));this.updateModel(i,t),t.preventDefault();break}!o&&D.BF.isPrintableCharacter(t.key)&&(!this.overlayVisible&&this.show(),this.searchOptions(t,t.key),t.preventDefault())}}onFilterKeyDown(t){switch(t.code){case"ArrowDown":this.onArrowDownKey(t);break;case"ArrowUp":this.onArrowUpKey(t,!0);break;case"ArrowLeft":case"ArrowRight":this.onArrowLeftKey(t,!0);break;case"Home":this.onHomeKey(t,!0);break;case"End":this.onEndKey(t,!0);break;case"Enter":case"NumpadEnter":this.onEnterKey(t);break;case"Escape":this.onEscapeKey(t);break;case"Tab":this.onTabKey(t,!0)}}onArrowLeftKey(t,o=!1){o&&this.focusedOptionIndex.set(-1)}onArrowDownKey(t){const o=-1!==this.focusedOptionIndex()?this.findNextOptionIndex(this.focusedOptionIndex()):this.findFirstFocusedOptionIndex();t.shiftKey&&this.onOptionSelectRange(t,this.startRangeIndex(),o),this.changeFocusedOptionIndex(t,o),!this.overlayVisible&&this.show(),t.preventDefault(),t.stopPropagation()}onArrowUpKey(t,o=!1){if(t.altKey&&!o)-1!==this.focusedOptionIndex()&&this.onOptionSelect(t,this.visibleOptions()[this.focusedOptionIndex()]),this.overlayVisible&&this.hide(),t.preventDefault();else{const i=-1!==this.focusedOptionIndex()?this.findPrevOptionIndex(this.focusedOptionIndex()):this.findLastFocusedOptionIndex();t.shiftKey&&this.onOptionSelectRange(t,i,this.startRangeIndex()),this.changeFocusedOptionIndex(t,i),!this.overlayVisible&&this.show(),t.preventDefault()}t.stopPropagation()}onHomeKey(t,o=!1){const{currentTarget:i}=t;if(o)i.setSelectionRange(0,t.shiftKey?i.value.length:0),this.focusedOptionIndex.set(-1);else{let u=t.metaKey||t.ctrlKey,d=this.findFirstOptionIndex();t.shiftKey&&u&&this.onOptionSelectRange(t,d,this.startRangeIndex()),this.changeFocusedOptionIndex(t,d),!this.overlayVisible&&this.show()}t.preventDefault()}onEndKey(t,o=!1){const{currentTarget:i}=t;if(o){const u=i.value.length;i.setSelectionRange(t.shiftKey?0:u,u),this.focusedOptionIndex.set(-1)}else{let u=t.metaKey||t.ctrlKey,d=this.findLastFocusedOptionIndex();t.shiftKey&&u&&this.onOptionSelectRange(t,this.startRangeIndex(),d),this.changeFocusedOptionIndex(t,d),!this.overlayVisible&&this.show()}t.preventDefault()}onPageDownKey(t){this.scrollInView(this.visibleOptions().length-1),t.preventDefault()}onPageUpKey(t){this.scrollInView(0),t.preventDefault()}onEnterKey(t){this.overlayVisible?-1!==this.focusedOptionIndex()&&(t.shiftKey?this.onOptionSelectRange(t,this.focusedOptionIndex()):this.onOptionSelect({originalEvent:t,option:this.visibleOptions()[this.focusedOptionIndex()]})):this.onArrowDownKey(t),t.preventDefault()}onEscapeKey(t){this.overlayVisible&&this.hide(!0),t.preventDefault()}onDeleteKey(t){this.showClear&&(this.clear(t),t.preventDefault())}onTabKey(t,o=!1){o||(this.overlayVisible&&this.hasFocusableElements()?(A.D.focus(t.shiftKey?this.lastHiddenFocusableElementOnOverlay.nativeElement:this.firstHiddenFocusableElementOnOverlay.nativeElement),t.preventDefault()):(-1!==this.focusedOptionIndex()&&this.onOptionSelect({originalEvent:t,option:this.visibleOptions()[this.focusedOptionIndex()]}),this.overlayVisible&&this.hide(this.filter)))}onShiftKey(){this.startRangeIndex.set(this.focusedOptionIndex())}onContainerClick(t){if(!(this.disabled||this.loading||this.readonly||t.target.isSameNode(this.focusInputViewChild?.nativeElement))){if("INPUT"===t.target.tagName||"clearicon"===t.target.getAttribute("data-pc-section")||t.target.closest('[data-pc-section="clearicon"]'))return void t.preventDefault();if(!this.overlayViewChild||!this.overlayViewChild.el.nativeElement.contains(t.target)){if(this.clickInProgress)return;this.clickInProgress=!0,setTimeout(()=>{this.clickInProgress=!1},150),this.overlayVisible?this.hide(!0):this.show(!0)}this.focusInputViewChild?.nativeElement.focus({preventScroll:!0}),this.onClick.emit(t),this.cd.detectChanges()}}onFirstHiddenFocus(t){const o=t.relatedTarget===this.focusInputViewChild?.nativeElement?A.D.getFirstFocusableElement(this.overlayViewChild?.overlayViewChild?.nativeElement,':not([data-p-hidden-focusable="true"])'):this.focusInputViewChild?.nativeElement;A.D.focus(o)}onInputFocus(t){this.focused=!0;const o=-1!==this.focusedOptionIndex()?this.focusedOptionIndex():this.overlayVisible&&this.autoOptionFocus?this.findFirstFocusedOptionIndex():-1;this.focusedOptionIndex.set(o),this.overlayVisible&&this.scrollInView(this.focusedOptionIndex()),this.onFocus.emit({originalEvent:t})}onInputBlur(t){this.focused=!1,this.onBlur.emit({originalEvent:t}),this.preventModelTouched||this.onModelTouched(),this.preventModelTouched=!1}onFilterInputChange(t){this._filterValue.set(t.target.value),this.focusedOptionIndex.set(-1),this.onFilter.emit({originalEvent:t,filter:this._filterValue()}),!this.virtualScrollerDisabled&&this.scroller.scrollToIndex(0),setTimeout(()=>{this.overlayViewChild.alignOverlay()})}onLastHiddenFocus(t){const o=t.relatedTarget===this.focusInputViewChild?.nativeElement?A.D.getLastFocusableElement(this.overlayViewChild?.overlayViewChild?.nativeElement,':not([data-p-hidden-focusable="true"])'):this.focusInputViewChild?.nativeElement;A.D.focus(o)}onOptionMouseEnter(t,o){this.focusOnHover&&this.changeFocusedOptionIndex(t,o)}onHeaderCheckboxKeyDown(t){if(this.disabled)t.preventDefault();else switch(t.code){case"Space":case"Enter":this.onToggleAll(t)}}onremoveTokenIconKeyDown(t,o){if(this.disabled)t.preventDefault();else{switch(t.code){case"Space":case"Enter":case"NumpadEnter":this.removeOption(o,t)}t.preventDefault(),t.stopPropagation()}}onFilterBlur(t){this.focusedOptionIndex.set(-1)}onHeaderCheckboxFocus(){this.headerCheckboxFocus=!0}onHeaderCheckboxBlur(){this.headerCheckboxFocus=!1}onToggleAll(t){if(!this.disabled&&!this.readonly){if(null!=this.selectAll)this.onSelectAllChange.emit({originalEvent:t,checked:!this.allSelected()});else{const u=[...this.getAllVisibleAndNonVisibleOptions().filter(k=>this.isSelected(k)&&(this.optionDisabled?D.BF.resolveFieldData(k,this.optionDisabled):!(!k||void 0===k.disabled)&&k.disabled)),...this.allSelected()?this.visibleOptions().filter(k=>!this.isValidOption(k)&&this.isSelected(k)):this.visibleOptions().filter(k=>this.isSelected(k)||this.isValidOption(k))].map(k=>this.getOptionValue(k)),d=[...new Set(u)];this.updateModel(d,t),(!d.length||d.length===this.getAllVisibleAndNonVisibleOptions().length)&&this.onSelectAllChange.emit({originalEvent:t,checked:!!d.length})}this.partialSelected()&&(this.selectedOptions=null,this.cd.markForCheck()),this.onChange.emit({originalEvent:t,value:this.value}),A.D.focus(this.headerCheckboxViewChild?.nativeElement),this.headerCheckboxFocus=!0,t.preventDefault(),t.stopPropagation()}}changeFocusedOptionIndex(t,o){this.focusedOptionIndex()!==o&&(this.focusedOptionIndex.set(o),this.scrollInView())}get virtualScrollerDisabled(){return!this.virtualScroll}scrollInView(t=-1){if(this.itemsViewChild&&this.itemsViewChild.nativeElement){const i=A.D.findSingle(this.itemsViewChild.nativeElement,`li[id="${-1!==t?`${this.id}_${t}`:this.focusedOptionId}"]`);i?i.scrollIntoView&&i.scrollIntoView({block:"nearest",inline:"nearest"}):this.virtualScrollerDisabled||setTimeout(()=>{this.virtualScroll&&this.scroller?.scrollToIndex(-1!==t?t:this.focusedOptionIndex())},0)}}get focusedOptionId(){return-1!==this.focusedOptionIndex()?`${this.id}_${this.focusedOptionIndex()}`:null}writeValue(t){this.value=t,!D.BF.isEmpty(this.selectionLimit)&&D.BF.isEmpty(this.value)?this.modelValue.set([]):this.modelValue.set(this.value),this.cd.markForCheck()}registerOnChange(t){this.onModelChange=t}registerOnTouched(t){this.onModelTouched=t}setDisabledState(t){this.disabled=t,this.cd.markForCheck()}allSelected(){return null!==this.selectAll?this.selectAll:D.BF.isNotEmpty(this.visibleOptions())&&this.visibleOptions().every(t=>this.isOptionGroup(t)||this.isOptionDisabled(t)||this.isSelected(t))}partialSelected(){return this.selectedOptions&&this.selectedOptions.length>0&&this.selectedOptions.length<this.options.length}show(t){this.overlayVisible=!0;const o=-1!==this.focusedOptionIndex()?this.focusedOptionIndex():this.autoOptionFocus?this.findFirstFocusedOptionIndex():-1;this.focusedOptionIndex.set(o),t&&A.D.focus(this.focusInputViewChild?.nativeElement),this.cd.markForCheck()}hide(t){this.overlayVisible=!1,this.focusedOptionIndex.set(-1),this.filter&&this.resetFilterOnHide&&this.resetFilter(),"modal"===this.overlayOptions?.mode&&A.D.unblockBodyScroll(),t&&A.D.focus(this.focusInputViewChild?.nativeElement),this.onPanelHide.emit(),this.cd.markForCheck()}onOverlayAnimationStart(t){switch(t.toState){case"visible":if(this.itemsWrapper=A.D.findSingle(this.overlayViewChild?.overlayViewChild?.nativeElement,this.virtualScroll?".p-scroller":".p-multiselect-items-wrapper"),this.virtualScroll&&this.scroller?.setContentEl(this.itemsViewChild?.nativeElement),this._options()&&this._options().length)if(this.virtualScroll){const o=D.BF.isNotEmpty(this.modelValue())?this.focusedOptionIndex():-1;-1!==o&&this.scroller?.scrollToIndex(o)}else{let o=A.D.findSingle(this.itemsWrapper,'[data-p-highlight="true"]');o&&o.scrollIntoView({block:"nearest",inline:"nearest"})}this.filterInputChild&&this.filterInputChild.nativeElement&&(this.preventModelTouched=!0,this.autofocusFilter&&this.filterInputChild.nativeElement.focus()),this.onPanelShow.emit();break;case"void":this.itemsWrapper=null,this.onModelTouched()}}resetFilter(){this.filterInputChild&&this.filterInputChild.nativeElement&&(this.filterInputChild.nativeElement.value=""),this._filterValue.set(null),this._filteredOptions=null}close(t){this.hide(),t.preventDefault(),t.stopPropagation()}clear(t){this.value=null,this.updateModel(null,t),this.selectedOptions=null,this.onClear.emit(),this._disableTooltip=!0,t.stopPropagation()}labelContainerMouseLeave(){this._disableTooltip&&(this._disableTooltip=!1)}removeOption(t,o){let i=this.modelValue().filter(u=>!D.BF.equals(u,t,this.equalityKey()));this.updateModel(i,o),this.onChange.emit({originalEvent:o,value:i,itemValue:t}),this.onClear.emit(),o&&o.stopPropagation()}findNextItem(t){let o=t.nextElementSibling;return o?A.D.hasClass(o.children[0],"p-disabled")||A.D.isHidden(o.children[0])||A.D.hasClass(o,"p-multiselect-item-group")?this.findNextItem(o):o.children[0]:null}findPrevItem(t){let o=t.previousElementSibling;return o?A.D.hasClass(o.children[0],"p-disabled")||A.D.isHidden(o.children[0])||A.D.hasClass(o,"p-multiselect-item-group")?this.findPrevItem(o):o.children[0]:null}findNextOptionIndex(t){const o=t<this.visibleOptions().length-1?this.visibleOptions().slice(t+1).findIndex(i=>this.isValidOption(i)):-1;return o>-1?o+t+1:t}findPrevOptionIndex(t){const o=t>0?D.BF.findLastIndex(this.visibleOptions().slice(0,t),i=>this.isValidOption(i)):-1;return o>-1?o:t}findLastSelectedOptionIndex(){return this.hasSelectedOption()?D.BF.findLastIndex(this.visibleOptions(),t=>this.isValidSelectedOption(t)):-1}findLastFocusedOptionIndex(){const t=this.findLastSelectedOptionIndex();return t<0?this.findLastOptionIndex():t}findLastOptionIndex(){return D.BF.findLastIndex(this.visibleOptions(),t=>this.isValidOption(t))}searchOptions(t,o){this.searchValue=(this.searchValue||"")+o;let i=-1,u=!1;return-1!==this.focusedOptionIndex()?(i=this.visibleOptions().slice(this.focusedOptionIndex()).findIndex(d=>this.isOptionMatched(d)),i=-1===i?this.visibleOptions().slice(0,this.focusedOptionIndex()).findIndex(d=>this.isOptionMatched(d)):i+this.focusedOptionIndex()):i=this.visibleOptions().findIndex(d=>this.isOptionMatched(d)),-1!==i&&(u=!0),-1===i&&-1===this.focusedOptionIndex()&&(i=this.findFirstFocusedOptionIndex()),-1!==i&&this.changeFocusedOptionIndex(t,i),this.searchTimeout&&clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout(()=>{this.searchValue="",this.searchTimeout=null},500),u}activateFilter(){if(this.hasFilter()&&this._options)if(this.group){let t=[];for(let o of this.options){let i=this.filterService.filter(this.getOptionGroupChildren(o),this.searchFields(),this.filterValue,this.filterMatchMode,this.filterLocale);i&&i.length&&t.push({...o,[this.optionGroupChildren]:i})}this._filteredOptions=t}else this._filteredOptions=this.filterService.filter(this.options,this.searchFields(),this.filterValue,this.filterMatchMode,this.filterLocale);else this._filteredOptions=null}hasFocusableElements(){return A.D.getFocusableElements(this.overlayViewChild.overlayViewChild.nativeElement,':not([data-p-hidden-focusable="true"])').length>0}hasFilter(){return this._filterValue()&&this._filterValue().trim().length>0}static \u0275fac=function(o){return new(o||n)(e.rXU(e.aKT),e.rXU(e.sFG),e.rXU(e.gRc),e.rXU(e.SKi),e.rXU(c.E),e.rXU(c.r1),e.rXU(c.si))};static \u0275cmp=e.VBU({type:n,selectors:[["p-multiSelect"]],contentQueries:function(o,i,u){if(1&o&&(e.wni(u,c.wi,5),e.wni(u,c.Y9,5),e.wni(u,c.Ei,4)),2&o){let d;e.mGM(d=e.lsd())&&(i.footerFacet=d.first),e.mGM(d=e.lsd())&&(i.headerFacet=d.first),e.mGM(d=e.lsd())&&(i.templates=d)}},viewQuery:function(o,i){if(1&o&&(e.GBs(Ne,5),e.GBs(Xe,5),e.GBs(Ye,5),e.GBs(He,5),e.GBs(Ue,5),e.GBs(We,5),e.GBs(Je,5),e.GBs(Ke,5),e.GBs(qe,5)),2&o){let u;e.mGM(u=e.lsd())&&(i.containerViewChild=u.first),e.mGM(u=e.lsd())&&(i.overlayViewChild=u.first),e.mGM(u=e.lsd())&&(i.filterInputChild=u.first),e.mGM(u=e.lsd())&&(i.focusInputViewChild=u.first),e.mGM(u=e.lsd())&&(i.itemsViewChild=u.first),e.mGM(u=e.lsd())&&(i.scroller=u.first),e.mGM(u=e.lsd())&&(i.lastHiddenFocusableElementOnOverlay=u.first),e.mGM(u=e.lsd())&&(i.firstHiddenFocusableElementOnOverlay=u.first),e.mGM(u=e.lsd())&&(i.headerCheckboxViewChild=u.first)}},hostAttrs:[1,"p-element","p-inputwrapper"],hostVars:4,hostBindings:function(o,i){2&o&&e.AVh("p-inputwrapper-focus",i.focused||i.overlayVisible)("p-inputwrapper-filled",i.filled)},inputs:{id:"id",ariaLabel:"ariaLabel",style:"style",styleClass:"styleClass",panelStyle:"panelStyle",panelStyleClass:"panelStyleClass",inputId:"inputId",disabled:[2,"disabled","disabled",e.L39],readonly:[2,"readonly","readonly",e.L39],group:[2,"group","group",e.L39],filter:[2,"filter","filter",e.L39],filterPlaceHolder:"filterPlaceHolder",filterLocale:"filterLocale",overlayVisible:[2,"overlayVisible","overlayVisible",e.L39],tabindex:[2,"tabindex","tabindex",e.Udg],variant:"variant",appendTo:"appendTo",dataKey:"dataKey",name:"name",ariaLabelledBy:"ariaLabelledBy",displaySelectedLabel:"displaySelectedLabel",maxSelectedLabels:"maxSelectedLabels",selectionLimit:[2,"selectionLimit","selectionLimit",t=>(0,e.Udg)(t,null)],selectedItemsLabel:"selectedItemsLabel",showToggleAll:[2,"showToggleAll","showToggleAll",e.L39],emptyFilterMessage:"emptyFilterMessage",emptyMessage:"emptyMessage",resetFilterOnHide:[2,"resetFilterOnHide","resetFilterOnHide",e.L39],dropdownIcon:"dropdownIcon",optionLabel:"optionLabel",optionValue:"optionValue",optionDisabled:"optionDisabled",optionGroupLabel:"optionGroupLabel",optionGroupChildren:"optionGroupChildren",showHeader:[2,"showHeader","showHeader",e.L39],filterBy:"filterBy",scrollHeight:"scrollHeight",lazy:[2,"lazy","lazy",e.L39],virtualScroll:[2,"virtualScroll","virtualScroll",e.L39],loading:[2,"loading","loading",e.L39],virtualScrollItemSize:[2,"virtualScrollItemSize","virtualScrollItemSize",e.Udg],loadingIcon:"loadingIcon",virtualScrollOptions:"virtualScrollOptions",overlayOptions:"overlayOptions",ariaFilterLabel:"ariaFilterLabel",filterMatchMode:"filterMatchMode",tooltip:"tooltip",tooltipPosition:"tooltipPosition",tooltipPositionStyle:"tooltipPositionStyle",tooltipStyleClass:"tooltipStyleClass",autofocusFilter:[2,"autofocusFilter","autofocusFilter",e.L39],display:"display",autocomplete:"autocomplete",showClear:[2,"showClear","showClear",e.L39],autofocus:[2,"autofocus","autofocus",e.L39],autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",defaultLabel:"defaultLabel",placeholder:"placeholder",options:"options",filterValue:"filterValue",itemSize:"itemSize",selectAll:"selectAll",focusOnHover:[2,"focusOnHover","focusOnHover",e.L39],filterFields:"filterFields",selectOnFocus:[2,"selectOnFocus","selectOnFocus",e.L39],autoOptionFocus:[2,"autoOptionFocus","autoOptionFocus",e.L39]},outputs:{onChange:"onChange",onFilter:"onFilter",onFocus:"onFocus",onBlur:"onBlur",onClick:"onClick",onClear:"onClear",onPanelShow:"onPanelShow",onPanelHide:"onPanelHide",onLazyLoad:"onLazyLoad",onRemove:"onRemove",onSelectAllChange:"onSelectAllChange"},features:[e.Jv_([Rn]),e.GFd],ngContentSelectors:Ze,decls:17,vars:44,consts:[["container",""],["focusInput",""],["elseBlock",""],["overlay",""],["token",""],["firstHiddenFocusableEl",""],["buildInItems",""],["lastHiddenFocusableEl",""],["builtInFilterElement",""],["headerCheckbox",""],["filterInput",""],["scroller",""],["items",""],["emptyFilter",""],["empty",""],[3,"click","ngClass","ngStyle"],[1,"p-hidden-accessible"],["role","combobox","pAutoFocus","",3,"focus","blur","keydown","pTooltip","tooltipPosition","positionStyle","tooltipStyleClass","autofocus"],[1,"p-multiselect-label-container",3,"mouseleave","pTooltip","tooltipDisabled","tooltipPosition","positionStyle","tooltipStyleClass"],[3,"ngClass"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"p-multiselect-trigger"],[4,"ngIf","ngIfElse"],[3,"visibleChange","onAnimationStart","onHide","visible","options","target","appendTo","autoZIndex","baseZIndex","showTransitionOptions","hideTransitionOptions"],["pTemplate","content"],["class","p-multiselect-token",4,"ngFor","ngForOf"],[1,"p-multiselect-token"],[1,"p-multiselect-token-label"],[3,"ngClass","styleClass","click","keydown",4,"ngIf"],["class","p-multiselect-token-icon",3,"click","keydown",4,"ngIf"],[3,"click","keydown","ngClass","styleClass"],[1,"p-multiselect-token-icon",3,"click","keydown"],[4,"ngTemplateOutlet"],[3,"styleClass","click",4,"ngIf"],["class","p-multiselect-clear-icon",3,"click",4,"ngIf"],[3,"click","styleClass"],[1,"p-multiselect-clear-icon",3,"click"],["aria-hidden","true",3,"ngClass",4,"ngIf"],["aria-hidden","true",3,"class",4,"ngIf"],["aria-hidden","true",3,"ngClass"],["aria-hidden","true"],["class","p-multiselect-trigger-icon",4,"ngIf"],["class","p-multiselect-trigger-icon",3,"ngClass",4,"ngIf"],[3,"styleClass",4,"ngIf"],[1,"p-multiselect-trigger-icon",3,"ngClass"],[3,"styleClass"],[1,"p-multiselect-trigger-icon"],[3,"ngClass","ngStyle"],["role","presentation",1,"p-hidden-accessible","p-hidden-focusable",3,"focus"],["class","p-multiselect-header",4,"ngIf"],[1,"p-multiselect-items-wrapper",3,"ngStyle"],[3,"items","style","itemSize","autoSize","tabindex","lazy","options","onLazyLoad",4,"ngIf"],["class","p-multiselect-footer",4,"ngIf"],[1,"p-multiselect-header"],["class","p-checkbox p-component",3,"ngClass","click","keydown",4,"ngIf"],["class","p-multiselect-filter-container",4,"ngIf"],["type","button","pRipple","",1,"p-multiselect-close","p-link","p-button-icon-only",3,"click"],["class","p-multiselect-close-icon",4,"ngIf"],[1,"p-checkbox","p-component",3,"click","keydown","ngClass"],["type","checkbox",3,"focus","blur","readonly","disabled"],["role","checkbox",1,"p-checkbox-box",3,"ngClass"],["class","p-checkbox-icon",4,"ngIf"],[1,"p-checkbox-icon"],[1,"p-multiselect-filter-container"],["type","text","role","searchbox","role","searchbox",1,"p-multiselect-filter","p-inputtext","p-component",3,"input","keydown","click","blur","value","disabled"],["class","p-multiselect-filter-icon",4,"ngIf"],[1,"p-multiselect-filter-icon"],[1,"p-multiselect-close-icon"],[3,"onLazyLoad","items","itemSize","autoSize","tabindex","lazy","options"],["pTemplate","loader"],["role","listbox","aria-multiselectable","true",1,"p-multiselect-items","p-component",3,"ngClass","ngStyle"],["ngFor","",3,"ngForOf"],["class","p-multiselect-empty-message","role","option",3,"ngStyle",4,"ngIf"],["role","option",1,"p-multiselect-item-group",3,"ngStyle"],[3,"onClick","onMouseEnter","id","option","selected","label","disabled","template","checkIconTemplate","itemCheckboxIconTemplate","itemSize","focused","ariaPosInset","ariaSetSize"],["role","option",1,"p-multiselect-empty-message",3,"ngStyle"],[1,"p-multiselect-footer"]],template:function(o,i){if(1&o){const u=e.RV6();e.NAR(Qe),e.j41(0,"div",15,0),e.bIt("click",function(k){return e.eBV(u),e.Njj(i.onContainerClick(k))}),e.j41(2,"div",16)(3,"input",17,1),e.bIt("focus",function(k){return e.eBV(u),e.Njj(i.onInputFocus(k))})("blur",function(k){return e.eBV(u),e.Njj(i.onInputBlur(k))})("keydown",function(k){return e.eBV(u),e.Njj(i.onKeyDown(k))}),e.k0s()(),e.j41(5,"div",18),e.bIt("mouseleave",function(){return e.eBV(u),e.Njj(i.labelContainerMouseLeave())}),e.j41(6,"div",19),e.DNE(7,mt,3,2,"ng-container",20)(8,ht,1,0,"ng-container",21),e.k0s(),e.DNE(9,Ot,3,2,"ng-container",20),e.k0s(),e.j41(10,"div",22),e.DNE(11,Ft,3,2,"ng-container",23)(12,Mt,2,2,"ng-template",null,2,e.C5r),e.k0s(),e.j41(14,"p-overlay",24,3),e.mxI("visibleChange",function(k){return e.eBV(u),e.DH7(i.overlayVisible,k)||(i.overlayVisible=k),e.Njj(k)}),e.bIt("onAnimationStart",function(k){return e.eBV(u),e.Njj(i.onOverlayAnimationStart(k))})("onHide",function(){return e.eBV(u),e.Njj(i.hide())}),e.DNE(16,Tn,12,18,"ng-template",25),e.k0s()()}if(2&o){let u;const d=e.sdS(13);e.HbH(i.styleClass),e.Y8G("ngClass",i.containerClass)("ngStyle",i.style),e.BMQ("id",i.id),e.R7$(2),e.BMQ("data-p-hidden-accessible",!0),e.R7$(),e.Y8G("pTooltip",i.tooltip)("tooltipPosition",i.tooltipPosition)("positionStyle",i.tooltipPositionStyle)("tooltipStyleClass",i.tooltipStyleClass)("autofocus",i.autofocus),e.BMQ("aria-disabled",i.disabled)("id",i.inputId)("aria-label",i.ariaLabel)("aria-labelledby",i.ariaLabelledBy)("aria-haspopup","listbox")("aria-expanded",null!==(u=i.overlayVisible)&&void 0!==u&&u)("aria-controls",i.overlayVisible?i.id+"_list":null)("tabindex",i.disabled?-1:i.tabindex)("aria-activedescendant",i.focused?i.focusedOptionId:void 0)("value",i.label()||"empty"),e.R7$(2),e.Y8G("pTooltip",i.tooltip)("tooltipDisabled",i._disableTooltip)("tooltipPosition",i.tooltipPosition)("positionStyle",i.tooltipPositionStyle)("tooltipStyleClass",i.tooltipStyleClass),e.R7$(),e.Y8G("ngClass",i.labelClass),e.R7$(),e.Y8G("ngIf",!i.selectedItemsTemplate),e.R7$(),e.Y8G("ngTemplateOutlet",i.selectedItemsTemplate)("ngTemplateOutletContext",e.l_i(41,et,i.selectedOptions,i.removeOption.bind(i))),e.R7$(),e.Y8G("ngIf",i.isVisibleClearIcon),e.R7$(2),e.Y8G("ngIf",i.loading)("ngIfElse",d),e.R7$(3),e.R50("visible",i.overlayVisible),e.Y8G("options",i.overlayOptions)("target","@parent")("appendTo",i.appendTo)("autoZIndex",i.autoZIndex)("baseZIndex",i.baseZIndex)("showTransitionOptions",i.showTransitionOptions)("hideTransitionOptions",i.hideTransitionOptions)}},dependencies:()=>[g.YU,g.Sq,g.bT,g.T3,g.B3,Z.hJ,c.Ei,B.m,ie.n,ne.H,oe.q,X.S,N.W,V.I,J.A,se.D,wn],styles:["@layer primeng{.p-multiselect{display:inline-flex;cursor:pointer;position:relative;-webkit-user-select:none;user-select:none}.p-multiselect-trigger{display:flex;align-items:center;justify-content:center;flex-shrink:0}.p-multiselect-label-container{overflow:hidden;flex:1 1 auto;cursor:pointer;display:flex}.p-multiselect-label{display:block;white-space:nowrap;cursor:pointer;overflow:hidden;text-overflow:ellipsis}.p-multiselect-label-empty{overflow:hidden;visibility:hidden}.p-multiselect-token{cursor:default;display:inline-flex;align-items:center;flex:0 0 auto}.p-multiselect-token-icon{cursor:pointer}.p-multiselect-token-label{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:100px}.p-multiselect-items-wrapper{overflow:auto}.p-multiselect-items{margin:0;padding:0;list-style-type:none}.p-multiselect-item{cursor:pointer;display:flex;align-items:center;font-weight:400;white-space:nowrap;position:relative;overflow:hidden}.p-multiselect-header{display:flex;align-items:center;justify-content:space-between}.p-multiselect-filter-container{position:relative;flex:1 1 auto}.p-multiselect-filter-icon{position:absolute;top:50%;margin-top:-.5rem}.p-multiselect-filter-container .p-inputtext{width:100%}.p-multiselect-close{display:flex;align-items:center;justify-content:center;flex-shrink:0;overflow:hidden;position:relative}.p-fluid .p-multiselect{display:flex}.p-multiselect-clear-icon{position:absolute;top:50%;margin-top:-.5rem;cursor:pointer}.p-multiselect-clearable{position:relative}}\n"],encapsulation:2,changeDetection:0})}return n})(),Dn=(()=>{class n{static \u0275fac=function(o){return new(o||n)};static \u0275mod=e.$C({type:n});static \u0275inj=e.G2t({imports:[g.MD,Z.z_,c.Gg,B.S,ie.Z,ne.h,oe.u,X.S,N.W,V.I,J.A,se.D,X.S,Re.Q,Z.z_,c.Gg,ne.h]})}return n})();var ye=m(3227),Oe=m(5901),M=m(544),me=m(935),Q=m(9998),pe=m(5716),Se=m(672);const xn=()=>[30,50,100],jn=()=>({}),he=()=>({"min-width":"50rem"});function Mn(n,s){if(1&n){const t=e.RV6();e.j41(0,"div",6)(1,"p-calendar",7),e.mxI("ngModelChange",function(i){e.eBV(t);const u=e.XpG();return e.DH7(u.filterModel.dateRange,i)||(u.filterModel.dateRange=i),e.Njj(i)}),e.k0s(),e.j41(2,"p-button",8),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.findOrders())}),e.k0s()()}if(2&n){const t=e.XpG();e.R7$(),e.R50("ngModel",t.filterModel.dateRange),e.Y8G("readonlyInput",!0)("selectOtherMonths",!0)("showClear",!0)}}function Pn(n,s){if(1&n){const t=e.RV6();e.j41(0,"p-button",9),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.importOrders())}),e.k0s()}if(2&n){const t=e.XpG();e.Y8G("icon",t.isLoading?"pi pi-download":"")}}function Gn(n,s){if(1&n&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"number"),e.k0s()),2&n){const t=e.XpG(2);e.R7$(),e.SpI("~",e.i5U(2,1,t.summary.expectedPayout,"1.2-2"),"\u20bd")}}function Bn(n,s){1&n&&(e.j41(0,"span"),e.EFF(1,"-"),e.k0s())}function zn(n,s){1&n&&(e.j41(0,"div",34)(1,"span",35),e.EFF(2,"\u0410\u0440\u0442\u0438\u043a\u0443\u043b"),e.k0s()())}function Ln(n,s){if(1&n&&(e.j41(0,"div",39),e.nrm(1,"img",40),e.j41(2,"div"),e.EFF(3),e.k0s()()),2&n){const t=s.$implicit;e.R7$(),e.FS9("src",t.image,e.B4B),e.R7$(2),e.JRh(t.id)}}function An(n,s){1&n&&(e.qex(0),e.EFF(1,"\u041b\u044e\u0431\u043e\u0439"),e.bVm())}function $n(n,s){if(1&n&&(e.qex(0),e.EFF(1),e.bVm()),2&n){const t=s.$implicit;e.R7$(),e.SpI(" ",t,", ")}}function Vn(n,s){if(1&n&&e.DNE(0,An,2,0,"ng-container",17)(1,$n,2,1,"ng-container",41),2&n){const t=s.$implicit;e.Y8G("ngIf",!(null!=t&&t.length)),e.R7$(),e.Y8G("ngForOf",t)}}function Nn(n,s){if(1&n){const t=e.RV6();e.j41(0,"p-multiSelect",36),e.bIt("onChange",function(i){const u=e.eBV(t).filterCallback;return e.Njj(u(i.value))}),e.DNE(1,Ln,4,2,"ng-template",37)(2,Vn,2,2,"ng-template",38),e.k0s()}if(2&n){const t=s.$implicit,o=e.XpG(4);e.Y8G("filter",!1)("ngModel",t)("filter",!0)("options",o.productPackageIDs)}}function Xn(n,s){1&n&&(e.j41(0,"div",34)(1,"span",35),e.EFF(2,"\u0421\u0442\u0430\u0442\u0443\u0441\u044b"),e.k0s()())}function Yn(n,s){if(1&n){const t=e.RV6();e.j41(0,"p-multiSelect",42),e.nI1(1,"keyvalue"),e.bIt("onChange",function(i){const u=e.eBV(t).filterCallback;return e.Njj(u(i.value))}),e.k0s()}if(2&n){const t=s.$implicit,o=e.XpG(4);e.Y8G("filter",!1)("ngModel",t)("options",e.bMT(1,3,o.orderStatuses))}}function Hn(n,s){1&n&&(e.j41(0,"div",34)(1,"span",35),e.EFF(2,"\u0421\u043a\u043b\u0430\u0434\u044b"),e.k0s()())}function Un(n,s){if(1&n){const t=e.RV6();e.j41(0,"p-multiSelect",43),e.bIt("onChange",function(i){const u=e.eBV(t).filterCallback;return e.Njj(u(i.value))}),e.k0s()}if(2&n){const t=s.$implicit,o=e.XpG(4);e.Y8G("filter",!1)("ngModel",t)("options",o.warehouses)}}function Wn(n,s){if(1&n){const t=e.RV6();e.j41(0,"p-triStateCheckbox",44),e.mxI("ngModelChange",function(i){e.eBV(t);const u=e.XpG(4);return e.DH7(u.localizationFilter,i)||(u.localizationFilter=i),e.Njj(i)}),e.bIt("onChange",function(i){const u=e.eBV(t).filterCallback;return e.Njj(u(i.value))}),e.k0s(),e.j41(1,"label",45),e.EFF(2),e.k0s()}if(2&n){const t=e.XpG(4);e.R50("ngModel",t.localizationFilter),e.R7$(2),e.SpI(" ",null==t.localizationFilter?"\u041b\u044e\u0431\u044b\u0435":t.localizationFilter?"\u0422\u043e\u043b\u044c\u043a\u043e \u043b\u043e\u043a\u0430\u043b\u044c\u043d\u044b\u0435":"\u0422\u043e\u043b\u044c\u043a\u043e \u043d\u0435\u043b\u043e\u043a\u0430\u043b\u044c\u043d\u044b\u0435"," ")}}function Jn(n,s){}function Kn(n,s){}function qn(n,s){1&n&&(e.j41(0,"tr"),e.nrm(1,"th",24),e.j41(2,"th",25),e.EFF(3," \u0417\u0430\u043a\u0430\u0437 "),e.nrm(4,"p-sortIcon",26),e.j41(5,"p-columnFilter",27),e.DNE(6,zn,3,0,"ng-template",20)(7,Nn,3,4,"ng-template",28),e.k0s()(),e.j41(8,"th",29),e.EFF(9,"\u0421\u0443\u043c\u043c\u0430 "),e.nrm(10,"p-sortIcon",30),e.k0s(),e.j41(11,"th"),e.EFF(12," \u0421\u0442\u0430\u0442\u0443\u0441 "),e.j41(13,"p-columnFilter",31),e.DNE(14,Xn,3,0,"ng-template",20)(15,Yn,2,5,"ng-template",28),e.k0s(),e.EFF(16," / \u0421\u043a\u043b\u0430\u0434 "),e.j41(17,"p-columnFilter",32),e.DNE(18,Hn,3,0,"ng-template",20)(19,Un,1,3,"ng-template",28),e.k0s(),e.EFF(20," / \u041b\u043e\u043a\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f "),e.j41(21,"p-columnFilter",33),e.DNE(22,Wn,3,2,"ng-template",28)(23,Jn,0,0,"ng-template",20)(24,Kn,0,0,"ng-template",23),e.k0s()()()),2&n&&(e.R7$(5),e.Y8G("showAddButton",!1)("showMatchModes",!1)("showOperator",!1),e.R7$(8),e.Y8G("showAddButton",!1)("showMatchModes",!1)("showOperator",!1),e.R7$(4),e.Y8G("showAddButton",!1)("showMatchModes",!1)("showOperator",!1),e.R7$(4),e.Y8G("showAddButton",!1)("showMatchModes",!1)("showOperator",!1)("showClearButton",!1))}function Qn(n,s){if(1&n&&(e.j41(0,"div"),e.nrm(1,"img",53),e.k0s()),2&n){const t=e.XpG().$implicit;e.R7$(),e.Y8G("src",t.primaryImage,e.B4B)}}function Zn(n,s){if(1&n&&(e.qex(0),e.EFF(1),e.bVm()),2&n){const t=e.XpG().$implicit;e.R7$(),e.SpI(" - ",t.price*t.quantity,"\u20bd")}}function ei(n,s){if(1&n&&(e.qex(0),e.nrm(1,"div",50),e.DNE(2,Qn,2,1,"div",17),e.j41(3,"span",51)(4,"a",52),e.EFF(5),e.k0s(),e.EFF(6),e.j41(7,"b"),e.EFF(8),e.DNE(9,Zn,2,1,"ng-container",17),e.k0s()(),e.bVm()),2&n){const t=s.$implicit;e.R7$(2),e.Y8G("ngIf",t.primaryImage),e.R7$(),e.Y8G("title",t.name),e.R7$(),e.FS9("href",t.link,e.B4B),e.R7$(),e.JRh(t.productPackageID),e.R7$(),e.SpI(" x ",t.price,"\u20bd x "),e.R7$(2),e.SpI("",t.quantity,"\u0448\u0442"),e.R7$(),e.Y8G("ngIf",1!=t.quantity)}}function ti(n,s){if(1&n&&(e.qex(0),e.j41(1,"p-tag",56),e.EFF(2),e.k0s(),e.EFF(3," - "),e.j41(4,"p-tag",57),e.EFF(5),e.k0s(),e.bVm()),2&n){const t=e.XpG().$implicit;e.R7$(),e.Y8G("icon",t.clusterFrom?"":"pi pi-question-circle"),e.R7$(),e.SpI("",t.clusterFrom," "),e.R7$(2),e.Y8G("icon",t.clusterTo?"":"pi pi-question-circle"),e.R7$(),e.SpI("",t.clusterTo," ")}}function ni(n,s){if(1&n&&(e.j41(0,"p-tag",58),e.EFF(1),e.k0s()),2&n){const t=e.XpG().$implicit;e.R7$(),e.SpI(" ",t.clusterFrom," ")}}function ii(n,s){if(1&n&&(e.j41(0,"div"),e.nrm(1,"p-tag",54),e.EFF(2," x"),e.j41(3,"b"),e.EFF(4),e.k0s(),e.EFF(5),e.DNE(6,ti,6,4,"ng-container",17)(7,ni,2,1,"p-tag",55),e.k0s()),2&n){const t=s.$implicit,o=e.XpG(4);e.R7$(),e.Y8G("icon","pi "+o.orderStatusIcons.get(t.status))("pTooltip",o.orderStatuses.get(t.status))("severity",o.orderStatusSeverities.get(t.status)),e.R7$(3),e.JRh(t.count),e.R7$(),e.SpI(" ",t.warehouseName," "),e.R7$(),e.Y8G("ngIf",t.clusterFrom!=t.clusterTo),e.R7$(),e.Y8G("ngIf",t.clusterFrom==t.clusterTo)}}function oi(n,s){if(1&n&&(e.j41(0,"tr")(1,"td"),e.nrm(2,"i",46),e.k0s(),e.j41(3,"td")(4,"div")(5,"span",47),e.EFF(6,"\u0422\u043e\u0432\u0430\u0440"),e.k0s(),e.j41(7,"div",48),e.EFF(8),e.nI1(9,"date"),e.k0s(),e.j41(10,"div"),e.DNE(11,ei,10,7,"ng-container",41),e.k0s()()(),e.j41(12,"td")(13,"div")(14,"span",49),e.EFF(15,"\u0421\u0443\u043c\u043c\u0430"),e.k0s(),e.j41(16,"div"),e.EFF(17),e.nI1(18,"number"),e.k0s()()(),e.j41(19,"td")(20,"div")(21,"span",49),e.EFF(22,"\u041d\u0430\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435"),e.k0s(),e.DNE(23,ii,8,7,"div",41),e.k0s()()()),2&n){const t=s.$implicit,o=e.XpG(3);e.R7$(2),e.ZvI("pi ",o.getOrderTypeIcon(t.type),""),e.Y8G("pRowToggler",t),e.R7$(6),e.JRh(e.i5U(9,8,t.date,"y-MM-dd HH:mm")),e.R7$(3),e.Y8G("ngForOf",t.products),e.R7$(6),e.SpI(" ",e.i5U(18,11,t.sum,"1.2-2"),"\u20bd "),e.R7$(6),e.Y8G("ngForOf",t.directions)}}function ai(n,s){1&n&&(e.j41(0,"tr")(1,"th"),e.EFF(2,"\u0410\u0440\u0442\u0438\u043a\u0443\u043b"),e.k0s(),e.j41(3,"th"),e.EFF(4,"\u0421\u0442\u0430\u0442\u0443\u0441"),e.k0s(),e.j41(5,"th"),e.EFF(6,"\u0426\u0435\u043d\u0430"),e.k0s(),e.j41(7,"th"),e.EFF(8,"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e"),e.k0s(),e.j41(9,"th"),e.EFF(10,"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435"),e.k0s()())}function ri(n,s){if(1&n&&(e.j41(0,"tr")(1,"td")(2,"div")(3,"span",47),e.EFF(4,"\u0410\u0440\u0442\u0438\u043a\u0443\u043b"),e.k0s(),e.j41(5,"div"),e.EFF(6),e.k0s()()(),e.j41(7,"td")(8,"div")(9,"span",47),e.EFF(10,"\u0426\u0435\u043d\u0430"),e.k0s(),e.j41(11,"div"),e.nrm(12,"p-tag",63),e.k0s()()(),e.j41(13,"td")(14,"div")(15,"span",47),e.EFF(16,"\u0426\u0435\u043d\u0430"),e.k0s(),e.j41(17,"div"),e.EFF(18),e.nI1(19,"number"),e.k0s()()(),e.j41(20,"td")(21,"div")(22,"span",47),e.EFF(23,"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e"),e.k0s(),e.j41(24,"div"),e.EFF(25),e.k0s()()(),e.j41(26,"td")(27,"div")(28,"span",47),e.EFF(29,"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435"),e.k0s(),e.j41(30,"div"),e.EFF(31),e.k0s()()()()),2&n){let t,o;const i=s.$implicit,u=e.XpG(6);e.R7$(6),e.SpI(" ",i.product.productPackageID," "),e.R7$(6),e.Y8G("severity",null!==(t=u.orderStatusSeverities.get(i.extendedStatus))&&void 0!==t?t:"danger")("value",null!==(o=u.orderStatuses.get(i.extendedStatus))&&void 0!==o?o:"?"),e.R7$(6),e.SpI(" ",e.i5U(19,6,i.price,"1.2-2"),"\u20bd "),e.R7$(7),e.SpI(" ",i.quantity," "),e.R7$(6),e.SpI(" ",i.product.name," ")}}function li(n,s){1&n&&(e.j41(0,"tr")(1,"th"),e.EFF(2,"ID"),e.k0s(),e.j41(3,"th"),e.EFF(4,"\u0414\u0430\u0442\u0430"),e.k0s(),e.j41(5,"th"),e.EFF(6,"\u0421\u0443\u043c\u043c\u0430"),e.k0s(),e.j41(7,"th"),e.EFF(8,"\u041a\u043e\u043c\u0438\u0441\u0441\u0438\u044f"),e.k0s(),e.j41(9,"th"),e.EFF(10,"\u0422\u0438\u043f \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438"),e.k0s(),e.j41(11,"th"),e.EFF(12,"\u0422\u0438\u043f \u043d\u0430\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u044f"),e.k0s()())}function ui(n,s){if(1&n&&(e.j41(0,"tr")(1,"td")(2,"div")(3,"span",47),e.EFF(4,"ID"),e.k0s(),e.j41(5,"div")(6,"a",61),e.nI1(7,"date"),e.EFF(8),e.k0s()()()(),e.j41(9,"td")(10,"div")(11,"span",47),e.EFF(12,"\u0414\u0430\u0442\u0430"),e.k0s(),e.j41(13,"div"),e.EFF(14),e.nI1(15,"date"),e.k0s()()(),e.j41(16,"td")(17,"div")(18,"span",47),e.EFF(19,"\u0421\u0443\u043c\u043c\u0430"),e.k0s(),e.j41(20,"div"),e.EFF(21),e.nI1(22,"number"),e.k0s()()(),e.j41(23,"td")(24,"div")(25,"span",47),e.EFF(26,"\u041a\u043e\u043c\u0438\u0441\u0441\u0438\u044f"),e.k0s(),e.j41(27,"div"),e.EFF(28),e.nI1(29,"number"),e.k0s()()(),e.j41(30,"td")(31,"div")(32,"span",47),e.EFF(33,"\u0422\u0438\u043f \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438"),e.k0s(),e.j41(34,"div"),e.EFF(35),e.k0s()()(),e.j41(36,"td")(37,"div")(38,"span",47),e.EFF(39,"\u0422\u0438\u043f \u043d\u0430\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u044f"),e.k0s(),e.j41(40,"div"),e.EFF(41),e.k0s()()()()),2&n){const t=s.$implicit,o=e.XpG(7);e.R7$(6),e.FCK("href","https://seller.ozon.ru/app/finances/financial-statement/",t.iD,"?date=",e.i5U(7,9,t.date,"y-MM-dd HH:mm"),"",e.B4B),e.R7$(2),e.JRh(t.iD),e.R7$(6),e.SpI(" ",e.i5U(15,12,t.date,"y-MM-dd HH:mm")," "),e.R7$(7),e.SpI(" ",e.i5U(22,15,t.amount,"1.2-2"),"\u20bd "),e.R7$(7),e.SpI(" ",e.i5U(29,18,t.saleCommission,"1.2-2"),"\u20bd "),e.R7$(7),e.SpI(" ",o.getOperationTypeText(t.operationType)," "),e.R7$(6),e.SpI(" ",o.getTransactionTypeText(t.accrualType)," ")}}function si(n,s){if(1&n&&(e.qex(0),e.j41(1,"tr")(2,"td",59)(3,"h5")(4,"a",61),e.EFF(5),e.k0s()()()(),e.j41(6,"tr")(7,"td",59)(8,"p-table",62),e.DNE(9,li,13,0,"ng-template",20)(10,ui,42,21,"ng-template",21),e.k0s()()(),e.bVm()),2&n){const t=e.XpG().$implicit;e.R7$(4),e.Mz_("href","https://seller.ozon.ru/app/finances/transactions-order?page=1&pageSize=50&search=",t.postingNumber,"",e.B4B),e.R7$(),e.SpI("\u041e\u043f\u0435\u0440\u0430\u0446\u0438\u0438 \u043f\u043e \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044e \u2116",t.postingNumber,""),e.R7$(3),e.Y8G("breakpoint","960px")("tableStyle",e.lJ4(6,he))("value",t.operations)}}function ci(n,s){if(1&n&&(e.qex(0),e.j41(1,"tr")(2,"td",60)(3,"a",61),e.EFF(4),e.k0s()()(),e.j41(5,"tr")(6,"td",59)(7,"p-table",62),e.DNE(8,ai,11,0,"ng-template",20)(9,ri,32,9,"ng-template",21),e.k0s()()(),e.DNE(10,si,11,7,"ng-container",17),e.bVm()),2&n){const t=s.$implicit;e.R7$(3),e.Mz_("href","https://seller.ozon.ru/app/postings/fbo/",t.postingNumber,"",e.B4B),e.R7$(),e.SpI("\u041e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u2116",t.postingNumber,""),e.R7$(3),e.Y8G("breakpoint","960px")("tableStyle",e.lJ4(7,he))("value",t.orderItems),e.R7$(3),e.Y8G("ngIf",null==t.operations?null:t.operations.length)}}function pi(n,s){if(1&n&&(e.qex(0),e.j41(1,"tr")(2,"td",59)(3,"h5"),e.EFF(4,"\u0421\u043e\u0441\u0442\u0430\u0432 \u0437\u0430\u043a\u0430\u0437\u0430"),e.k0s()()(),e.DNE(5,ci,11,8,"ng-container",41),e.bVm()),2&n){const t=e.XpG().$implicit;e.R7$(5),e.Y8G("ngForOf",t.postings)}}function di(n,s){1&n&&(e.j41(0,"tr")(1,"th"),e.EFF(2,"ID"),e.k0s(),e.j41(3,"th"),e.EFF(4,"\u0414\u0430\u0442\u0430"),e.k0s(),e.j41(5,"th"),e.EFF(6,"\u0421\u0443\u043c\u043c\u0430"),e.k0s(),e.j41(7,"th"),e.EFF(8,"\u041a\u043e\u043c\u0438\u0441\u0441\u0438\u044f"),e.k0s(),e.j41(9,"th"),e.EFF(10,"\u0422\u0438\u043f \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438"),e.k0s(),e.j41(11,"th"),e.EFF(12,"\u0422\u0438\u043f \u043d\u0430\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u044f"),e.k0s()())}function _i(n,s){if(1&n&&(e.j41(0,"tr")(1,"td")(2,"div")(3,"span",47),e.EFF(4,"ID"),e.k0s(),e.j41(5,"div")(6,"a",61),e.nI1(7,"date"),e.EFF(8),e.k0s()()()(),e.j41(9,"td")(10,"div")(11,"span",47),e.EFF(12,"\u0414\u0430\u0442\u0430"),e.k0s(),e.j41(13,"div"),e.EFF(14),e.nI1(15,"date"),e.k0s()()(),e.j41(16,"td")(17,"div")(18,"span",47),e.EFF(19,"\u0421\u0443\u043c\u043c\u0430"),e.k0s(),e.j41(20,"div"),e.EFF(21),e.nI1(22,"number"),e.k0s()()(),e.j41(23,"td")(24,"div")(25,"span",47),e.EFF(26,"\u041a\u043e\u043c\u0438\u0441\u0441\u0438\u044f"),e.k0s(),e.j41(27,"div"),e.EFF(28),e.nI1(29,"number"),e.k0s()()(),e.j41(30,"td")(31,"div")(32,"span",47),e.EFF(33,"\u0422\u0438\u043f \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438"),e.k0s(),e.j41(34,"div"),e.EFF(35),e.k0s()()(),e.j41(36,"td")(37,"div")(38,"span",47),e.EFF(39,"\u0422\u0438\u043f \u043d\u0430\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u044f"),e.k0s(),e.j41(40,"div"),e.EFF(41),e.k0s()()()()),2&n){const t=s.$implicit,o=e.XpG(5);e.R7$(6),e.FCK("href","https://seller.ozon.ru/app/finances/financial-statement/",t.iD,"?date=",e.i5U(7,9,t.date,"y-MM-dd HH:mm"),"",e.B4B),e.R7$(2),e.JRh(t.iD),e.R7$(6),e.SpI(" ",e.i5U(15,12,t.date,"y-MM-dd HH:mm")," "),e.R7$(7),e.SpI(" ",e.i5U(22,15,t.amount,"1.2-2"),"\u20bd "),e.R7$(7),e.SpI(" ",e.i5U(29,18,t.saleCommission,"1.2-2"),"\u20bd "),e.R7$(7),e.SpI(" ",o.getOperationTypeText(t.operationType)," "),e.R7$(6),e.SpI(" ",o.getTransactionTypeText(t.accrualType)," ")}}function fi(n,s){if(1&n&&(e.qex(0),e.j41(1,"tr")(2,"td",59)(3,"h5")(4,"a",61),e.EFF(5),e.k0s()()()(),e.j41(6,"tr")(7,"td",59)(8,"p-table",64),e.DNE(9,di,13,0,"ng-template",20)(10,_i,42,21,"ng-template",21),e.k0s()()(),e.bVm()),2&n){const t=e.XpG().$implicit;e.R7$(4),e.Mz_("href","https://seller.ozon.ru/app/finances/transactions-order?page=1&pageSize=50&search=",t.ozonOrderNumber,"",e.B4B),e.R7$(),e.SpI("\u041e\u043f\u0435\u0440\u0430\u0446\u0438\u0438 \u043f\u043e \u0437\u0430\u043a\u0430\u0437\u0443 \u2116",t.ozonOrderNumber,""),e.R7$(3),e.Y8G("breakpoint","960px")("tableStyle",e.lJ4(6,he))("value",t.orderOperations)}}function mi(n,s){if(1&n&&e.DNE(0,pi,6,1,"ng-container",17)(1,fi,11,7,"ng-container",17),2&n){const t=s.$implicit;e.Y8G("ngIf",null==t.postings?null:t.postings.length),e.R7$(),e.Y8G("ngIf",null==t.orderOperations?null:t.orderOperations.length)}}function hi(n,s){if(1&n&&(e.qex(0),e.j41(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td"),e.EFF(8),e.k0s(),e.j41(9,"td"),e.EFF(10),e.k0s(),e.j41(11,"td"),e.EFF(12),e.nI1(13,"number"),e.k0s(),e.bVm()),2&n){const t=e.XpG(5);e.R7$(2),e.JRh(t.summary.totalOrderCount),e.R7$(2),e.JRh(t.summary.totalProductCount),e.R7$(2),e.JRh(t.summary.cancelledProductCount),e.R7$(2),e.JRh(t.summary.returnedProductCount),e.R7$(2),e.JRh(t.summary.nonLocalProductCount),e.R7$(2),e.SpI("",e.i5U(13,6,t.summary.totalSum,"1.2-2"),"\u20bd")}}function gi(n,s){1&n&&(e.j41(0,"td",59),e.nrm(1,"p-skeleton",67),e.k0s())}function vi(n,s){if(1&n&&(e.j41(0,"tr")(1,"th",59)(2,"table",65)(3,"tr"),e.nrm(4,"th"),e.j41(5,"th"),e.EFF(6,"\u0417\u0430\u043a\u0430\u0437\u043e\u0432"),e.k0s(),e.j41(7,"th"),e.EFF(8,"\u0422\u043e\u0432\u0430\u0440\u043e\u0432"),e.k0s(),e.j41(9,"th"),e.EFF(10,"\u041e\u0442\u043c\u0435\u043d"),e.k0s(),e.j41(11,"th"),e.EFF(12,"\u0412\u043e\u0437\u0432\u0440\u0430\u0442\u043e\u0432"),e.k0s(),e.j41(13,"th"),e.EFF(14,"\u041d\u0435\u043b\u043e\u043a\u0430\u043b\u044c\u043d\u044b\u0445"),e.k0s(),e.j41(15,"th"),e.EFF(16,"\u0421\u0443\u043c\u043c\u0430"),e.k0s()(),e.j41(17,"tr")(18,"th"),e.EFF(19,"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430"),e.k0s(),e.j41(20,"td"),e.EFF(21),e.k0s(),e.j41(22,"td"),e.EFF(23),e.k0s(),e.j41(24,"td"),e.EFF(25),e.k0s(),e.j41(26,"td"),e.EFF(27),e.k0s(),e.j41(28,"td"),e.EFF(29),e.k0s(),e.j41(30,"td"),e.EFF(31),e.nI1(32,"number"),e.k0s()(),e.j41(33,"tr")(34,"th"),e.EFF(35,"\u0412\u0441\u0435\u0433\u043e"),e.k0s(),e.DNE(36,hi,14,9,"ng-container",17)(37,gi,2,0,"td",66),e.k0s()()()()),2&n){const t=e.XpG(4);e.R7$(21),e.JRh(t.pageSummary.orderCount),e.R7$(2),e.JRh(t.pageSummary.productCount),e.R7$(2),e.JRh(t.pageSummary.canceledProductCount),e.R7$(2),e.JRh(t.pageSummary.returnedProductCount),e.R7$(2),e.JRh(t.pageSummary.nonLocalProductCount),e.R7$(2),e.SpI("",e.i5U(32,8,t.pageSummary.orderSum,"1.2-2"),"\u20bd"),e.R7$(5),e.Y8G("ngIf",t.summary),e.R7$(),e.Y8G("ngIf",t.summary)}}function bi(n,s){if(1&n&&e.DNE(0,vi,38,11,"tr",17),2&n){const t=e.XpG(3);e.Y8G("ngIf",t.pageSummary)}}function yi(n,s){if(1&n){const t=e.RV6();e.j41(0,"p-table",19),e.bIt("onFilter",function(i){e.eBV(t);const u=e.XpG(2);return e.Njj(u.onFilter(i))})("onPage",function(i){e.eBV(t);const u=e.XpG(2);return e.Njj(u.pageChange(i))}),e.DNE(1,qn,25,13,"ng-template",20)(2,oi,24,14,"ng-template",21)(3,mi,2,2,"ng-template",22)(4,bi,1,1,"ng-template",23),e.k0s()}if(2&n){const t=e.XpG(2);e.Y8G("loading",t.loading)("loading",t.loading)("paginator",!0)("rowsPerPageOptions",e.lJ4(8,xn))("rows",t.filterModel.rows)("showCurrentPageReport",!1)("tableStyle",e.lJ4(9,jn))("value",t.data)}}function Oi(n,s){if(1&n&&(e.j41(0,"div",10)(1,"div",11)(2,"div",12)(3,"div",13)(4,"div",14)(5,"div",15),e.EFF(6,"\u0417\u0430\u043a\u0430\u0437\u044b"),e.k0s(),e.j41(7,"div")(8,"div",16)(9,"span"),e.EFF(10,"\u0417\u0430\u043a\u0430\u0437\u043e\u0432"),e.k0s(),e.j41(11,"span"),e.EFF(12),e.k0s()()(),e.j41(13,"div",16)(14,"span"),e.EFF(15,"\u0422\u043e\u0432\u0430\u0440\u043e\u0432"),e.k0s(),e.j41(16,"span"),e.EFF(17),e.k0s()(),e.j41(18,"div")(19,"div",16)(20,"span"),e.EFF(21,"\u041a \u0432\u044b\u043f\u043b\u0430\u0442\u0435"),e.k0s(),e.DNE(22,Gn,3,4,"span",17)(23,Bn,2,0,"span",17),e.k0s()(),e.j41(24,"div")(25,"div",16)(26,"span"),e.EFF(27,"\u0421\u0443\u043c\u043c\u0430"),e.k0s(),e.j41(28,"span"),e.EFF(29),e.nI1(30,"number"),e.k0s()()()()()(),e.j41(31,"div",12)(32,"div",13)(33,"div",14)(34,"div",15),e.EFF(35,"\u0412\u043e\u0437\u0432\u0440\u0430\u0442\u044b"),e.k0s(),e.j41(36,"div",16)(37,"span"),e.EFF(38,"\u0422\u043e\u0432\u0430\u0440\u043e\u0432 \u043e\u0442\u043c\u0435\u043d\u0435\u043d\u043e"),e.k0s(),e.j41(39,"span"),e.EFF(40),e.k0s()(),e.j41(41,"div",16)(42,"span"),e.EFF(43,"\u0422\u043e\u0432\u0430\u0440\u043e\u0432 \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0435\u043d\u043e"),e.k0s(),e.j41(44,"span"),e.EFF(45),e.k0s()(),e.j41(46,"div",16)(47,"span"),e.EFF(48,"\u0421\u0443\u043c\u043c\u0430"),e.k0s(),e.j41(49,"span"),e.EFF(50),e.nI1(51,"number"),e.k0s()(),e.j41(52,"div",16)(53,"span"),e.EFF(54,"% \u0432\u043e\u0437\u0432\u0440\u0430\u0442\u043e\u0432"),e.k0s(),e.j41(55,"span"),e.EFF(56),e.nI1(57,"number"),e.k0s()()()()(),e.j41(58,"div",12)(59,"div",13)(60,"div",14)(61,"div",15),e.EFF(62,"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043d\u044b\u0435 \u0437\u0430\u043a\u0430\u0437\u044b"),e.k0s(),e.j41(63,"div")(64,"div",16)(65,"span"),e.EFF(66,"\u0417\u0430\u043a\u0430\u0437\u043e\u0432"),e.k0s(),e.j41(67,"span"),e.EFF(68),e.k0s()()(),e.j41(69,"div",16)(70,"span"),e.EFF(71,"\u0422\u043e\u0432\u0430\u0440\u043e\u0432"),e.k0s(),e.j41(72,"span"),e.EFF(73),e.k0s()(),e.j41(74,"div")(75,"div",16)(76,"span"),e.EFF(77,"\u041a \u0432\u044b\u043f\u043b\u0430\u0442\u0435"),e.k0s(),e.j41(78,"span"),e.EFF(79),e.nI1(80,"number"),e.k0s()()(),e.j41(81,"div")(82,"div",16)(83,"span"),e.EFF(84,"\u0421\u0443\u043c\u043c\u0430 \u043f\u0440\u043e\u0434\u0430\u0436"),e.k0s(),e.j41(85,"span"),e.EFF(86),e.nI1(87,"number"),e.k0s()()()()()()(),e.DNE(88,yi,5,10,"p-table",18),e.k0s()),2&n){const t=e.XpG();e.R7$(12),e.JRh(t.summary.totalOrderCount),e.R7$(5),e.JRh(t.summary.totalProductCount),e.R7$(5),e.Y8G("ngIf",t.summary.expectedPayout),e.R7$(),e.Y8G("ngIf",!t.summary.expectedPayout),e.R7$(6),e.SpI("",e.i5U(30,14,t.summary.totalSum,"1.2-2"),"\u20bd"),e.R7$(11),e.JRh(t.summary.cancelledProductCount),e.R7$(5),e.JRh(t.summary.returnedProductCount),e.R7$(5),e.SpI("",e.i5U(51,17,t.summary.returnSum,"1.2-2"),"\u20bd"),e.R7$(6),e.SpI("",e.i5U(57,20,100*t.summary.returnProductCountPercentage,"1.1-1"),"%"),e.R7$(12),e.JRh(t.summary.finalizedOrderCount),e.R7$(5),e.JRh(t.summary.finalizedProductCount),e.R7$(6),e.SpI("",e.i5U(80,23,t.summary.finalizedSum,"1.2-2"),"\u20bd"),e.R7$(7),e.SpI("",e.i5U(87,26,t.summary.finalizedSalesSum,"1.2-2"),"\u20bd"),e.R7$(2),e.Y8G("ngIf",t.data)}}var ee=function(n){return n[n.Returned=-1]="Returned",n}(ee||{}),Y=function(n){return n[n.ThisDay=0]="ThisDay",n[n.PreviousDay=1]="PreviousDay",n[n.Day=2]="Day",n[n.ThisWeek=3]="ThisWeek",n[n.PreviousWeek=4]="PreviousWeek",n[n.Week=5]="Week",n[n.ThisMonth=6]="ThisMonth",n[n.PreviousMonth=7]="PreviousMonth",n[n.Month=8]="Month",n[n.Custom=9]="Custom",n}(Y||{});let Si=(()=>{class n extends r.x{constructor(t,o,i,u,d,k,R){super(k),this.ozonSalesOrderClient=t,this.ozonPostingCommandClient=o,this.ozonOperationCommandClient=i,this.messageService=u,this.ozonWarehouseService=d,this.dbService=R,this.localizationFilter=null,this.dateRangeTypes=Y,this.loading=!1,this.productPackageIDs=[],this.warehouses=[],this.isLoading=!1,this.findOrdersSubject=new b.t(null),this.dateRangeOptions=[{name:"\u0421\u0435\u0433\u043e\u0434\u043d\u044f",value:Y.ThisDay},{name:"\u0412\u0447\u0435\u0440\u0430",value:Y.PreviousDay},{name:"\u0421\u0443\u0442\u043a\u0438",value:Y.Day},{name:"\u042d\u0442\u0430 \u043d\u0435\u0434\u0435\u043b\u044f",value:Y.ThisWeek},{name:"\u041f\u0440\u0435\u0434\u044b\u0434\u0443\u0449\u0430\u044f \u043d\u0435\u0434\u0435\u043b\u044f",value:Y.PreviousWeek},{name:"\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u044f\u044f \u043d\u0435\u0434\u0435\u043b\u044f",value:Y.Week},{name:"\u042d\u0442\u043e\u0442 \u043c\u0435\u0441\u044f\u0446",value:Y.ThisMonth},{name:"\u041f\u0440\u0435\u0434\u044b\u0434\u0443\u0449\u0438\u0439 \u043c\u0435\u0441\u044f\u0446",value:Y.PreviousMonth},{name:"\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0439 \u043c\u0435\u0441\u044f\u0446",value:Y.Month},{name:"\u0417\u0430 \u043f\u0435\u0440\u0438\u043e\u0434",value:Y.Custom}],this.filterModel={dateRangeType:Y.ThisDay,rows:50},this.orderStatuses=new Map([[ee.Returned,"\u0412\u043e\u0437\u0432\u0440\u0430\u0442"],[a.D.PostingStatus.AwaitingPackaging,"\u041e\u0436\u0438\u0434\u0430\u0435\u0442 \u0443\u043f\u0430\u043a\u043e\u0432\u043a\u0438"],[a.D.PostingStatus.AwaitingDeliver,"\u041e\u0436\u0438\u0434\u0430\u0435\u0442 \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0438"],[a.D.PostingStatus.Delivering,"\u0414\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442\u0441\u044f"],[a.D.PostingStatus.Delivered,"\u0414\u043e\u0441\u0442\u0430\u0432\u043b\u0435\u043d"],[a.D.PostingStatus.Cancelled,"\u041e\u0442\u043c\u0435\u043d\u0451\u043d"],[a.D.PostingStatus.AwaitingRegistration,"\u041e\u0436\u0438\u0434\u0430\u0435\u0442 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438"],[a.D.PostingStatus.AcceptanceInProgress,"\u0418\u0434\u0451\u0442 \u043f\u0440\u0438\u0451\u043c\u043a\u0430"],[a.D.PostingStatus.AwaitingApprove,"\u041e\u0436\u0438\u0434\u0430\u0435\u0442 \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0438\u044f"],[a.D.PostingStatus.Arbitration,"\u0410\u0440\u0431\u0438\u0442\u0440\u0430\u0436"],[a.D.PostingStatus.ClientArbitration,"\u041a\u043b\u0438\u0435\u043d\u0442\u0441\u043a\u0438\u0439 \u0430\u0440\u0431\u0438\u0442\u0440\u0430\u0436 \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0438"],[a.D.PostingStatus.DriverPickup,"\u0423 \u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044f"],[a.D.PostingStatus.NotAccepted,"\u041d\u0435 \u043f\u0440\u0438\u043d\u044f\u0442\u043e"],[a.D.PostingStatus.SentBySeller,"\u041e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043e \u043f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a\u043e\u043c"]]),this.orderStatusSeverities=new Map([[ee.Returned,"danger"],[a.D.PostingStatus.AwaitingDeliver,"warning"],[a.D.PostingStatus.Cancelled,"contrast"],[a.D.PostingStatus.AwaitingPackaging,"warning"],[a.D.PostingStatus.Delivering,"info"],[a.D.PostingStatus.Delivered,"success"]]),this.orderStatusIcons=new Map([[ee.Returned,"pi-ban"],[a.D.PostingStatus.AwaitingDeliver,"pi-car"],[a.D.PostingStatus.Cancelled,"pi-replay"],[a.D.PostingStatus.AwaitingPackaging,"pi-box"],[a.D.PostingStatus.Delivering,"pi-car"],[a.D.PostingStatus.Delivered,"pi-dollar"],[a.D.PostingStatus.Delivered,"pi-dollar"]])}getPageSummary(t){let o=0,i=0,u=0,d=0,k=0;const R=Math.min(this.filteredData.length-t,this.filterModel.rows);for(let x=0;x<R;x++){const G=this.filteredData[t+x];o+=G.sum,G.orderItems.forEach(P=>{P.extendedStatus==a.D.PostingStatus.Cancelled?u+=P.quantity:P.extendedStatus==ee.Returned?(d+=P.quantity,k+=P.clusterTo!==P.clusterFrom?P.quantity:0):(i+=P.quantity,k+=P.clusterTo!==P.clusterFrom?P.quantity:0)})}return{canceledProductCount:u,orderCount:R,orderSum:o,productCount:i,returnedProductCount:d,nonLocalProductCount:k}}ngOnInit(){this.titleService.setTitle("\u0417\u0430\u043a\u0430\u0437\u044b Ozon"),this.ozonWarehouseService.getWarehouses().pipe((0,E.p)(t=>!this.ozonWarehouses&&!!t)).subscribe(t=>{this.ozonWarehouses=t,this.findOrdersSubject.pipe((0,C.Q)(this.destroyed),(0,E.p)(o=>!!o&&null!==o.dateRangeType)).pipe((0,v.M)(o=>{this.updateFilter(o)})).subscribe(()=>{this.findOrders()})}),this.dbService.getByID("filters",n.name).subscribe(t=>{t&&t.data&&(this.filterModel=t.data),this.changeReportDate()})}changeReportDate(){this.findOrdersSubject.next(this.filterModel)}getSummary(t){let o=0,i=0,u=0,d=0,k=0,R=0,x=0,G=0,P=0,H=0,F=0;if(t)for(const q of t)P+=q.returnSum,F+=q.returnedProductCount,H+=q.cancelledProductCount,G+=q.nonLocalProductCount,k+=q.salesSum,x+=q.productCount,R++,!q.hasNonFinalizedOrderItems&&q.productCount&&(o+=q.sum,d+=q.salesSum,u+=q.productCount,i++);return{cancelledProductCount:H,expectedPayout:o*k/d,finalizedOrderCount:i,finalizedProductCount:u,finalizedSalesSum:d,finalizedSum:o,nonLocalProductCount:G,returnProductCountPercentage:u&&F?F/u:0,returnSum:P,returnedProductCount:F,totalOrderCount:R,totalProductCount:x,totalSum:k}}pageChange(t){this.filterModel.rows!=t.rows&&(this.filterModel.rows=t.rows,this.updateFilter(this.filterModel)),this.pageSummary=this.getPageSummary(t.first)}onFilter(t){this.filteredData=t.filteredValue,this.pageChange({first:0,rows:this.filterModel.rows})}getOrderTypeIcon(t){switch(t){case a.D.OzonSalesOrderType.Fbo:return"ozon-fbo";case a.D.OzonSalesOrderType.Fbs:return"ozon-fbs";default:return"pi-question"}}mapOrder(t){const o=new Map,i=new Set,u=new Set,d=new Map,k=new Map,R=[],x={cancelledProductCount:0,directions:[],hasNonCancelledOrderItems:!1,hasNonFinalizedOrderItems:!1,hasNonLocalOrderItems:!1,nonLocalProductCount:0,orderItems:t.orderItems,orderOperations:R,orderWarehouses:[],postings:[],productCount:0,productIDs:[],products:[],returnSum:0,returnedProductCount:0,salesSum:0,statuses:[],sum:0},G=new Map;for(const F of t.operations)if(x.sum+=F.amount,F.postingNumber==t.ozonOrderNumber)R.push(F);else{if((F.operationType==a.D.OperationType.ReturnAgentOperationRFBS||F.operationType==a.D.OperationType.OperationReturnGoodsFBSofRMS||F.operationType==a.D.OperationType.MarketplaceSellerReexposureDeliveryReturnOperation||F.operationType==a.D.OperationType.ClientReturnAgentOperation||F.operationType==a.D.OperationType.OperationItemReturn||F.operationType==a.D.OperationType.MarketplaceServiceItemReturnFlowLogistic||F.operationType==a.D.OperationType.MarketplaceReturnStorageServiceAtThePickupPointFbsItem)&&i.add(F.postingNumber),o.has(F.postingNumber))o.get(F.postingNumber).operations.push(F);else{const L={postingNumber:F.postingNumber,orderItems:[],operations:[F]};x.postings.push(L),o.set(F.postingNumber,L)}d.set(F.postingNumber,(d.get(F.postingNumber)??0)+F.amount)}const P=new Set;for(const F of t.orderItems){const L=d.get(F.postingNumber)??0,K=i.has(F.postingNumber)?ee.Returned:F.status;F.clusterFrom!==F.clusterTo&&F.status!=a.D.PostingStatus.Cancelled&&(x.nonLocalProductCount+=F.quantity,x.hasNonLocalOrderItems=!0),P.add(K);const te=`${F.clusterFrom}#${F.clusterTo}#${F.ozonWarehouseID}#${K}`;if(G.has(te))G.get(te).count+=F.quantity;else{let W=this.ozonWarehouses.find(wr=>wr.iD==F.ozonWarehouseID)?.name??"-";u.has(W)||(x.orderWarehouses.push(W),u.add(W));const Te={clusterFrom:F.clusterFrom,clusterTo:F.clusterTo,count:F.quantity,status:K,warehouseName:W};x.directions.push(Te),G.set(te,Te)}if(o.has(F.postingNumber))o.get(F.postingNumber).orderItems.push(F);else{const U={postingNumber:F.postingNumber,orderItems:[F],operations:[]};o.set(F.postingNumber,U),x.postings.push(U)}if(k.has(F.product.productPackageID))k.get(F.product.productPackageID).quantity+=F.quantity;else{const U={link:"https://www.ozon.ru/product/"+F.product.sku,name:F.product.name,price:F.price,primaryImage:F.product.primaryImage,productPackageID:F.product.productPackageID,quantity:F.quantity};k.set(F.product.productPackageID,U),x.productIDs.push(F.product.productPackageID.toString()),x.products.push(U)}K==ee.Returned?(x.returnedProductCount+=F.quantity,x.returnSum+=L):K==a.D.PostingStatus.Cancelled?x.cancelledProductCount+=F.quantity:(x.productCount+=F.quantity,x.hasNonCancelledOrderItems=!0,x.salesSum+=F.quantity*F.price,K!=a.D.PostingStatus.Delivered&&(x.hasNonFinalizedOrderItems=!0)),Object.assign(F,{extendedStatus:K})}return P.forEach(F=>{x.statuses.push(F)}),Object.assign(t,x)}importOrders(){var t=this;return(0,O.A)(function*(){const[o,i]=t.getDateRange();i?.setDate(i.getDate()+1);const u=(0,y.W)(d=>(t.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430",severity:"error",detail:d}),t.loading=!1,p.w));t.ozonPostingCommandClient.importOzonFboPostings(o,i).pipe(u).subscribe(()=>{t.ozonOperationCommandClient.importOzonOperations(o,i).pipe(u).subscribe(()=>{t.findOrdersSubject.next(t.filterModel)})})})()}findOrders(){const[t,o]=this.getDateRange();o?.setDate(o.getDate()+1);const u=new a.D.FindPostingsModel({dateFrom:t,dateTo:o,postingNumbers:[]});this.loading=!0,this.summary=void 0,this.pageSummary=void 0,this.ozonSalesOrderClient.findSalesOzonOrders(u).pipe((0,y.W)(d=>(this.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430",severity:"error",detail:d}),this.loading=!1,p.w))).subscribe(d=>{this.loading=!1;let k=0;const R=new Map,x=new Set;this.data=d?.map(G=>{const P=this.mapOrder(G),H=P;return P.orderWarehouses.forEach(F=>x.add(F)),H.orderItems.forEach(F=>{F.extendedStatus==a.D.PostingStatus.Cancelled||F.extendedStatus==ee.Returned||(k+=F.quantity),R.set(F.product.productPackageID,F.product.primaryImage)}),P}),this.warehouses=[...x].sort((G,P)=>G.localeCompare(P)),this.productPackageIDs=Array.from(R.entries(),([G,P])=>({id:G,image:P})).sort((G,P)=>Math.sign(G.id-P.id)).map(G=>({id:G.id.toString(),image:G.image})),this.summary=this.getSummary(this.data),this.filteredData=this.data,this.pageChange({first:0,rows:this.filterModel.rows})})}getTransactionTypeText(t){return a.D.TransactionType[t]}getOperationTypeText(t){return a.D.OperationType[t]}updateFilter(t){this.dbService.update("filters",{id:n.name,data:t}).pipe((0,y.W)(o=>(this.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f \u0444\u0438\u043b\u044c\u0442\u0440\u0430",severity:"error",detail:o}),p.w))).subscribe()}getDateRange(){let t=new Date,o=null;switch(this.filterModel.dateRangeType){case Y.ThisDay:t.setHours(0,0,0,0);break;case Y.PreviousDay:t.setDate(t.getDate()-1),t.setHours(0,0,0,0),o=new Date(t);break;case Y.Day:t.setDate(t.getDate()-1);break;case Y.ThisWeek:t.setDate(t.getDate()-(t.getDay()?t.getDay()-1:6)),t.setHours(0,0,0,0);break;case Y.PreviousWeek:o=new Date(t);const u=o.getDay()??7;o.setHours(0,0,0,0),o.setDate(o.getDate()-u),t=new Date(o),t.setDate(t.getDate()-6);break;case Y.Week:t.setDate(t.getDate()-7);break;case Y.ThisMonth:t.setHours(0,0,0,0),t.setDate(1);break;case Y.PreviousMonth:t.setHours(0,0,0,0),t.setDate(1),o=new Date(t),o.setDate(o.getDate()-1),t.setMonth(t.getMonth()-1);break;case Y.Month:t.setMonth(t.getMonth()-1);break;default:t=this.filterModel.dateRange?.[0],t=null==t?null:new Date(t.getFullYear(),t.getMonth(),t.getDate()),o=this.filterModel.dateRange?.[1],o=null==o?null:new Date(o.getFullYear(),o.getMonth(),o.getDate())}return[t,o]}static{this.\u0275fac=function(o){return new(o||n)(e.rXU(a.D.OzonSalesOrderClient),e.rXU(l.X.PostingClient),e.rXU(l.X.OperationClient),e.rXU(c.bg),e.rXU(f.t),e.rXU(h.hE),e.rXU(I.MX))}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-ozon-sales-order-list"]],features:[e.Vt3],decls:8,vars:7,consts:[["header","\u0417\u0430\u043a\u0430\u0437\u044b Ozon"],[1,"justify-content-center"],["icon","pi pi-search","optionLabel","name","optionValue","value",3,"onOptionClick","ngModelChange","tabIndexChange","ngModel","tabIndex","disabled","options"],["class","justify-content-center mb-1",4,"ngIf"],["label","\u0418\u043c\u043f\u043e\u0440\u0442 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0439","styleClass","m-3",3,"icon","click",4,"ngIf"],["class","card",4,"ngIf"],[1,"justify-content-center","mb-1"],["placeholder","\u041f\u0435\u0440\u0438\u043e\u0434","selectionMode","range",3,"ngModelChange","ngModel","readonlyInput","selectOtherMonths","showClear"],["icon","pi pi-search","label","\u041d\u0430\u0439\u0442\u0438 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f",3,"click"],["label","\u0418\u043c\u043f\u043e\u0440\u0442 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0439","styleClass","m-3",3,"click","icon"],[1,"card"],[1,"grid"],[1,"col-12","md:col-4"],[1,"card","text-right"],[1,"text-900","font-medium","text-xl","mb-3"],[1,"text-500","text-center"],[1,"flex","justify-content-between"],[4,"ngIf"],["dataKey","iD","responsiveLayout","stack",3,"loading","paginator","rowsPerPageOptions","rows","showCurrentPageReport","tableStyle","value","onFilter","onPage",4,"ngIf"],["dataKey","iD","responsiveLayout","stack",3,"onFilter","onPage","loading","paginator","rowsPerPageOptions","rows","showCurrentPageReport","tableStyle","value"],["pTemplate","header"],["pTemplate","body"],["pTemplate","rowexpansion"],["pTemplate","footer"],["width","1%"],["pSortableColumn","date"],["field","date"],["display","menu","field","productIDs","matchMode","intersects",3,"showAddButton","showMatchModes","showOperator"],["pTemplate","filter"],["pSortableColumn","sum"],["field","sum"],["display","menu","field","statuses","matchMode","intersects",3,"showAddButton","showMatchModes","showOperator"],["display","menu","field","orderWarehouses","matchMode","intersects",3,"showAddButton","showMatchModes","showOperator"],["display","menu","field","hasNonLocalOrderItems","matchMode","exclude",3,"showAddButton","showMatchModes","showOperator","showClearButton"],[1,"px-3","pt-3","pb-0"],[1,"font-bold"],["filterBy","id","appendTo","body","optionValue","id","placeholder","\u041b\u044e\u0431\u043e\u0439",3,"onChange","filter","ngModel","options"],["pTemplate","item"],["pTemplate","selectedItems"],[1,"flex","align-items-center","gap-2"],[2,"width","36px",3,"src"],[4,"ngFor","ngForOf"],["optionLabel","value","optionValue","key","placeholder","\u041b\u044e\u0431\u043e\u0439",3,"onChange","filter","ngModel","options"],["placeholder","\u0412\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0435",3,"onChange","filter","ngModel","options"],["inputId","localFilter",3,"ngModelChange","onChange","ngModel"],["for","localFilter"],[3,"pRowToggler"],[1,"p-column-title","font-bold"],[1,"mb-2"],[1,"p-column-title"],[1,"vertical-align-middle"],[3,"title"],["target","_blank",3,"href"],["width","50",3,"src"],[3,"icon","pTooltip","severity"],["severity","success",4,"ngIf"],["severity","info",3,"icon"],["severity","danger",3,"icon"],["severity","success"],["colspan","4"],["colspan","4",1,"text-left","justify-content-start"],["rel","noreferrer","target","_blank",3,"href"],["responsiveLayout","stack",3,"breakpoint","tableStyle","value"],[3,"severity","value"],["dataKey","iD","responsiveLayout","stack",3,"breakpoint","tableStyle","value"],[1,"text-right","p-1"],["colspan","4",4,"ngIf"],["height","2rem"]],template:function(o,i){1&o&&(e.nrm(0,"p-toast")(1,"p-scrollTop"),e.j41(2,"p-card",0)(3,"div",1)(4,"p-selectButton",2),e.bIt("onOptionClick",function(){return i.changeReportDate()}),e.mxI("ngModelChange",function(d){return e.DH7(i.filterModel.dateRangeType,d)||(i.filterModel.dateRangeType=d),d})("tabIndexChange",function(d){return e.DH7(i.filterModel.dateRangeType,d)||(i.filterModel.dateRangeType=d),d}),e.k0s()(),e.DNE(5,Mn,3,4,"div",3)(6,Pn,1,1,"p-button",4),e.k0s(),e.DNE(7,Oi,89,29,"div",5)),2&o&&(e.R7$(4),e.R50("ngModel",i.filterModel.dateRangeType)("tabIndex",i.filterModel.dateRangeType),e.Y8G("disabled",i.loading)("options",i.dateRangeOptions),e.R7$(),e.Y8G("ngIf",i.filterModel.dateRangeType==i.dateRangeTypes.Custom),e.R7$(),e.Y8G("ngIf",void 0!==i.filterModel.dateRangeType),e.R7$(),e.Y8G("ngIf",i.summary))},dependencies:[c.Ei,T.$n,w.Vv,$.Z,g.Sq,g.bT,z.BC,z.vS,ae,ye.l,Oe.JC,M.XI,M.Tg,M.FP,M.yc,M.rl,me.v,Q.y8,pe.E,Se.kk,B.m,g.QX,g.vh,g.lG],styles:["@media (min-width: 961px){.p-column-title[_ngcontent-%COMP%]{display:none}}@media (max-width: 960px){.p-column-title[_ngcontent-%COMP%]{display:block}.p-datatable-tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:block}}"]})}}return n})();var Ei=m(1874),re=m(5430),ue=m(2242),Ee=m(4799),de=m(6781),_e=m(1802);const Ci=()=>({"min-width":"75rem"}),ki=()=>[10,25,50],Ii=()=>["name"],Fi=()=>({width:"50vw"});function Ti(n,s){1&n&&(e.j41(0,"tr"),e.nrm(1,"th"),e.j41(2,"th",9),e.EFF(3," ID "),e.nrm(4,"p-sortIcon",10),e.k0s(),e.j41(5,"th",11),e.EFF(6," \u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 "),e.nrm(7,"p-sortIcon",12),e.k0s(),e.nrm(8,"th"),e.k0s(),e.j41(9,"tr"),e.nrm(10,"th"),e.j41(11,"th"),e.nrm(12,"p-columnFilter",13),e.k0s(),e.j41(13,"th"),e.nrm(14,"p-columnFilter",14),e.k0s(),e.nrm(15,"th"),e.k0s()),2&n&&(e.R7$(12),e.Y8G("showButtons",!1)("useGrouping",!1))}function Ri(n,s){if(1&n&&e.nrm(0,"button",21),2&n){const t=e.XpG(),i=t.expanded;e.Y8G("pRowToggler",t.$implicit)("icon",i?"pi pi-chevron-down":"pi pi-chevron-right")}}function wi(n,s){if(1&n){const t=e.RV6();e.j41(0,"tr")(1,"td")(2,"a",15),e.nrm(3,"i",16),e.k0s(),e.j41(4,"a",15),e.nrm(5,"i",17),e.k0s()(),e.j41(6,"td"),e.EFF(7),e.k0s(),e.j41(8,"td"),e.EFF(9),e.k0s(),e.j41(10,"td")(11,"p-button",18),e.bIt("click",function(){const i=e.eBV(t).$implicit,u=e.XpG();return e.Njj(u.showBarcodeGenerator(i))}),e.k0s(),e.j41(12,"p-button",19),e.bIt("click",function(i){const u=e.eBV(t).$implicit,d=e.XpG();return e.Njj(d.confirmProductRemoval(i,u))}),e.k0s(),e.DNE(13,Ri,1,2,"button",20),e.k0s()()}if(2&n){const t=s.$implicit;e.R7$(2),e.Mz_("href","https://www.ozon.ru/product/",t.sku,"",e.B4B),e.R7$(2),e.Mz_("href","https://seller.ozon.ru/app/prices/control?search=",t.sku,"",e.B4B),e.R7$(3),e.JRh(t.productPackageID),e.R7$(2),e.JRh(t.name),e.R7$(4),e.Y8G("ngIf",null==t.stocks?null:t.stocks.length)}}function Di(n,s){1&n&&(e.j41(0,"tr")(1,"th",26),e.EFF(2,"\u0421\u043a\u043b\u0430\u0434 "),e.nrm(3,"p-sortIcon",27),e.k0s(),e.j41(4,"th",28),e.EFF(5,"\u041a\u043b\u0430\u0441\u0442\u0435\u0440 "),e.nrm(6,"p-sortIcon",29),e.k0s(),e.j41(7,"th",30),e.EFF(8,"\u041d\u0430\u043b\u0438\u0447\u0438\u0435 "),e.nrm(9,"p-sortIcon",31),e.k0s(),e.j41(10,"th",32),e.EFF(11,"\u0420\u0435\u0437\u0435\u0440\u0432 "),e.nrm(12,"p-sortIcon",33),e.k0s()())}function xi(n,s){if(1&n&&(e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td",34),e.EFF(6),e.k0s(),e.j41(7,"td",34),e.EFF(8),e.k0s()()),2&n){const t=s.$implicit;e.R7$(2),e.JRh(t.warehouse.name),e.R7$(2),e.JRh(t.warehouse.warehouseCluster),e.R7$(2),e.JRh(t.present),e.R7$(2),e.JRh(t.reserved)}}function ji(n,s){if(1&n&&(e.j41(0,"tr")(1,"td",35),e.EFF(2,"\u0412\u0441\u0435\u0433\u043e:"),e.k0s(),e.j41(3,"td",34),e.EFF(4),e.k0s(),e.j41(5,"td",34),e.EFF(6),e.k0s()()),2&n){const t=e.XpG(2).$implicit;e.R7$(4),e.JRh(t.totalPresent),e.R7$(2),e.JRh(t.totalReserved)}}function Mi(n,s){if(1&n&&(e.j41(0,"tr")(1,"td",23)(2,"div")(3,"p-table",24),e.DNE(4,Di,13,0,"ng-template",3)(5,xi,9,4,"ng-template",4)(6,ji,7,2,"ng-template",25),e.k0s()()()()),2&n){const t=e.XpG().$implicit;e.R7$(3),e.Y8G("value",t.stocks)}}function Pi(n,s){if(1&n&&e.DNE(0,Mi,7,1,"tr",22),2&n){const t=s.$implicit;e.Y8G("ngIf",null==t.stocks?null:t.stocks.length)}}function Gi(n,s){if(1&n){const t=e.RV6();e.qex(0),e.j41(1,"div",44)(2,"div",45)(3,"label",46),e.EFF(4,"\u0422\u0435\u043a\u0441\u0442"),e.k0s(),e.j41(5,"input",47),e.mxI("ngModelChange",function(i){const u=e.eBV(t).$implicit;return e.DH7(u.text,i)||(u.text=i),e.Njj(i)}),e.k0s()()(),e.j41(6,"div",45)(7,"label",48),e.EFF(8,"\u0420\u0430\u0437\u043c\u0435\u0440 \u0448\u0440\u0438\u0444\u0442\u0430"),e.k0s(),e.j41(9,"p-inputNumber",49),e.mxI("ngModelChange",function(i){const u=e.eBV(t).$implicit;return e.DH7(u.fontSize,i)||(u.fontSize=i),e.Njj(i)}),e.k0s()(),e.j41(10,"div",45)(11,"label",50),e.EFF(12,"\u0416\u0438\u0440\u043d\u044b\u0439"),e.k0s(),e.j41(13,"p-checkbox",51),e.mxI("ngModelChange",function(i){const u=e.eBV(t).$implicit;return e.DH7(u.bold,i)||(u.bold=i),e.Njj(i)}),e.k0s()(),e.bVm()}if(2&n){const t=s.$implicit;e.R7$(5),e.R50("ngModel",t.text),e.R7$(4),e.R50("ngModel",t.fontSize),e.Y8G("showButtons",!0),e.R7$(4),e.R50("ngModel",t.bold),e.Y8G("binary",!0)}}function Bi(n,s){if(1&n&&(e.qSk(),e.qex(0),e.nrm(1,"rect",52),e.bVm()),2&n){const t=s.$implicit;e.R7$(),e.BMQ("width",3*t.width)("x",3*t.offset+89)}}function zi(n,s){if(1&n&&(e.qSk(),e.qex(0),e.nrm(1,"text",53),e.bVm()),2&n){const t=s.$implicit,o=s.index,i=e.XpG(3);e.R7$(),e.Y8G("innerHTML",t.text,e.npT),e.BMQ("font-weight",t.bold?"bold":"normal")("font-size",t.fontSize)("y",160+40*o/i.barcodeTexts.length)}}function Li(n,s){if(1&n){const t=e.RV6();e.j41(0,"div",38),e.DNE(1,Gi,14,5,"ng-container",39),e.j41(2,"div")(3,"p-button",40),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.addBarcodeText())}),e.k0s()()(),e.j41(4,"div"),e.qSk(),e.j41(5,"svg",41),e.nrm(6,"rect",42),e.DNE(7,Bi,2,2,"ng-container",39)(8,zi,2,4,"ng-container",39),e.k0s(),e.joV(),e.j41(9,"a",43),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.downloadBarcode())}),e.EFF(10,"\u0421\u043a\u0430\u0447\u0430\u0442\u044c"),e.k0s()()}if(2&n){const t=e.XpG(2);e.R7$(),e.Y8G("ngForOf",t.barcodeTexts),e.R7$(6),e.Y8G("ngForOf",t.barcodeData),e.R7$(),e.Y8G("ngForOf",t.barcodeTexts),e.R7$(),e.Y8G("download",t.selectedProductForBarcode.productPackageID+".png")}}function Ai(n,s){if(1&n){const t=e.RV6();e.j41(0,"p-dialog",36),e.bIt("onShow",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.onShowBarcodeDialog())}),e.DNE(1,Li,11,4,"ng-template",37),e.k0s()}if(2&n){const t=e.XpG();e.Aen(e.lJ4(6,Fi)),e.Y8G("modal",!0)("visible",!!t.selectedProductForBarcode)("draggable",!1)("resizable",!1)}}let $i=(()=>{class n extends r.x{addBarcodeText(){this.barcodeTexts=[...this.barcodeTexts,{fontSize:10,text:"",bold:!1}]}constructor(t,o,i,u,d){super(d),this.ozonProductClient=t,this.messageService=o,this.ozonProductCommandHandler=i,this.confirmationService=u,this.findProductsSubject=new b.t(null),this.rows=50,this.barcodeHeight=10}ngOnInit(){this.titleService.setTitle("Ozon Products"),this.px2mmFactor=this.calcPx2MmFactor()}findProducts(t){this.ozonProductClient.findOzonProducts(t).pipe((0,C.Q)(this.destroyed)).pipe((0,y.W)(o=>(this.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430",severity:"error",detail:o}),p.w))).subscribe(o=>{o.items?.forEach(i=>{const u=i;u.totalPresent=i.stocks.reduce((d,k)=>d+k.present,0),u.totalReserved=i.stocks.reduce((d,k)=>d+k.reserved,0)}),this.data=o.items,this.totalRecords=o.totalCount})}confirmProductRemoval(t,o){this.confirmationService.confirm({target:t.target,message:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0442\u043e\u0432\u0430\u0440?",header:"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0438\u0435 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f",icon:"pi pi-exclamation-triangle",acceptIcon:"none",rejectIcon:"none",rejectButtonStyleClass:"p-button-text",accept:()=>{this.ozonProductCommandHandler.removeOzonProduct(o.productPackageID).pipe((0,y.W)(i=>(this.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f \u0442\u043e\u0432\u0430\u0440\u0430",severity:"error",detail:i}),p.w))).subscribe(i=>{const u=this.data.indexOf(o);this.data.splice(u,1),this.messageService.add({summary:"\u0422\u043e\u0432\u0430\u0440 \u0443\u0434\u0430\u043b\u0451\u043d",severity:"success"})})}})}onDataLazyLoad(t){const o=new a.D.FindOzonProductsModel({offset:t.first,count:t.rows,includeStocks:!0});if(this.fillFilterModel(o,t.filters),t.sortField){switch(t.sortField){case"name":o.orderField=a.D.FindOzonProductsModelSortField.ProductName;break;case"productPackageID":o.orderField=a.D.FindOzonProductsModelSortField.ProductPackageID}o.orderAscending=t.sortOrder>0}this.findProducts(o)}fillFilterModel(t,o){t.productName=o?.name?.value,t.productPackageID=o?.productPackageID?.value}onShowBarcodeDialog(){this.barcodeTexts=[]}calcPx2MmFactor(){const t=document.createElement("div");t.style.position="absolute",t.style.width="100mm",document.body.appendChild(t);const o=t.getBoundingClientRect();return document.body.removeChild(t),o.width/100}showBarcodeGenerator(t){if(t.barcodes?.length>0){this.selectedProductForBarcode=t;const o=this.selectedProductForBarcode.barcodes[0],i={};Ei(i,o,{format:"code128",height:this.barcodeHeight*this.px2mmFactor,text:o,background:"rgba(255, 255, 255, 1)",font:"monospace",fontOptions:"bold",marginTop:0,fontSize:16,lineColor:"black",margin:2*this.px2mmFactor,textMargin:0,flat:!0});const u=[];let d;for(let k=0;k<i.encodings[0].data.length;k++)"1"==i.encodings[0].data[k]?d?d.width++:d={width:1,offset:k}:d?.width>0&&(u.push(d),d=null);d&&u.push(d),this.barcodeData=u}}downloadBarcode(){var t=this;return(0,O.A)(function*(){yield new Promise(()=>{try{const u=document.getElementById("barcodeImage").outerHTML,d=btoa(encodeURIComponent(u).replace(/%([0-9A-F]{2})/g,(R,x)=>String.fromCharCode(parseInt(x,16)))),k=document.createElement("a");k.href="data:image/svg+xml;base64,"+d,k.download=t.selectedProductForBarcode.productPackageID+".svg",k.click()}catch(i){t.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430",severity:"error",detail:i})}})})()}importProducts(){var t=this;return(0,O.A)(function*(){yield t.ozonProductCommandHandler.importOzonProducts().pipe((0,y.W)(o=>(t.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0438\u043c\u043f\u043e\u0440\u0442\u0430 \u0442\u043e\u0432\u0430\u0440\u043e\u0432",severity:"error",detail:o}),p.w))).subscribe(()=>{t.messageService.add({summary:"\u0423\u0441\u043f\u0435\u0445",severity:"success",detail:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0442\u043e\u0432\u0430\u0440\u043e\u0432 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u0430"}),t.onDataLazyLoad({first:0,rows:t.rows})})})()}updateStocks(){var t=this;return(0,O.A)(function*(){t.ozonProductCommandHandler.importOzonProductStocks().pipe((0,y.W)(o=>(t.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430",severity:"error",detail:o}),p.w))).subscribe(()=>{t.messageService.add({summary:"\u0423\u0441\u043f\u0435\u0445",severity:"success",detail:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0441\u043a\u043b\u0430\u0434\u043e\u0432 \u041e\u0437\u043e\u043d \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u0430"}),t.onDataLazyLoad({first:0,rows:t.rows})})})()}static{this.\u0275fac=function(o){return new(o||n)(e.rXU(a.D.OzonProductClient),e.rXU(c.bg),e.rXU(l.X.OzonProductClient),e.rXU(c.td),e.rXU(h.hE))}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-ozon-product-list"]],features:[e.Vt3],decls:11,vars:13,consts:[["pButton","","pRipple","","type","button","label","\u0418\u043c\u043f\u043e\u0440\u0442 \u0442\u043e\u0432\u0430\u0440\u043e\u0432",1,"mb-2",3,"click"],["pButton","","pRipple","","type","button","label","\u0418\u043c\u043f\u043e\u0440\u0442 \u043e\u0441\u0442\u0430\u0442\u043a\u043e\u0432",1,"ml-1","mb-2",3,"click"],["dataKey","productPackageID",3,"onLazyLoad","value","lazy","tableStyle","paginator","rows","rowsPerPageOptions","totalRecords","loading","globalFilterFields"],["pTemplate","header"],["pTemplate","body"],["pTemplate","rowexpansion"],["header","\u0413\u0435\u043d\u0435\u0440\u0430\u0446\u0438\u044f \u0431\u0430\u0440\u043a\u043e\u0434\u0430",3,"modal","style","visible","draggable","resizable","onShow",4,"ngIf"],[1,"hidden"],["id","barcode",2,"display","none"],["pSortableColumn","productPackageID","width","20%"],["field","productPackageID"],["pSortableColumn","name"],["field","name"],["field","productPackageID","type","numeric",3,"showButtons","useGrouping"],["field","name","type","text"],["target","_blank",3,"href"],[1,"pi","ozon-fbo"],[1,"pi","ozon-seller"],["icon","pi pi-chart-bar",3,"click"],["type","button","pRipple","","icon","pi pi-trash","styleClass","p-button-danger",3,"click"],["type","button","pButton","","pRipple","","class","p-button-text p-button-rounded p-button-plain",3,"pRowToggler","icon",4,"ngIf"],["type","button","pButton","","pRipple","",1,"p-button-text","p-button-rounded","p-button-plain",3,"pRowToggler","icon"],[4,"ngIf"],["colspan","4"],[3,"value"],["pTemplate","footer"],["pSortableColumn","warehouse.name"],["field","warehouse.name"],["pSortableColumn","warehouse.warehouseCluster"],["field","warehouse.warehouseCluster"],["width","10%","pSortableColumn","present"],["field","present"],["width","10%","pSortableColumn","reserved"],["field","reserved"],[1,"text-right"],["colspan","2",1,"text-right"],["header","\u0413\u0435\u043d\u0435\u0440\u0430\u0446\u0438\u044f \u0431\u0430\u0440\u043a\u043e\u0434\u0430",3,"onShow","modal","visible","draggable","resizable"],["pTemplate","content"],[1,"card"],[4,"ngFor","ngForOf"],["icon","pi pi-plus","label","\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0442\u0435\u043a\u0441\u0442",3,"click"],["id","barcodeImage","xmlns","http://www.w3.org/2000/svg"],["width","350em","height","600em","fill","white"],[1,"p-ripple","p-element","p-button","p-component",3,"click","download"],[1,"flex"],[1,"flex-auto"],["for","text",1,"block","font-bold"],["pInputText","","inputId","text",3,"ngModelChange","ngModel"],["for","fontSize",1,"mb-2","block","font-bold"],["inputId","fontSize",3,"ngModelChange","ngModel","showButtons"],["for","fontWeight",1,"mb-2","block","font-bold"],["inputId","binary",3,"ngModelChange","ngModel","binary"],["y","50","height","60","fill","black"],["x","50%","fill","black","text-anchor","middle",3,"innerHTML"]],template:function(o,i){1&o&&(e.nrm(0,"p-toast")(1,"p-confirmDialog"),e.j41(2,"button",0),e.bIt("click",function(){return i.importProducts()}),e.k0s(),e.j41(3,"button",1),e.bIt("click",function(){return i.updateStocks()}),e.k0s(),e.j41(4,"p-table",2),e.bIt("onLazyLoad",function(d){return i.onDataLazyLoad(d)}),e.DNE(5,Ti,16,2,"ng-template",3)(6,wi,14,7,"ng-template",4)(7,Pi,1,1,"ng-template",5),e.k0s(),e.DNE(8,Ai,2,7,"p-dialog",6),e.j41(9,"div",7),e.qSk(),e.nrm(10,"svg",8),e.k0s()),2&o&&(e.R7$(4),e.Y8G("value",i.data)("lazy",!0)("tableStyle",e.lJ4(10,Ci))("paginator",!0)("rows",i.rows)("rowsPerPageOptions",e.lJ4(11,ki))("totalRecords",i.totalRecords)("loading",i.loading)("globalFilterFields",e.lJ4(12,Ii)),e.R7$(4),e.Y8G("ngIf",i.selectedProductForBarcode))},dependencies:[c.Ei,T._f,T.$n,re.Sc,ue.S,g.Sq,g.bT,Ee.T,de.l,z.me,z.BC,z.vS,_e.YI,M.XI,M.Tg,M.FP,M.yc,M.rl,Q.y8]})}}return n})();var Vi=m(6354);const Ni=["table"],Xi=()=>({"min-width":"75rem"}),Yi=()=>[10,25,50],Hi=()=>({width:"50vw"}),Ui=()=>["code_128","ean","upc","upc_e","ean_8"];function Wi(n,s){1&n&&(e.j41(0,"tr")(1,"th"),e.EFF(2,"\u0414\u0430\u0442\u0430"),e.k0s(),e.j41(3,"th"),e.EFF(4,"\u0421\u0442\u0430\u0442\u0443\u0441"),e.k0s(),e.j41(5,"th"),e.EFF(6,"\u0421\u043a\u043b\u0430\u0434 \u043e\u0442\u0433\u0440\u0443\u0437\u043a\u0438"),e.k0s(),e.j41(7,"th"),e.EFF(8,"\u0421\u043a\u043b\u0430\u0434\u044b \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f"),e.k0s(),e.j41(9,"th"),e.EFF(10,"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043f\u043e\u0437\u0438\u0446\u0438\u0439"),e.k0s(),e.j41(11,"th"),e.EFF(12,"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0442\u043e\u0432\u0430\u0440\u043e\u0432"),e.k0s(),e.nrm(13,"th"),e.k0s())}function Ji(n,s){if(1&n&&(e.j41(0,"tr")(1,"td")(2,"a",8),e.EFF(3),e.nI1(4,"date"),e.k0s()(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td"),e.EFF(8),e.k0s(),e.j41(9,"td"),e.EFF(10),e.k0s(),e.j41(11,"td"),e.EFF(12),e.k0s(),e.j41(13,"td"),e.EFF(14),e.k0s(),e.j41(15,"td"),e.nrm(16,"button",9),e.k0s()()),2&n){const t=s.$implicit,o=s.expanded;e.R7$(2),e.FS9("href",t.link,e.B4B),e.R7$(),e.JRh(e.i5U(4,9,t.date,"y-MM-dd")),e.R7$(3),e.JRh(t.statusName),e.R7$(2),e.JRh(null==t.ozonWarehouse?null:t.ozonWarehouse.name),e.R7$(2),e.JRh(t.warehouses),e.R7$(2),e.JRh(t.totalItemCount),e.R7$(2),e.JRh(t.totalQuantity),e.R7$(2),e.Y8G("pRowToggler",t)("icon",o?"pi pi-chevron-down":"pi pi-chevron-right")}}function Ki(n,s){1&n&&(e.j41(0,"tr")(1,"th",13),e.EFF(2,"\u0410\u0440\u0442\u0438\u043a\u0443\u043b "),e.nrm(3,"p-sortIcon",14),e.k0s(),e.j41(4,"th",15),e.EFF(5,"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 "),e.nrm(6,"p-sortIcon",16),e.k0s(),e.j41(7,"th",17),e.EFF(8,"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e "),e.nrm(9,"p-sortIcon",18),e.k0s()())}function qi(n,s){if(1&n&&(e.j41(0,"tr",19)(1,"td",10)(2,"b"),e.EFF(3),e.k0s()()()),2&n){const t=s.$implicit;e.R7$(3),e.JRh(null==t.ozonWarehouse?null:t.ozonWarehouse.name)}}function Qi(n,s){if(1&n&&(e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s()()),2&n){const t=s.$implicit;e.R7$(2),e.JRh(t.productPackageID),e.R7$(2),e.JRh(t.productPackage.name),e.R7$(2),e.JRh(t.quantity)}}function Zi(n,s){if(1&n&&(e.j41(0,"tr")(1,"td",10)(2,"p-table",11),e.DNE(3,Ki,10,0,"ng-template",4)(4,qi,4,1,"ng-template",12)(5,Qi,7,3,"ng-template",5),e.k0s()()()),2&n){const t=s.$implicit;e.R7$(2),e.Y8G("value",t.orderItems)}}function eo(n,s){if(1&n){const t=e.RV6();e.j41(0,"ngx-barcode-scanner",22),e.bIt("valueChange",function(i){e.eBV(t);const u=e.XpG(2);return e.Njj(u.onValueChanged(i))}),e.k0s(),e.EFF(1)}if(2&n){const t=e.XpG(2);e.Y8G("codes",e.lJ4(3,Ui))("errorThreshold",.1),e.R7$(),e.SpI(" ",t.barcode," ")}}function to(n,s){if(1&n){const t=e.RV6();e.j41(0,"p-dialog",20),e.mxI("valueChange",function(i){e.eBV(t);const u=e.XpG();return e.DH7(u.barcode,i)||(u.barcode=i),e.Njj(i)})("visibleChange",function(i){e.eBV(t);const u=e.XpG();return e.DH7(u.showScanBarcodeDialog,i)||(u.showScanBarcodeDialog=i),e.Njj(i)}),e.DNE(1,eo,2,4,"ng-template",21),e.k0s()}if(2&n){const t=e.XpG();e.Aen(e.lJ4(7,Hi)),e.R50("value",t.barcode),e.Y8G("modal",!0),e.R50("visible",t.showScanBarcodeDialog),e.Y8G("draggable",!1)("resizable",!1)}}let no=(()=>{class n extends r.x{constructor(t,o,i,u){super(u),this.supplyOrderClient=t,this.supplyOrderCommandHandler=o,this.messageService=i,this.findSupplyOrdersSubject=new b.t(null),this.rows=50}closeCellEdit(){}editComplete(t){if("ozonCrossDockWarehouseID"==t.field){const o=t.data;this.supplyOrderCommandHandler.updateOzonSupplyOrderCrossDockWarehouse(o.iD,o.ozonCrossDockWarehouse?.iD).pipe((0,y.W)(i=>(this.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430",severity:"error",detail:i}),p.w))).subscribe()}}ngOnInit(){this.titleService.setTitle("\u041f\u043e\u0441\u0442\u0430\u0432\u043a\u0438 Ozon"),this.findSupplyOrdersSubject.pipe((0,E.p)(t=>!!t)).pipe((0,C.Q)(this.destroyed)).pipe((0,Vi.T)(t=>{this.findSupplyOrders(t)}))}onValueChanged(t){}scanBarcode(){this.showScanBarcodeDialog=!0}findSupplyOrders(t){this.supplyOrderClient.findOzonSupplyOrders(t).pipe((0,C.Q)(this.destroyed)).pipe((0,y.W)(o=>(this.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430",severity:"error",detail:o}),p.w))).subscribe(o=>{this.data=o.items,this.data.forEach(i=>{const u=i.orderItems.reduce((R,x)=>(x.ozonWarehouse?.name&&R.add(x.ozonWarehouse.name),R),new Set),d=i;d.statusName=this.getOrderStatusName(i.status),d.warehouses=[...u].join(", "),d.link=`${i.state==a.D.SupplyOrderState.DataFilling?"https://seller.ozon.ru/app/supply/orders/draft":"https://seller.ozon.ru/app/supply/orders"}/${d.iD}`}),this.totalRecords=o.totalCount})}getOrderStatusName(t){let o;const i=Object.values(a.D.SupplyOrderState);switch(null==t?a.D.SupplyOrderState.Unknown:i[t]){case a.D.SupplyOrderState.AcceptanceAtStorageWarehouse:o="\u041f\u0440\u0438\u0451\u043c\u043a\u0430 \u043d\u0430 \u0441\u043a\u043b\u0430\u0434\u0435 \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f";break;case a.D.SupplyOrderState.Cancelled:o="\u041e\u0442\u043c\u0435\u043d\u0435\u043d\u0430";break;case a.D.SupplyOrderState.DataFilling:o="\u0417\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435";break;case a.D.SupplyOrderState.AcceptedAtSupplyWarehouse:o="\u041f\u0440\u0438\u043d\u044f\u0442\u0430 \u043d\u0430 \u0441\u043a\u043b\u0430\u0434\u0435 \u043e\u0442\u0433\u0440\u0443\u0437\u043a\u0438";break;case a.D.SupplyOrderState.Completed:o="\u0417\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u0430";break;case a.D.SupplyOrderState.InTransit:o="\u0412 \u043f\u0443\u0442\u0438";break;case a.D.SupplyOrderState.ReadyToSupply:o="\u0413\u043e\u0442\u043e\u0432\u0430 \u043a \u043e\u0442\u0433\u0440\u0443\u0437\u043a\u0435";break;case a.D.SupplyOrderState.RejectedAtSupplyWarehouse:o="\u041e\u0442\u043a\u0430\u0437\u0430\u043d\u043e \u0432 \u043f\u0440\u0438\u0451\u043c\u043a\u0435";break;case a.D.SupplyOrderState.ReportRejected:o="\u0421\u043f\u043e\u0440";break;case a.D.SupplyOrderState.ReportsConfirmationAwaiting:o="\u0421\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u0435 \u0430\u043a\u0442\u043e\u0432";break;case a.D.SupplyOrderState.Unknown:o="\u0421\u0442\u0430\u0442\u0443\u0441 \u043d\u0435 \u0437\u0430\u0434\u0430\u043d";break;default:throw Error(`Unsupported status ${t}`)}return o}onDataLazyLoad(t){const o=new a.D.FindOzonSupplyOrdersModel({offset:t.first,count:t.rows});this.findSupplyOrdersSubject.next(o),this.findSupplyOrders(o)}importSupplyOrders(){var t=this;return(0,O.A)(function*(){t.supplyOrderCommandHandler.updateOzonSupplyOrders().pipe((0,y.W)(o=>(t.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0438\u043c\u043f\u043e\u0440\u0442\u0430 \u0437\u0430\u044f\u0432\u043e\u043a \u043d\u0430 \u043f\u043e\u0441\u0442\u0430\u0432\u043a\u0443",severity:"error",detail:o}),p.w))).subscribe(()=>{t.messageService.add({summary:"\u0423\u0441\u043f\u0435\u0445",severity:"success",detail:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0437\u0430\u044f\u0432\u043e\u043a \u043d\u0430 \u043f\u043e\u0441\u0442\u0430\u0432\u043a\u0443 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u0430"}),t.onDataLazyLoad({first:0,rows:t.rows})})})()}static{this.\u0275fac=function(o){return new(o||n)(e.rXU(a.D.OzonSupplyOrderClient),e.rXU(l.X.OzonSupplyOrderClient),e.rXU(c.bg),e.rXU(h.hE))}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-ozon-supply-order-list"]],viewQuery:function(o,i){if(1&o&&e.GBs(Ni,5),2&o){let u;e.mGM(u=e.lsd())&&(i.table=u.first)}},features:[e.Vt3],decls:9,vars:11,consts:[["table",""],["label","\u0421\u043a\u0430\u043d\u0438\u0440\u043e\u0432\u0430\u0442\u044c",3,"click"],["pButton","","pRipple","","type","button","label","\u0418\u043c\u043f\u043e\u0440\u0442 \u0437\u0430\u044f\u0432\u043e\u043a \u043d\u0430 \u043f\u043e\u0441\u0442\u0430\u0432\u043a\u0443",1,"ml-1",3,"click"],["dataKey","iD","editMode","cell",3,"onLazyLoad","onEditComplete","value","lazy","tableStyle","paginator","rows","rowsPerPageOptions","totalRecords","loading"],["pTemplate","header"],["pTemplate","body"],["pTemplate","rowexpansion"],["header","\u0421\u043a\u0430\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u0434\u0430",3,"value","modal","style","visible","draggable","resizable","valueChange","visibleChange",4,"ngIf"],["target","_blank",3,"href"],["type","button","pButton","","pRipple","",1,"p-button-text","p-button-rounded","p-button-plain",3,"pRowToggler","icon"],["colspan","7"],["rowGroupMode","subheader","groupRowsBy","ozonWarehouse?.name",3,"value"],["pTemplate","groupheader"],["pSortableColumn","productPackageID"],["field","productPackageID"],["pSortableColumn","productPackage.name"],["field","productPackage.name"],["pSortableColumn","quantity"],["field","quantity"],["pRowGroupHeader",""],["header","\u0421\u043a\u0430\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u0434\u0430",3,"valueChange","visibleChange","value","modal","visible","draggable","resizable"],["pTemplate","content"],["width","300",3,"valueChange","codes","errorThreshold"]],template:function(o,i){if(1&o){const u=e.RV6();e.nrm(0,"p-toast"),e.j41(1,"p-button",1),e.bIt("click",function(){return e.eBV(u),e.Njj(i.scanBarcode())}),e.k0s(),e.j41(2,"button",2),e.bIt("click",function(){return e.eBV(u),e.Njj(i.importSupplyOrders())}),e.k0s(),e.j41(3,"p-table",3,0),e.bIt("onLazyLoad",function(k){return e.eBV(u),e.Njj(i.onDataLazyLoad(k))})("onEditComplete",function(k){return e.eBV(u),e.Njj(i.editComplete(k))}),e.DNE(5,Wi,14,0,"ng-template",4)(6,Ji,17,12,"ng-template",5)(7,Zi,6,1,"ng-template",6),e.k0s(),e.DNE(8,to,2,8,"p-dialog",7)}2&o&&(e.R7$(3),e.Y8G("value",i.data)("lazy",!0)("tableStyle",e.lJ4(9,Xi))("paginator",!0)("rows",i.rows)("rowsPerPageOptions",e.lJ4(10,Yi))("totalRecords",i.totalRecords)("loading",i.loading),e.R7$(5),e.Y8G("ngIf",i.showScanBarcodeDialog))},dependencies:[c.Ei,T._f,T.$n,g.bT,de.l,M.XI,M.Tg,M.$I,M.FP,M.yc,Q.y8,g.vh]})}}return n})();var fe=m(5558),Ce=m(2102);const io=()=>[50,250,1e3],oo=()=>({"max-width":"300px"}),ao=()=>({"min-width":"50rem"});function ro(n,s){if(1&n&&(e.j41(0,"div"),e.EFF(1),e.nI1(2,"number"),e.k0s(),e.j41(3,"div"),e.EFF(4),e.nI1(5,"number"),e.k0s(),e.j41(6,"div"),e.EFF(7),e.nI1(8,"number"),e.k0s(),e.j41(9,"div"),e.EFF(10),e.nI1(11,"number"),e.k0s()),2&n){const t=e.XpG().ngIf;e.R7$(),e.SpI("\u0421\u0443\u043c\u043c\u0430: ",e.i5U(2,4,t.sum,"1.2-2"),""),e.R7$(3),e.SpI("\u041d\u0430\u0447\u0438\u0441\u043b\u0435\u043d\u043e: ",e.i5U(5,7,t.accrual,"1.2-2"),""),e.R7$(3),e.SpI("\u041a\u043e\u043c\u0438\u0441\u0441\u0438\u044f: ",e.i5U(8,10,t.commission,"1.2-2"),""),e.R7$(3),e.SpI("\u041d\u0430\u0447\u0438\u0441\u043b\u0435\u043d\u043e \u0437\u0430 \u0432\u044b\u0447\u0435\u0442\u043e\u043c \u043a\u043e\u043c\u0438\u0441\u0441\u0438\u0438: ",e.i5U(11,13,t.accrual+t.commission,"1.2-2"),"")}}function lo(n,s){if(1&n){const t=e.RV6();e.j41(0,"tr")(1,"th"),e.EFF(2,"ID"),e.k0s(),e.j41(3,"th"),e.EFF(4,"\u0414\u0430\u0442\u0430"),e.k0s(),e.j41(5,"th",11),e.EFF(6,"\u0421\u0443\u043c\u043c\u0430 "),e.nrm(7,"p-sortIcon",12),e.k0s(),e.j41(8,"th"),e.EFF(9,"\u0421\u0435\u0440\u0432\u0438\u0441\u044b"),e.k0s(),e.nrm(10,"th"),e.k0s(),e.j41(11,"tr"),e.nrm(12,"th")(13,"th")(14,"th"),e.j41(15,"th")(16,"p-multiSelect",13),e.mxI("ngModelChange",function(i){e.eBV(t);const u=e.XpG(2);return e.DH7(u.selectedServiceTypes,i)||(u.selectedServiceTypes=i),e.Njj(i)}),e.bIt("onChange",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.filterData())}),e.k0s()(),e.nrm(17,"th"),e.k0s()}if(2&n){const t=e.XpG(2);e.R7$(16),e.Aen(e.lJ4(4,oo)),e.R50("ngModel",t.selectedServiceTypes),e.Y8G("options",t.serviceTypes)}}function uo(n,s){if(1&n&&(e.j41(0,"div")(1,"div",17)(2,"div"),e.EFF(3),e.k0s(),e.j41(4,"div"),e.EFF(5),e.nI1(6,"number"),e.k0s()()()),2&n){const t=s.$implicit,o=e.XpG(3);e.R7$(3),e.JRh(o.getOperationServiceType(t.type)),e.R7$(2),e.JRh(e.i5U(6,2,t.price,"1.2-2"))}}function so(n,s){if(1&n&&(e.j41(0,"tr",14)(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.nI1(5,"date"),e.k0s(),e.j41(6,"td")(7,"span",15),e.EFF(8,"\u0421\u0443\u043c\u043c\u0430"),e.k0s(),e.j41(9,"div"),e.EFF(10),e.nI1(11,"number"),e.k0s()(),e.j41(12,"td"),e.DNE(13,uo,7,5,"div",16),e.k0s(),e.j41(14,"td"),e.EFF(15),e.k0s()()),2&n){const t=s.$implicit,o=e.XpG(2);e.Y8G("pRowToggler",t),e.R7$(2),e.SpI(" ",t.iD," "),e.R7$(2),e.SpI(" ",e.i5U(5,6,t.date,"y-MM-dd HH:mm")," "),e.R7$(6),e.SpI(" ",e.i5U(11,9,t.amount,"1.2-2"),"\u20bd "),e.R7$(3),e.Y8G("ngForOf",t.services),e.R7$(2),e.JRh(o.getOperationType(t.operationType))}}function co(n,s){1&n&&(e.j41(0,"tr")(1,"th"),e.EFF(2,"\u0422\u0438\u043f"),e.k0s(),e.j41(3,"th"),e.EFF(4,"\u0421\u0443\u043c\u043c\u0430"),e.k0s()())}function po(n,s){if(1&n&&(e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s()()),2&n){const t=s.$implicit,o=e.XpG(3);e.R7$(2),e.Lme("",o.getOperationServiceType(t.type),"",t.type,""),e.R7$(2),e.JRh(t.price)}}function _o(n,s){if(1&n&&(e.j41(0,"tr")(1,"td",18)(2,"h5"),e.EFF(3,"\u0421\u0435\u0440\u0432\u0438\u0441\u044b \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438"),e.k0s()()(),e.j41(4,"tr")(5,"td",18)(6,"p-table",19),e.DNE(7,co,5,0,"ng-template",8)(8,po,5,3,"ng-template",9),e.k0s()()()),2&n){const t=s.$implicit;e.R7$(6),e.Y8G("value",t.services)("breakpoint","960px")("tableStyle",e.lJ4(3,ao))}}function fo(n,s){if(1&n){const t=e.RV6();e.j41(0,"div",5)(1,"p-table",6),e.bIt("onPage",function(i){e.eBV(t);const u=e.XpG();return e.Njj(u.pageChange(i))}),e.DNE(2,ro,12,16,"ng-template",7)(3,lo,18,5,"ng-template",8)(4,so,16,12,"ng-template",9)(5,_o,9,4,"ng-template",10),e.k0s()()}if(2&n){const t=s.ngIf,o=e.XpG();e.R7$(),e.Y8G("value",t.items)("loading",o.loading)("totalRecords",t.totalCount)("paginator",!0)("showCurrentPageReport",!1)("rows",o.rows)("rowsPerPageOptions",e.lJ4(7,io))}}let mo=(()=>{class n extends r.x{constructor(t,o,i,u,d){super(d),this.operationClient=t,this.messageService=o,this.operationCommandHandler=i,this.timeService=u,this.rows=50,this.isLoading=!1,this.serviceTypes=[],this.selectedServiceTypes=[],this.operationServiceTypes=Object.values(a.D.OperationServiceType),this.operationTypes=Object.values(a.D.OperationType),this.filteredData=new b.t(null),this.dataSubject=new b.t(null),this.filterSubject=new b.t(null),this.serviceTypes=Object.keys(a.D.OperationServiceType).map(k=>({type:k,text:a.D.OperationServiceType[k]})).sort((k,R)=>k.text>R.text?1:R.text>k.text?-1:0)}ngOnInit(){this.titleService.setTitle("\u0422\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0438 Ozon"),this.filterSubject.pipe((0,C.Q)(this.destroyed)).pipe((0,E.p)(t=>!!t)).pipe((0,fe.n)(t=>this.operationClient.findOzonOperations(t).pipe((0,y.W)(o=>(this.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430",severity:"error",detail:o}),p.w))))).subscribe(t=>{this.dataSubject.next(t)}),this.dataSubject.pipe((0,C.Q)(this.destroyed)).pipe((0,E.p)(t=>!!t)).pipe((0,y.W)(t=>(this.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430",severity:"error",detail:t}),p.w))).subscribe(()=>{this.filterData()})}filterData(){const t=this.dataSubject.value,o=[];let i=0,u=0,d=0;if(t)for(const R of t.items){let x=!0;const G=Object.assign({},R);if(this.selectedServiceTypes.length){const P=G.services.filter(H=>this.selectedServiceTypes.find(F=>F==H.type));P.length?G.services=P:x=!1}x&&(o.push(G),u+=G.accrualsForSale,d+=G.saleCommission,i+=G.services.reduce((P,H)=>P+H.price,0)??0)}this.filteredData.next({totalCount:o.length,items:o,sum:i,commission:d,accrual:u})}importTransactions(){var t=this;return(0,O.A)(function*(){const[o,i]=[t.timeService.asUtc(t.dateRange?.[0]),t.timeService.asUtc(t.dateRange?.[1])];t.operationCommandHandler.importOzonOperations(o,i).pipe((0,y.W)(u=>(t.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430",severity:"error",detail:u}),p.w))).subscribe(()=>{t.messageService.add({summary:"\u0423\u0441\u043f\u0435\u0445",severity:"success",detail:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0439 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u0430"}),t.findTransactionsClick()})})()}findTransactionsClick(){const t=new a.D.FindOzonOperationsModel({dateFrom:this.timeService.asUtc(this.dateRange?.[0]),dateTo:this.timeService.asUtc(this.dateRange?.[1]),offset:0,count:this.rows});this.filterSubject.next(t)}getOperationServiceType(t){return this.operationServiceTypes[t]}getOperationType(t){return this.operationTypes[t]}static{this.\u0275fac=function(o){return new(o||n)(e.rXU(a.D.OperationClient),e.rXU(c.bg),e.rXU(l.X.OperationClient),e.rXU(Ce.v),e.rXU(h.hE))}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-ozon-transaction-list"]],features:[e.Vt3],decls:7,vars:7,consts:[["header","\u0422\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0438 Ozon"],["styleClass","m-1","selectionMode","range","placeholder","\u041f\u0435\u0440\u0438\u043e\u0434",3,"ngModelChange","ngModel","showClear","readonlyInput"],["styleClass","m-1","icon","pi pi-search","label","\u041d\u0430\u0439\u0442\u0438 \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0438",3,"click"],["styleClass","m-1","label","\u0418\u043c\u043f\u043e\u0440\u0442 \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0439",3,"click","icon"],["class","card",4,"ngIf"],[1,"card"],["responsiveLayout","stack","dataKey","iD",3,"onPage","value","loading","totalRecords","paginator","showCurrentPageReport","rows","rowsPerPageOptions"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","rowexpansion"],["pSortableColumn","sum"],["field","amount"],["appendTo","body","optionValue","type","optionLabel","text","placeholder","\u0412\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0435",3,"ngModelChange","onChange","ngModel","options"],[3,"pRowToggler"],[1,"p-column-title"],[4,"ngFor","ngForOf"],[1,"flex","justify-content-between"],["colspan","5"],["responsiveLayout","stack",3,"value","breakpoint","tableStyle"]],template:function(o,i){1&o&&(e.nrm(0,"p-toast"),e.j41(1,"p-card",0)(2,"p-calendar",1),e.mxI("ngModelChange",function(d){return e.DH7(i.dateRange,d)||(i.dateRange=d),d}),e.k0s(),e.j41(3,"p-button",2),e.bIt("click",function(){return i.findTransactionsClick()}),e.k0s(),e.j41(4,"p-button",3),e.bIt("click",function(){return i.importTransactions()}),e.k0s()(),e.DNE(5,fo,6,8,"div",4),e.nI1(6,"async")),2&o&&(e.R7$(2),e.R50("ngModel",i.dateRange),e.Y8G("showClear",!0)("readonlyInput",!0),e.R7$(2),e.Y8G("icon",i.isLoading?"pi pi-download":""),e.R7$(),e.Y8G("ngIf",e.bMT(6,5,i.filteredData)))},dependencies:[c.Ei,T.$n,w.Vv,$.Z,g.Sq,g.bT,z.BC,z.vS,ae,M.XI,M.Tg,M.FP,M.yc,Q.y8,g.Jj,g.QX,g.vh]})}}return n})();const ho=()=>[8,15,30,50],go=()=>({}),ge=()=>({"min-width":"50rem"});function vo(n,s){1&n&&(e.j41(0,"div",22)(1,"span",23),e.EFF(2,"\u0410\u0440\u0442\u0438\u043a\u0443\u043b\u044b"),e.k0s()())}function bo(n,s){if(1&n){const t=e.RV6();e.j41(0,"p-multiSelect",24),e.bIt("onChange",function(i){const u=e.eBV(t).filterCallback;return e.Njj(u(i.value))}),e.k0s()}if(2&n){const t=s.$implicit,o=e.XpG(4);e.Y8G("ngModel",t)("filter",!1)("options",o.productPackageIDs)}}function yo(n,s){1&n&&(e.j41(0,"tr")(1,"th"),e.EFF(2," \u0422\u043e\u0432\u0430\u0440 "),e.j41(3,"p-columnFilter",15),e.DNE(4,vo,3,0,"ng-template",12)(5,bo,1,3,"ng-template",16),e.k0s()(),e.j41(6,"th",17),e.EFF(7,"\u0421\u0443\u043c\u043c\u0430 "),e.nrm(8,"p-sortIcon",18),e.k0s(),e.j41(9,"th",19),e.EFF(10,"\u0414\u0430\u0442\u0430 "),e.nrm(11,"p-sortIcon",20),e.k0s(),e.j41(12,"th"),e.EFF(13," \u2116 \u0437\u0430\u043a\u0430\u0437\u0430 "),e.nrm(14,"p-columnFilter",21),e.k0s()()),2&n&&(e.R7$(3),e.Y8G("showMatchModes",!1)("showOperator",!1)("showAddButton",!1),e.R7$(11),e.Y8G("showMatchModes",!1)("showOperator",!1))}function Oo(n,s){if(1&n&&(e.j41(0,"div")(1,"div"),e.EFF(2),e.k0s(),e.EFF(3),e.k0s()),2&n){const t=s.$implicit;e.R7$(2),e.JRh(t.product.name),e.R7$(),e.Lme(" ",t.product.productPackageID," x ",t.quantity," ")}}function So(n,s){if(1&n&&(e.j41(0,"tr",25)(1,"td"),e.DNE(2,Oo,4,3,"div",26),e.k0s(),e.j41(3,"td")(4,"div"),e.EFF(5),e.nI1(6,"number"),e.k0s()(),e.j41(7,"td")(8,"div"),e.EFF(9),e.nI1(10,"date"),e.k0s()(),e.j41(11,"td")(12,"div"),e.EFF(13),e.k0s()()()),2&n){const t=s.$implicit;e.Y8G("pRowToggler",t),e.R7$(2),e.Y8G("ngForOf",t.orderItems),e.R7$(3),e.SpI(" ",e.i5U(6,5,t.sum,"1.2-2"),"\u20bd "),e.R7$(4),e.SpI(" ",e.i5U(10,8,t.date,"y-MM-dd HH:mm")," "),e.R7$(4),e.SpI(" ",t.ozonOrderNumber," ")}}function Eo(n,s){1&n&&(e.j41(0,"tr")(1,"th"),e.EFF(2,"\u0410\u0440\u0442\u0438\u043a\u0443\u043b"),e.k0s(),e.j41(3,"th"),e.EFF(4,"\u0426\u0435\u043d\u0430"),e.k0s(),e.j41(5,"th"),e.EFF(6,"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e"),e.k0s(),e.j41(7,"th"),e.EFF(8,"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435"),e.k0s()())}function Co(n,s){if(1&n&&(e.j41(0,"tr")(1,"td")(2,"div")(3,"span",30),e.EFF(4,"\u0410\u0440\u0442\u0438\u043a\u0443\u043b"),e.k0s(),e.j41(5,"div"),e.EFF(6),e.k0s()()(),e.j41(7,"td")(8,"div")(9,"span",30),e.EFF(10,"\u0426\u0435\u043d\u0430"),e.k0s(),e.j41(11,"div"),e.EFF(12),e.nI1(13,"number"),e.k0s()()(),e.j41(14,"td")(15,"div")(16,"span",30),e.EFF(17,"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e"),e.k0s(),e.j41(18,"div"),e.EFF(19),e.k0s()()(),e.j41(20,"td")(21,"div")(22,"span",30),e.EFF(23,"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435"),e.k0s(),e.j41(24,"div"),e.EFF(25),e.k0s()()()()),2&n){const t=s.$implicit;e.R7$(6),e.SpI(" ",t.product.productPackageID," "),e.R7$(6),e.SpI(" ",e.i5U(13,4,t.price,"1.2-2"),"\u20bd "),e.R7$(7),e.SpI(" ",t.quantity," "),e.R7$(6),e.SpI(" ",t.product.name," ")}}function ko(n,s){1&n&&(e.j41(0,"tr")(1,"th"),e.EFF(2,"ID"),e.k0s(),e.j41(3,"th"),e.EFF(4,"\u0414\u0430\u0442\u0430"),e.k0s(),e.j41(5,"th"),e.EFF(6,"\u0421\u0443\u043c\u043c\u0430"),e.k0s(),e.j41(7,"th"),e.EFF(8,"\u041a\u043e\u043c\u0438\u0441\u0441\u0438\u044f"),e.k0s(),e.j41(9,"th"),e.EFF(10,"\u0422\u0438\u043f \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438"),e.k0s(),e.j41(11,"th"),e.EFF(12,"\u0422\u0438\u043f \u043d\u0430\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u044f"),e.k0s()())}function Io(n,s){if(1&n&&(e.j41(0,"tr")(1,"td")(2,"div")(3,"span",30),e.EFF(4,"ID"),e.k0s(),e.j41(5,"div"),e.EFF(6),e.k0s()()(),e.j41(7,"td")(8,"div")(9,"span",30),e.EFF(10,"\u0414\u0430\u0442\u0430"),e.k0s(),e.j41(11,"div"),e.EFF(12),e.nI1(13,"date"),e.k0s()()(),e.j41(14,"td")(15,"div")(16,"span",30),e.EFF(17,"\u0421\u0443\u043c\u043c\u0430"),e.k0s(),e.j41(18,"div"),e.EFF(19),e.nI1(20,"number"),e.k0s()()(),e.j41(21,"td")(22,"div")(23,"span",30),e.EFF(24,"\u041a\u043e\u043c\u0438\u0441\u0441\u0438\u044f"),e.k0s(),e.j41(25,"div"),e.EFF(26),e.nI1(27,"number"),e.k0s()()(),e.j41(28,"td")(29,"div")(30,"span",30),e.EFF(31,"\u0422\u0438\u043f \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438"),e.k0s(),e.j41(32,"div"),e.EFF(33),e.k0s()()(),e.j41(34,"td")(35,"div")(36,"span",30),e.EFF(37,"\u0422\u0438\u043f \u043d\u0430\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u044f"),e.k0s(),e.j41(38,"div"),e.EFF(39),e.k0s()()()()),2&n){const t=s.$implicit,o=e.XpG(7);e.R7$(6),e.SpI(" ",t.iD," "),e.R7$(6),e.SpI(" ",e.i5U(13,6,t.date,"y-MM-dd HH:mm")," "),e.R7$(7),e.SpI(" ",e.i5U(20,9,t.amount,"1.2-2"),"\u20bd "),e.R7$(7),e.SpI(" ",e.i5U(27,12,t.saleCommission,"1.2-2"),"\u20bd "),e.R7$(7),e.SpI(" ",o.getOperationTypeText(t.operationType)," "),e.R7$(6),e.SpI(" ",o.getTransactionTypeText(t.accrualType)," ")}}function Fo(n,s){if(1&n&&(e.qex(0),e.j41(1,"tr")(2,"td",28)(3,"h5"),e.EFF(4,"\u041e\u043f\u0435\u0440\u0430\u0446\u0438\u0438 \u043f\u043e \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044e"),e.k0s()()(),e.j41(5,"tr")(6,"td",28)(7,"p-table",29),e.DNE(8,ko,13,0,"ng-template",12)(9,Io,40,15,"ng-template",13),e.k0s()()(),e.bVm()),2&n){const t=e.XpG().$implicit;e.R7$(7),e.Y8G("value",t.operations)("breakpoint","960px")("tableStyle",e.lJ4(3,ge))}}function To(n,s){if(1&n&&(e.qex(0),e.j41(1,"tr")(2,"td",28)(3,"p-table",29),e.DNE(4,Eo,9,0,"ng-template",12)(5,Co,26,7,"ng-template",13),e.k0s()()(),e.DNE(6,Fo,10,4,"ng-container",27),e.bVm()),2&n){const t=s.$implicit;e.R7$(3),e.Y8G("value",t.orderItems)("breakpoint","960px")("tableStyle",e.lJ4(4,ge)),e.R7$(3),e.Y8G("ngIf",null==t.operations?null:t.operations.length)}}function Ro(n,s){if(1&n&&(e.qex(0),e.j41(1,"tr")(2,"td",28)(3,"h5"),e.EFF(4,"\u0421\u043e\u0441\u0442\u0430\u0432 \u0437\u0430\u043a\u0430\u0437\u0430"),e.k0s()()(),e.DNE(5,To,7,5,"ng-container",26),e.bVm()),2&n){const t=e.XpG().$implicit;e.R7$(5),e.Y8G("ngForOf",t.orderItems)}}function wo(n,s){1&n&&(e.j41(0,"tr")(1,"th"),e.EFF(2,"ID"),e.k0s(),e.j41(3,"th"),e.EFF(4,"\u0414\u0430\u0442\u0430"),e.k0s(),e.j41(5,"th"),e.EFF(6,"\u0421\u0443\u043c\u043c\u0430"),e.k0s(),e.j41(7,"th"),e.EFF(8,"\u041a\u043e\u043c\u0438\u0441\u0441\u0438\u044f"),e.k0s(),e.j41(9,"th"),e.EFF(10,"\u0422\u0438\u043f \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438"),e.k0s(),e.j41(11,"th"),e.EFF(12,"\u0422\u0438\u043f \u043d\u0430\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u044f"),e.k0s()())}function Do(n,s){if(1&n&&(e.j41(0,"tr")(1,"td")(2,"div")(3,"span",30),e.EFF(4,"ID"),e.k0s(),e.j41(5,"div"),e.EFF(6),e.k0s()()(),e.j41(7,"td")(8,"div")(9,"span",30),e.EFF(10,"\u0414\u0430\u0442\u0430"),e.k0s(),e.j41(11,"div"),e.EFF(12),e.nI1(13,"date"),e.k0s()()(),e.j41(14,"td")(15,"div")(16,"span",30),e.EFF(17,"\u0421\u0443\u043c\u043c\u0430"),e.k0s(),e.j41(18,"div"),e.EFF(19),e.nI1(20,"number"),e.k0s()()(),e.j41(21,"td")(22,"div")(23,"span",30),e.EFF(24,"\u041a\u043e\u043c\u0438\u0441\u0441\u0438\u044f"),e.k0s(),e.j41(25,"div"),e.EFF(26),e.nI1(27,"number"),e.k0s()()(),e.j41(28,"td")(29,"div")(30,"span",30),e.EFF(31,"\u0422\u0438\u043f \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438"),e.k0s(),e.j41(32,"div"),e.EFF(33),e.k0s()()(),e.j41(34,"td")(35,"div")(36,"span",30),e.EFF(37,"\u0422\u0438\u043f \u043d\u0430\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u044f"),e.k0s(),e.j41(38,"div"),e.EFF(39),e.k0s()()()()),2&n){const t=s.$implicit,o=e.XpG(5);e.R7$(6),e.SpI(" ",t.iD," "),e.R7$(6),e.SpI(" ",e.i5U(13,6,t.date,"y-MM-dd HH:mm")," "),e.R7$(7),e.SpI(" ",e.i5U(20,9,t.amount,"1.2-2"),"\u20bd "),e.R7$(7),e.SpI(" ",e.i5U(27,12,t.saleCommission,"1.2-2"),"\u20bd "),e.R7$(7),e.SpI(" ",o.getOperationTypeText(t.operationType)," "),e.R7$(6),e.SpI(" ",o.getTransactionTypeText(t.accrualType)," ")}}function xo(n,s){if(1&n&&(e.qex(0),e.j41(1,"tr")(2,"td",28)(3,"h5"),e.EFF(4,"\u041e\u043f\u0435\u0440\u0430\u0446\u0438\u0438 \u043f\u043e \u0437\u0430\u043a\u0430\u0437\u0443"),e.k0s()()(),e.j41(5,"tr")(6,"td",28)(7,"p-table",31),e.DNE(8,wo,13,0,"ng-template",12)(9,Do,40,15,"ng-template",13),e.k0s()()(),e.bVm()),2&n){const t=e.XpG().$implicit;e.R7$(7),e.Y8G("value",t.operations)("breakpoint","960px")("tableStyle",e.lJ4(3,ge))}}function jo(n,s){if(1&n&&e.DNE(0,Ro,6,1,"ng-container",27)(1,xo,10,4,"ng-container",27),2&n){const t=s.$implicit;e.Y8G("ngIf",null==t.orderItems?null:t.orderItems.length),e.R7$(),e.Y8G("ngIf",null==t.operations?null:t.operations.length)}}function Mo(n,s){if(1&n&&(e.j41(0,"p-table",11),e.DNE(1,yo,15,5,"ng-template",12)(2,So,14,11,"ng-template",13)(3,jo,2,2,"ng-template",14),e.k0s()),2&n){const t=e.XpG(2);e.Y8G("value",t.data)("loading",t.loading)("paginator",!0)("showCurrentPageReport",!1)("rows",8)("rowsPerPageOptions",e.lJ4(7,ho))("tableStyle",e.lJ4(8,go))}}function Po(n,s){if(1&n&&(e.j41(0,"div",3)(1,"div",4)(2,"div",5)(3,"div",6)(4,"div",7)(5,"div")(6,"div",8)(7,"span"),e.EFF(8,"\u0421\u0443\u043c\u043c\u0430 \u043f\u0440\u043e\u0434\u0430\u0436"),e.k0s(),e.j41(9,"span"),e.EFF(10),e.nI1(11,"number"),e.k0s()()()(),e.j41(12,"div",7)(13,"div")(14,"div",8)(15,"span"),e.EFF(16,"\u041a\u043e\u043c\u0438\u0441\u0441\u0438\u044f"),e.k0s(),e.j41(17,"span"),e.EFF(18),e.nI1(19,"number"),e.nI1(20,"number"),e.k0s()()()(),e.j41(21,"div",7)(22,"div")(23,"div",8)(24,"span"),e.EFF(25,"\u0412\u043e\u0437\u0432\u0440\u0430\u0442\u044b"),e.k0s(),e.j41(26,"span"),e.EFF(27),e.nI1(28,"number"),e.nI1(29,"number"),e.k0s()()()(),e.j41(30,"div",7)(31,"div")(32,"div",8)(33,"span"),e.EFF(34,"\u0421\u0435\u0440\u0432\u0438\u0441\u044b"),e.k0s(),e.j41(35,"span"),e.EFF(36),e.nI1(37,"number"),e.nI1(38,"number"),e.k0s()()()(),e.j41(39,"div",7)(40,"div")(41,"div",8)(42,"span"),e.EFF(43,"\u0421\u0435\u0440\u0432\u0438\u0441\u044b \u0437\u0430\u043a\u0430\u0437\u043e\u0432"),e.k0s(),e.j41(44,"span"),e.EFF(45),e.nI1(46,"number"),e.nI1(47,"number"),e.k0s()()()()()(),e.j41(48,"div",5)(49,"div",6)(50,"div",7)(51,"div",9),e.EFF(52,"\u0417\u0430\u043a\u0430\u0437\u044b"),e.k0s(),e.j41(53,"div")(54,"div",8)(55,"span"),e.EFF(56,"\u0417\u0430\u043a\u0430\u0437\u043e\u0432"),e.k0s(),e.j41(57,"span"),e.EFF(58),e.k0s()()(),e.j41(59,"div",8)(60,"span"),e.EFF(61,"\u0422\u043e\u0432\u0430\u0440\u043e\u0432"),e.k0s(),e.j41(62,"span"),e.EFF(63),e.k0s()(),e.j41(64,"div",8)(65,"span"),e.EFF(66,"\u041e\u0442\u043c\u0435\u043d"),e.k0s(),e.j41(67,"span"),e.EFF(68),e.k0s()(),e.j41(69,"div",8)(70,"span"),e.EFF(71,"\u0421\u0443\u043c\u043c\u0430 \u043e\u0442\u043c\u0435\u043d"),e.k0s(),e.j41(72,"span"),e.EFF(73),e.k0s()(),e.j41(74,"div",8)(75,"span"),e.EFF(76,"\u0412\u043e\u0437\u0432\u0440\u0430\u0442\u043e\u0432"),e.k0s(),e.j41(77,"span"),e.EFF(78),e.k0s()(),e.j41(79,"div",8)(80,"span"),e.EFF(81,"\u0421\u0443\u043c\u043c\u0430 \u0432\u043e\u0437\u0432\u0440\u0430\u0442\u043e\u0432"),e.k0s(),e.j41(82,"span"),e.EFF(83),e.k0s()()()()()(),e.DNE(84,Mo,4,9,"p-table",10),e.k0s()),2&n){const t=e.XpG();e.R7$(10),e.SpI("",e.i5U(11,16,t.summary.totalSum,"1.2-2"),"\u20bd"),e.R7$(8),e.Lme("",e.i5U(19,19,t.summary.commission,"1.2-2"),"\u20bd (",e.i5U(20,22,t.summary.totalSum+t.summary.commission,"1.2-2"),"\u20bd)"),e.R7$(9),e.Lme(" ",e.i5U(28,25,t.summary.returnedSum,"1.2-2"),"\u20bd (",e.i5U(29,28,t.summary.returnedProductCount+t.summary.totalSum+t.summary.commission-t.summary.returnedSum,"1.2-2"),"\u20bd) "),e.R7$(9),e.Lme("",e.i5U(37,31,t.summary.serviceTotalSum,"1.2-2"),"\u20bd (",e.i5U(38,34,t.summary.totalSum+t.summary.commission+t.summary.serviceTotalSum,"1.2-2"),"\u20bd)"),e.R7$(9),e.Lme("",e.i5U(46,37,t.summary.orderServiceTotalSum,"1.2-2"),"\u20bd (",e.i5U(47,40,t.summary.totalSum+t.summary.commission+t.summary.serviceTotalSum+t.summary.orderServiceTotalSum,"1.2-2"),"\u20bd)"),e.R7$(13),e.JRh(t.summary.totalOrderCount),e.R7$(5),e.JRh(t.summary.totalProductCount),e.R7$(5),e.JRh(t.summary.cancelledProductCount),e.R7$(5),e.JRh(t.summary.cancelledSum),e.R7$(5),e.JRh(t.summary.returnedProductCount),e.R7$(5),e.JRh(t.summary.returnedSum),e.R7$(),e.Y8G("ngIf",t.data)}}let Go=(()=>{class n extends r.x{constructor(t,o,i,u){super(u),this.ozonSalesOrderClient=t,this.messageService=o,this.timeService=i,this.data=[],this.excludedDates=[],this.productPackageIDs=[],this.loading=!1}ngOnInit(){this.titleService.setTitle("\u0421\u0432\u0435\u0440\u043a\u0430 \u0441 Ozon")}getDateRange(){const t=this.timeService.asUtc(this.date),o=new Date(t),i=new Date(t);return i.setMonth(i.getMonth()+1),[o,i]}prepareReport(){this.loading=!0;const[t,o]=this.getDateRange(),i=new Date(t);i.setMonth(i.getMonth()-1),this.ozonSalesOrderClient.findSalesOzonOrders(new a.D.FindPostingsModel({dateFrom:i,dateTo:o})).pipe((0,C.Q)(this.destroyed)).pipe((0,y.W)(u=>(this.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430",severity:"error",detail:u}),this.loading=!1,p.w))).subscribe(u=>{this.data=u.filter(P=>P.operations.reduce((H,F)=>H||=F.operationType==a.D.OperationType.OperationAgentDeliveredToCustomer&&(!t||F.date>=t)&&(!o||F.date<o),!1));const d=new Set,R={totalOrderCount:0,totalSum:0,totalProductCount:0,sumWithCommission:0,commission:0,orderServiceTotalSum:0,orderServiceTotalCount:0,serviceTotalSum:0,cancelledProductCount:0,returnedProductCount:0,cancelledSum:0,returnedSum:0,services:{},orderServices:{}},x={},G=[];for(const P of u){const H=P.operations.filter(L=>(!t||L.date>=t)&&(!o||L.date<o)),F=!!H.length;for(const L of H)if(L.postingNumber==P.ozonOrderNumber)for(const K of L.services)R.orderServices[K.type]=K.price+R.services[K.type],R.orderServiceTotalSum+=K.price,R.orderServiceTotalCount++,G.push(K.price);if(F){for(const L of P.orderItems){d.add(L.product.productPackageID);const K=[];x[L.product.productPackageID]||(x[L.product.productPackageID]={prices:{},operations:[]});const te=x[L.product.productPackageID];te.prices[L.price]||(te.prices[L.price]={quantity:0,sum:0,commission:0});const q=te.prices[L.price];q.quantity+=L.quantity,q.sum+=L.quantity*L.price;for(const U of H)if(U.postingNumber==L.postingNumber)switch(K.push(U),U.operationType){case a.D.OperationType.OperationAgentDeliveredToCustomer:R.totalProductCount+=L.quantity,q.commission+=U.saleCommission,R.commission+=U.saleCommission,R.totalSum+=L.price*L.quantity;for(const W of U.services)R.services[W.type]=W.price+(R.services[W.type]??0),R.serviceTotalSum+=W.price;break;case a.D.OperationType.ClientReturnAgentOperation:q.commission+=U.saleCommission,R.commission+=U.saleCommission,R.returnedProductCount+=L.quantity,R.returnedSum+=U.amount,R.totalSum-=L.price*L.quantity;for(const W of U.services)R.services[W.type]=W.price+(R.services[W.type]??0),R.serviceTotalSum+=W.price;break;case a.D.OperationType.OperationItemReturn:R.commission+=U.saleCommission,R.cancelledProductCount+=L.quantity;for(const W of U.services)R.services[W.type]=W.price+(R.services[W.type]??0),R.serviceTotalSum+=W.price;break;default:console.log("x",U)}}R.totalOrderCount++}}this.summary=R,this.loading=!1})}static{this.\u0275fac=function(o){return new(o||n)(e.rXU(a.D.OzonSalesOrderClient),e.rXU(c.bg),e.rXU(Ce.v),e.rXU(h.hE))}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-sales-reconciliation-report"]],features:[e.Vt3],decls:4,vars:4,consts:[["header","\u0421\u0432\u0435\u0440\u043a\u0430 Ozon"],["selectionMode","single","view","month","dateFormat","yy-mm","placeholder","\u041f\u0435\u0440\u0438\u043e\u0434",3,"ngModelChange","onSelect","ngModel","disabledDates","readonlyInput"],["class","card",4,"ngIf"],[1,"card"],[1,"grid"],[1,"col-12","md:col-6"],[1,"card","text-right"],[1,"text-900","font-medium","text-xl","mb-3"],[1,"flex","justify-content-between"],[1,"text-500","text-center"],["responsiveLayout","stack","dataKey","iD",3,"value","loading","paginator","showCurrentPageReport","rows","rowsPerPageOptions","tableStyle",4,"ngIf"],["responsiveLayout","stack","dataKey","iD",3,"value","loading","paginator","showCurrentPageReport","rows","rowsPerPageOptions","tableStyle"],["pTemplate","header"],["pTemplate","body"],["pTemplate","rowexpansion"],["field","product","matchMode","intersects","display","menu",3,"showMatchModes","showOperator","showAddButton"],["pTemplate","filter"],["pSortableColumn","sum"],["field","sum"],["pSortableColumn","date"],["field","date"],["field","ozonOrderNumber","matchMode","contains","display","menu",3,"showMatchModes","showOperator"],[1,"px-3","pt-3","pb-0"],[1,"font-bold"],["placeholder","\u0412\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0435",3,"onChange","ngModel","filter","options"],[3,"pRowToggler"],[4,"ngFor","ngForOf"],[4,"ngIf"],["colspan","4"],["responsiveLayout","stack",3,"value","breakpoint","tableStyle"],[1,"p-column-title","font-bold"],["dataKey","iD","responsiveLayout","stack",3,"value","breakpoint","tableStyle"]],template:function(o,i){1&o&&(e.nrm(0,"p-toast"),e.j41(1,"p-card",0)(2,"p-calendar",1),e.mxI("ngModelChange",function(d){return e.DH7(i.date,d)||(i.date=d),d}),e.bIt("onSelect",function(){return i.prepareReport()}),e.k0s()(),e.DNE(3,Po,85,43,"div",2)),2&o&&(e.R7$(2),e.R50("ngModel",i.date),e.Y8G("disabledDates",i.excludedDates)("readonlyInput",!0),e.R7$(),e.Y8G("ngIf",i.summary))},dependencies:[c.Ei,w.Vv,$.Z,g.Sq,g.bT,z.BC,z.vS,ae,M.XI,M.Tg,M.FP,M.yc,M.rl,Q.y8,g.QX,g.vh]})}}return n})();const Bo=["inputtext"],zo=["container"],Lo=(n,s,t,o)=>({"p-chips p-component p-input-wrapper":!0,"p-disabled":n,"p-focus":s,"p-inputwrapper-filled":t,"p-inputwrapper-focus":o}),Ao=n=>({"p-inputtext p-chips-multiple-container":!0,"p-variant-filled":n}),$o=n=>({"p-chips-clearable":n}),Vo=n=>({"p-chips-token":!0,"p-focus":n}),No=n=>({$implicit:n});function Xo(n,s){1&n&&e.eu8(0)}function Yo(n,s){if(1&n&&(e.j41(0,"span",12),e.EFF(1),e.k0s()),2&n){const t=e.XpG().$implicit,o=e.XpG();e.BMQ("data-pc-section","label"),e.R7$(),e.JRh(o.field?o.resolveFieldData(t,o.field):t)}}function Ho(n,s){if(1&n){const t=e.RV6();e.j41(0,"TimesCircleIcon",15),e.bIt("click",function(i){e.eBV(t);const u=e.XpG(2).index,d=e.XpG();return e.Njj(d.removeItem(i,u))}),e.k0s()}2&n&&(e.Y8G("styleClass","p-chips-token-icon"),e.BMQ("data-pc-section","removeTokenIcon")("aria-hidden",!0))}function Uo(n,s){}function Wo(n,s){1&n&&e.DNE(0,Uo,0,0,"ng-template")}function Jo(n,s){if(1&n){const t=e.RV6();e.j41(0,"span",16),e.bIt("click",function(i){e.eBV(t);const u=e.XpG(2).index,d=e.XpG();return e.Njj(d.removeItem(i,u))}),e.DNE(1,Wo,1,0,null,17),e.k0s()}if(2&n){const t=e.XpG(3);e.BMQ("data-pc-section","removeTokenIcon")("aria-hidden",!0),e.R7$(),e.Y8G("ngTemplateOutlet",t.removeTokenIconTemplate)}}function Ko(n,s){if(1&n&&(e.qex(0),e.DNE(1,Ho,1,3,"TimesCircleIcon",13)(2,Jo,2,3,"span",14),e.bVm()),2&n){const t=e.XpG(2);e.R7$(),e.Y8G("ngIf",!t.removeTokenIconTemplate),e.R7$(),e.Y8G("ngIf",t.removeTokenIconTemplate)}}function qo(n,s){if(1&n){const t=e.RV6();e.j41(0,"li",9,2),e.bIt("click",function(i){const u=e.eBV(t).$implicit,d=e.XpG();return e.Njj(d.onItemClick(i,u))})("contextmenu",function(i){const u=e.eBV(t).$implicit,d=e.XpG();return e.Njj(d.onItemContextMenu(i,u))}),e.DNE(2,Xo,1,0,"ng-container",10)(3,Yo,2,2,"span",11)(4,Ko,3,2,"ng-container",8),e.k0s()}if(2&n){const t=s.$implicit,o=s.index,i=e.XpG();e.Y8G("ngClass",e.eq3(12,Vo,i.focusedIndex===o)),e.BMQ("id",i.id+"_chips_item_"+o)("ariaLabel",t)("aria-selected",!0)("aria-setsize",i.value.length)("aria-posinset",o+1)("data-p-focused",i.focusedIndex===o)("data-pc-section","token"),e.R7$(2),e.Y8G("ngTemplateOutlet",i.itemTemplate)("ngTemplateOutletContext",e.eq3(14,No,t)),e.R7$(),e.Y8G("ngIf",!i.itemTemplate),e.R7$(),e.Y8G("ngIf",!i.disabled)}}function Qo(n,s){if(1&n){const t=e.RV6();e.j41(0,"TimesIcon",15),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.clear())}),e.k0s()}2&n&&e.Y8G("styleClass","p-chips-clear-icon")}function Zo(n,s){}function ea(n,s){1&n&&e.DNE(0,Zo,0,0,"ng-template")}function ta(n,s){if(1&n){const t=e.RV6();e.j41(0,"span",19),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.clear())}),e.DNE(1,ea,1,0,null,17),e.k0s()}if(2&n){const t=e.XpG(2);e.R7$(),e.Y8G("ngTemplateOutlet",t.clearIconTemplate)}}function na(n,s){if(1&n&&(e.j41(0,"li"),e.DNE(1,Qo,1,1,"TimesIcon",13)(2,ta,2,1,"span",18),e.k0s()),2&n){const t=e.XpG();e.R7$(),e.Y8G("ngIf",!t.clearIconTemplate),e.R7$(),e.Y8G("ngIf",t.clearIconTemplate)}}const ia={provide:z.kq,useExisting:(0,e.Rfq)(()=>ke),multi:!0};let ke=(()=>{class n{document;el;cd;config;style;styleClass;disabled;field;placeholder;max;maxLength;ariaLabel;ariaLabelledBy;tabindex;inputId;allowDuplicate=!0;caseSensitiveDuplication=!0;inputStyle;inputStyleClass;addOnTab;addOnBlur;separator;showClear=!1;autofocus;variant="outlined";onAdd=new e.bkB;onRemove=new e.bkB;onFocus=new e.bkB;onBlur=new e.bkB;onChipClick=new e.bkB;onChipContextMenu=new e.bkB;onClear=new e.bkB;inputViewChild;containerViewChild;templates;itemTemplate;removeTokenIconTemplate;clearIconTemplate;value;onModelChange=()=>{};onModelTouched=()=>{};valueChanged;id=(0,D._Y)();focused;focusedIndex;filled;get focusedOptionId(){return null!==this.focusedIndex?`${this.id}_chips_item_${this.focusedIndex}`:null}get isMaxedOut(){return this.max&&this.value&&this.max===this.value.length}constructor(t,o,i,u){this.document=t,this.el=o,this.cd=i,this.config=u}ngAfterContentInit(){this.templates.forEach(t=>{switch(t.getType()){case"item":default:this.itemTemplate=t.template;break;case"removetokenicon":this.removeTokenIconTemplate=t.template;break;case"clearicon":this.clearIconTemplate=t.template}}),this.updateFilledState()}onWrapperClick(){this.inputViewChild?.nativeElement.focus()}onContainerFocus(){this.focused=!0}onContainerBlur(){this.focusedIndex=-1,this.focused=!1}onContainerKeyDown(t){switch(t.code){case"ArrowLeft":this.onArrowLeftKeyOn();break;case"ArrowRight":this.onArrowRightKeyOn();break;case"Backspace":this.onBackspaceKeyOn(t);break;case"Space":null!==this.focusedIndex&&this.value&&this.value.length>0&&this.onItemClick(t,this.value[this.focusedIndex])}}onArrowLeftKeyOn(){0===this.inputViewChild.nativeElement.value.length&&this.value&&this.value.length>0&&(this.focusedIndex=null===this.focusedIndex?this.value.length-1:this.focusedIndex-1,this.focusedIndex<0&&(this.focusedIndex=0))}onArrowRightKeyOn(){0===this.inputViewChild.nativeElement.value.length&&this.value&&this.value.length>0&&(this.focusedIndex===this.value.length-1?(this.focusedIndex=null,this.inputViewChild?.nativeElement.focus()):this.focusedIndex++)}onBackspaceKeyOn(t){null!==this.focusedIndex&&this.removeItem(t,this.focusedIndex)}onInput(){this.updateFilledState(),this.focusedIndex=null}onPaste(t){this.disabled||(this.separator&&((t.clipboardData||this.document.defaultView.clipboardData).getData("Text").split(this.separator).forEach(i=>{this.addItem(t,i,!0)}),this.inputViewChild.nativeElement.value=""),this.updateFilledState())}updateFilledState(){this.filled=!(!this.value||0===this.value.length)||this.inputViewChild&&this.inputViewChild.nativeElement&&""!=this.inputViewChild.nativeElement.value}onItemClick(t,o){this.onChipClick.emit({originalEvent:t,value:o})}onItemContextMenu(t,o){this.onChipContextMenu.emit({originalEvent:t,value:o})}writeValue(t){this.value=t,this.updateMaxedOut(),this.updateFilledState(),this.cd.markForCheck()}registerOnChange(t){this.onModelChange=t}registerOnTouched(t){this.onModelTouched=t}setDisabledState(t){this.disabled=t,this.cd.markForCheck()}resolveFieldData(t,o){if(t&&o){if(-1==o.indexOf("."))return t[o];{let d=o.split("."),k=t;for(var i=0,u=d.length;i<u;++i)k=k[d[i]];return k}}return null}onInputFocus(t){this.focused=!0,this.focusedIndex=null,this.onFocus.emit(t)}onInputBlur(t){this.focused=!1,this.focusedIndex=null,this.addOnBlur&&this.inputViewChild.nativeElement.value&&this.addItem(t,this.inputViewChild.nativeElement.value,!1),this.onModelTouched(),this.onBlur.emit(t)}removeItem(t,o){if(this.disabled)return;let i=this.value[o];this.value=this.value.filter((u,d)=>d!=o),this.focusedIndex=null,this.inputViewChild.nativeElement.focus(),this.onModelChange(this.value),this.onRemove.emit({originalEvent:t,value:i}),this.updateFilledState(),this.updateMaxedOut()}addItem(t,o,i){if(this.value=this.value||[],o&&o.trim().length){const u=this.caseSensitiveDuplication?this.value.includes(o):this.value.some(d=>d.toLowerCase()===o.toLowerCase());(this.allowDuplicate||!u)&&!this.isMaxedOut&&(this.value=[...this.value,o],this.onModelChange(this.value),this.onAdd.emit({originalEvent:t,value:o}))}this.updateFilledState(),this.updateMaxedOut(),this.inputViewChild.nativeElement.value="",i&&t.preventDefault()}clear(){this.value=null,this.updateFilledState(),this.onModelChange(this.value),this.updateMaxedOut(),this.onClear.emit()}onKeyDown(t){const o=t.target.value;switch(t.code){case"Backspace":0===o.length&&this.value&&this.value.length>0&&this.removeItem(t,null!==this.focusedIndex?this.focusedIndex:this.value.length-1);break;case"Enter":case"NumpadEnter":o&&o.trim().length&&!this.isMaxedOut&&this.addItem(t,o,!0);break;case"Tab":this.addOnTab&&o&&o.trim().length&&!this.isMaxedOut&&(this.addItem(t,o,!0),t.preventDefault());break;case"ArrowLeft":0===o.length&&this.value&&this.value.length>0&&this.containerViewChild?.nativeElement.focus();break;case"ArrowRight":t.stopPropagation();break;default:this.separator&&(this.separator===t.key||t.key.match(this.separator))&&this.addItem(t,o,!0)}}updateMaxedOut(){this.inputViewChild&&this.inputViewChild.nativeElement&&(this.isMaxedOut?(this.inputViewChild.nativeElement.blur(),this.inputViewChild.nativeElement.disabled=!0):(this.disabled&&this.inputViewChild.nativeElement.blur(),this.inputViewChild.nativeElement.disabled=this.disabled||!1))}static \u0275fac=function(o){return new(o||n)(e.rXU(g.qQ),e.rXU(e.aKT),e.rXU(e.gRc),e.rXU(c.r1))};static \u0275cmp=e.VBU({type:n,selectors:[["p-chips"]],contentQueries:function(o,i,u){if(1&o&&e.wni(u,c.Ei,4),2&o){let d;e.mGM(d=e.lsd())&&(i.templates=d)}},viewQuery:function(o,i){if(1&o&&(e.GBs(Bo,5),e.GBs(zo,5)),2&o){let u;e.mGM(u=e.lsd())&&(i.inputViewChild=u.first),e.mGM(u=e.lsd())&&(i.containerViewChild=u.first)}},hostAttrs:[1,"p-element","p-inputwrapper"],hostVars:6,hostBindings:function(o,i){2&o&&e.AVh("p-inputwrapper-filled",i.filled)("p-inputwrapper-focus",i.focused)("p-chips-clearable",i.showClear)},inputs:{style:"style",styleClass:"styleClass",disabled:[2,"disabled","disabled",e.L39],field:"field",placeholder:"placeholder",max:[2,"max","max",e.Udg],maxLength:"maxLength",ariaLabel:"ariaLabel",ariaLabelledBy:"ariaLabelledBy",tabindex:[2,"tabindex","tabindex",e.Udg],inputId:"inputId",allowDuplicate:[2,"allowDuplicate","allowDuplicate",e.L39],caseSensitiveDuplication:[2,"caseSensitiveDuplication","caseSensitiveDuplication",e.L39],inputStyle:"inputStyle",inputStyleClass:"inputStyleClass",addOnTab:[2,"addOnTab","addOnTab",e.L39],addOnBlur:[2,"addOnBlur","addOnBlur",e.L39],separator:"separator",showClear:[2,"showClear","showClear",e.L39],autofocus:[2,"autofocus","autofocus",e.L39],variant:"variant"},outputs:{onAdd:"onAdd",onRemove:"onRemove",onFocus:"onFocus",onBlur:"onBlur",onChipClick:"onChipClick",onChipContextMenu:"onChipContextMenu",onClear:"onClear"},features:[e.Jv_([ia]),e.GFd],decls:8,vars:34,consts:[["container",""],["inputtext",""],["token",""],[3,"ngClass","ngStyle"],["tabindex","-1","role","listbox",3,"click","focus","blur","keydown","ngClass"],["role","option",3,"ngClass","click","contextmenu",4,"ngFor","ngForOf"],["role","option",1,"p-chips-input-token",3,"ngClass"],["type","text","pAutoFocus","",3,"keydown","input","paste","focus","blur","disabled","ngStyle","autofocus"],[4,"ngIf"],["role","option",3,"click","contextmenu","ngClass"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["class","p-chips-token-label",4,"ngIf"],[1,"p-chips-token-label"],[3,"styleClass","click",4,"ngIf"],["class","p-chips-token-icon",3,"click",4,"ngIf"],[3,"click","styleClass"],[1,"p-chips-token-icon",3,"click"],[4,"ngTemplateOutlet"],["class","p-chips-clear-icon",3,"click",4,"ngIf"],[1,"p-chips-clear-icon",3,"click"]],template:function(o,i){if(1&o){const u=e.RV6();e.j41(0,"div",3)(1,"ul",4,0),e.bIt("click",function(){return e.eBV(u),e.Njj(i.onWrapperClick())})("focus",function(){return e.eBV(u),e.Njj(i.onContainerFocus())})("blur",function(){return e.eBV(u),e.Njj(i.onContainerBlur())})("keydown",function(k){return e.eBV(u),e.Njj(i.onContainerKeyDown(k))}),e.DNE(3,qo,5,16,"li",5),e.j41(4,"li",6)(5,"input",7,1),e.bIt("keydown",function(k){return e.eBV(u),e.Njj(i.onKeyDown(k))})("input",function(){return e.eBV(u),e.Njj(i.onInput())})("paste",function(k){return e.eBV(u),e.Njj(i.onPaste(k))})("focus",function(k){return e.eBV(u),e.Njj(i.onInputFocus(k))})("blur",function(k){return e.eBV(u),e.Njj(i.onInputBlur(k))}),e.k0s()(),e.DNE(7,na,3,2,"li",8),e.k0s()()}2&o&&(e.HbH(i.styleClass),e.Y8G("ngClass",e.ziG(25,Lo,i.disabled,i.focused,i.value&&i.value.length||(null==i.inputViewChild?null:i.inputViewChild.nativeElement.value)&&(null==i.inputViewChild?null:i.inputViewChild.nativeElement.value.length),i.focused))("ngStyle",i.style),e.BMQ("data-pc-name","chips")("data-pc-section","root"),e.R7$(),e.Y8G("ngClass",e.eq3(30,Ao,"filled"===i.variant||"filled"===i.config.inputStyle())),e.BMQ("aria-labelledby",i.ariaLabelledBy)("aria-label",i.ariaLabel)("aria-activedescendant",i.focused?i.focusedOptionId:void 0)("aria-orientation","horizontal")("data-pc-section","container"),e.R7$(2),e.Y8G("ngForOf",i.value),e.R7$(),e.Y8G("ngClass",e.eq3(32,$o,i.showClear&&!i.disabled)),e.BMQ("data-pc-section","inputToken"),e.R7$(),e.HbH(i.inputStyleClass),e.Y8G("disabled",i.disabled||i.isMaxedOut)("ngStyle",i.inputStyle)("autofocus",i.autofocus),e.BMQ("id",i.inputId)("maxlength",i.maxLength)("placeholder",i.value&&i.value.length?null:i.placeholder)("tabindex",i.tabindex),e.R7$(2),e.Y8G("ngIf",null!=i.value&&i.filled&&!i.disabled&&i.showClear))},dependencies:()=>[g.YU,g.Sq,g.bT,g.T3,g.B3,oe.q,V.I,J.A],styles:["@layer primeng{.p-chips{display:inline-flex}.p-chips-multiple-container{margin:0;padding:0;list-style-type:none;cursor:text;overflow:hidden;display:flex;align-items:center;flex-wrap:wrap}.p-chips-token{cursor:default;display:inline-flex;align-items:center;flex:0 0 auto;max-width:100%}.p-chips-token-label{min-width:0%;overflow:auto}.p-chips-token-label::-webkit-scrollbar{display:none}.p-chips-input-token{flex:1 1 auto;display:inline-flex}.p-chips-token-icon{cursor:pointer}.p-chips-input-token input{border:0 none;outline:0 none;background-color:transparent;margin:0;padding:0;box-shadow:none;border-radius:0;width:100%}.p-fluid .p-chips{display:flex}.p-chips-clear-icon{position:absolute;top:50%;margin-top:-.5rem;cursor:pointer}.p-chips-clearable .p-inputtext{position:relative}}\n"],encapsulation:2,changeDetection:0})}return n})(),oa=(()=>{class n{static \u0275fac=function(o){return new(o||n)};static \u0275mod=e.$C({type:n});static \u0275inj=e.G2t({imports:[g.MD,ue.u,c.Gg,oe.u,V.I,J.A,ue.u,c.Gg]})}return n})();const aa=()=>({"min-width":"50rem"}),ra=()=>[50,100,250];function la(n,s){1&n&&(e.j41(0,"div",10)(1,"span",11),e.EFF(2,"\u041a\u043b\u0430\u0441\u0442\u0435\u0440\u044b"),e.k0s()())}function ua(n,s){if(1&n){const t=e.RV6();e.j41(0,"p-multiSelect",12),e.bIt("onChange",function(i){const u=e.eBV(t).filterCallback;return e.Njj(u(i.value))}),e.k0s()}if(2&n){const t=s.$implicit,o=e.XpG(3);e.Y8G("ngModel",t)("filter",!1)("options",o.warehouseClusters)}}function sa(n,s){1&n&&(e.j41(0,"tr")(1,"th"),e.nrm(2,"p-columnFilter",5),e.EFF(3," \u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 "),e.k0s(),e.j41(4,"th"),e.EFF(5,"\u0410\u0434\u0440\u0435\u0441"),e.k0s(),e.j41(6,"th"),e.EFF(7,"\u041e\u0441\u043e\u0431\u044b\u0439"),e.k0s(),e.j41(8,"th",6),e.EFF(9," \u041a\u043b\u0430\u0441\u0442\u0435\u0440"),e.nrm(10,"p-sortIcon",7),e.j41(11,"p-columnFilter",8),e.DNE(12,la,3,0,"ng-template",3)(13,ua,1,3,"ng-template",9),e.k0s()(),e.j41(14,"th"),e.EFF(15,"\u041f\u0441\u0435\u0432\u0434\u043e\u043d\u0438\u043c\u044b"),e.k0s(),e.nrm(16,"th"),e.k0s()),2&n&&(e.R7$(2),e.Y8G("showMatchModes",!1)("showOperator",!1)("showAddButton",!1),e.R7$(9),e.Y8G("showMatchModes",!1)("showOperator",!1)("showAddButton",!1))}function ca(n,s){if(1&n){const t=e.RV6();e.j41(0,"p-checkbox",20),e.mxI("ngModelChange",function(i){e.eBV(t);const u=e.XpG().$implicit;return e.DH7(u.standalone,i)||(u.standalone=i),e.Njj(i)}),e.k0s()}if(2&n){const t=e.XpG().$implicit;e.R50("ngModel",t.standalone),e.Y8G("binary",!0)}}function pa(n,s){if(1&n){const t=e.RV6();e.j41(0,"p-checkbox",21),e.mxI("ngModelChange",function(i){e.eBV(t);const u=e.XpG().$implicit;return e.DH7(u.standalone,i)||(u.standalone=i),e.Njj(i)}),e.k0s()}if(2&n){const t=e.XpG().$implicit;e.R50("ngModel",t.standalone),e.Y8G("readonly",!0)("binary",!0)}}function da(n,s){if(1&n){const t=e.RV6();e.j41(0,"p-chips",22),e.mxI("ngModelChange",function(i){e.eBV(t);const u=e.XpG().$implicit;return e.DH7(u.aliases,i)||(u.aliases=i),e.Njj(i)}),e.k0s()}if(2&n){const t=e.XpG().$implicit;e.R50("ngModel",t.aliases)}}function _a(n,s){if(1&n&&(e.j41(0,"div"),e.EFF(1),e.k0s()),2&n){const t=s.$implicit;e.R7$(),e.JRh(t)}}function fa(n,s){if(1&n&&e.DNE(0,_a,2,1,"div",23),2&n){const t=e.XpG().$implicit;e.Y8G("ngForOf",t.aliases)}}function ma(n,s){if(1&n){const t=e.RV6();e.j41(0,"button",24),e.bIt("click",function(){e.eBV(t);const i=e.XpG().$implicit,u=e.XpG(2);return e.Njj(u.onRowEditInit(i))}),e.k0s()}}function ha(n,s){if(1&n){const t=e.RV6();e.j41(0,"button",25),e.bIt("click",function(){e.eBV(t);const i=e.XpG().$implicit,u=e.XpG(2);return e.Njj(u.onRowEditSave(i))}),e.k0s()}}function ga(n,s){if(1&n){const t=e.RV6();e.j41(0,"button",26),e.bIt("click",function(){e.eBV(t);const i=e.XpG().$implicit,u=e.XpG(2);return e.Njj(u.onRowEditCancel(i))}),e.k0s()}}function va(n,s){if(1&n&&(e.j41(0,"tr",13)(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td")(6,"p-cellEditor"),e.DNE(7,ca,1,2,"ng-template",14)(8,pa,1,3,"ng-template",15),e.k0s()(),e.j41(9,"td"),e.EFF(10),e.k0s(),e.j41(11,"td")(12,"p-cellEditor"),e.DNE(13,da,1,1,"ng-template",14)(14,fa,1,1,"ng-template",15),e.k0s()(),e.j41(15,"td")(16,"div",16),e.DNE(17,ma,1,0,"button",17)(18,ha,1,0,"button",18)(19,ga,1,0,"button",19),e.k0s()()()),2&n){const t=s.$implicit,o=s.editing;e.Y8G("pEditableRow",t),e.R7$(2),e.JRh(t.name),e.R7$(2),e.JRh(t.address),e.R7$(6),e.JRh(t.warehouseCluster),e.R7$(7),e.Y8G("ngIf",!o),e.R7$(),e.Y8G("ngIf",o),e.R7$(),e.Y8G("ngIf",o)}}function ba(n,s){if(1&n){const t=e.RV6();e.j41(0,"p-table",2),e.bIt("onEditComplete",function(i){e.eBV(t);const u=e.XpG();return e.Njj(u.editComplete(i))}),e.DNE(1,sa,17,6,"ng-template",3)(2,va,20,7,"ng-template",4),e.k0s()}if(2&n){const t=e.XpG();e.Y8G("value",t.data)("tableStyle",e.lJ4(6,aa))("paginator",!0)("rows",100)("rowsPerPageOptions",e.lJ4(7,ra))("totalRecords",t.totalRecords)}}let ya=(()=>{class n extends r.x{constructor(t,o,i){super(i),this.ozonWarehouseService=t,this.messageService=o,this.clonedData={},this.warehouseClusters=[]}ngOnInit(){this.titleService.setTitle("\u0421\u043a\u043b\u0430\u0434\u044b Ozon"),this.getOzonWarehouses()}getOzonWarehouses(){this.ozonWarehouseService.getWarehouses().pipe((0,y.W)(t=>(this.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430",severity:"error",detail:t}),p.w))).subscribe(t=>{this.data=t,this.warehouseClusters=[...t.reduce((o,i)=>(o.add(i.warehouseCluster),o),new Set)].sort()})}onRowEditInit(t){const o=new a.D.OzonWarehouse(t);this.clonedData[t.iD]=o}onRowEditCancel(t){const o=this.data.findIndex(i=>i.iD==t.iD);this.data[o]=this.clonedData[t.iD],delete this.clonedData[t.iD]}onRowEditSave(t){this.ozonWarehouseService.updateWarehouse(t).pipe((0,y.W)(o=>(this.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430",severity:"error",detail:o}),p.w))).subscribe()}importWarehouses(){var t=this;return(0,O.A)(function*(){t.ozonWarehouseService.importOzonWarehouses().pipe((0,y.W)(o=>(t.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430",severity:"error",detail:o}),p.w))).subscribe(()=>{t.messageService.add({summary:"\u0423\u0441\u043f\u0435\u0445",severity:"success",detail:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0441\u043a\u043b\u0430\u0434\u043e\u0432 \u041e\u0437\u043e\u043d \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u0430"}),t.getOzonWarehouses()})})()}static{this.\u0275fac=function(o){return new(o||n)(e.rXU(f.t),e.rXU(c.bg),e.rXU(h.hE))}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-ozon-warehouse-list"]],features:[e.Vt3],decls:5,vars:1,consts:[["pButton","","pRipple","","type","button","label","\u0418\u043c\u043f\u043e\u0440\u0442 \u0441\u043a\u043b\u0430\u0434\u043e\u0432",3,"click"],["dataKey","iD","editMode","row",3,"value","tableStyle","paginator","rows","rowsPerPageOptions","totalRecords","onEditComplete",4,"ngIf"],["dataKey","iD","editMode","row",3,"onEditComplete","value","tableStyle","paginator","rows","rowsPerPageOptions","totalRecords"],["pTemplate","header"],["pTemplate","body"],["type","text","field","name","matchMode","contains",3,"showMatchModes","showOperator","showAddButton"],["pSortableColumn","warehouseCluster"],["field","warehouseCluster"],["field","warehouseCluster","matchMode","in","display","menu",3,"showMatchModes","showOperator","showAddButton"],["pTemplate","filter"],[1,"px-3","pt-3","pb-0"],[1,"font-bold"],["placeholder","\u0412\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0435",3,"onChange","ngModel","filter","options"],[3,"pEditableRow"],["pTemplate","input"],["pTemplate","output"],[1,"flex","align-items-center","justify-content-center","gap-2"],["pButton","","pRipple","","type","button","pInitEditableRow","","icon","pi pi-pencil","class","p-button-rounded p-button-text",3,"click",4,"ngIf"],["pButton","","pRipple","","type","button","pSaveEditableRow","","icon","pi pi-check","class","p-button-rounded p-button-text p-button-success mr-2",3,"click",4,"ngIf"],["pButton","","pRipple","","type","button","pCancelEditableRow","","icon","pi pi-times","class","p-button-rounded p-button-text p-button-danger",3,"click",4,"ngIf"],["inputId","binary",3,"ngModelChange","ngModel","binary"],["inputId","binary",3,"ngModelChange","ngModel","readonly","binary"],["separator","",3,"ngModelChange","ngModel"],[4,"ngFor","ngForOf"],["pButton","","pRipple","","type","button","pInitEditableRow","","icon","pi pi-pencil",1,"p-button-rounded","p-button-text",3,"click"],["pButton","","pRipple","","type","button","pSaveEditableRow","","icon","pi pi-check",1,"p-button-rounded","p-button-text","p-button-success","mr-2",3,"click"],["pButton","","pRipple","","type","button","pCancelEditableRow","","icon","pi pi-times",1,"p-button-rounded","p-button-text","p-button-danger",3,"click"]],template:function(o,i){1&o&&(e.nrm(0,"p-toast"),e.j41(1,"h1"),e.EFF(2,"\u0421\u043a\u043b\u0430\u0434\u044b Ozon"),e.k0s(),e.j41(3,"button",0),e.bIt("click",function(){return i.importWarehouses()}),e.k0s(),e.DNE(4,ba,3,8,"p-table",1)),2&o&&(e.R7$(4),e.Y8G("ngIf",i.data))},dependencies:[c.Ei,T._f,re.Sc,ke,g.Sq,g.bT,z.BC,z.vS,ae,M.XI,M.Tg,M.c5,M.yc,M.Xk,M.Hd,M.E7,M.Tf,M.rl,Q.y8]})}}return n})();var Oa=m(152);const Sa=()=>({"min-width":"75rem"}),Ea=()=>["name"],Ca=n=>({"bg-orange-100":n});function ka(n,s){1&n&&(e.j41(0,"tr")(1,"th",15),e.EFF(2," ID "),e.nrm(3,"p-sortIcon",16),e.k0s(),e.j41(4,"th"),e.EFF(5,"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435"),e.k0s(),e.j41(6,"th",17),e.EFF(7," \u041f\u0440\u043e\u0434\u0430\u0436 \u0437\u0430 \u043f\u0435\u0440\u0438\u043e\u0434 \u0430\u043d\u0430\u043b\u0438\u0437\u0430 "),e.nrm(8,"p-sortIcon",18),e.k0s(),e.j41(9,"th",19),e.EFF(10," \u041d\u0430\u043b\u0438\u0447\u0438\u0435 "),e.nrm(11,"p-sortIcon",20),e.k0s(),e.j41(12,"th",21),e.EFF(13," \u0420\u0435\u0437\u0435\u0440\u0432 "),e.nrm(14,"p-sortIcon",22),e.k0s(),e.j41(15,"th",23),e.EFF(16," \u0412 \u043f\u0443\u0442\u0438 "),e.nrm(17,"p-sortIcon",24),e.k0s(),e.j41(18,"th",25),e.EFF(19," \u041f\u0440\u043e\u0434\u0430\u0436 \u0432 \u0434\u0435\u043d\u044c "),e.nrm(20,"p-sortIcon",26),e.k0s(),e.j41(21,"th",27),e.EFF(22," \u0417\u0430\u043f\u0430\u0441 \u0432 \u0434\u043d\u044f\u0445 "),e.nrm(23,"p-sortIcon",28),e.k0s()(),e.j41(24,"tr")(25,"th"),e.nrm(26,"p-columnFilter",29),e.k0s(),e.j41(27,"th"),e.nrm(28,"p-columnFilter",30),e.k0s(),e.j41(29,"th"),e.nrm(30,"p-columnFilter",31),e.k0s(),e.j41(31,"th"),e.nrm(32,"p-columnFilter",32),e.k0s(),e.j41(33,"th"),e.nrm(34,"p-columnFilter",33),e.k0s(),e.j41(35,"th"),e.nrm(36,"p-columnFilter",34),e.k0s(),e.j41(37,"th"),e.nrm(38,"p-columnFilter",35),e.k0s(),e.nrm(39,"th"),e.k0s()),2&n&&(e.R7$(26),e.Y8G("min",1)("showButtons",!1)("showOperator",!1)("useGrouping",!1),e.R7$(2),e.Y8G("showMatchModes",!1)("showOperator",!1),e.R7$(2),e.Y8G("showMatchModes",!1)("showButtons",!1)("showOperator",!1)("useGrouping",!1),e.R7$(2),e.Y8G("showButtons",!1)("showOperator",!1)("useGrouping",!1),e.R7$(2),e.Y8G("showButtons",!1)("showOperator",!1)("useGrouping",!1),e.R7$(2),e.Y8G("showButtons",!1)("showOperator",!1)("useGrouping",!1),e.R7$(2),e.Y8G("showButtons",!1)("showOperator",!1))}function Ia(n,s){if(1&n&&(e.qex(0),e.j41(1,"tr",41)(2,"td"),e.EFF(3),e.k0s(),e.j41(4,"td"),e.EFF(5),e.k0s(),e.j41(6,"td"),e.EFF(7),e.k0s(),e.j41(8,"td"),e.EFF(9),e.k0s(),e.j41(10,"td"),e.EFF(11),e.k0s(),e.j41(12,"td"),e.EFF(13),e.k0s(),e.j41(14,"td"),e.EFF(15),e.nI1(16,"number"),e.k0s(),e.j41(17,"td"),e.EFF(18),e.nI1(19,"number"),e.k0s()(),e.bVm()),2&n){const t=s.$implicit;e.R7$(),e.Y8G("ngClass",e.eq3(15,Ca,t.StockDays<=t.ShipmentDays)),e.R7$(2),e.JRh(t.productPackageID),e.R7$(2),e.JRh(t.productPackageName),e.R7$(2),e.JRh(t.salesCount),e.R7$(2),e.JRh(t.present),e.R7$(2),e.JRh(t.reserved),e.R7$(2),e.JRh(t.moving),e.R7$(2),e.JRh(e.i5U(16,9,t.salesRate,"1.0-1")),e.R7$(3),e.JRh(e.i5U(19,12,t.stockDays,"1.0-1"))}}function Fa(n,s){if(1&n&&(e.qex(0),e.j41(1,"tr")(2,"td",37)(3,"span",40),e.EFF(4),e.k0s()()(),e.DNE(5,Ia,20,17,"ng-container",39),e.bVm()),2&n){const t=s.$implicit;e.R7$(4),e.JRh(t.key),e.R7$(),e.Y8G("ngForOf",t.value)}}function Ta(n,s){if(1&n&&(e.j41(0,"tr",36)(1,"td",37)(2,"span",38),e.EFF(3),e.k0s()()(),e.DNE(4,Fa,6,2,"ng-container",39),e.nI1(5,"keyvalue")),2&n){const t=s.$implicit;e.R7$(3),e.JRh(t.key),e.R7$(),e.Y8G("ngForOf",e.bMT(5,2,t.value))}}function Ra(n,s){if(1&n&&(e.j41(0,"p-table",12),e.nI1(1,"keyvalue"),e.DNE(2,ka,40,21,"ng-template",13)(3,Ta,6,4,"ng-template",14),e.k0s()),2&n){const t=e.XpG();e.Y8G("value",e.bMT(1,6,t.groupedItems))("tableStyle",e.lJ4(8,Sa))("paginator",!1)("loading",t.loading)("sortOrder",1)("globalFilterFields",e.lJ4(9,Ea))}}let wa=(()=>{class n extends r.x{constructor(t,o,i,u,d){super(u),this.route=t,this.reportClient=o,this.messageService=i,this.dbService=d,this.loading=!1,this.filter=new a.D.OzonStockScarcityReportRequestModel({salesAnalysisInDays:null,notificationPeriodInDays:null,date:null,respectMinimalStock:!1,respectSupplyPreparationPeriod:!1,respectActiveSupplyOrders:!1}),this.filterSubject=new b.t(null)}ngOnInit(){this.titleService.setTitle("\u0414\u0435\u0444\u0438\u0446\u0438\u0442 \u0442\u043e\u0432\u0430\u0440\u043e\u0432 Ozon"),this.filterSubject.pipe((0,C.Q)(this.destroyed),(0,E.p)(d=>!!d),(0,Oa.B)(1e3)).pipe((0,E.p)(d=>d.salesAnalysisInDays>0&&d.notificationPeriodInDays>0)).subscribe(d=>{this.loading=!0;const k={...d};delete k.date,this.dbService.update("filters",{id:n.name,data:k}).pipe((0,y.W)(R=>(this.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f \u0444\u0438\u043b\u044c\u0442\u0440\u0430",severity:"error",detail:R}),p.w))).subscribe(),this.reportClient.getOzonStockStarvationReport(new a.D.OzonStockScarcityReportRequestModel(d)).pipe((0,y.W)(R=>(this.loading=!1,this.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430",severity:"error",detail:R}),p.w))).subscribe(R=>{this.data=R,this.groupedItems=this.data.reduce((x,G)=>{let P,H;const F=G.standaloneWarehouse?G.warehouseName:G.warehouseClusterName||"\u0411\u0435\u0437 \u043a\u043b\u0430\u0441\u0442\u0435\u0440\u0430";return x[F]?P=x[F]:(P={},x[F]=P),P[G.warehouseName]?H=P[G.warehouseName]:(H=[],P[G.warehouseName]=H),H.push(G),x},{}),this.loading=!1})});const t=+this.route.snapshot.paramMap.get("salesAnalysisInDays"),o=+this.route.snapshot.paramMap.get("notificationPeriodInDays"),u=this.route.snapshot.paramMap.get("date")?new Date:null;this.filter.salesAnalysisInDays=t>0?t:7,this.filter.notificationPeriodInDays=o>0?o:7,this.filter.date=u,this.dbService.getByID("filters",n.name).subscribe(d=>{d&&(d.data&&(this.filter=d.data),this.filterSubject.next(this.filter))}),this.filter.salesAnalysisInDays>0&&this.filter.notificationPeriodInDays>0&&this.filterSubject.next(this.filter)}onFilterChanged(){this.filterSubject.next(this.filter)}static{this.\u0275fac=function(o){return new(o||n)(e.rXU(S.nX),e.rXU(a.D.ReportClient),e.rXU(c.bg),e.rXU(h.hE),e.rXU(I.MX))}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-stock-starvation-report"]],features:[e.Vt3],decls:22,vars:16,consts:[[1,"card"],[1,"flex","gap-3","m-3"],[1,"p-float-label"],["inputId","salesAnalysisInDays",3,"onInput","ngModelChange","min","required","ngModel"],["htmlFor","number-input"],["inputId","notificationPeriodInDays",3,"onInput","ngModelChange","min","required","ngModel"],["input","date","dateFormat","dd.mm.yy","placeholder","\u0414\u0430\u0442\u0430 \u043e\u0442\u0447\u0451\u0442\u0430",3,"ngModelChange","onClear","onSelect","ngModel","showClear","readonlyInput"],["for","date",1,"font-bold"],["input","respectMinimalStock","label","\u0423\u0447\u0438\u0442\u044b\u0432\u0430\u0442\u044c \u043c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u044b\u0439 \u043e\u0441\u0442\u0430\u0442\u043e\u043a",3,"ngModelChange","onChange","ngModel","binary"],["input","respectActiveSupplyOrders","label","\u0423\u0447\u0438\u0442\u044b\u0432\u0430\u0442\u044c \u043f\u043e\u0441\u0442\u0430\u0432\u043a\u0438 \u0432 \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u0435",3,"ngModelChange","onChange","ngModel","binary"],["input","respectSupplyPreparationPeriod","label","\u0423\u0447\u0438\u0442\u044b\u0432\u0430\u0442\u044c \u043f\u043e\u0434\u0433\u043e\u0442\u043e\u0432\u043a\u0443 \u043a \u043f\u043e\u0441\u0442\u0430\u0432\u043a\u0435",3,"ngModelChange","onChange","ngModel","binary"],["sortField","stockDays",3,"value","tableStyle","paginator","loading","sortOrder","globalFilterFields",4,"ngIf"],["sortField","stockDays",3,"value","tableStyle","paginator","loading","sortOrder","globalFilterFields"],["pTemplate","header"],["pTemplate","body"],["pSortableColumn","productPackageID"],["field","productPackageID"],["pSortableColumn","salesCount"],["field","salesCount"],["pSortableColumn","present"],["field","present"],["pSortableColumn","reserved"],["field","reserved"],["pSortableColumn","moving"],["field","moving"],["pSortableColumn","salesRate"],["field","salesRate"],["pSortableColumn","stockDays"],["field","stockDays"],["field","productPackageID","type","numeric",3,"min","showButtons","showOperator","useGrouping"],["field","productPackageName","matchMode","contains","type","text",3,"showMatchModes","showOperator"],["field","salesCount","type","numeric",3,"showMatchModes","showButtons","showOperator","useGrouping"],["field","present","type","numeric",3,"showButtons","showOperator","useGrouping"],["field","reserved","type","numeric",3,"showButtons","showOperator","useGrouping"],["field","moving","type","numeric",3,"showButtons","showOperator","useGrouping"],["field","salesRate","type","numeric",3,"showButtons","showOperator"],["pRowGroupHeader",""],["colspan","8"],[1,"font-bold","ml-2","text-primary-500"],[4,"ngFor","ngForOf"],[1,"font-bold","ml-4"],[3,"ngClass"]],template:function(o,i){1&o&&(e.nrm(0,"p-toast"),e.j41(1,"h1"),e.EFF(2," \u041e\u0442\u0447\u0451\u0442 \u043e \u0437\u0430\u043a\u0430\u043d\u0447\u0438\u0432\u0430\u044e\u0449\u0438\u0445\u0441\u044f \u043e\u0441\u0442\u0430\u0442\u043a\u0430\u0445\n"),e.k0s(),e.j41(3,"div",0)(4,"div",1)(5,"span",2)(6,"p-inputNumber",3),e.bIt("onInput",function(){return i.onFilterChanged()}),e.mxI("ngModelChange",function(d){return e.DH7(i.filter.salesAnalysisInDays,d)||(i.filter.salesAnalysisInDays=d),d}),e.k0s(),e.j41(7,"label",4),e.EFF(8,"\u041f\u0435\u0440\u0438\u043e\u0434 \u0430\u043d\u0430\u043b\u0438\u0437\u0430 \u043f\u0440\u043e\u0434\u0430\u0436, \u0434\u043d\u0435\u0439"),e.k0s()(),e.j41(9,"span",2)(10,"p-inputNumber",5),e.bIt("onInput",function(){return i.onFilterChanged()}),e.mxI("ngModelChange",function(d){return e.DH7(i.filter.notificationPeriodInDays,d)||(i.filter.notificationPeriodInDays=d),d}),e.k0s(),e.j41(11,"label",4),e.EFF(12,"\u0417\u0430\u043f\u0430\u0441 \u043e\u0441\u0442\u0430\u0442\u043a\u043e\u0432, \u0434\u043d\u0435\u0439"),e.k0s()(),e.j41(13,"span",2)(14,"p-calendar",6),e.mxI("ngModelChange",function(d){return e.DH7(i.filter.date,d)||(i.filter.date=d),d}),e.bIt("onClear",function(){return i.onFilterChanged()})("onSelect",function(){return i.onFilterChanged()}),e.k0s(),e.j41(15,"label",7),e.EFF(16,"\u0414\u0430\u0442\u0430 \u043e\u0442\u0447\u0451\u0442\u0430"),e.k0s()()(),e.j41(17,"div",1)(18,"p-checkbox",8),e.mxI("ngModelChange",function(d){return e.DH7(i.filter.respectMinimalStock,d)||(i.filter.respectMinimalStock=d),d}),e.bIt("onChange",function(){return i.onFilterChanged()}),e.k0s(),e.j41(19,"p-checkbox",9),e.mxI("ngModelChange",function(d){return e.DH7(i.filter.respectActiveSupplyOrders,d)||(i.filter.respectActiveSupplyOrders=d),d}),e.bIt("onChange",function(){return i.onFilterChanged()}),e.k0s(),e.j41(20,"p-checkbox",10),e.mxI("ngModelChange",function(d){return e.DH7(i.filter.respectSupplyPreparationPeriod,d)||(i.filter.respectSupplyPreparationPeriod=d),d}),e.bIt("onChange",function(){return i.onFilterChanged()}),e.k0s()()(),e.DNE(21,Ra,4,10,"p-table",11)),2&o&&(e.R7$(6),e.Y8G("min",1)("required",!0),e.R50("ngModel",i.filter.salesAnalysisInDays),e.R7$(4),e.Y8G("min",1)("required",!0),e.R50("ngModel",i.filter.notificationPeriodInDays),e.R7$(4),e.R50("ngModel",i.filter.date),e.Y8G("showClear",!0)("readonlyInput",!0),e.R7$(4),e.R50("ngModel",i.filter.respectMinimalStock),e.Y8G("binary",!0),e.R7$(),e.R50("ngModel",i.filter.respectActiveSupplyOrders),e.Y8G("binary",!0),e.R7$(),e.R50("ngModel",i.filter.respectSupplyPreparationPeriod),e.Y8G("binary",!0),e.R7$(),e.Y8G("ngIf",i.groupedItems))},dependencies:[c.Ei,w.Vv,re.Sc,g.YU,g.Sq,g.bT,z.BC,z.YS,z.vS,_e.YI,M.XI,M.Tg,M.$I,M.yc,M.rl,Q.y8,g.QX,g.lG]})}}return n})();const Da=()=>[10,50,100,250],xa=()=>({"min-width":"50rem"}),ja=n=>({"bg-orange-100":n});function Ma(n,s){if(1&n){const t=e.RV6();e.j41(0,"h1"),e.EFF(1,"\u0410\u043a\u0446\u0438\u0438 Ozon"),e.k0s(),e.j41(2,"div",5)(3,"button",6),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.togglePromotionExpansion())}),e.k0s(),e.j41(4,"button",7),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.importOzonPromotions())}),e.k0s()(),e.j41(5,"div",5)(6,"p-checkbox",8),e.bIt("onChange",function(i){e.eBV(t);const u=e.XpG(2);return e.Njj(u.toggleDeletedFilter(i))}),e.mxI("ngModelChange",function(i){e.eBV(t);const u=e.XpG(2);return e.DH7(u.filterModel.excludeDeleted,i)||(u.filterModel.excludeDeleted=i),e.Njj(i)}),e.k0s(),e.j41(7,"label",9),e.EFF(8,"\u0418\u0441\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0430\u0440\u0445\u0438\u0432\u043d\u044b\u0435"),e.k0s()()}if(2&n){const t=e.XpG(2);e.R7$(3),e.Y8G("label",t.expandedAll?"\u0421\u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0430\u043a\u0446\u0438\u0438":"\u0420\u0430\u0437\u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0430\u043a\u0446\u0438\u0438"),e.R7$(3),e.R50("ngModel",t.filterModel.excludeDeleted),e.Y8G("binary",!0)}}function Pa(n,s){if(1&n&&e.nrm(0,"button",20),2&n){const t=e.XpG(),i=t.$implicit;e.Y8G("icon",t.expanded?"pi pi-chevron-down":"pi pi-chevron-right")("pRowToggler",i)}}function Ga(n,s){if(1&n&&(e.qex(0,18),e.EFF(1),e.bVm()),2&n){const t=e.XpG(2).$implicit;e.R7$(),e.SpI(" (\u0417\u0430\u043a\u0430\u0437 \u043e\u0442 ",t.orderAmount,"\u20bd) ")}}function Ba(n,s){if(1&n&&(e.j41(0,"div",18),e.EFF(1),e.DNE(2,Ga,2,1,"ng-container",19),e.k0s()),2&n){const t=e.XpG().$implicit;e.R7$(),e.SpI(" \u0421\u043a\u0438\u0434\u043a\u0430: ","CURRENCY"===t.discountType?t.discountValue+"\u20bd":"PERCENT"===t.discountType?t.discountValue+"%":t.discountType+" - "+t.discountValue," "),e.R7$(),e.Y8G("ngIf",t.orderAmount)}}function za(n,s){1&n&&(e.j41(0,"div",18),e.nrm(1,"i",21),e.EFF(2," \u041f\u0440\u043e\u043c\u043e\u043a\u043e\u0434 "),e.k0s())}function La(n,s){if(1&n&&(e.j41(0,"div",18),e.EFF(1," \u041d\u043e\u0432\u044b\u0445 \u0442\u043e\u0432\u0430\u0440\u043e\u0432: "),e.j41(2,"p-tag",22),e.EFF(3),e.k0s()()),2&n){const t=e.XpG().$implicit;e.R7$(2),e.Y8G("severity",t._activeProductCount?"danger":"success"),e.R7$(),e.SpI(" ",t._unconfirmedProductCount," ")}}function Aa(n,s){if(1&n&&(e.j41(0,"tr")(1,"td",10)(2,"div",11),e.DNE(3,Pa,1,2,"button",12),e.k0s()(),e.j41(4,"td")(5,"div",13)(6,"div",14)(7,"div",15)(8,"div")(9,"div",16)(10,"a",17),e.EFF(11),e.k0s()(),e.j41(12,"div",18),e.EFF(13),e.k0s(),e.DNE(14,Ba,3,2,"div",19)(15,za,3,0,"div",19)(16,La,4,2,"div",19),e.k0s()()()()()()),2&n){const t=s.$implicit;e.R7$(3),e.Y8G("ngIf",t.products.length),e.R7$(7),e.Mz_("href","https://seller.ozon.ru/app/highlights/",t.iD,"",e.B4B),e.R7$(),e.SpI(" ",t.name," "),e.R7$(2),e.SpI(" \u0422\u0438\u043f: ",t.actionType," "),e.R7$(),e.Y8G("ngIf",t.discountValue),e.R7$(),e.Y8G("ngIf",t.isVoucherAction),e.R7$(),e.Y8G("ngIf",t.products.length)}}function $a(n,s){if(1&n){const t=e.RV6();e.j41(0,"tr")(1,"th",27)(2,"div"),e.nrm(3,"p-sortIcon",28),e.k0s(),e.j41(4,"div",29)(5,"p-checkbox",30),e.bIt("click",function(){e.eBV(t);const i=e.XpG().$implicit,u=e.XpG(2);return e.Njj(u.toggleCheckedProducts(i))}),e.mxI("ngModelChange",function(i){e.eBV(t);const u=e.XpG().$implicit;return e.DH7(u.allChecked,i)||(u.allChecked=i),e.Njj(i)}),e.k0s()()(),e.j41(6,"th",31),e.EFF(7,"\u0410\u0440\u0442\u0438\u043a\u0443\u043b "),e.nrm(8,"p-sortIcon",32),e.k0s(),e.j41(9,"th"),e.EFF(10,"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435"),e.k0s(),e.j41(11,"th")(12,"div"),e.EFF(13,"\u0426\u0435\u043d\u0430 \u043f\u0440\u043e\u0434\u0430\u0436\u0438"),e.k0s(),e.j41(14,"div",33),e.EFF(15,"\u041f\u043e\u043b\u043d\u0430\u044f \u0446\u0435\u043d\u0430"),e.k0s(),e.j41(16,"div",33),e.EFF(17,"\u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0446\u0435\u043d\u0430"),e.k0s()(),e.j41(18,"th"),e.EFF(19," \u0426\u0435\u043d\u0430 \u043f\u043e \u0430\u043a\u0446\u0438\u0438 "),e.nrm(20,"br"),e.j41(21,"span",33),e.EFF(22,"\u041c\u0430\u043a\u0441. \u0446\u0435\u043d\u0430 \u043f\u043e \u0430\u043a\u0446\u0438\u0438"),e.k0s()(),e.j41(23,"th"),e.EFF(24,"\u041c\u0438\u043d. \u0441\u0442\u043e\u043a"),e.k0s(),e.j41(25,"th"),e.EFF(26,"\u0421\u0442\u043e\u043a"),e.k0s()()}if(2&n){const t=e.XpG().$implicit;e.R7$(5),e.R50("ngModel",t.allChecked),e.Y8G("binary",!0)}}function Va(n,s){1&n&&(e.qex(0),e.j41(1,"tr"),e.nrm(2,"td",10),e.j41(3,"td",35),e.nrm(4,"p-skeleton",36),e.k0s(),e.nrm(5,"td",23),e.k0s(),e.bVm())}function Na(n,s){if(1&n){const t=e.RV6();e.j41(0,"input",42),e.mxI("ngModelChange",function(i){e.eBV(t);const u=e.XpG(2).$implicit;return e.DH7(u.actionPrice,i)||(u.actionPrice=i),e.Njj(i)}),e.k0s(),e.j41(1,"div",33),e.EFF(2),e.k0s()}if(2&n){const t=e.XpG(2).$implicit;e.R50("ngModel",t.actionPrice),e.R7$(2),e.JRh(t.maxActionPrice)}}function Xa(n,s){if(1&n&&(e.qex(0),e.j41(1,"p-tag",22)(2,"span",43),e.EFF(3),e.k0s()(),e.bVm()),2&n){const t=e.XpG(3).$implicit,o=e.XpG(3);e.R7$(),e.Y8G("severity",o.getPriceSeverity(t)),e.R7$(2),e.JRh(t.actionPrice)}}function Ya(n,s){1&n&&(e.qex(0),e.EFF(1,"-"),e.bVm())}function Ha(n,s){if(1&n&&(e.DNE(0,Xa,4,2,"ng-container",34)(1,Ya,2,0,"ng-container",34),e.j41(2,"div",33),e.EFF(3),e.k0s()),2&n){const t=e.XpG(2).$implicit;e.Y8G("ngIf",!!t.actionPrice),e.R7$(),e.Y8G("ngIf",!t.actionPrice),e.R7$(2),e.JRh(t.maxActionPrice)}}function Ua(n,s){if(1&n){const t=e.RV6();e.qex(0),e.j41(1,"tr",37)(2,"td",10)(3,"div",38)(4,"p-checkbox",30),e.bIt("click",function(){e.eBV(t);const i=e.XpG().$implicit,u=e.XpG().$implicit,d=e.XpG(2);return e.Njj(d.changeCandidateState(u,i))}),e.mxI("ngModelChange",function(i){e.eBV(t);const u=e.XpG().$implicit;return e.DH7(u._active,i)||(u._active=i),e.Njj(i)}),e.k0s()()(),e.j41(5,"td")(6,"a",17),e.EFF(7),e.k0s()(),e.j41(8,"td"),e.EFF(9),e.k0s(),e.j41(10,"td")(11,"div"),e.EFF(12),e.k0s(),e.j41(13,"div",33),e.EFF(14),e.k0s(),e.j41(15,"div",33),e.EFF(16),e.k0s()(),e.j41(17,"td",39)(18,"p-cellEditor"),e.DNE(19,Na,3,2,"ng-template",40)(20,Ha,4,3,"ng-template",41),e.k0s()(),e.j41(21,"td"),e.EFF(22),e.k0s(),e.j41(23,"td"),e.EFF(24),e.k0s()(),e.bVm()}if(2&n){const t=e.XpG().$implicit;e.R7$(),e.Y8G("ngClass",e.eq3(13,ja,!t.isCandidate&&!t.confirmed)),e.R7$(3),e.R50("ngModel",t._active),e.Y8G("binary",!0),e.R7$(2),e.Mz_("href","https://seller.ozon.ru/app/prices/manager/",t.ozonProduct.ozonProductID,"/prices",e.B4B),e.R7$(),e.SpI(" ",t.ozonProduct.productPackageID," "),e.R7$(2),e.JRh(t.ozonProduct.name),e.R7$(3),e.JRh(t.ozonProduct.marketingPrice||"-"),e.R7$(2),e.JRh(t.ozonProduct.price||"-"),e.R7$(2),e.JRh(t.ozonProduct.minPrice||"-"),e.R7$(),e.Y8G("pEditableColumn",t.actionPrice),e.R7$(5),e.JRh(t.stock),e.R7$(2),e.JRh(t.minStock)}}function Wa(n,s){if(1&n&&e.DNE(0,Va,6,0,"ng-container",34)(1,Ua,25,15,"ng-container",34),2&n){const t=s.$implicit;e.Y8G("ngIf",!t.ozonProduct),e.R7$(),e.Y8G("ngIf",t.ozonProduct)}}function Ja(n,s){if(1&n){const t=e.RV6();e.j41(0,"button",44),e.bIt("click",function(){e.eBV(t);const i=e.XpG().$implicit,u=e.XpG(2);return e.Njj(u.updatePromotionProducts(i))}),e.k0s()}}function Ka(n,s){if(1&n&&(e.j41(0,"tr")(1,"td",23)(2,"p-table",24),e.DNE(3,$a,27,2,"ng-template",25)(4,Wa,2,2,"ng-template",3)(5,Ja,1,0,"ng-template",26),e.k0s()()()),2&n){const t=s.$implicit;e.R7$(2),e.Y8G("sortOrder",-1)("value",t.products)}}function qa(n,s){if(1&n){const t=e.RV6();e.j41(0,"p-table",1),e.bIt("onPage",function(i){e.eBV(t);const u=e.XpG();return e.Njj(u.pageChange(i))}),e.DNE(1,Ma,9,3,"ng-template",2)(2,Aa,17,8,"ng-template",3)(3,Ka,6,2,"ng-template",4),e.k0s()}if(2&n){const t=e.XpG();e.Y8G("expandedRowKeys",t.expandedRowKeys)("loading",t.loading)("paginator",!0)("rowsPerPageOptions",e.lJ4(8,Da))("rows",t.filterModel.count)("tableStyle",e.lJ4(9,xa))("totalRecords",t.totalRecords)("value",t.data)}}let Qa=(()=>{class n extends r.x{static{this.FilterID="OzonPromotionListComponent"}constructor(t,o,i,u,d,k){super(k),this.promotionReader=t,this.promotionWriter=o,this.messageService=i,this.ozonProductClient=u,this.dbService=d,this.loading=!1,this.expandedAll=!1,this.expandedRowKeys={},this.findModelSubject=new b.t(null),this.cachedProducts=new Map}ngOnInit(){this.titleService.setTitle("\u0410\u043a\u0446\u0438\u0438 Ozon"),this.findModelSubject.pipe((0,E.p)(t=>!!t)).pipe((0,C.Q)(this.destroyed)).pipe((0,fe.n)(t=>{const o=Object.assign({},t);return this.dbService.update("filters",{id:n.FilterID,data:o}).pipe((0,y.W)(u=>(this.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043a",severity:"error",detail:u}),p.w))).subscribe(),this.findOzonPromotions(t)})).subscribe(t=>{const o=t.items.reduce((i,u)=>(this.preparePromotion(u),u.products.forEach(d=>{this.cachedProducts.has(d.iD)||i.add(d.iD)}),i),new Set);this.data=t.items,o.size?this.loadOzonProducts(o):this.data.forEach(i=>this.setOzonProducts(i)),this.totalRecords=t.totalCount}),this.dbService.getByID("filters",n.FilterID).subscribe(t=>{const o={count:50,offset:0,excludeCandidates:!1,includeProduct:!0,excludeDeleted:!0};t?.data&&Object.assign(o,t.data),this.filterModel=new a.D.FindOzonPromotionsModel(o),this.findModelSubject.next(this.filterModel)})}pageChange(t){(this.filterModel.count!=t.rows||this.filterModel.offset!=t.first)&&(this.filterModel.offset=t.first,this.findModelSubject.next(this.filterModel))}preparePromotion(t){Object.defineProperty(t,"_activeProductCount",{get:()=>t.products.filter(i=>!i.isCandidate).length});let o=0;return t.products.forEach(i=>{Object.defineProperty(i,"_active",{get:()=>!i.isCandidate,set:u=>i.isCandidate=!u}),o+=+(!i.confirmed&&!i.isCandidate)}),Object.assign(t,{_totalProductCount:t.products.length,_unconfirmedProductCount:o}),t}toggleDeletedFilter(){this.findModelSubject.next(this.filterModel)}changeCandidateState(t,o){if(!o.isCandidate&&!o.actionPrice){const i=o.ozonProduct;o.actionPrice=i.marketingPrice||i.price||i.minPrice}this.sortProducts(t),this.resetGroupCheckedState(t)}sortProducts(t){t.products.sort((o,i)=>{const d=i.ozonProduct,k=this.getMinimalPrice(o.ozonProduct),R=this.getMinimalPrice(d);return+o.isCandidate-+i.isCandidate||+o.confirmed-+i.confirmed||+(null!=o.maxActionPrice&&null!=k&&k<o.maxActionPrice)-+(null!=i.maxActionPrice&&null!=R&&R<i.maxActionPrice)||+(null==k)-+(null==R)||+(+k<o.maxActionPrice)-+(+R<i.maxActionPrice)})}getMinimalPrice(t){return t?.minPrice||t?.marketingPrice}getPriceSeverity(t){const o=this.getMinimalPrice(t.ozonProduct);return t.maxActionPrice<o?"danger":"success"}setOzonProducts(t){t.products.forEach(o=>{o.ozonProduct=this.cachedProducts.get(o.iD)}),this.sortProducts(t)}resetGroupCheckedState(t){const o=t;o.allChecked=!1,o.normalChecked=!1}toggleCheckedProducts(t){const o=t.allChecked;t.products.forEach(i=>{i.isCandidate=!o})}loadOzonProducts(t){this.ozonProductClient.findOzonProducts(new a.D.FindOzonProductsModel({productIDs:[...t],includeStocks:!1,offset:0,count:1e5})).subscribe(o=>{o.items.forEach(i=>{i.ozonProductID&&this.cachedProducts.set(i.ozonProductID,i)}),this.data.forEach(i=>this.setOzonProducts(i))})}updatePromotionProducts(t){const o=t.products.filter(i=>!i.isCandidate);this.promotionWriter.updateOzonPromotionProducts(t.iD,o).pipe((0,y.W)(i=>(this.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430",severity:"error",detail:i}),p.w))).subscribe(i=>{let u=!1;if(i.additionErrors)for(const k of Object.keys(i.additionErrors)){u=!0;const R=this.cachedProducts.get(+k);this.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430",severity:"error",detail:`\u041e\u0448\u0438\u0431\u043a\u0430 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u0442\u043e\u0432\u0430\u0440\u0430 #${R.name} \u0432 \u0430\u043a\u0446\u0438\u044e: ${i.additionErrors[k]}`})}if(i.deletionErrors)for(const k of Object.keys(i.deletionErrors)){u=!0;const R=this.cachedProducts.get(+k);this.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430",severity:"error",detail:`\u041e\u0448\u0438\u0431\u043a\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f \u0442\u043e\u0432\u0430\u0440\u0430 #${R.name} \u0438\u0437 \u0430\u043a\u0446\u0438\u0438: ${i.additionErrors[k]}`})}u||this.messageService.add({summary:"\u0423\u0441\u043f\u0435\u0445",severity:"success",detail:"\u0421\u043f\u0438\u0441\u043e\u043a \u043f\u0440\u043e\u0434\u0443\u043a\u0442\u043e\u0432 \u0430\u043a\u0446\u0438\u0438 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0438\u0437\u043c\u0435\u043d\u0451\u043d"});const d=this.data.findIndex(k=>k.iD==t.iD);this.data[d]=this.preparePromotion(i.updatedPromotion),this.setOzonProducts(i.updatedPromotion)})}togglePromotionExpansion(){this.expandedAll=!this.expandedAll,this.data.forEach(t=>{t.products.length&&(this.expandedRowKeys[t.iD]=this.expandedAll)})}findOzonPromotions(t){return this.promotionReader.findOzonPromotions(t).pipe((0,y.W)(o=>(this.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430",severity:"error",detail:o}),p.w)))}importOzonPromotions(){var t=this;return(0,O.A)(function*(){t.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430",severity:"error",detail:"\u041d\u0435 \u0440\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u043d\u043e"})})()}static{this.\u0275fac=function(o){return new(o||n)(e.rXU(a.D.OzonPromotionClient),e.rXU(l.X.OzonPromotionClient),e.rXU(c.bg),e.rXU(a.D.OzonProductClient),e.rXU(I.MX),e.rXU(h.hE))}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-ozon-promotion-list"]],features:[e.Vt3],decls:2,vars:1,consts:[["dataKey","iD",3,"expandedRowKeys","loading","paginator","rowsPerPageOptions","rows","tableStyle","totalRecords","value","onPage",4,"ngIf"],["dataKey","iD",3,"onPage","expandedRowKeys","loading","paginator","rowsPerPageOptions","rows","tableStyle","totalRecords","value"],["pTemplate","caption"],["pTemplate","body"],["pTemplate","rowexpansion"],[1,"flex","gap-3","p-2"],["pButton","","pRipple","","type","button",3,"click","label"],["label","\u0418\u043c\u043f\u043e\u0440\u0442 \u0430\u043a\u0446\u0438\u0439","pButton","","pRipple","","type","button",3,"click"],["inputId","deletedPromotionFilter",3,"onChange","ngModelChange","ngModel","binary"],["for","deletedPromotionFilter"],[2,"width","1%"],[1,"flex","align-items-center","justify-content-center","gap-2"],["class","p-button-text p-button-rounded p-button-plain","pButton","","pRipple","","type","button",3,"icon","pRowToggler",4,"ngIf"],[1,"flex","flex-column","sm:flex-row","sm:align-items-center"],[1,"flex","flex-column","md:flex-row","justify-content-between","md:align-items-center","flex-1"],[1,"flex","flex-row","md:flex-column","justify-content-between","align-items-start","gap-2"],[1,"text-lg","font-medium","font-bold","text-900","mt-2"],["target","_blank",3,"href"],[1,"text-lg","font-medium","text-900","mt-2"],["class","text-lg font-medium text-900 mt-2",4,"ngIf"],["pButton","","pRipple","","type","button",1,"p-button-text","p-button-rounded","p-button-plain",3,"icon","pRowToggler"],[1,"pi","pi-barcode","text-blue-500"],[3,"severity"],["colspan","2"],["sortField","_active",3,"sortOrder","value"],["pTemplate","header"],["pTemplate","footer"],["pSortableColumn","_active"],["field","_active"],[1,"p-2"],[3,"click","ngModelChange","ngModel","binary"],["pSortableColumn","ozonProduct.productPackageID"],["field","ozonProduct.productPackageID"],[1,"text-500"],[4,"ngIf"],["colspan","4"],["height","4rem","width","100%"],[3,"ngClass"],[1,"gap-2","p-2"],["pEditableColumnField","product.actionPrice",1,"text-center",3,"pEditableColumn"],["pTemplate","input"],["pTemplate","output"],["pInputText","","type","number",3,"ngModelChange","ngModel"],[1,"text-white-500"],["label","\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c","pButton","","pRipple","","type","button",3,"click"]],template:function(o,i){1&o&&(e.DNE(0,qa,4,10,"p-table",0),e.nrm(1,"p-toast")),2&o&&e.Y8G("ngIf",i.data&&i.filterModel)},dependencies:[c.Ei,T._f,re.Sc,ue.S,g.YU,g.bT,z.me,z.Q0,z.BC,z.vS,M.XI,M.Tg,M.FP,M.hp,M.c5,M.yc,me.v,Q.y8,pe.E]})}}return n})();var Za=m(1413),Ie=m(8537),Fe=m(8833);const er=["productAutocomplete"],tr=()=>[10,25,50],nr=()=>({"min-width":"75rem"}),ir=()=>({width:"50vw"});function or(n,s){1&n&&(e.j41(0,"tr")(1,"th"),e.EFF(2,"\u0412\u043a\u043b\u044e\u0447\u0435\u043d\u0430"),e.k0s(),e.j41(3,"th"),e.EFF(4,"\u0421\u043a\u043b\u0430\u0434 \u043e\u0442\u0433\u0440\u0443\u0437\u043a\u0438"),e.k0s(),e.j41(5,"th"),e.EFF(6,"\u0421\u043a\u043b\u0430\u0434 \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f"),e.k0s(),e.j41(7,"th"),e.EFF(8,"\u041e\u043a\u043d\u043e"),e.k0s(),e.j41(9,"th"),e.EFF(10,"\u041c\u0438\u043d. \u0434\u0430\u0442\u0430"),e.k0s(),e.j41(11,"th"),e.EFF(12,"\u041c\u0430\u043a\u0441. \u0434\u0430\u0442\u0430"),e.k0s(),e.j41(13,"th"),e.EFF(14,"\u0421\u0442\u0430\u0442\u0443\u0441"),e.k0s(),e.j41(15,"th"),e.EFF(16,"\u0417\u0430\u043f\u0443\u0441\u043a\u043e\u0432"),e.k0s(),e.nrm(17,"th"),e.k0s())}function ar(n,s){if(1&n){const t=e.RV6();e.j41(0,"tr")(1,"td"),e.nrm(2,"p-checkbox",7),e.EFF(3),e.k0s(),e.j41(4,"td"),e.EFF(5),e.k0s(),e.j41(6,"td"),e.EFF(7),e.k0s(),e.j41(8,"td"),e.EFF(9),e.k0s(),e.j41(10,"td"),e.EFF(11),e.k0s(),e.j41(12,"td"),e.EFF(13),e.k0s(),e.j41(14,"td"),e.EFF(15),e.k0s(),e.j41(16,"td"),e.EFF(17),e.k0s(),e.j41(18,"td")(19,"button",8),e.bIt("click",function(){const i=e.eBV(t).$implicit,u=e.XpG();return e.Njj(u.editTask(i))}),e.k0s(),e.nrm(20,"button",9),e.k0s()()}if(2&n){const t=s.expanded,o=s.$implicit;e.R7$(2),e.Y8G("disabled",!0)("ngModel",o.enabled)("binary",!0),e.R7$(),e.SpI(" ",o.enabled," "),e.R7$(2),e.JRh(o.dropOffWarehouseName),e.R7$(2),e.JRh(o.targetWarehouseName),e.R7$(2),e.SpI("",o.timeReserveInHours,"\u0447"),e.R7$(2),e.JRh(o.minDate?o.minDate+"\u0447":"-"),e.R7$(2),e.JRh(o.maxDate?o.maxDate+"\u0447":"-"),e.R7$(2),e.JRh(o.status),e.R7$(2),e.JRh(o.runCount),e.R7$(3),e.Y8G("icon",t?"pi pi-chevron-down":"pi pi-chevron-right")("pRowToggler",o)}}function rr(n,s){1&n&&(e.j41(0,"tr")(1,"th"),e.EFF(2,"\u0410\u0440\u0442\u0438\u043a\u0443\u043b"),e.k0s(),e.j41(3,"th"),e.EFF(4,"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435"),e.k0s(),e.j41(5,"th"),e.EFF(6,"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e"),e.k0s()())}function lr(n,s){1&n&&(e.qex(0),e.j41(1,"td",13),e.nrm(2,"p-skeleton",14),e.k0s(),e.bVm())}function ur(n,s){if(1&n&&(e.qex(0),e.j41(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.bVm()),2&n){const t=s.ngIf,o=e.XpG().$implicit;e.R7$(2),e.JRh(t.productPackageID),e.R7$(2),e.JRh(t.name),e.R7$(2),e.JRh(o.quantity)}}function sr(n,s){if(1&n&&(e.j41(0,"tr"),e.DNE(1,lr,3,0,"ng-container",12)(2,ur,7,3,"ng-container",12),e.k0s()),2&n){const t=s.$implicit,o=e.XpG(2);e.R7$(),e.Y8G("ngIf",!(null!=o.products&&o.products.has(t.iD))),e.R7$(),e.Y8G("ngIf",null==o.products?null:o.products.get(t.iD))}}function cr(n,s){if(1&n&&(e.j41(0,"tr")(1,"td",10)(2,"p-table",11),e.DNE(3,rr,7,0,"ng-template",3)(4,sr,3,2,"ng-template",4),e.k0s()()()),2&n){const t=s.$implicit;e.R7$(2),e.Y8G("value",t.products)}}function pr(n,s){1&n&&(e.j41(0,"div",37),e.EFF(1,"(\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0441\u043a\u043b\u0430\u0434\u044b \u043e\u0442\u0433\u0440\u0443\u0437\u043a\u0438)"),e.k0s())}function dr(n,s){if(1&n&&(e.j41(0,"div",38),e.EFF(1),e.k0s()),2&n){const t=s.$implicit;e.R7$(),e.JRh(t.name)}}function _r(n,s){if(1&n&&e.DNE(0,pr,2,0,"div",35)(1,dr,2,1,"div",36),2&n){const t=s.$implicit;e.Y8G("ngIf",!(null!=t&&t.length)),e.R7$(),e.Y8G("ngForOf",t)}}function fr(n,s){if(1&n&&(e.j41(0,"div",39)(1,"div"),e.EFF(2),e.k0s()()),2&n){const t=s.$implicit;e.R7$(2),e.Lme("",t.productPackageID,": ",t.name,"")}}function mr(n,s){1&n&&e.EFF(0,"\u0410\u0440\u0442\u0438\u043a\u0443\u043b \u0442\u043e\u0432\u0430\u0440\u0430")}function hr(n,s){if(1&n){const t=e.RV6();e.j41(0,"p-inputNumber",40),e.mxI("ngModelChange",function(i){e.eBV(t);const u=e.XpG(2);return e.DH7(u.newItemProduct.quantity,i)||(u.newItemProduct.quantity=i),e.Njj(i)}),e.k0s()}if(2&n){const t=e.XpG(2);e.R50("ngModel",t.newItemProduct.quantity)}}function gr(n,s){1&n&&(e.j41(0,"div",42),e.EFF(1,"\u0422\u043e\u0432\u0430\u0440\u044b"),e.k0s())}function vr(n,s){1&n&&(e.j41(0,"tr")(1,"th"),e.EFF(2,"\u0410\u0440\u0442\u0438\u043a\u0443\u043b"),e.k0s(),e.j41(3,"th"),e.EFF(4,"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435"),e.k0s(),e.j41(5,"th"),e.EFF(6,"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e"),e.k0s(),e.nrm(7,"th"),e.k0s())}function br(n,s){if(1&n){const t=e.RV6();e.j41(0,"p-inputNumber",24),e.mxI("ngModelChange",function(i){e.eBV(t);const u=e.XpG().$implicit;return e.DH7(u.quantity,i)||(u.quantity=i),e.Njj(i)}),e.k0s()}if(2&n){const t=e.XpG().$implicit;e.Y8G("useGrouping",!1),e.R50("ngModel",t.quantity)}}function yr(n,s){if(1&n&&e.EFF(0),2&n){const t=e.XpG().$implicit;e.SpI(" ",t.quantity," ")}}function Or(n,s){if(1&n){const t=e.RV6();e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td",43)(6,"p-cellEditor"),e.DNE(7,br,1,2,"ng-template",44)(8,yr,1,1,"ng-template",45),e.k0s()(),e.j41(9,"td")(10,"button",46),e.bIt("click",function(){const i=e.eBV(t).$implicit,u=e.XpG(3);return e.Njj(u.removeNewItemProduct(i))}),e.k0s()()()}if(2&n){const t=s.$implicit;e.R7$(2),e.JRh(t.id),e.R7$(2),e.JRh(t.name),e.R7$(),e.Y8G("pEditableColumn",t.count)}}function Sr(n,s){if(1&n&&(e.j41(0,"p-table",11),e.DNE(1,gr,2,0,"ng-template",41)(2,vr,8,0,"ng-template",3)(3,Or,11,3,"ng-template",4),e.k0s()),2&n){const t=e.XpG(2);e.Y8G("value",t.newItem.products)}}function Er(n,s){if(1&n){const t=e.RV6();e.j41(0,"p-dialog",15),e.mxI("visibleChange",function(i){e.eBV(t);const u=e.XpG();return e.DH7(u.showEditDialog,i)||(u.showEditDialog=i),e.Njj(i)}),e.bIt("onHide",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.onHideDialog())}),e.j41(1,"div",16)(2,"div",17)(3,"label",18),e.EFF(4,"\u0421\u043a\u043b\u0430\u0434\u044b \u043e\u0442\u0433\u0440\u0443\u0437\u043a\u0438"),e.k0s(),e.j41(5,"p-multiSelect",19),e.mxI("ngModelChange",function(i){e.eBV(t);const u=e.XpG();return e.DH7(u.newItem.dropOffWarehouses,i)||(u.newItem.dropOffWarehouses=i),e.Njj(i)}),e.DNE(6,_r,2,2,"ng-template",20),e.k0s()(),e.j41(7,"div",17)(8,"label",21),e.EFF(9,"\u0421\u043a\u043b\u0430\u0434 \u043f\u043e\u0441\u0442\u0430\u0432\u043a\u0438"),e.k0s(),e.j41(10,"p-dropdown",22),e.mxI("ngModelChange",function(i){e.eBV(t);const u=e.XpG();return e.DH7(u.newItem.targetWarehouseID,i)||(u.newItem.targetWarehouseID=i),e.Njj(i)}),e.k0s()(),e.j41(11,"div",17)(12,"label",23),e.EFF(13,"\u0420\u0435\u0437\u0435\u0440\u0432 \u0432\u0440\u0435\u043c\u0435\u043d\u0438, \u0447"),e.k0s(),e.j41(14,"p-inputNumber",24),e.mxI("ngModelChange",function(i){e.eBV(t);const u=e.XpG();return e.DH7(u.newItem.timeReserveInHours,i)||(u.newItem.timeReserveInHours=i),e.Njj(i)}),e.k0s()(),e.j41(15,"div",17)(16,"label",25),e.EFF(17,"\u041a\u0440\u0430\u0439\u043d\u0438\u0435 \u0434\u0430\u0442\u044b"),e.k0s(),e.j41(18,"p-calendar",26),e.mxI("ngModelChange",function(i){e.eBV(t);const u=e.XpG();return e.DH7(u.newItem.minDate,i)||(u.newItem.minDate=i),e.Njj(i)}),e.k0s()(),e.j41(19,"div")(20,"label",27),e.EFF(21,"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0442\u043e\u0432\u0430\u0440"),e.k0s(),e.j41(22,"p-autoComplete",28,0),e.nI1(24,"async"),e.bIt("completeMethod",function(i){e.eBV(t);const u=e.XpG();return e.Njj(u.findProductsByName(i))})("onSelect",function(i){e.eBV(t);const u=e.XpG();return e.Njj(u.selectProduct(i))}),e.DNE(25,fr,3,2,"ng-template",29)(26,mr,1,0,"ng-template",30),e.k0s(),e.DNE(27,hr,1,1,"p-inputNumber",31),e.j41(28,"div")(29,"button",32),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.addNewItemProduct())}),e.EFF(30,"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0442\u043e\u0432\u0430\u0440"),e.k0s()()(),e.j41(31,"div",33),e.DNE(32,Sr,4,1,"p-table",34),e.k0s(),e.j41(33,"button",32),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.addSupplyRegistrationTask(i.newItem))}),e.EFF(34),e.k0s()()()}if(2&n){const t=e.XpG();e.Aen(e.lJ4(28,ir)),e.Y8G("draggable",!0)("modal",!0)("resizable",!0),e.R50("visible",t.showEditDialog),e.R7$(),e.Y8G("disabled",t.addingTask),e.R7$(4),e.R50("ngModel",t.newItem.dropOffWarehouses),e.Y8G("options",t.dropOffWarehouses),e.R7$(5),e.R50("ngModel",t.newItem.targetWarehouseID),e.Y8G("autoDisplayFirst",!1)("options",t.targetWarehouses)("filter",!0)("showClear",!0),e.R7$(4),e.Y8G("useGrouping",!1),e.R50("ngModel",t.newItem.timeReserveInHours),e.R7$(4),e.R50("ngModel",t.newItem.minDate),e.Y8G("showClear",!0)("readonlyInput",!0),e.R7$(4),e.Y8G("minLength",3)("suggestions",e.bMT(24,26,t.newItemProducts)),e.R7$(5),e.Y8G("ngIf",t.newItemProduct),e.R7$(2),e.Y8G("disabled",!t.isValidNewItemProduct),e.R7$(3),e.Y8G("ngIf",t.newItem.products.length),e.R7$(),e.Y8G("disabled",!t.isValidNewItem||t.addingTask),e.R7$(),e.SpI(" ",t.editItem?"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"," ")}}let Cr=(()=>{class n extends r.x{static{this.FilterID="OzonSupplyRegistrationTaskListComponent"}constructor(t,o,i,u,d,k,R){super(R),this.supplyOrderClient=t,this.supplyOrderCommandHandler=o,this.ozonProductClient=i,this.messageService=u,this.warehouseService=d,this.dbService=k,this.findModelSubject=new b.t(null),this.findProductPackageSubject=new b.t(null),this.newItemProducts=new b.t([]),this.newItem=void 0,this.editItem=void 0,this.newItemProduct=void 0,this.productSearchSubject=new Za.B}get isValidNewItem(){return this.newItem&&this.newItem.targetWarehouseID&&this.newItem.dropOffWarehouses.length>0&&this.newItem.products.length>0}get isValidNewItemProduct(){return this.newItemProduct&&!!this.newItemProduct.id&&!!this.newItemProduct.quantity}ngOnInit(){this.titleService.setTitle("\u041f\u043e\u0441\u0442\u0430\u0432\u043a\u0438 Ozon"),this.productSearchSubject.pipe((0,C.Q)(this.destroyed)).pipe((0,fe.n)(t=>this.ozonProductClient.findOzonProducts(new a.D.FindOzonProductsModel({count:100,offset:0,productName:t,includeStocks:!1})).pipe((0,y.W)(o=>(this.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u043e\u0438\u0441\u043a\u0430 \u0442\u043e\u0432\u0430\u0440\u043e\u0432",severity:"error",detail:o}),p.w))))).subscribe(t=>{const o=new Set(this.newItem.products.map(u=>u.id)),i=t.items.filter(u=>!o.has(u.productPackageID));this.newItemProducts.next(i)}),this.warehouseService.getWarehouses().pipe((0,y.W)(t=>(this.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0441\u043a\u043b\u0430\u0434\u043e\u0432",severity:"error",detail:t}),p.w))).subscribe(t=>{this.dropOffWarehouses=t.filter(o=>o.type===a.D.OzonWarehouseType.CrossDock||o.type===a.D.OzonWarehouseType.DistributionCenter||o.type===a.D.OzonWarehouseType.SortingCenter).sort((o,i)=>o.name.localeCompare(i.name)),this.targetWarehouses=t.filter(o=>o.type===a.D.OzonWarehouseType.Fulfillment).sort((o,i)=>o.name.localeCompare(i.name))}),this.findProductPackageSubject.pipe((0,E.p)(t=>!!t&&t.productName?.length>=3)).pipe((0,C.Q)(this.destroyed)).pipe((0,v.M)(()=>{this.loadingProducts=!0})),this.findModelSubject.pipe((0,E.p)(t=>!!t)).pipe((0,C.Q)(this.destroyed)).pipe((0,fe.n)(t=>{const o=Object.assign({},t),i={id:n.FilterID,data:o};return this.loading=!0,this.dbService.update("filters",i).pipe((0,y.W)(u=>(this.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043a",severity:"error",detail:u}),p.w))).subscribe(),this.supplyOrderClient.findOzonSupplyRegistrationTasks(t)})).pipe((0,y.W)(t=>(this.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0434\u0430\u043d\u043d\u044b\u0445",severity:"error",detail:t}),this.loading=!1,p.w))).subscribe(t=>{this.loading=!1;const o=new Set;t.items.forEach(i=>{const u=i;i.products.forEach(k=>o.add(k.iD));let d=6;if(i.finished)d=1;else if(i.runCount>=10)d=2;else for(const k of i.items)if(d=k.hasCreateSupplyOperationID?3:k.draftID?4:k.hasCreateDraftOperationID?5:6,6!=d)break;u.status=this.getTaskStatusText(d)}),this.data=t,o.size?this.ozonProductClient.findOzonProducts(new a.D.FindOzonProductsModel({iDs:[...o],offset:0,count:void 0,includeStocks:!1})).subscribe(i=>{this.products=i.items.reduce((u,d)=>(u.set(d.productPackageID,d),u),new Map)}):this.products=new Map}),this.dbService.getByID("filters",n.FilterID).subscribe(t=>{const o={count:50,offset:0,excludeCandidates:!1,includeProduct:!0,excludeDeleted:!0};t?.data&&Object.assign(o,t.data),this.filterModel=new a.D.FindOzonSupplyRegistrationTasksModel(o),this.findModelSubject.next(this.filterModel)})}pageChange(t){(this.filterModel.count!=t.rows||this.filterModel.offset!=t.first)&&(this.filterModel.offset=t.first,this.findModelSubject.next(this.filterModel))}removeNewItemProduct(t){const o=this.newItem.products.indexOf(t);o>=0&&this.newItem.products.splice(o,1)}addSupplyRegistrationTask(t){this.addingTask=!0;const o={targetWarehouseID:t.targetWarehouseID,dropOffWarehouseIDs:t.dropOffWarehouses,products:t.products.reduce((i,u)=>(i[u.id.toString()]=u.quantity,i),{}),timeReserveInHours:t.timeReserveInHours??void 0,iD:this.editItem?this.editItem.iD:void 0};this.supplyOrderCommandHandler.addOzonSupplyRegistrationTask(new l.X.OzonSupplyRegistrationTask(o)).pipe((0,y.W)(i=>(this.messageService.add({summary:this.editItem?"\u041e\u0448\u0438\u0431\u043a\u0430 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f \u0437\u0430\u0434\u0430\u0447\u0438":"\u041e\u0448\u0438\u0431\u043a\u0430 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u0437\u0430\u0434\u0430\u0447\u0438",severity:"error",detail:i}),this.addingTask=!1,p.w))).subscribe(()=>{this.messageService.add({summary:this.editItem?"\u0417\u0430\u0434\u0430\u0447\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0430":"\u0417\u0430\u0434\u0430\u0447\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0430",severity:"success"}),this.newItem=void 0,this.editItem=void 0,this.addingTask=!1})}editTask(t){this.editItem=t,this.newItem={dropOffWarehouses:t.items.map(o=>o.dropOffWarehouseID),timeReserveInHours:t.timeReserveInHours,maxDate:t.maxDate,minDate:t.minDate,targetWarehouseID:t.targetWarehouseID,products:t.products.map(o=>({id:o.iD,quantity:o.quantity}))},this.showEditDialog=!0}selectProduct(t){const o=t.value;o?this.newItemProduct={id:o.productPackageID,name:o.name,quantity:1}:(this.newItemProduct.quantity=void 0,this.newItemProduct.id=void 0)}openAddNewItemDialog(){this.newItem={dropOffWarehouses:[],targetWarehouseID:void 0,timeReserveInHours:void 0,minDate:void 0,maxDate:void 0,products:[]},this.showEditDialog=!0}findProductsByName(t){t.query.trim().length>2&&this.productSearchSubject.next(t.query)}addNewItemProduct(){this.isValidNewItemProduct&&(this.newItem.products.push(this.newItemProduct),this.productAutocomplete.clear(),this.newItemProduct={id:void 0,name:void 0,quantity:void 0})}getTaskStatusText(t){let o;switch(t){case 1:o="\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0430";break;case 2:o="\u041c\u0430\u043a\u0441\u0438\u043c\u0443\u043c \u043f\u043e\u043f\u044b\u0442\u043e\u043a";break;case 3:o="\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043e\u0442\u0433\u0440\u0443\u0437\u043a\u0438";break;case 4:o="\u0421\u043e\u0437\u0434\u0430\u043d \u0447\u0435\u0440\u043d\u043e\u0432\u0438\u043a";break;case 5:o="\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0447\u0435\u0440\u043d\u043e\u0432\u0438\u043a\u0430";break;case 6:o="\u041e\u0436\u0438\u0434\u0430\u043d\u0438\u0435";break;default:o="\u041d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u0435\u043d"}return o}onHideDialog(){console.log("hide")}static{this.\u0275fac=function(o){return new(o||n)(e.rXU(a.D.OzonSupplyOrderClient),e.rXU(l.X.OzonSupplyOrderClient),e.rXU(a.D.OzonProductClient),e.rXU(c.bg),e.rXU(f.t),e.rXU(I.MX),e.rXU(h.hE))}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-ozon-supply-registration-task-list"]],viewQuery:function(o,i){if(1&o&&e.GBs(er,5),2&o){let u;e.mGM(u=e.lsd())&&(i.productAutocomplete=u.first)}},features:[e.Vt3],decls:8,vars:11,consts:[["productAutocomplete",""],["pButton","",3,"click"],["dataKey","iD","editMode","cell",3,"onPage","lazy","loading","paginator","rowsPerPageOptions","rows","tableStyle","totalRecords","value"],["pTemplate","header"],["pTemplate","body"],["pTemplate","rowexpansion"],["header","\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0437\u0430\u0434\u0430\u0447\u0438 \u043d\u0430 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044e \u043f\u043e\u0441\u0442\u0430\u0432\u043a\u0438",3,"draggable","modal","resizable","style","visible","visibleChange","onHide",4,"ngIf"],[3,"disabled","ngModel","binary"],["icon","pi pi-pencil","pButton","",1,"p-button-text","p-button-rounded","p-button-plain",3,"click"],["pButton","","pRipple","","type","button",1,"p-button-text","p-button-rounded","p-button-plain",3,"icon","pRowToggler"],["colspan","9"],[3,"value"],[4,"ngIf"],["colspan","3"],["height","3rem"],["header","\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0437\u0430\u0434\u0430\u0447\u0438 \u043d\u0430 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044e \u043f\u043e\u0441\u0442\u0430\u0432\u043a\u0438",3,"visibleChange","onHide","draggable","modal","resizable","visible"],[1,"card",3,"disabled"],[1,"flex-auto","mb-3"],["for","dropOffWarehouse",1,"mb-2","block","font-bold"],["appendTo","body","inputId","dropOffWarehouse","optionLabel","name","optionValue","iD",3,"ngModelChange","ngModel","options"],["pTemplate","selectedItems"],["for","targetWarehouse",1,"mb-2","block","font-bold"],["appendTo","body","filterBy","name","inputId","targetWarehouse","optionLabel","name","optionValue","iD","placeholder","\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0441\u043a\u043b\u0430\u0434 \u043f\u043e\u0441\u0442\u0430\u0432\u043a\u0438",3,"ngModelChange","ngModel","autoDisplayFirst","options","filter","showClear"],["for","timeReserveInHours",1,"mb-2","block","font-bold"],[3,"ngModelChange","useGrouping","ngModel"],["for","minDate",1,"mb-2","block","font-bold"],["inputId","minDate","selectionMode","range","dateFormat","dd.mm.yy",3,"ngModelChange","ngModel","showClear","readonlyInput"],["for","newProduct",1,"mb-2","block","font-bold"],["field","name","inputId","newProduct","placeholder","\u041f\u043e\u0438\u0441\u043a \u0442\u043e\u0432\u0430\u0440\u0430","styleClass","mb-3",3,"completeMethod","onSelect","minLength","suggestions"],["pTemplate","item"],["pTemplate","selectedItem"],["inputId","newItemProductQuantity",3,"ngModel","ngModelChange",4,"ngIf"],["pButton","",3,"click","disabled"],[1,"m-3"],[3,"value",4,"ngIf"],["class","text-500 m-2",4,"ngIf"],["class","m-2",4,"ngFor","ngForOf"],[1,"text-500","m-2"],[1,"m-2"],[1,"flex","align-items-center","gap-2"],["inputId","newItemProductQuantity",3,"ngModelChange","ngModel"],["pTemplate","caption"],[1,"flex","align-items-center","justify-content-between"],["pEditableColumnField","count",3,"pEditableColumn"],["pTemplate","input"],["pTemplate","output"],["pButton","",1,"pi","pi-trash",3,"click"]],template:function(o,i){1&o&&(e.nrm(0,"p-toast"),e.j41(1,"button",1),e.bIt("click",function(){return i.openAddNewItemDialog()}),e.EFF(2,"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"),e.k0s(),e.j41(3,"p-table",2),e.bIt("onPage",function(d){return i.pageChange(d)}),e.DNE(4,or,18,0,"ng-template",3)(5,ar,21,13,"ng-template",4)(6,cr,5,1,"ng-template",5),e.k0s(),e.DNE(7,Er,35,29,"p-dialog",6)),2&o&&(e.R7$(3),e.Y8G("lazy",!0)("loading",i.loading)("paginator",!0)("rowsPerPageOptions",e.lJ4(9,tr))("rows",null==i.filterModel?null:i.filterModel.count)("tableStyle",e.lJ4(10,nr))("totalRecords",null==i.data?null:i.data.totalCount)("value",null==i.data?null:i.data.items),e.R7$(4),e.Y8G("ngIf",i.newItem))},dependencies:[Ie.j9,c.Ei,T._f,w.Vv,re.Sc,g.Sq,g.bT,de.l,Fe.ms,z.BC,z.vS,_e.YI,ae,M.XI,M.FP,M.hp,M.c5,Q.y8,pe.E,g.Jj]})}}return n})(),kr=(()=>{class n{static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275mod=e.$C({type:n})}static{this.\u0275inj=e.G2t({imports:[S.iI.forChild([{path:"warehouse/list",component:ya},{path:"salesOrders",component:Si},{path:"action",component:Qa},{path:"product",component:$i},{path:"transaction",component:mo},{path:"supplyOrder",component:no},{path:"supplyRegistrationTask",component:Cr},{path:"reconciliation",component:Go},{path:"stock-starvation-report",component:wa}]),S.iI]})}}return n})(),Ir=(()=>{class n{static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275mod=e.$C({type:n})}static{this.\u0275inj=e.G2t({})}}return n})(),Fr=(()=>{class n{static \u0275fac=function(o){return new(o||n)};static \u0275mod=e.$C({type:n});static \u0275inj=e.G2t({imports:[g.MD]})}return n})();var Tr=m(9615);let Rr=(()=>{class n{static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275mod=e.$C({type:n})}static{this.\u0275inj=e.G2t({providers:[a.D.WarehouseClient,a.D.ReportClient,a.D.OzonSalesOrderClient,a.D.OperationClient,a.D.OzonProductClient,a.D.OzonSupplyOrderClient,l.X.PostingClient,l.X.OperationClient,l.X.OzonProductClient,l.X.OzonSupplyOrderClient,l.X.WarehouseClient,l.X.OzonPromotionClient,a.D.ProductClient,a.D.OzonPromotionClient,f.t,c.bg,c.td],imports:[Ie.$$,T.tm,w.rO,$.D,re.q4,oa,Ir,g.MD,Ee.F,de.P,Fe.kr,Tr.e,z.YN,_e.O3,Fr,ue.u,Dn,kr,ye.F,Oe.xs,M.bG,me.$,Q.MB,pe.k,Se.AG,B.S]})}}return n})()},1874:(j,_,m)=>{var S=T(m(3209)),b=T(m(3931)),C=T(m(9246)),y=T(m(8084)),r=T(m(2042)),e=T(m(1951)),c=T(m(650)),f=m(1498),I=T(m(5482));function T(B){return B&&B.__esModule?B:{default:B}}var w=function(){},$=function(D,X,N){var V=new w;if(typeof D>"u")throw Error("No element to render on was provided.");return V._renderProperties=(0,r.default)(D),V._encodings=[],V._options=I.default,V._errorHandler=new c.default(V),typeof X<"u"&&((N=N||{}).format||(N.format=ie()),V.options(N)[N.format](X,N).render()),V};for(var z in $.getModule=function(B){return S.default[B]},S.default)S.default.hasOwnProperty(z)&&A(S.default,z);function A(B,D){w.prototype[D]=w.prototype[D.toUpperCase()]=w.prototype[D.toLowerCase()]=function(X,N){var V=this;return V._errorHandler.wrapBarcodeCall(function(){N.text=typeof N.text>"u"?void 0:""+N.text;var J=(0,b.default)(V._options,N);J=(0,e.default)(J);var oe=Z(X,B[D],J);return V._encodings.push(oe),V})}}function Z(B,D,X){var N=new D(B=""+B,X);if(!N.valid())throw new f.InvalidInputException(N.constructor.name,B);var V=N.encode();V=(0,C.default)(V);for(var J=0;J<V.length;J++)V[J].options=(0,b.default)(X,V[J].options);return V}function ie(){return S.default.CODE128?"CODE128":Object.keys(S.default)[0]}function ne(B,D,X){D=(0,C.default)(D);for(var N=0;N<D.length;N++)D[N].options=(0,b.default)(X,D[N].options),(0,y.default)(D[N].options);(0,y.default)(X),new(0,B.renderer)(B.element,D,X).render(),B.afterRender&&B.afterRender()}w.prototype.options=function(B){return this._options=(0,b.default)(this._options,B),this},w.prototype.blank=function(B){var D=new Array(B+1).join("0");return this._encodings.push({data:D}),this},w.prototype.init=function(){var B;if(this._renderProperties)for(var D in Array.isArray(this._renderProperties)||(this._renderProperties=[this._renderProperties]),this._renderProperties){var X=(0,b.default)(this._options,(B=this._renderProperties[D]).options);"auto"==X.format&&(X.format=ie()),this._errorHandler.wrapBarcodeCall(function(){var J=Z(X.value,S.default[X.format.toUpperCase()],X);ne(B,J,X)})}},w.prototype.render=function(){if(!this._renderProperties)throw new f.NoElementException;if(Array.isArray(this._renderProperties))for(var B=0;B<this._renderProperties.length;B++)ne(this._renderProperties[B],this._encodings,this._options);else ne(this._renderProperties,this._encodings,this._options);return this},w.prototype._defaults=I.default,typeof window<"u"&&(window.JsBarcode=$),typeof jQuery<"u"&&(jQuery.fn.JsBarcode=function(B,D){var X=[];return jQuery(this).each(function(){X.push(this)}),$(X,B,D)}),j.exports=$},2933:(j,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.default=function S(O,b){(function m(S,O){if(!(S instanceof O))throw new TypeError("Cannot call a class as a function")})(this,S),this.data=O,this.text=b.text||O,this.options=b}},3166:(j,_,m)=>{Object.defineProperty(_,"__esModule",{value:!0});var g=function(){function r(a,e){for(var l=0;l<e.length;l++){var c=e[l];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}}return function(a,e,l){return e&&r(a.prototype,e),l&&r(a,l),a}}(),O=function E(r){return r&&r.__esModule?r:{default:r}}(m(2933)),b=m(9973),p=function(r){function a(e,l){!function C(r,a){if(!(r instanceof a))throw new TypeError("Cannot call a class as a function")}(this,a);var c=function v(r,a){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!a||"object"!=typeof a&&"function"!=typeof a?r:a}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e.substring(1),l));return c.bytes=e.split("").map(function(f){return f.charCodeAt(0)}),c}return function y(r,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+typeof a);r.prototype=Object.create(a&&a.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(r,a):r.__proto__=a)}(a,r),g(a,[{key:"valid",value:function(){return/^[\x00-\x7F\xC8-\xD3]+$/.test(this.data)}},{key:"encode",value:function(){var l=this.bytes,c=l.shift()-105,f=b.SET_BY_CODE[c];if(void 0===f)throw new RangeError("The encoding does not start with a start character.");!0===this.shouldEncodeAsEan128()&&l.unshift(b.FNC1);var h=a.next(l,1,f);return{text:this.text===this.data?this.text.replace(/[^\x20-\x7E]/g,""):this.text,data:a.getBar(c)+h.result+a.getBar((h.checksum+c)%b.MODULO)+a.getBar(b.STOP)}}},{key:"shouldEncodeAsEan128",value:function(){var l=this.options.ean128||!1;return"string"==typeof l&&(l="true"===l.toLowerCase()),l}}],[{key:"getBar",value:function(l){return b.BARS[l]?b.BARS[l].toString():""}},{key:"correctIndex",value:function(l,c){if(c===b.SET_A){var f=l.shift();return f<32?f+64:f-32}return c===b.SET_B?l.shift()-32:10*(l.shift()-48)+l.shift()-48}},{key:"next",value:function(l,c,f){if(!l.length)return{result:"",checksum:0};var h=void 0,I=void 0;if(l[0]>=200){I=l.shift()-105;var T=b.SWAP[I];void 0!==T?h=a.next(l,c+1,T):((f===b.SET_A||f===b.SET_B)&&I===b.SHIFT&&(l[0]=f===b.SET_A?l[0]>95?l[0]-96:l[0]:l[0]<32?l[0]+96:l[0]),h=a.next(l,c+1,f))}else I=a.correctIndex(l,f),h=a.next(l,c+1,f);return{result:a.getBar(I)+h.result,checksum:I*c+h.checksum}}}]),a}(O.default);_.default=p},4675:(j,_,m)=>{Object.defineProperty(_,"__esModule",{value:!0});var g=function(){function r(a,e){for(var l=0;l<e.length;l++){var c=e[l];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}}return function(a,e,l){return e&&r(a.prototype,e),l&&r(a,l),a}}(),O=function E(r){return r&&r.__esModule?r:{default:r}}(m(3166)),b=m(9973),p=function(r){function a(e,l){return function C(r,a){if(!(r instanceof a))throw new TypeError("Cannot call a class as a function")}(this,a),function v(r,a){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!a||"object"!=typeof a&&"function"!=typeof a?r:a}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,b.A_START_CHAR+e,l))}return function y(r,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+typeof a);r.prototype=Object.create(a&&a.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(r,a):r.__proto__=a)}(a,r),g(a,[{key:"valid",value:function(){return new RegExp("^"+b.A_CHARS+"+$").test(this.data)}}]),a}(O.default);_.default=p},4502:(j,_,m)=>{Object.defineProperty(_,"__esModule",{value:!0});var g=function(){function r(a,e){for(var l=0;l<e.length;l++){var c=e[l];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}}return function(a,e,l){return e&&r(a.prototype,e),l&&r(a,l),a}}(),O=function E(r){return r&&r.__esModule?r:{default:r}}(m(3166)),b=m(9973),p=function(r){function a(e,l){return function C(r,a){if(!(r instanceof a))throw new TypeError("Cannot call a class as a function")}(this,a),function v(r,a){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!a||"object"!=typeof a&&"function"!=typeof a?r:a}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,b.B_START_CHAR+e,l))}return function y(r,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+typeof a);r.prototype=Object.create(a&&a.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(r,a):r.__proto__=a)}(a,r),g(a,[{key:"valid",value:function(){return new RegExp("^"+b.B_CHARS+"+$").test(this.data)}}]),a}(O.default);_.default=p},2693:(j,_,m)=>{Object.defineProperty(_,"__esModule",{value:!0});var g=function(){function r(a,e){for(var l=0;l<e.length;l++){var c=e[l];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}}return function(a,e,l){return e&&r(a.prototype,e),l&&r(a,l),a}}(),O=function E(r){return r&&r.__esModule?r:{default:r}}(m(3166)),b=m(9973),p=function(r){function a(e,l){return function C(r,a){if(!(r instanceof a))throw new TypeError("Cannot call a class as a function")}(this,a),function v(r,a){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!a||"object"!=typeof a&&"function"!=typeof a?r:a}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,b.C_START_CHAR+e,l))}return function y(r,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+typeof a);r.prototype=Object.create(a&&a.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(r,a):r.__proto__=a)}(a,r),g(a,[{key:"valid",value:function(){return new RegExp("^"+b.C_CHARS+"+$").test(this.data)}}]),a}(O.default);_.default=p},714:(j,_,m)=>{Object.defineProperty(_,"__esModule",{value:!0});var S=E(m(3166)),b=E(m(5113));function E(r){return r&&r.__esModule?r:{default:r}}function v(r,a){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!a||"object"!=typeof a&&"function"!=typeof a?r:a}var p=function(r){function a(e,l){if(function C(r,a){if(!(r instanceof a))throw new TypeError("Cannot call a class as a function")}(this,a),/^[\x00-\x7F\xC8-\xD3]+$/.test(e))var c=v(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,(0,b.default)(e),l));else c=v(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e,l));return v(c)}return function y(r,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+typeof a);r.prototype=Object.create(a&&a.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(r,a):r.__proto__=a)}(a,r),a}(S.default);_.default=p},5113:(j,_,m)=>{Object.defineProperty(_,"__esModule",{value:!0});var g=m(9973),S=function(y){return y.match(new RegExp("^"+g.A_CHARS+"*"))[0].length},O=function(y){return y.match(new RegExp("^"+g.B_CHARS+"*"))[0].length},b=function(y){return y.match(new RegExp("^"+g.C_CHARS+"*"))[0]};function E(v,y){var p=y?g.A_CHARS:g.B_CHARS,r=v.match(new RegExp("^("+p+"+?)(([0-9]{2}){2,})([^0-9]|$)"));if(r)return r[1]+"\xcc"+C(v.substring(r[1].length));var a=v.match(new RegExp("^"+p+"+"))[0];return a.length===v.length?v:a+String.fromCharCode(y?205:206)+E(v.substring(a.length),!y)}function C(v){var y=b(v),p=y.length;if(p===v.length)return v;v=v.substring(p);var r=S(v)>=O(v);return y+String.fromCharCode(r?206:205)+E(v,r)}_.default=function(v){var y=void 0;if(b(v).length>=2)y=g.C_START_CHAR+C(v);else{var r=S(v)>O(v);y=(r?g.A_START_CHAR:g.B_START_CHAR)+E(v,r)}return y.replace(/[\xCD\xCE]([^])[\xCD\xCE]/,function(a,e){return"\xcb"+e})}},9973:(j,_)=>{var m;function g(z,A,Z){return A in z?Object.defineProperty(z,A,{value:Z,enumerable:!0,configurable:!0,writable:!0}):z[A]=Z,z}Object.defineProperty(_,"__esModule",{value:!0});var S=_.SET_A=0,O=_.SET_B=1,b=_.SET_C=2,C=(_.SHIFT=98,_.START_A=103),v=_.START_B=104,y=_.START_C=105;_.MODULO=103,_.STOP=106,_.FNC1=207,_.SET_BY_CODE=(g(m={},C,S),g(m,v,O),g(m,y,b),m),_.SWAP={101:S,100:O,99:b},_.A_START_CHAR="\xd0",_.B_START_CHAR="\xd1",_.C_START_CHAR="\xd2",_.A_CHARS="[\0-_\xc8-\xcf]",_.B_CHARS="[ -\x7f\xc8-\xcf]",_.C_CHARS="(\xcf*[0-9]{2}\xcf*)",_.BARS=[11011001100,11001101100,11001100110,10010011e3,10010001100,10001001100,10011001e3,10011000100,10001100100,11001001e3,11001000100,11000100100,10110011100,10011011100,10011001110,10111001100,10011101100,10011100110,11001110010,11001011100,11001001110,11011100100,11001110100,11101101110,11101001100,11100101100,11100100110,11101100100,11100110100,11100110010,11011011e3,11011000110,11000110110,10100011e3,10001011e3,10001000110,10110001e3,10001101e3,10001100010,11010001e3,11000101e3,11000100010,10110111e3,10110001110,10001101110,10111011e3,10111000110,10001110110,11101110110,11010001110,11000101110,11011101e3,11011100010,11011101110,11101011e3,11101000110,11100010110,11101101e3,11101100010,11100011010,11101111010,11001000010,11110001010,1010011e4,10100001100,1001011e4,10010000110,10000101100,10000100110,1011001e4,10110000100,1001101e4,10011000010,10000110100,10000110010,11000010010,1100101e4,11110111010,11000010100,10001111010,10100111100,10010111100,10010011110,10111100100,10011110100,10011110010,11110100100,11110010100,11110010010,11011011110,11011110110,11110110110,10101111e3,10100011110,10001011110,10111101e3,10111100010,11110101e3,11110100010,10111011110,10111101110,11101011110,11110101110,11010000100,1101001e4,11010011100,1100011101011]},9152:(j,_,m)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.CODE128C=_.CODE128B=_.CODE128A=_.CODE128=void 0;var S=p(m(714)),b=p(m(4675)),C=p(m(4502)),y=p(m(2693));function p(r){return r&&r.__esModule?r:{default:r}}_.CODE128=S.default,_.CODE128A=b.default,_.CODE128B=C.default,_.CODE128C=y.default},3803:(j,_,m)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.CODE39=void 0;var g=function(){function h(I,T){for(var w=0;w<T.length;w++){var $=T[w];$.enumerable=$.enumerable||!1,$.configurable=!0,"value"in $&&($.writable=!0),Object.defineProperty(I,$.key,$)}}return function(I,T,w){return T&&h(I.prototype,T),w&&h(I,w),I}}(),y=function(h){function I(T,w){return function E(h,I){if(!(h instanceof I))throw new TypeError("Cannot call a class as a function")}(this,I),T=T.toUpperCase(),w.mod43&&(T+=function l(h){return p[h]}(function f(h){for(var I=0,T=0;T<h.length;T++)I+=c(h[T]);return I%=43}(T))),function C(h,I){if(!h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!I||"object"!=typeof I&&"function"!=typeof I?h:I}(this,(I.__proto__||Object.getPrototypeOf(I)).call(this,T,w))}return function v(h,I){if("function"!=typeof I&&null!==I)throw new TypeError("Super expression must either be null or a function, not "+typeof I);h.prototype=Object.create(I&&I.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}}),I&&(Object.setPrototypeOf?Object.setPrototypeOf(h,I):h.__proto__=I)}(I,h),g(I,[{key:"encode",value:function(){for(var w=a("*"),$=0;$<this.data.length;$++)w+=a(this.data[$])+"0";return{data:w+=a("*"),text:this.text}}},{key:"valid",value:function(){return-1!==this.data.search(/^[0-9A-Z\-\.\ \$\/\+\%]+$/)}}]),I}(function b(h){return h&&h.__esModule?h:{default:h}}(m(2933)).default),p=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","-","."," ","$","/","+","%","*"],r=[20957,29783,23639,30485,20951,29813,23669,20855,29789,23645,29975,23831,30533,22295,30149,24005,21623,29981,23837,22301,30023,23879,30545,22343,30161,24017,21959,30065,23921,22385,29015,18263,29141,17879,29045,18293,17783,29021,18269,17477,17489,17681,20753,35770];function a(h){return function e(h){return r[h].toString(2)}(c(h))}function c(h){return p.indexOf(h)}_.CODE39=y},7331:(j,_,m)=>{Object.defineProperty(_,"__esModule",{value:!0});var g=function(){function e(l,c){for(var f=0;f<c.length;f++){var h=c[f];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(l,h.key,h)}}return function(l,c,f){return c&&e(l.prototype,c),f&&e(l,f),l}}(),S=m(2846),b=v(m(2143));function v(e){return e&&e.__esModule?e:{default:e}}var a=function(e){function l(c,f){!function y(e,l){if(!(e instanceof l))throw new TypeError("Cannot call a class as a function")}(this,l);var h=function p(e,l){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!l||"object"!=typeof l&&"function"!=typeof l?e:l}(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,c,f));return h.fontSize=!f.flat&&f.fontSize>10*f.width?10*f.width:f.fontSize,h.guardHeight=f.height+h.fontSize/2+f.textMargin,h}return function r(e,l){if("function"!=typeof l&&null!==l)throw new TypeError("Super expression must either be null or a function, not "+typeof l);e.prototype=Object.create(l&&l.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),l&&(Object.setPrototypeOf?Object.setPrototypeOf(e,l):e.__proto__=l)}(l,e),g(l,[{key:"encode",value:function(){return this.options.flat?this.encodeFlat():this.encodeGuarded()}},{key:"leftText",value:function(f,h){return this.text.substr(f,h)}},{key:"leftEncode",value:function(f,h){return(0,b.default)(f,h)}},{key:"rightText",value:function(f,h){return this.text.substr(f,h)}},{key:"rightEncode",value:function(f,h){return(0,b.default)(f,h)}},{key:"encodeGuarded",value:function(){var f={fontSize:this.fontSize},h={height:this.guardHeight};return[{data:S.SIDE_BIN,options:h},{data:this.leftEncode(),text:this.leftText(),options:f},{data:S.MIDDLE_BIN,options:h},{data:this.rightEncode(),text:this.rightText(),options:f},{data:S.SIDE_BIN,options:h}]}},{key:"encodeFlat",value:function(){return{data:[S.SIDE_BIN,this.leftEncode(),S.MIDDLE_BIN,this.rightEncode(),S.SIDE_BIN].join(""),text:this.text}}}]),l}(v(m(2933)).default);_.default=a},7779:(j,_,m)=>{Object.defineProperty(_,"__esModule",{value:!0});var g=function(){function e(l,c){for(var f=0;f<c.length;f++){var h=c[f];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(l,h.key,h)}}return function(l,c,f){return c&&e(l.prototype,c),f&&e(l,f),l}}(),S=function e(l,c,f){null===l&&(l=Function.prototype);var h=Object.getOwnPropertyDescriptor(l,c);if(void 0===h){var I=Object.getPrototypeOf(l);return null===I?void 0:e(I,c,f)}if("value"in h)return h.value;var T=h.get;return void 0===T?void 0:T.call(f)},O=m(2846),E=function C(e){return e&&e.__esModule?e:{default:e}}(m(7331)),r=function(l){return(10-l.substr(0,12).split("").map(function(f){return+f}).reduce(function(f,h,I){return I%2?f+3*h:f+h},0)%10)%10},a=function(e){function l(c,f){(function v(e,l){if(!(e instanceof l))throw new TypeError("Cannot call a class as a function")})(this,l),-1!==c.search(/^[0-9]{12}$/)&&(c+=r(c));var h=function y(e,l){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!l||"object"!=typeof l&&"function"!=typeof l?e:l}(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,c,f));return h.lastChar=f.lastChar,h}return function p(e,l){if("function"!=typeof l&&null!==l)throw new TypeError("Super expression must either be null or a function, not "+typeof l);e.prototype=Object.create(l&&l.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),l&&(Object.setPrototypeOf?Object.setPrototypeOf(e,l):e.__proto__=l)}(l,e),g(l,[{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]{13}$/)&&+this.data[12]===r(this.data)}},{key:"leftText",value:function(){return S(l.prototype.__proto__||Object.getPrototypeOf(l.prototype),"leftText",this).call(this,1,6)}},{key:"leftEncode",value:function(){var f=this.data.substr(1,6),h=O.EAN13_STRUCTURE[this.data[0]];return S(l.prototype.__proto__||Object.getPrototypeOf(l.prototype),"leftEncode",this).call(this,f,h)}},{key:"rightText",value:function(){return S(l.prototype.__proto__||Object.getPrototypeOf(l.prototype),"rightText",this).call(this,7,6)}},{key:"rightEncode",value:function(){var f=this.data.substr(7,6);return S(l.prototype.__proto__||Object.getPrototypeOf(l.prototype),"rightEncode",this).call(this,f,"RRRRRR")}},{key:"encodeGuarded",value:function(){var f=S(l.prototype.__proto__||Object.getPrototypeOf(l.prototype),"encodeGuarded",this).call(this);return this.options.displayValue&&(f.unshift({data:"000000000000",text:this.text.substr(0,1),options:{textAlign:"left",fontSize:this.fontSize}}),this.options.lastChar&&(f.push({data:"00"}),f.push({data:"00000",text:this.options.lastChar,options:{fontSize:this.fontSize}}))),f}}]),l}(E.default);_.default=a},197:(j,_,m)=>{Object.defineProperty(_,"__esModule",{value:!0});var g=function(){function e(l,c){for(var f=0;f<c.length;f++){var h=c[f];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(l,h.key,h)}}return function(l,c,f){return c&&e(l.prototype,c),f&&e(l,f),l}}(),S=m(2846),b=v(m(2143));function v(e){return e&&e.__esModule?e:{default:e}}var a=function(e){function l(c,f){return function y(e,l){if(!(e instanceof l))throw new TypeError("Cannot call a class as a function")}(this,l),function p(e,l){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!l||"object"!=typeof l&&"function"!=typeof l?e:l}(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,c,f))}return function r(e,l){if("function"!=typeof l&&null!==l)throw new TypeError("Super expression must either be null or a function, not "+typeof l);e.prototype=Object.create(l&&l.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),l&&(Object.setPrototypeOf?Object.setPrototypeOf(e,l):e.__proto__=l)}(l,e),g(l,[{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]{2}$/)}},{key:"encode",value:function(){var f=S.EAN2_STRUCTURE[parseInt(this.data)%4];return{data:"1011"+(0,b.default)(this.data,f,"01"),text:this.text}}}]),l}(v(m(2933)).default);_.default=a},6400:(j,_,m)=>{Object.defineProperty(_,"__esModule",{value:!0});var g=function(){function l(c,f){for(var h=0;h<f.length;h++){var I=f[h];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(c,I.key,I)}}return function(c,f,h){return f&&l(c.prototype,f),h&&l(c,h),c}}(),S=m(2846),b=v(m(2143));function v(l){return l&&l.__esModule?l:{default:l}}var e=function(l){function c(f,h){return function y(l,c){if(!(l instanceof c))throw new TypeError("Cannot call a class as a function")}(this,c),function p(l,c){if(!l)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!c||"object"!=typeof c&&"function"!=typeof c?l:c}(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,f,h))}return function r(l,c){if("function"!=typeof c&&null!==c)throw new TypeError("Super expression must either be null or a function, not "+typeof c);l.prototype=Object.create(c&&c.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),c&&(Object.setPrototypeOf?Object.setPrototypeOf(l,c):l.__proto__=c)}(c,l),g(c,[{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]{5}$/)}},{key:"encode",value:function(){var h=S.EAN5_STRUCTURE[function(c){return c.split("").map(function(h){return+h}).reduce(function(h,I,T){return T%2?h+9*I:h+3*I},0)%10}(this.data)];return{data:"1011"+(0,b.default)(this.data,h,"01"),text:this.text}}}]),c}(v(m(2933)).default);_.default=e},2587:(j,_,m)=>{Object.defineProperty(_,"__esModule",{value:!0});var g=function(){function a(e,l){for(var c=0;c<l.length;c++){var f=l[c];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(e,f.key,f)}}return function(e,l,c){return l&&a(e.prototype,l),c&&a(e,c),e}}(),S=function a(e,l,c){null===e&&(e=Function.prototype);var f=Object.getOwnPropertyDescriptor(e,l);if(void 0===f){var h=Object.getPrototypeOf(e);return null===h?void 0:a(h,l,c)}if("value"in f)return f.value;var I=f.get;return void 0===I?void 0:I.call(c)},b=function E(a){return a&&a.__esModule?a:{default:a}}(m(7331)),p=function(e){return(10-e.substr(0,7).split("").map(function(c){return+c}).reduce(function(c,f,h){return h%2?c+f:c+3*f},0)%10)%10},r=function(a){function e(l,c){return function C(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),-1!==l.search(/^[0-9]{7}$/)&&(l+=p(l)),function v(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?a:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,l,c))}return function y(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}(e,a),g(e,[{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]{8}$/)&&+this.data[7]===p(this.data)}},{key:"leftText",value:function(){return S(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"leftText",this).call(this,0,4)}},{key:"leftEncode",value:function(){var c=this.data.substr(0,4);return S(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"leftEncode",this).call(this,c,"LLLL")}},{key:"rightText",value:function(){return S(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rightText",this).call(this,4,4)}},{key:"rightEncode",value:function(){var c=this.data.substr(4,4);return S(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rightEncode",this).call(this,c,"RRRR")}}]),e}(b.default);_.default=r},1541:(j,_,m)=>{Object.defineProperty(_,"__esModule",{value:!0});var g=function(){function e(l,c){for(var f=0;f<c.length;f++){var h=c[f];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(l,h.key,h)}}return function(l,c,f){return c&&e(l.prototype,c),f&&e(l,f),l}}();_.checksum=a;var O=C(m(2143));function C(e){return e&&e.__esModule?e:{default:e}}var r=function(e){function l(c,f){(function v(e,l){if(!(e instanceof l))throw new TypeError("Cannot call a class as a function")})(this,l),-1!==c.search(/^[0-9]{11}$/)&&(c+=a(c));var h=function y(e,l){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!l||"object"!=typeof l&&"function"!=typeof l?e:l}(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,c,f));return h.displayValue=f.displayValue,h.fontSize=f.fontSize>10*f.width?10*f.width:f.fontSize,h.guardHeight=f.height+h.fontSize/2+f.textMargin,h}return function p(e,l){if("function"!=typeof l&&null!==l)throw new TypeError("Super expression must either be null or a function, not "+typeof l);e.prototype=Object.create(l&&l.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),l&&(Object.setPrototypeOf?Object.setPrototypeOf(e,l):e.__proto__=l)}(l,e),g(l,[{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]{12}$/)&&this.data[11]==a(this.data)}},{key:"encode",value:function(){return this.options.flat?this.flatEncoding():this.guardedEncoding()}},{key:"flatEncoding",value:function(){var f="";return f+="101",f+=(0,O.default)(this.data.substr(0,6),"LLLLLL"),f+="01010",f+=(0,O.default)(this.data.substr(6,6),"RRRRRR"),{data:f+="101",text:this.text}}},{key:"guardedEncoding",value:function(){var f=[];return this.displayValue&&f.push({data:"00000000",text:this.text.substr(0,1),options:{textAlign:"left",fontSize:this.fontSize}}),f.push({data:"101"+(0,O.default)(this.data[0],"L"),options:{height:this.guardHeight}}),f.push({data:(0,O.default)(this.data.substr(1,5),"LLLLL"),text:this.text.substr(1,5),options:{fontSize:this.fontSize}}),f.push({data:"01010",options:{height:this.guardHeight}}),f.push({data:(0,O.default)(this.data.substr(6,5),"RRRRR"),text:this.text.substr(6,5),options:{fontSize:this.fontSize}}),f.push({data:(0,O.default)(this.data[11],"R")+"101",options:{height:this.guardHeight}}),this.displayValue&&f.push({data:"00000000",text:this.text.substr(11,1),options:{textAlign:"right",fontSize:this.fontSize}}),f}}]),l}(C(m(2933)).default);function a(e){var c,l=0;for(c=1;c<11;c+=2)l+=parseInt(e[c]);for(c=0;c<11;c+=2)l+=3*parseInt(e[c]);return(10-l%10)%10}_.default=r},7638:(j,_,m)=>{Object.defineProperty(_,"__esModule",{value:!0});var g=function(){function f(h,I){for(var T=0;T<I.length;T++){var w=I[T];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(h,w.key,w)}}return function(h,I,T){return I&&f(h.prototype,I),T&&f(h,T),h}}(),O=v(m(2143)),E=v(m(2933)),C=m(1541);function v(f){return f&&f.__esModule?f:{default:f}}function p(f,h){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!h||"object"!=typeof h&&"function"!=typeof h?f:h}var a=["XX00000XXX","XX10000XXX","XX20000XXX","XXX00000XX","XXXX00000X","XXXXX00005","XXXXX00006","XXXXX00007","XXXXX00008","XXXXX00009"],e=[["EEEOOO","OOOEEE"],["EEOEOO","OOEOEE"],["EEOOEO","OOEEOE"],["EEOOOE","OOEEEO"],["EOEEOO","OEOOEE"],["EOOEEO","OEEOOE"],["EOOOEE","OEEEOO"],["EOEOEO","OEOEOE"],["EOEOOE","OEOEEO"],["EOOEOE","OEEOEO"]],l=function(f){function h(I,T){!function y(f,h){if(!(f instanceof h))throw new TypeError("Cannot call a class as a function")}(this,h);var w=p(this,(h.__proto__||Object.getPrototypeOf(h)).call(this,I,T));if(w.isValid=!1,-1!==I.search(/^[0-9]{6}$/))w.middleDigits=I,w.upcA=c(I,"0"),w.text=T.text||""+w.upcA[0]+I+w.upcA[w.upcA.length-1],w.isValid=!0;else{if(-1===I.search(/^[01][0-9]{7}$/))return p(w);if(w.middleDigits=I.substring(1,I.length-1),w.upcA=c(w.middleDigits,I[0]),w.upcA[w.upcA.length-1]!==I[I.length-1])return p(w);w.isValid=!0}return w.displayValue=T.displayValue,w.fontSize=T.fontSize>10*T.width?10*T.width:T.fontSize,w.guardHeight=T.height+w.fontSize/2+T.textMargin,w}return function r(f,h){if("function"!=typeof h&&null!==h)throw new TypeError("Super expression must either be null or a function, not "+typeof h);f.prototype=Object.create(h&&h.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),h&&(Object.setPrototypeOf?Object.setPrototypeOf(f,h):f.__proto__=h)}(h,f),g(h,[{key:"valid",value:function(){return this.isValid}},{key:"encode",value:function(){return this.options.flat?this.flatEncoding():this.guardedEncoding()}},{key:"flatEncoding",value:function(){var T="";return T+="101",T+=this.encodeMiddleDigits(),{data:T+="010101",text:this.text}}},{key:"guardedEncoding",value:function(){var T=[];return this.displayValue&&T.push({data:"00000000",text:this.text[0],options:{textAlign:"left",fontSize:this.fontSize}}),T.push({data:"101",options:{height:this.guardHeight}}),T.push({data:this.encodeMiddleDigits(),text:this.text.substring(1,7),options:{fontSize:this.fontSize}}),T.push({data:"010101",options:{height:this.guardHeight}}),this.displayValue&&T.push({data:"00000000",text:this.text[7],options:{textAlign:"right",fontSize:this.fontSize}}),T}},{key:"encodeMiddleDigits",value:function(){var T=this.upcA[0],$=e[parseInt(this.upcA[this.upcA.length-1])][parseInt(T)];return(0,O.default)(this.middleDigits,$)}}]),h}(E.default);function c(f,h){for(var I=parseInt(f[f.length-1]),T=a[I],w="",$=0,z=0;z<T.length;z++){var A=T[z];w+="X"===A?f[$++]:A}return(w=""+h+w)+(0,C.checksum)(w)}_.default=l},2846:(j,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.SIDE_BIN="101",_.MIDDLE_BIN="01010",_.BINARIES={L:["0001101","0011001","0010011","0111101","0100011","0110001","0101111","0111011","0110111","0001011"],G:["0100111","0110011","0011011","0100001","0011101","0111001","0000101","0010001","0001001","0010111"],R:["1110010","1100110","1101100","1000010","1011100","1001110","1010000","1000100","1001000","1110100"],O:["0001101","0011001","0010011","0111101","0100011","0110001","0101111","0111011","0110111","0001011"],E:["0100111","0110011","0011011","0100001","0011101","0111001","0000101","0010001","0001001","0010111"]},_.EAN2_STRUCTURE=["LL","LG","GL","GG"],_.EAN5_STRUCTURE=["GGLLL","GLGLL","GLLGL","GLLLG","LGGLL","LLGGL","LLLGG","LGLGL","LGLLG","LLGLG"],_.EAN13_STRUCTURE=["LLLLLL","LLGLGG","LLGGLG","LLGGGL","LGLLGG","LGGLLG","LGGGLL","LGLGLG","LGLGGL","LGGLGL"]},2143:(j,_,m)=>{Object.defineProperty(_,"__esModule",{value:!0});var g=m(2846);_.default=function(b,E,C){var v=b.split("").map(function(p,r){return g.BINARIES[E[r]]}).map(function(p,r){return p?p[b[r]]:""});if(C){var y=b.length-1;v=v.map(function(p,r){return r<y?p+C:p})}return v.join("")}},9995:(j,_,m)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.UPCE=_.UPC=_.EAN2=_.EAN5=_.EAN8=_.EAN13=void 0;var S=l(m(7779)),b=l(m(2587)),C=l(m(6400)),y=l(m(197)),r=l(m(1541)),e=l(m(7638));function l(c){return c&&c.__esModule?c:{default:c}}_.EAN13=S.default,_.EAN8=b.default,_.EAN5=C.default,_.EAN2=y.default,_.UPC=r.default,_.UPCE=e.default},9257:(j,_,m)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.GenericBarcode=void 0;var g=function(){function p(r,a){for(var e=0;e<a.length;e++){var l=a[e];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(r,l.key,l)}}return function(r,a,e){return a&&p(r.prototype,a),e&&p(r,e),r}}(),y=function(p){function r(a,e){return function E(p,r){if(!(p instanceof r))throw new TypeError("Cannot call a class as a function")}(this,r),function C(p,r){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?p:r}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,a,e))}return function v(p,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);p.prototype=Object.create(r&&r.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(p,r):p.__proto__=r)}(r,p),g(r,[{key:"encode",value:function(){return{data:"10101010101010101010101010101010101010101",text:this.text}}},{key:"valid",value:function(){return!0}}]),r}(function b(p){return p&&p.__esModule?p:{default:p}}(m(2933)).default);_.GenericBarcode=y},3534:(j,_,m)=>{Object.defineProperty(_,"__esModule",{value:!0});var g=function(){function r(a,e){for(var l=0;l<e.length;l++){var c=e[l];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}}return function(a,e,l){return e&&r(a.prototype,e),l&&r(a,l),a}}(),S=m(2218),p=function(r){function a(){return function C(r,a){if(!(r instanceof a))throw new TypeError("Cannot call a class as a function")}(this,a),function v(r,a){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!a||"object"!=typeof a&&"function"!=typeof a?r:a}(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments))}return function y(r,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+typeof a);r.prototype=Object.create(a&&a.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(r,a):r.__proto__=a)}(a,r),g(a,[{key:"valid",value:function(){return-1!==this.data.search(/^([0-9]{2})+$/)}},{key:"encode",value:function(){var l=this,c=this.data.match(/.{2}/g).map(function(f){return l.encodePair(f)}).join("");return{data:S.START_BIN+c+S.END_BIN,text:this.text}}},{key:"encodePair",value:function(l){var c=S.BINARIES[l[1]];return S.BINARIES[l[0]].split("").map(function(f,h){return("1"===f?"111":"1")+("1"===c[h]?"000":"0")}).join("")}}]),a}(function E(r){return r&&r.__esModule?r:{default:r}}(m(2933)).default);_.default=p},6023:(j,_,m)=>{Object.defineProperty(_,"__esModule",{value:!0});var g=function(){function r(a,e){for(var l=0;l<e.length;l++){var c=e[l];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}}return function(a,e,l){return e&&r(a.prototype,e),l&&r(a,l),a}}(),O=function b(r){return r&&r.__esModule?r:{default:r}}(m(3534)),y=function(a){var e=a.substr(0,13).split("").map(function(l){return parseInt(l,10)}).reduce(function(l,c,f){return l+c*(3-f%2*2)},0);return 10*Math.ceil(e/10)-e},p=function(r){function a(e,l){return function E(r,a){if(!(r instanceof a))throw new TypeError("Cannot call a class as a function")}(this,a),-1!==e.search(/^[0-9]{13}$/)&&(e+=y(e)),function C(r,a){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!a||"object"!=typeof a&&"function"!=typeof a?r:a}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e,l))}return function v(r,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+typeof a);r.prototype=Object.create(a&&a.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(r,a):r.__proto__=a)}(a,r),g(a,[{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]{14}$/)&&+this.data[13]===y(this.data)}}]),a}(O.default);_.default=p},2218:(j,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.START_BIN="1010",_.END_BIN="11101",_.BINARIES=["00110","10001","01001","11000","00101","10100","01100","00011","10010","01010"]},9319:(j,_,m)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.ITF14=_.ITF=void 0;var S=E(m(3534)),b=E(m(6023));function E(C){return C&&C.__esModule?C:{default:C}}_.ITF=S.default,_.ITF14=b.default},8778:(j,_,m)=>{Object.defineProperty(_,"__esModule",{value:!0});var g=function(){function r(a,e){for(var l=0;l<e.length;l++){var c=e[l];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}}return function(a,e,l){return e&&r(a.prototype,e),l&&r(a,l),a}}(),y=function(r){function a(e,l){return function E(r,a){if(!(r instanceof a))throw new TypeError("Cannot call a class as a function")}(this,a),function C(r,a){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!a||"object"!=typeof a&&"function"!=typeof a?r:a}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e,l))}return function v(r,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+typeof a);r.prototype=Object.create(a&&a.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(r,a):r.__proto__=a)}(a,r),g(a,[{key:"encode",value:function(){for(var l="110",c=0;c<this.data.length;c++){var h=parseInt(this.data[c]).toString(2);h=p(h,4-h.length);for(var I=0;I<h.length;I++)l+="0"==h[I]?"100":"110"}return{data:l+="1001",text:this.text}}},{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]+$/)}}]),a}(function b(r){return r&&r.__esModule?r:{default:r}}(m(2933)).default);function p(r,a){for(var e=0;e<a;e++)r="0"+r;return r}_.default=y},3167:(j,_,m)=>{Object.defineProperty(_,"__esModule",{value:!0});var S=function b(p){return p&&p.__esModule?p:{default:p}}(m(8778)),O=m(2821),y=function(p){function r(a,e){return function E(p,r){if(!(p instanceof r))throw new TypeError("Cannot call a class as a function")}(this,r),function C(p,r){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?p:r}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,a+(0,O.mod10)(a),e))}return function v(p,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);p.prototype=Object.create(r&&r.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(p,r):p.__proto__=r)}(r,p),r}(S.default);_.default=y},1522:(j,_,m)=>{Object.defineProperty(_,"__esModule",{value:!0});var S=function b(p){return p&&p.__esModule?p:{default:p}}(m(8778)),O=m(2821),y=function(p){function r(a,e){return function E(p,r){if(!(p instanceof r))throw new TypeError("Cannot call a class as a function")}(this,r),a+=(0,O.mod10)(a),a+=(0,O.mod10)(a),function C(p,r){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?p:r}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,a,e))}return function v(p,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);p.prototype=Object.create(r&&r.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(p,r):p.__proto__=r)}(r,p),r}(S.default);_.default=y},8552:(j,_,m)=>{Object.defineProperty(_,"__esModule",{value:!0});var S=function b(p){return p&&p.__esModule?p:{default:p}}(m(8778)),O=m(2821),y=function(p){function r(a,e){return function E(p,r){if(!(p instanceof r))throw new TypeError("Cannot call a class as a function")}(this,r),function C(p,r){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?p:r}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,a+(0,O.mod11)(a),e))}return function v(p,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);p.prototype=Object.create(r&&r.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(p,r):p.__proto__=r)}(r,p),r}(S.default);_.default=y},677:(j,_,m)=>{Object.defineProperty(_,"__esModule",{value:!0});var S=function b(p){return p&&p.__esModule?p:{default:p}}(m(8778)),O=m(2821),y=function(p){function r(a,e){return function E(p,r){if(!(p instanceof r))throw new TypeError("Cannot call a class as a function")}(this,r),a+=(0,O.mod11)(a),a+=(0,O.mod10)(a),function C(p,r){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?p:r}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,a,e))}return function v(p,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);p.prototype=Object.create(r&&r.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(p,r):p.__proto__=r)}(r,p),r}(S.default);_.default=y},2821:(j,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.mod10=function m(S){for(var O=0,b=0;b<S.length;b++){var E=parseInt(S[b]);O+=(b+S.length)%2==0?E:2*E%10+Math.floor(2*E/10)}return(10-O%10)%10},_.mod11=function g(S){for(var O=0,b=[2,3,4,5,6,7],E=0;E<S.length;E++){var C=parseInt(S[S.length-1-E]);O+=b[E%b.length]*C}return(11-O%11)%11}},3641:(j,_,m)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.MSI1110=_.MSI1010=_.MSI11=_.MSI10=_.MSI=void 0;var S=a(m(8778)),b=a(m(3167)),C=a(m(8552)),y=a(m(1522)),r=a(m(677));function a(e){return e&&e.__esModule?e:{default:e}}_.MSI=S.default,_.MSI10=b.default,_.MSI11=C.default,_.MSI1010=y.default,_.MSI1110=r.default},9468:(j,_,m)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.codabar=void 0;var g=function(){function p(r,a){for(var e=0;e<a.length;e++){var l=a[e];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(r,l.key,l)}}return function(r,a,e){return a&&p(r.prototype,a),e&&p(r,e),r}}(),y=function(p){function r(a,e){(function E(p,r){if(!(p instanceof r))throw new TypeError("Cannot call a class as a function")})(this,r),0===a.search(/^[0-9\-\$\:\.\+\/]+$/)&&(a="A"+a+"A");var l=function C(p,r){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?p:r}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,a.toUpperCase(),e));return l.text=l.options.text||l.text.replace(/[A-D]/g,""),l}return function v(p,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);p.prototype=Object.create(r&&r.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(p,r):p.__proto__=r)}(r,p),g(r,[{key:"valid",value:function(){return-1!==this.data.search(/^[A-D][0-9\-\$\:\.\+\/]+[A-D]$/)}},{key:"encode",value:function(){for(var e=[],l=this.getEncodings(),c=0;c<this.data.length;c++)e.push(l[this.data.charAt(c)]),c!==this.data.length-1&&e.push("0");return{text:this.text,data:e.join("")}}},{key:"getEncodings",value:function(){return{0:"101010011",1:"101011001",2:"101001011",3:"110010101",4:"101101001",5:"110101001",6:"100101011",7:"100101101",8:"100110101",9:"110100101","-":"101001101",$:"101100101",":":"1101011011","/":"1101101011",".":"1101101101","+":"1011011011",A:"1011001001",B:"1001001011",C:"1010010011",D:"1010011001"}}}]),r}(function b(p){return p&&p.__esModule?p:{default:p}}(m(2933)).default);_.codabar=y},3209:(j,_,m)=>{Object.defineProperty(_,"__esModule",{value:!0});var g=m(3803),S=m(9152),O=m(9995),b=m(9319),E=m(3641),C=m(4322),v=m(9468),y=m(9257);_.default={CODE39:g.CODE39,CODE128:S.CODE128,CODE128A:S.CODE128A,CODE128B:S.CODE128B,CODE128C:S.CODE128C,EAN13:O.EAN13,EAN8:O.EAN8,EAN5:O.EAN5,EAN2:O.EAN2,UPC:O.UPC,UPCE:O.UPCE,ITF14:b.ITF14,ITF:b.ITF,MSI:E.MSI,MSI10:E.MSI10,MSI11:E.MSI11,MSI1010:E.MSI1010,MSI1110:E.MSI1110,pharmacode:C.pharmacode,codabar:v.codabar,GenericBarcode:y.GenericBarcode}},4322:(j,_,m)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.pharmacode=void 0;var g=function(){function p(r,a){for(var e=0;e<a.length;e++){var l=a[e];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(r,l.key,l)}}return function(r,a,e){return a&&p(r.prototype,a),e&&p(r,e),r}}(),y=function(p){function r(a,e){!function E(p,r){if(!(p instanceof r))throw new TypeError("Cannot call a class as a function")}(this,r);var l=function C(p,r){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?p:r}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,a,e));return l.number=parseInt(a,10),l}return function v(p,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);p.prototype=Object.create(r&&r.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(p,r):p.__proto__=r)}(r,p),g(r,[{key:"encode",value:function(){for(var e=this.number,l="";!isNaN(e)&&0!=e;)e%2==0?(l="11100"+l,e=(e-2)/2):(l="100"+l,e=(e-1)/2);return{data:l=l.slice(0,-2),text:this.text}}},{key:"valid",value:function(){return this.number>=3&&this.number<=131070}}]),r}(function b(p){return p&&p.__esModule?p:{default:p}}(m(2933)).default);_.pharmacode=y},650:(j,_)=>{Object.defineProperty(_,"__esModule",{value:!0});var m=function(){function O(b,E){for(var C=0;C<E.length;C++){var v=E[C];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(b,v.key,v)}}return function(b,E,C){return E&&O(b.prototype,E),C&&O(b,C),b}}(),S=function(){function O(b){(function g(O,b){if(!(O instanceof b))throw new TypeError("Cannot call a class as a function")})(this,O),this.api=b}return m(O,[{key:"handleCatch",value:function(E){if("InvalidInputException"!==E.name)throw E;if(this.api._options.valid===this.api._defaults.valid)throw E.message;this.api._options.valid(!1),this.api.render=function(){}}},{key:"wrapBarcodeCall",value:function(E){try{var C=E.apply(void 0,arguments);return this.api._options.valid(!0),C}catch(v){return this.handleCatch(v),this.api}}}]),O}();_.default=S},1498:(j,_)=>{function m(C,v){if(!(C instanceof v))throw new TypeError("Cannot call a class as a function")}function g(C,v){if(!C)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!v||"object"!=typeof v&&"function"!=typeof v?C:v}function S(C,v){if("function"!=typeof v&&null!==v)throw new TypeError("Super expression must either be null or a function, not "+typeof v);C.prototype=Object.create(v&&v.prototype,{constructor:{value:C,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(C,v):C.__proto__=v)}Object.defineProperty(_,"__esModule",{value:!0});var O=function(){function v(y,p){m(this,v);var r=g(this,(v.__proto__||Object.getPrototypeOf(v)).call(this));return r.name="InvalidInputException",r.symbology=y,r.input=p,r.message='"'+r.input+'" is not a valid input for '+r.symbology,r}return S(v,Error),v}(),b=function(){function v(){m(this,v);var y=g(this,(v.__proto__||Object.getPrototypeOf(v)).call(this));return y.name="InvalidElementException",y.message="Not supported type to render on",y}return S(v,Error),v}(),E=function(){function v(){m(this,v);var y=g(this,(v.__proto__||Object.getPrototypeOf(v)).call(this));return y.name="NoElementException",y.message="No element to render on.",y}return S(v,Error),v}();_.InvalidInputException=O,_.InvalidElementException=b,_.NoElementException=E},8084:(j,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.default=function m(g){return g.marginTop=g.marginTop||g.margin,g.marginBottom=g.marginBottom||g.margin,g.marginRight=g.marginRight||g.margin,g.marginLeft=g.marginLeft||g.margin,g}},329:(j,_,m)=>{Object.defineProperty(_,"__esModule",{value:!0});var S=E(m(1951)),b=E(m(5482));function E(v){return v&&v.__esModule?v:{default:v}}_.default=function C(v){var y={};for(var p in b.default)b.default.hasOwnProperty(p)&&(v.hasAttribute("jsbarcode-"+p.toLowerCase())&&(y[p]=v.getAttribute("jsbarcode-"+p.toLowerCase())),v.hasAttribute("data-"+p.toLowerCase())&&(y[p]=v.getAttribute("data-"+p.toLowerCase())));return y.value=v.getAttribute("jsbarcode-value")||v.getAttribute("data-value"),(0,S.default)(y)}},2042:(j,_,m)=>{Object.defineProperty(_,"__esModule",{value:!0});var g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},O=v(m(329)),E=v(m(2368)),C=m(1498);function v(a){return a&&a.__esModule?a:{default:a}}_.default=function y(a){if("string"==typeof a)return function p(a){var e=document.querySelectorAll(a);if(0!==e.length){for(var l=[],c=0;c<e.length;c++)l.push(y(e[c]));return l}}(a);if(Array.isArray(a)){for(var e=[],l=0;l<a.length;l++)e.push(y(a[l]));return e}if(typeof HTMLCanvasElement<"u"&&a instanceof HTMLImageElement)return function r(a){var e=document.createElement("canvas");return{element:e,options:(0,O.default)(a),renderer:E.default.CanvasRenderer,afterRender:function(){a.setAttribute("src",e.toDataURL())}}}(a);if(a&&a.nodeName&&"svg"===a.nodeName.toLowerCase()||typeof SVGElement<"u"&&a instanceof SVGElement)return{element:a,options:(0,O.default)(a),renderer:E.default.SVGRenderer};if(typeof HTMLCanvasElement<"u"&&a instanceof HTMLCanvasElement)return{element:a,options:(0,O.default)(a),renderer:E.default.CanvasRenderer};if(a&&a.getContext)return{element:a,renderer:E.default.CanvasRenderer};if(a&&"object"===(typeof a>"u"?"undefined":g(a))&&!a.nodeName)return{element:a,renderer:E.default.ObjectRenderer};throw new C.InvalidElementException}},9246:(j,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.default=function m(g){var S=[];return function O(b){if(Array.isArray(b))for(var E=0;E<b.length;E++)O(b[E]);else b.text=b.text||"",b.data=b.data||"",S.push(b)}(g),S}},3931:(j,_)=>{Object.defineProperty(_,"__esModule",{value:!0});var m=Object.assign||function(g){for(var S=1;S<arguments.length;S++){var O=arguments[S];for(var b in O)Object.prototype.hasOwnProperty.call(O,b)&&(g[b]=O[b])}return g};_.default=function(g,S){return m({},g,S)}},1951:(j,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.default=function m(g){var S=["width","height","textMargin","fontSize","margin","marginTop","marginBottom","marginLeft","marginRight"];for(var O in S)S.hasOwnProperty(O)&&"string"==typeof g[O=S[O]]&&(g[O]=parseInt(g[O],10));return"string"==typeof g.displayValue&&(g.displayValue="false"!=g.displayValue),g}},5482:(j,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.default={width:2,height:100,format:"auto",displayValue:!0,fontOptions:"",font:"monospace",text:void 0,textAlign:"center",textPosition:"bottom",textMargin:2,fontSize:20,background:"#ffffff",lineColor:"#000000",margin:10,marginTop:void 0,marginBottom:void 0,marginLeft:void 0,marginRight:void 0,valid:function(){}}},8682:(j,_,m)=>{Object.defineProperty(_,"__esModule",{value:!0});var g=function(){function y(p,r){for(var a=0;a<r.length;a++){var e=r[a];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(p,e.key,e)}}return function(p,r,a){return r&&y(p.prototype,r),a&&y(p,a),p}}(),O=function E(y){return y&&y.__esModule?y:{default:y}}(m(3931)),b=m(2283),v=function(){function y(p,r,a){(function C(y,p){if(!(y instanceof p))throw new TypeError("Cannot call a class as a function")})(this,y),this.canvas=p,this.encodings=r,this.options=a}return g(y,[{key:"render",value:function(){if(!this.canvas.getContext)throw new Error("The browser does not support canvas.");this.prepareCanvas();for(var r=0;r<this.encodings.length;r++){var a=(0,O.default)(this.options,this.encodings[r].options);this.drawCanvasBarcode(a,this.encodings[r]),this.drawCanvasText(a,this.encodings[r]),this.moveCanvasDrawing(this.encodings[r])}this.restoreCanvas()}},{key:"prepareCanvas",value:function(){var r=this.canvas.getContext("2d");r.save(),(0,b.calculateEncodingAttributes)(this.encodings,this.options,r);var a=(0,b.getTotalWidthOfEncodings)(this.encodings),e=(0,b.getMaximumHeightOfEncodings)(this.encodings);this.canvas.width=a+this.options.marginLeft+this.options.marginRight,this.canvas.height=e,r.clearRect(0,0,this.canvas.width,this.canvas.height),this.options.background&&(r.fillStyle=this.options.background,r.fillRect(0,0,this.canvas.width,this.canvas.height)),r.translate(this.options.marginLeft,0)}},{key:"drawCanvasBarcode",value:function(r,a){var c,e=this.canvas.getContext("2d"),l=a.data;c="top"==r.textPosition?r.marginTop+r.fontSize+r.textMargin:r.marginTop,e.fillStyle=r.lineColor;for(var f=0;f<l.length;f++){var h=f*r.width+a.barcodePadding;"1"===l[f]?e.fillRect(h,c,r.width,r.height):l[f]&&e.fillRect(h,c,r.width,r.height*l[f])}}},{key:"drawCanvasText",value:function(r,a){var c,f,e=this.canvas.getContext("2d");r.displayValue&&(f="top"==r.textPosition?r.marginTop+r.fontSize-r.textMargin:r.height+r.textMargin+r.marginTop+r.fontSize,e.font=r.fontOptions+" "+r.fontSize+"px "+r.font,"left"==r.textAlign||a.barcodePadding>0?(c=0,e.textAlign="left"):"right"==r.textAlign?(c=a.width-1,e.textAlign="right"):(c=a.width/2,e.textAlign="center"),e.fillText(a.text,c,f))}},{key:"moveCanvasDrawing",value:function(r){this.canvas.getContext("2d").translate(r.width,0)}},{key:"restoreCanvas",value:function(){this.canvas.getContext("2d").restore()}}]),y}();_.default=v},2368:(j,_,m)=>{Object.defineProperty(_,"__esModule",{value:!0});var S=v(m(8682)),b=v(m(1538)),C=v(m(1045));function v(y){return y&&y.__esModule?y:{default:y}}_.default={CanvasRenderer:S.default,SVGRenderer:b.default,ObjectRenderer:C.default}},1045:(j,_)=>{Object.defineProperty(_,"__esModule",{value:!0});var m=function(){function O(b,E){for(var C=0;C<E.length;C++){var v=E[C];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(b,v.key,v)}}return function(b,E,C){return E&&O(b.prototype,E),C&&O(b,C),b}}(),S=function(){function O(b,E,C){(function g(O,b){if(!(O instanceof b))throw new TypeError("Cannot call a class as a function")})(this,O),this.object=b,this.encodings=E,this.options=C}return m(O,[{key:"render",value:function(){this.object.encodings=this.encodings}}]),O}();_.default=S},2283:(j,_,m)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.getTotalWidthOfEncodings=_.calculateEncodingAttributes=_.getBarcodePadding=_.getEncodingHeight=_.getMaximumHeightOfEncodings=void 0;var S=function O(r){return r&&r.__esModule?r:{default:r}}(m(3931));function b(r,a){return a.height+(a.displayValue&&r.text.length>0?a.fontSize+a.textMargin:0)+a.marginTop+a.marginBottom}function E(r,a,e){if(e.displayValue&&a<r){if("center"==e.textAlign)return Math.floor((r-a)/2);if("left"==e.textAlign)return 0;if("right"==e.textAlign)return Math.floor(r-a)}return 0}function p(r,a,e){var l;if(e)l=e;else{if(!(typeof document<"u"))return 0;l=document.createElement("canvas").getContext("2d")}l.font=a.fontOptions+" "+a.fontSize+"px "+a.font;var c=l.measureText(r);return c?c.width:0}_.getMaximumHeightOfEncodings=function y(r){for(var a=0,e=0;e<r.length;e++)r[e].height>a&&(a=r[e].height);return a},_.getEncodingHeight=b,_.getBarcodePadding=E,_.calculateEncodingAttributes=function C(r,a,e){for(var l=0;l<r.length;l++){var h,c=r[l],f=(0,S.default)(a,c.options);h=f.displayValue?p(c.text,f,e):0;var I=c.data.length*f.width;c.width=Math.ceil(Math.max(h,I)),c.height=b(c,f),c.barcodePadding=E(h,I,f)}},_.getTotalWidthOfEncodings=function v(r){for(var a=0,e=0;e<r.length;e++)a+=r[e].width;return a}},1538:(j,_,m)=>{Object.defineProperty(_,"__esModule",{value:!0});var g=function(){function p(r,a){for(var e=0;e<a.length;e++){var l=a[e];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(r,l.key,l)}}return function(r,a,e){return a&&p(r.prototype,a),e&&p(r,e),r}}(),O=function E(p){return p&&p.__esModule?p:{default:p}}(m(3931)),b=m(2283),v="http://www.w3.org/2000/svg",y=function(){function p(r,a,e){(function C(p,r){if(!(p instanceof r))throw new TypeError("Cannot call a class as a function")})(this,p),this.svg=r,this.encodings=a,this.options=e,this.document=e.xmlDocument||document}return g(p,[{key:"render",value:function(){var a=this.options.marginLeft;this.prepareSVG();for(var e=0;e<this.encodings.length;e++){var l=this.encodings[e],c=(0,O.default)(this.options,l.options),f=this.createGroup(a,c.marginTop,this.svg);this.setGroupOptions(f,c),this.drawSvgBarcode(f,c,l),this.drawSVGText(f,c,l),a+=l.width}}},{key:"prepareSVG",value:function(){for(;this.svg.firstChild;)this.svg.removeChild(this.svg.firstChild);(0,b.calculateEncodingAttributes)(this.encodings,this.options);var a=(0,b.getTotalWidthOfEncodings)(this.encodings),e=(0,b.getMaximumHeightOfEncodings)(this.encodings),l=a+this.options.marginLeft+this.options.marginRight;this.setSvgAttributes(l,e),this.options.background&&this.drawRect(0,0,l,e,this.svg).setAttribute("style","fill:"+this.options.background+";")}},{key:"drawSvgBarcode",value:function(a,e,l){var f,c=l.data;f="top"==e.textPosition?e.fontSize+e.textMargin:0;for(var h=0,I=0,T=0;T<c.length;T++)I=T*e.width+l.barcodePadding,"1"===c[T]?h++:h>0&&(this.drawRect(I-e.width*h,f,e.width*h,e.height,a),h=0);h>0&&this.drawRect(I-e.width*(h-1),f,e.width*h,e.height,a)}},{key:"drawSVGText",value:function(a,e,l){var f,h,c=this.document.createElementNS(v,"text");e.displayValue&&(c.setAttribute("style","font:"+e.fontOptions+" "+e.fontSize+"px "+e.font),h="top"==e.textPosition?e.fontSize-e.textMargin:e.height+e.textMargin+e.fontSize,"left"==e.textAlign||l.barcodePadding>0?(f=0,c.setAttribute("text-anchor","start")):"right"==e.textAlign?(f=l.width-1,c.setAttribute("text-anchor","end")):(f=l.width/2,c.setAttribute("text-anchor","middle")),c.setAttribute("x",f),c.setAttribute("y",h),c.appendChild(this.document.createTextNode(l.text)),a.appendChild(c))}},{key:"setSvgAttributes",value:function(a,e){var l=this.svg;l.setAttribute("width",a+"px"),l.setAttribute("height",e+"px"),l.setAttribute("x","0px"),l.setAttribute("y","0px"),l.setAttribute("viewBox","0 0 "+a+" "+e),l.setAttribute("xmlns",v),l.setAttribute("version","1.1"),l.setAttribute("style","transform: translate(0,0)")}},{key:"createGroup",value:function(a,e,l){var c=this.document.createElementNS(v,"g");return c.setAttribute("transform","translate("+a+", "+e+")"),l.appendChild(c),c}},{key:"setGroupOptions",value:function(a,e){a.setAttribute("style","fill:"+e.lineColor+";")}},{key:"drawRect",value:function(a,e,l,c,f){var h=this.document.createElementNS(v,"rect");return h.setAttribute("x",a),h.setAttribute("y",e),h.setAttribute("width",l),h.setAttribute("height",c),f.appendChild(h),h}}]),p}();_.default=y}}]);