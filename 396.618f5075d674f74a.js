"use strict";(self.webpackChunkseller=self.webpackChunkseller||[]).push([[396],{2396:(w,m,f)=>{f.r(m),f.d(m,{OzonModule:()=>qr});var b=f(177),C=f(9909),O=f(467),v=f(4412),S=f(6977),E=f(5964),g=f(9437),y=f(983),d=f(2180),a=f(4153),e=f(4438),u=f(6557),l=f(5779),p=f(4238),_=f(345),h=f(1141),I=f(612),T=f(491),F=f(9417),P=f(1455),U=f(9335),J=f(563),Z=f(9071),ne=f(8542),B=f(4420),G=f(3306),$=f(5998),V=f(2816),A=f(1512),N=f(2423),Y=f(1880),_e=f(5434);const ie=i=>({height:i}),je=(i,s)=>({"p-multiselect-item":!0,"p-disabled":i,"p-focus":s}),Me=i=>({"p-variant-filled":i}),Pe=i=>({"p-highlight":i}),le=i=>({$implicit:i});function Ge(i,s){1&i&&e.nrm(0,"CheckIcon",7),2&i&&(e.Y8G("styleClass","p-checkbox-icon"),e.BMQ("aria-hidden",!0))}function Be(i,s){}function Le(i,s){1&i&&e.DNE(0,Be,0,0,"ng-template")}function ze(i,s){if(1&i&&(e.j41(0,"span",8),e.DNE(1,Le,1,0,null,9),e.k0s()),2&i){const t=e.XpG(2);e.BMQ("aria-hidden",!0),e.R7$(),e.Y8G("ngTemplateOutlet",t.checkIconTemplate)}}function Ae(i,s){}function $e(i,s){1&i&&e.DNE(0,Ae,0,0,"ng-template")}function Ve(i,s){if(1&i&&(e.j41(0,"span",8),e.DNE(1,$e,1,0,null,4),e.k0s()),2&i){const t=e.XpG(2);e.BMQ("aria-hidden",!0),e.R7$(),e.Y8G("ngTemplateOutlet",t.itemCheckboxIconTemplate)("ngTemplateOutletContext",e.eq3(3,le,t.selected))}}function Ne(i,s){if(1&i&&(e.qex(0),e.DNE(1,Ge,1,2,"CheckIcon",5)(2,ze,2,2,"span",6)(3,Ve,2,5,"span",6),e.bVm()),2&i){const t=e.XpG();e.R7$(),e.Y8G("ngIf",!t.checkIconTemplate&&!t.itemCheckboxIconTemplate),e.R7$(),e.Y8G("ngIf",t.checkIconTemplate),e.R7$(),e.Y8G("ngIf",t.itemCheckboxIconTemplate)}}function Xe(i,s){if(1&i&&(e.j41(0,"span"),e.EFF(1),e.k0s()),2&i){let t;const o=e.XpG();e.R7$(),e.JRh(null!==(t=o.label)&&void 0!==t?t:"empty")}}function Ye(i,s){1&i&&e.eu8(0)}const He=["container"],Ue=["overlay"],We=["filterInput"],Je=["focusInput"],Ke=["items"],qe=["scroller"],Qe=["lastHiddenFocusableEl"],Ze=["firstHiddenFocusableEl"],et=["headerCheckbox"],tt=[[["p-header"]],[["p-footer"]]],nt=["p-header","p-footer"],it=(i,s)=>({$implicit:i,removeChip:s}),ot=i=>({"p-disabled":i}),at=i=>({"max-height":i}),be=i=>({options:i}),rt=(i,s)=>({"p-variant-filled":i,"p-checkbox-disabled":s}),lt=(i,s,t)=>({"p-highlight":i,"p-focus":s,"p-disabled":t}),ut=(i,s)=>({$implicit:i,partialSelected:s}),ve=(i,s)=>({$implicit:i,options:s}),st=()=>({});function ct(i,s){if(1&i&&(e.qex(0),e.EFF(1),e.bVm()),2&i){const t=e.XpG(2);e.R7$(),e.JRh(t.label()||"empty")}}function pt(i,s){if(1&i){const t=e.RV6();e.j41(0,"TimesCircleIcon",31),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2).$implicit,r=e.XpG(3);return e.Njj(r.removeOption(n,r.event))})("keydown",function(n){e.eBV(t);const r=e.XpG(2).$implicit,c=e.XpG(3);return e.Njj(c.onremoveTokenIconKeyDown(n,r))}),e.k0s()}if(2&i){const t=e.XpG(2).$implicit,o=e.XpG(3);e.Y8G("ngClass",e.eq3(5,ot,o.isOptionDisabled(t)))("styleClass","p-multiselect-token-icon"),e.BMQ("tabindex",0)("data-pc-section","clearicon")("aria-hidden",!0)}}function dt(i,s){1&i&&e.eu8(0)}function _t(i,s){if(1&i){const t=e.RV6();e.j41(0,"span",32),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2).$implicit,r=e.XpG(3);return e.Njj(r.removeOption(n,r.event))})("keydown",function(n){e.eBV(t);const r=e.XpG(2).$implicit,c=e.XpG(3);return e.Njj(c.onremoveTokenIconKeyDown(n,r))}),e.DNE(1,dt,1,0,"ng-container",33),e.k0s()}if(2&i){const t=e.XpG(5);e.BMQ("tabindex",0)("data-pc-section","clearicon")("aria-hidden",!0),e.R7$(),e.Y8G("ngTemplateOutlet",t.removeTokenIconTemplate)}}function ft(i,s){if(1&i&&(e.qex(0),e.DNE(1,pt,1,7,"TimesCircleIcon",29)(2,_t,2,4,"span",30),e.bVm()),2&i){const t=e.XpG(4);e.R7$(),e.Y8G("ngIf",!t.removeTokenIconTemplate),e.R7$(),e.Y8G("ngIf",t.removeTokenIconTemplate)}}function mt(i,s){if(1&i&&(e.j41(0,"div",27,4)(2,"span",28),e.EFF(3),e.k0s(),e.DNE(4,ft,3,2,"ng-container",20),e.k0s()),2&i){const t=s.$implicit,o=e.XpG(3);e.R7$(3),e.JRh(o.getLabelByValue(t)),e.R7$(),e.Y8G("ngIf",!o.disabled)}}function ht(i,s){if(1&i&&(e.qex(0),e.EFF(1),e.bVm()),2&i){const t=e.XpG(3);e.R7$(),e.JRh(t.placeholder()||t.defaultLabel||"empty")}}function gt(i,s){if(1&i&&(e.qex(0),e.DNE(1,mt,5,2,"div",26)(2,ht,2,1,"ng-container",20),e.bVm()),2&i){const t=e.XpG(2);e.R7$(),e.Y8G("ngForOf",t.chipSelectedItems()),e.R7$(),e.Y8G("ngIf",!t.modelValue()||0===t.modelValue().length)}}function bt(i,s){if(1&i&&(e.qex(0),e.DNE(1,ct,2,1,"ng-container",20)(2,gt,3,2,"ng-container",20),e.bVm()),2&i){const t=e.XpG();e.R7$(),e.Y8G("ngIf","comma"===t.display),e.R7$(),e.Y8G("ngIf","chip"===t.display)}}function vt(i,s){1&i&&e.eu8(0)}function yt(i,s){if(1&i){const t=e.RV6();e.j41(0,"TimesIcon",36),e.bIt("click",function(n){e.eBV(t);const r=e.XpG(2);return e.Njj(r.clear(n))}),e.k0s()}2&i&&(e.Y8G("styleClass","p-multiselect-clear-icon"),e.BMQ("data-pc-section","clearicon")("aria-hidden",!0))}function Ot(i,s){}function Ct(i,s){1&i&&e.DNE(0,Ot,0,0,"ng-template")}function St(i,s){if(1&i){const t=e.RV6();e.j41(0,"span",37),e.bIt("click",function(n){e.eBV(t);const r=e.XpG(2);return e.Njj(r.clear(n))}),e.DNE(1,Ct,1,0,null,33),e.k0s()}if(2&i){const t=e.XpG(2);e.BMQ("data-pc-section","clearicon")("aria-hidden",!0),e.R7$(),e.Y8G("ngTemplateOutlet",t.clearIconTemplate)}}function kt(i,s){if(1&i&&(e.qex(0),e.DNE(1,yt,1,3,"TimesIcon",34)(2,St,2,3,"span",35),e.bVm()),2&i){const t=e.XpG();e.R7$(),e.Y8G("ngIf",!t.clearIconTemplate),e.R7$(),e.Y8G("ngIf",t.clearIconTemplate)}}function Et(i,s){1&i&&e.eu8(0)}function It(i,s){if(1&i&&(e.qex(0),e.DNE(1,Et,1,0,"ng-container",33),e.bVm()),2&i){const t=e.XpG(2);e.R7$(),e.Y8G("ngTemplateOutlet",t.loadingIconTemplate)}}function Ft(i,s){if(1&i&&e.nrm(0,"span",40),2&i){const t=e.XpG(3);e.Y8G("ngClass","p-multiselect-trigger-icon pi-spin "+t.loadingIcon)}}function Tt(i,s){1&i&&e.nrm(0,"span",41),2&i&&e.HbH("p-multiselect-trigger-icon pi pi-spinner pi-spin")}function Rt(i,s){if(1&i&&(e.qex(0),e.DNE(1,Ft,1,1,"span",38)(2,Tt,1,2,"span",39),e.bVm()),2&i){const t=e.XpG(2);e.R7$(),e.Y8G("ngIf",t.loadingIcon),e.R7$(),e.Y8G("ngIf",!t.loadingIcon)}}function xt(i,s){if(1&i&&(e.qex(0),e.DNE(1,It,2,1,"ng-container",20)(2,Rt,3,2,"ng-container",20),e.bVm()),2&i){const t=e.XpG();e.R7$(),e.Y8G("ngIf",t.loadingIconTemplate),e.R7$(),e.Y8G("ngIf",!t.loadingIconTemplate)}}function wt(i,s){if(1&i&&e.nrm(0,"span",45),2&i){const t=e.XpG(3);e.Y8G("ngClass",t.dropdownIcon),e.BMQ("data-pc-section","triggericon")("aria-hidden",!0)}}function Dt(i,s){1&i&&e.nrm(0,"ChevronDownIcon",46),2&i&&(e.Y8G("styleClass","p-multiselect-trigger-icon"),e.BMQ("data-pc-section","triggericon")("aria-hidden",!0))}function jt(i,s){if(1&i&&(e.qex(0),e.DNE(1,wt,1,3,"span",43)(2,Dt,1,3,"ChevronDownIcon",44),e.bVm()),2&i){const t=e.XpG(2);e.R7$(),e.Y8G("ngIf",t.dropdownIcon),e.R7$(),e.Y8G("ngIf",!t.dropdownIcon)}}function Mt(i,s){}function Pt(i,s){1&i&&e.DNE(0,Mt,0,0,"ng-template")}function Gt(i,s){if(1&i&&(e.j41(0,"span",47),e.DNE(1,Pt,1,0,null,33),e.k0s()),2&i){const t=e.XpG(2);e.BMQ("data-pc-section","triggericon")("aria-hidden",!0),e.R7$(),e.Y8G("ngTemplateOutlet",t.dropdownIconTemplate)}}function Bt(i,s){if(1&i&&e.DNE(0,jt,3,2,"ng-container",20)(1,Gt,2,3,"span",42),2&i){const t=e.XpG();e.Y8G("ngIf",!t.dropdownIconTemplate),e.R7$(),e.Y8G("ngIf",t.dropdownIconTemplate)}}function Lt(i,s){1&i&&e.eu8(0)}function zt(i,s){1&i&&e.eu8(0)}function At(i,s){if(1&i&&(e.qex(0),e.DNE(1,zt,1,0,"ng-container",21),e.bVm()),2&i){const t=e.XpG(3);e.R7$(),e.Y8G("ngTemplateOutlet",t.filterTemplate)("ngTemplateOutletContext",e.eq3(2,be,t.filterOptions))}}function $t(i,s){1&i&&e.nrm(0,"CheckIcon",46),2&i&&(e.Y8G("styleClass","p-checkbox-icon"),e.BMQ("aria-hidden",!0))}function Vt(i,s){if(1&i&&(e.qex(0),e.DNE(1,$t,1,2,"CheckIcon",44),e.bVm()),2&i){const t=e.XpG(6);e.R7$(),e.Y8G("ngIf",t.allSelected())}}function Nt(i,s){}function Xt(i,s){1&i&&e.DNE(0,Nt,0,0,"ng-template")}function Yt(i,s){if(1&i&&(e.j41(0,"span",63),e.DNE(1,Xt,1,0,null,21),e.k0s()),2&i){const t=e.XpG(6);e.BMQ("aria-hidden",!0),e.R7$(),e.Y8G("ngTemplateOutlet",t.checkIconTemplate)("ngTemplateOutletContext",e.eq3(3,le,t.allSelected()))}}function Ht(i,s){}function Ut(i,s){1&i&&e.DNE(0,Ht,0,0,"ng-template")}function Wt(i,s){if(1&i&&(e.j41(0,"span",63),e.DNE(1,Ut,1,0,null,21),e.k0s()),2&i){const t=e.XpG(6);e.BMQ("aria-hidden",!0),e.R7$(),e.Y8G("ngTemplateOutlet",t.headerCheckboxIconTemplate)("ngTemplateOutletContext",e.l_i(3,ut,t.allSelected(),t.partialSelected()))}}function Jt(i,s){if(1&i&&(e.qex(0),e.DNE(1,Vt,2,1,"ng-container",20)(2,Yt,2,5,"span",62)(3,Wt,2,6,"span",62),e.bVm()),2&i){const t=e.XpG(5);e.R7$(),e.Y8G("ngIf",!t.checkIconTemplate&&!t.headerCheckboxIconTemplate),e.R7$(),e.Y8G("ngIf",t.checkIconTemplate),e.R7$(),e.Y8G("ngIf",t.headerCheckboxIconTemplate)}}function Kt(i,s){if(1&i){const t=e.RV6();e.j41(0,"div",59),e.bIt("click",function(n){e.eBV(t);const r=e.XpG(4);return e.Njj(r.onToggleAll(n))})("keydown",function(n){e.eBV(t);const r=e.XpG(4);return e.Njj(r.onHeaderCheckboxKeyDown(n))}),e.j41(1,"div",16)(2,"input",60,9),e.bIt("focus",function(){e.eBV(t);const n=e.XpG(4);return e.Njj(n.onHeaderCheckboxFocus())})("blur",function(){e.eBV(t);const n=e.XpG(4);return e.Njj(n.onHeaderCheckboxBlur())}),e.k0s()(),e.j41(4,"div",61),e.DNE(5,Jt,4,3,"ng-container",20),e.k0s()()}if(2&i){const t=e.XpG(4);e.Y8G("ngClass",e.l_i(10,rt,"filled"===t.variant||"filled"===t.config.inputStyle(),t.disabled||t.toggleAllDisabled)),e.R7$(),e.BMQ("data-p-hidden-accessible",!0),e.R7$(),e.Y8G("readonly",t.readonly)("disabled",t.disabled||t.toggleAllDisabled),e.BMQ("checked",t.allSelected())("aria-label",t.toggleAllAriaLabel),e.R7$(2),e.Y8G("ngClass",e.sMw(13,lt,t.allSelected(),t.headerCheckboxFocus,t.disabled||t.toggleAllDisabled)),e.BMQ("aria-label",t.toggleAllAriaLabel)("aria-checked",t.allSelected()),e.R7$(),e.Y8G("ngIf",t.allSelected()||t.partialSelected())}}function qt(i,s){1&i&&e.nrm(0,"SearchIcon",46),2&i&&e.Y8G("styleClass","p-multiselect-filter-icon")}function Qt(i,s){}function Zt(i,s){1&i&&e.DNE(0,Qt,0,0,"ng-template")}function en(i,s){if(1&i&&(e.j41(0,"span",67),e.DNE(1,Zt,1,0,null,33),e.k0s()),2&i){const t=e.XpG(5);e.R7$(),e.Y8G("ngTemplateOutlet",t.filterIconTemplate)}}function tn(i,s){if(1&i){const t=e.RV6();e.j41(0,"div",64)(1,"input",65,10),e.bIt("input",function(n){e.eBV(t);const r=e.XpG(4);return e.Njj(r.onFilterInputChange(n))})("keydown",function(n){e.eBV(t);const r=e.XpG(4);return e.Njj(r.onFilterKeyDown(n))})("click",function(n){e.eBV(t);const r=e.XpG(4);return e.Njj(r.onInputClick(n))})("blur",function(n){e.eBV(t);const r=e.XpG(4);return e.Njj(r.onFilterBlur(n))}),e.k0s(),e.DNE(3,qt,1,1,"SearchIcon",44)(4,en,2,1,"span",66),e.k0s()}if(2&i){const t=e.XpG(4);e.R7$(),e.Y8G("value",t._filterValue()||"")("disabled",t.disabled),e.BMQ("autocomplete",t.autocomplete)("placeholder",t.filterPlaceHolder)("aria-owns",t.id+"_list")("aria-activedescendant",t.focusedOptionId)("placeholder",t.filterPlaceHolder)("aria-label",t.ariaFilterLabel),e.R7$(2),e.Y8G("ngIf",!t.filterIconTemplate),e.R7$(),e.Y8G("ngIf",t.filterIconTemplate)}}function nn(i,s){1&i&&e.nrm(0,"TimesIcon",46),2&i&&e.Y8G("styleClass","p-multiselect-close-icon")}function on(i,s){}function an(i,s){1&i&&e.DNE(0,on,0,0,"ng-template")}function rn(i,s){if(1&i&&(e.j41(0,"span",68),e.DNE(1,an,1,0,null,33),e.k0s()),2&i){const t=e.XpG(4);e.R7$(),e.Y8G("ngTemplateOutlet",t.closeIconTemplate)}}function ln(i,s){if(1&i){const t=e.RV6();e.DNE(0,Kt,6,17,"div",55)(1,tn,5,10,"div",56),e.j41(2,"button",57),e.bIt("click",function(n){e.eBV(t);const r=e.XpG(3);return e.Njj(r.close(n))}),e.DNE(3,nn,1,1,"TimesIcon",44)(4,rn,2,1,"span",58),e.k0s()}if(2&i){const t=e.XpG(3);e.Y8G("ngIf",t.isSelectionAllDisabled()),e.R7$(),e.Y8G("ngIf",t.filter),e.R7$(),e.BMQ("aria-label",t.closeAriaLabel),e.R7$(),e.Y8G("ngIf",!t.closeIconTemplate),e.R7$(),e.Y8G("ngIf",t.closeIconTemplate)}}function un(i,s){if(1&i&&(e.j41(0,"div",54),e.SdG(1),e.DNE(2,Lt,1,0,"ng-container",33)(3,At,2,4,"ng-container",23)(4,ln,5,5,"ng-template",null,8,e.C5r),e.k0s()),2&i){const t=e.sdS(5),o=e.XpG(2);e.R7$(2),e.Y8G("ngTemplateOutlet",o.headerTemplate),e.R7$(),e.Y8G("ngIf",o.filterTemplate)("ngIfElse",t)}}function sn(i,s){1&i&&e.eu8(0)}function cn(i,s){if(1&i&&e.DNE(0,sn,1,0,"ng-container",21),2&i){const t=s.$implicit,o=s.options;e.XpG(2);const n=e.sdS(8);e.Y8G("ngTemplateOutlet",n)("ngTemplateOutletContext",e.l_i(2,ve,t,o))}}function pn(i,s){1&i&&e.eu8(0)}function dn(i,s){if(1&i&&e.DNE(0,pn,1,0,"ng-container",21),2&i){const t=s.options,o=e.XpG(4);e.Y8G("ngTemplateOutlet",o.loaderTemplate)("ngTemplateOutletContext",e.eq3(2,be,t))}}function _n(i,s){1&i&&(e.qex(0),e.DNE(1,dn,1,4,"ng-template",70),e.bVm())}function fn(i,s){if(1&i){const t=e.RV6();e.j41(0,"p-scroller",69,11),e.bIt("onLazyLoad",function(n){e.eBV(t);const r=e.XpG(2);return e.Njj(r.onLazyLoad.emit(n))}),e.DNE(2,cn,1,5,"ng-template",25)(3,_n,2,0,"ng-container",20),e.k0s()}if(2&i){const t=e.XpG(2);e.Aen(e.eq3(9,ie,t.scrollHeight)),e.Y8G("items",t.visibleOptions())("itemSize",t.virtualScrollItemSize||t._itemSize)("autoSize",!0)("tabindex",-1)("lazy",t.lazy)("options",t.virtualScrollOptions),e.R7$(3),e.Y8G("ngIf",t.loaderTemplate)}}function mn(i,s){1&i&&e.eu8(0)}function hn(i,s){if(1&i&&(e.qex(0),e.DNE(1,mn,1,0,"ng-container",21),e.bVm()),2&i){e.XpG();const t=e.sdS(8),o=e.XpG();e.R7$(),e.Y8G("ngTemplateOutlet",t)("ngTemplateOutletContext",e.l_i(3,ve,o.visibleOptions(),e.lJ4(2,st)))}}function gn(i,s){if(1&i&&(e.j41(0,"span"),e.EFF(1),e.k0s()),2&i){const t=e.XpG(2).$implicit,o=e.XpG(3);e.R7$(),e.JRh(o.getOptionGroupLabel(t.optionGroup))}}function bn(i,s){1&i&&e.eu8(0)}function vn(i,s){if(1&i&&(e.qex(0),e.j41(1,"li",74),e.DNE(2,gn,2,1,"span",20)(3,bn,1,0,"ng-container",21),e.k0s(),e.bVm()),2&i){const t=e.XpG(),o=t.$implicit,n=t.index,r=e.XpG().options,c=e.XpG(2);e.R7$(),e.Y8G("ngStyle",e.eq3(5,ie,r.itemSize+"px")),e.BMQ("id",c.id+"_"+c.getOptionIndex(n,r)),e.R7$(),e.Y8G("ngIf",!c.groupTemplate),e.R7$(),e.Y8G("ngTemplateOutlet",c.groupTemplate)("ngTemplateOutletContext",e.eq3(7,le,o.optionGroup))}}function yn(i,s){if(1&i){const t=e.RV6();e.qex(0),e.j41(1,"p-multiSelectItem",75),e.bIt("onClick",function(n){e.eBV(t);const r=e.XpG().index,c=e.XpG().options,k=e.XpG(2);return e.Njj(k.onOptionSelect(n,!1,k.getOptionIndex(r,c)))})("onMouseEnter",function(n){e.eBV(t);const r=e.XpG().index,c=e.XpG().options,k=e.XpG(2);return e.Njj(k.onOptionMouseEnter(n,k.getOptionIndex(r,c)))}),e.k0s(),e.bVm()}if(2&i){const t=e.XpG(),o=t.$implicit,n=t.index,r=e.XpG().options,c=e.XpG(2);e.R7$(),e.Y8G("id",c.id+"_"+c.getOptionIndex(n,r))("option",o)("selected",c.isSelected(o))("label",c.getOptionLabel(o))("disabled",c.isOptionDisabled(o))("template",c.itemTemplate)("checkIconTemplate",c.checkIconTemplate)("itemCheckboxIconTemplate",c.itemCheckboxIconTemplate)("itemSize",r.itemSize)("focused",c.focusedOptionIndex()===c.getOptionIndex(n,r))("ariaPosInset",c.getAriaPosInset(c.getOptionIndex(n,r)))("ariaSetSize",c.ariaSetSize)}}function On(i,s){if(1&i&&e.DNE(0,vn,4,9,"ng-container",20)(1,yn,2,12,"ng-container",20),2&i){const t=s.$implicit,o=e.XpG(3);e.Y8G("ngIf",o.isOptionGroup(t)),e.R7$(),e.Y8G("ngIf",!o.isOptionGroup(t))}}function Cn(i,s){if(1&i&&(e.qex(0),e.EFF(1),e.bVm()),2&i){const t=e.XpG(4);e.R7$(),e.SpI(" ",t.emptyFilterMessageLabel," ")}}function Sn(i,s){1&i&&e.eu8(0,null,13)}function kn(i,s){if(1&i&&(e.j41(0,"li",76),e.DNE(1,Cn,2,1,"ng-container",23)(2,Sn,2,0,"ng-container",33),e.k0s()),2&i){const t=e.XpG().options,o=e.XpG(2);e.Y8G("ngStyle",e.eq3(4,ie,t.itemSize+"px")),e.R7$(),e.Y8G("ngIf",!o.emptyFilterTemplate&&!o.emptyTemplate)("ngIfElse",o.emptyFilter),e.R7$(),e.Y8G("ngTemplateOutlet",o.emptyFilterTemplate||o.emptyTemplate)}}function En(i,s){if(1&i&&(e.qex(0),e.EFF(1),e.bVm()),2&i){const t=e.XpG(4);e.R7$(),e.SpI(" ",t.emptyMessageLabel," ")}}function In(i,s){1&i&&e.eu8(0,null,14)}function Fn(i,s){if(1&i&&(e.j41(0,"li",76),e.DNE(1,En,2,1,"ng-container",23)(2,In,2,0,"ng-container",33),e.k0s()),2&i){const t=e.XpG().options,o=e.XpG(2);e.Y8G("ngStyle",e.eq3(4,ie,t.itemSize+"px")),e.R7$(),e.Y8G("ngIf",!o.emptyTemplate)("ngIfElse",o.empty),e.R7$(),e.Y8G("ngTemplateOutlet",o.emptyTemplate)}}function Tn(i,s){if(1&i&&(e.j41(0,"ul",71,12),e.DNE(2,On,2,2,"ng-template",72)(3,kn,3,6,"li",73)(4,Fn,3,6,"li",73),e.k0s()),2&i){const t=s.$implicit,o=s.options,n=e.XpG(2);e.Y8G("ngClass",o.contentStyleClass)("ngStyle",o.contentStyle),e.BMQ("aria-label",n.listLabel),e.R7$(2),e.Y8G("ngForOf",t),e.R7$(),e.Y8G("ngIf",n.hasFilter()&&n.isEmpty()),e.R7$(),e.Y8G("ngIf",!n.hasFilter()&&n.isEmpty())}}function Rn(i,s){1&i&&e.eu8(0)}function xn(i,s){if(1&i&&(e.j41(0,"div",77),e.SdG(1,1),e.DNE(2,Rn,1,0,"ng-container",33),e.k0s()),2&i){const t=e.XpG(2);e.R7$(2),e.Y8G("ngTemplateOutlet",t.footerTemplate)}}function wn(i,s){if(1&i){const t=e.RV6();e.j41(0,"div",48)(1,"span",49,5),e.bIt("focus",function(n){e.eBV(t);const r=e.XpG();return e.Njj(r.onFirstHiddenFocus(n))}),e.k0s(),e.DNE(3,un,6,3,"div",50),e.j41(4,"div",51),e.DNE(5,fn,4,11,"p-scroller",52)(6,hn,2,6,"ng-container",20)(7,Tn,5,6,"ng-template",null,6,e.C5r),e.k0s(),e.DNE(9,xn,3,1,"div",53),e.j41(10,"span",49,7),e.bIt("focus",function(n){e.eBV(t);const r=e.XpG();return e.Njj(r.onLastHiddenFocus(n))}),e.k0s()()}if(2&i){const t=e.XpG();e.HbH(t.panelStyleClass),e.Y8G("ngClass","p-multiselect-panel p-component")("ngStyle",t.panelStyle),e.BMQ("id",t.id+"_list"),e.R7$(),e.BMQ("tabindex",0)("data-p-hidden-accessible",!0)("data-p-hidden-focusable",!0),e.R7$(2),e.Y8G("ngIf",t.showHeader),e.R7$(),e.Y8G("ngStyle",e.eq3(16,at,t.virtualScroll?"auto":t.scrollHeight||"auto")),e.R7$(),e.Y8G("ngIf",t.virtualScroll),e.R7$(),e.Y8G("ngIf",!t.virtualScroll),e.R7$(3),e.Y8G("ngIf",t.footerFacet||t.footerTemplate),e.R7$(),e.BMQ("tabindex",0)("data-p-hidden-accessible",!0)("data-p-hidden-focusable",!0)}}const Dn={provide:F.kq,useExisting:(0,e.Rfq)(()=>oe),multi:!0};let jn=(()=>{class i{config;id;option;selected;label;disabled;itemSize;focused;ariaPosInset;ariaSetSize;template;checkIconTemplate;itemCheckboxIconTemplate;onClick=new e.bkB;onMouseEnter=new e.bkB;constructor(t){this.config=t}onOptionClick(t){this.onClick.emit({originalEvent:t,option:this.option,selected:this.selected}),t.stopPropagation()}onOptionMouseEnter(t){this.onMouseEnter.emit({originalEvent:t,option:this.option,selected:this.selected})}static \u0275fac=function(o){return new(o||i)(e.rXU(l.r1))};static \u0275cmp=e.VBU({type:i,selectors:[["p-multiSelectItem"]],hostAttrs:[1,"p-element"],inputs:{id:"id",option:"option",selected:[2,"selected","selected",e.L39],label:"label",disabled:[2,"disabled","disabled",e.L39],itemSize:[2,"itemSize","itemSize",e.Udg],focused:[2,"focused","focused",e.L39],ariaPosInset:"ariaPosInset",ariaSetSize:"ariaSetSize",template:"template",checkIconTemplate:"checkIconTemplate",itemCheckboxIconTemplate:"itemCheckboxIconTemplate"},outputs:{onClick:"onClick",onMouseEnter:"onMouseEnter"},features:[e.GFd],decls:6,vars:28,consts:[["pRipple","","role","option",1,"p-multiselect-item",3,"click","mouseenter","ngStyle","ngClass","id"],[1,"p-checkbox","p-component",3,"ngClass"],[1,"p-checkbox-box",3,"ngClass"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"styleClass",4,"ngIf"],["class","p-checkbox-icon",4,"ngIf"],[3,"styleClass"],[1,"p-checkbox-icon"],[4,"ngTemplateOutlet"]],template:function(o,n){1&o&&(e.j41(0,"li",0),e.bIt("click",function(c){return n.onOptionClick(c)})("mouseenter",function(c){return n.onOptionMouseEnter(c)}),e.j41(1,"div",1)(2,"div",2),e.DNE(3,Ne,4,3,"ng-container",3),e.k0s()(),e.DNE(4,Xe,2,1,"span",3)(5,Ye,1,0,"ng-container",4),e.k0s()),2&o&&(e.Y8G("ngStyle",e.eq3(17,ie,n.itemSize+"px"))("ngClass",e.l_i(19,je,n.disabled,n.focused))("id",n.id),e.BMQ("aria-label",n.label)("aria-setsize",n.ariaSetSize)("aria-posinset",n.ariaPosInset)("aria-selected",n.selected)("data-p-focused",n.focused)("data-p-highlight",n.selected)("data-p-disabled",n.disabled)("aria-checked",n.selected),e.R7$(),e.Y8G("ngClass",e.eq3(22,Me,"filled"===n.config.inputStyle())),e.R7$(),e.Y8G("ngClass",e.eq3(24,Pe,n.selected)),e.R7$(),e.Y8G("ngIf",n.selected),e.R7$(),e.Y8G("ngIf",!n.template),e.R7$(),e.Y8G("ngTemplateOutlet",n.template)("ngTemplateOutletContext",e.eq3(26,le,n.option)))},dependencies:()=>[b.YU,b.bT,b.T3,b.B3,J.n,G.S],encapsulation:2})}return i})(),oe=(()=>{class i{el;renderer;cd;zone;filterService;config;overlayService;id;ariaLabel;style;styleClass;panelStyle;panelStyleClass;inputId;disabled;readonly;group;filter=!0;filterPlaceHolder;filterLocale;overlayVisible;tabindex=0;variant="outlined";appendTo;dataKey;name;ariaLabelledBy;set displaySelectedLabel(t){this._displaySelectedLabel=t}get displaySelectedLabel(){return this._displaySelectedLabel}set maxSelectedLabels(t){this._maxSelectedLabels=t}get maxSelectedLabels(){return this._maxSelectedLabels}selectionLimit;selectedItemsLabel;showToggleAll=!0;emptyFilterMessage="";emptyMessage="";resetFilterOnHide=!1;dropdownIcon;optionLabel;optionValue;optionDisabled;optionGroupLabel="label";optionGroupChildren="items";showHeader=!0;filterBy;scrollHeight="200px";lazy=!1;virtualScroll;loading=!1;virtualScrollItemSize;loadingIcon;virtualScrollOptions;overlayOptions;ariaFilterLabel;filterMatchMode="contains";tooltip="";tooltipPosition="right";tooltipPositionStyle="absolute";tooltipStyleClass;autofocusFilter=!0;display="comma";autocomplete="off";showClear=!1;autofocus;get autoZIndex(){return this._autoZIndex}set autoZIndex(t){this._autoZIndex=t,console.warn("The autoZIndex property is deprecated since v14.2.0, use overlayOptions property instead.")}get baseZIndex(){return this._baseZIndex}set baseZIndex(t){this._baseZIndex=t,console.warn("The baseZIndex property is deprecated since v14.2.0, use overlayOptions property instead.")}get showTransitionOptions(){return this._showTransitionOptions}set showTransitionOptions(t){this._showTransitionOptions=t,console.warn("The showTransitionOptions property is deprecated since v14.2.0, use overlayOptions property instead.")}get hideTransitionOptions(){return this._hideTransitionOptions}set hideTransitionOptions(t){this._hideTransitionOptions=t,console.warn("The hideTransitionOptions property is deprecated since v14.2.0, use overlayOptions property instead.")}set defaultLabel(t){this._defaultLabel=t,console.warn("defaultLabel property is deprecated since 16.6.0, use placeholder instead")}get defaultLabel(){return this._defaultLabel}set placeholder(t){this._placeholder.set(t)}get placeholder(){return this._placeholder.asReadonly()}get options(){return this._options()}set options(t){B.BF.deepEquals(this._options(),t)||this._options.set(t)}get filterValue(){return this._filterValue()}set filterValue(t){this._filterValue.set(t)}get itemSize(){return this._itemSize}set itemSize(t){this._itemSize=t,console.warn("The itemSize property is deprecated, use virtualScrollItemSize property instead.")}get selectAll(){return this._selectAll}set selectAll(t){this._selectAll=t}focusOnHover=!1;filterFields;selectOnFocus=!1;autoOptionFocus=!0;onChange=new e.bkB;onFilter=new e.bkB;onFocus=new e.bkB;onBlur=new e.bkB;onClick=new e.bkB;onClear=new e.bkB;onPanelShow=new e.bkB;onPanelHide=new e.bkB;onLazyLoad=new e.bkB;onRemove=new e.bkB;onSelectAllChange=new e.bkB;containerViewChild;overlayViewChild;filterInputChild;focusInputViewChild;itemsViewChild;scroller;lastHiddenFocusableElementOnOverlay;firstHiddenFocusableElementOnOverlay;headerCheckboxViewChild;footerFacet;headerFacet;templates;searchValue;searchTimeout;_selectAll=null;_autoZIndex;_baseZIndex;_showTransitionOptions;_hideTransitionOptions;_defaultLabel;_placeholder=(0,e.vPA)(void 0);_itemSize;_selectionLimit;_disableTooltip=!1;value;_filteredOptions;onModelChange=()=>{};onModelTouched=()=>{};valuesAsString;focus;filtered;itemTemplate;groupTemplate;loaderTemplate;headerTemplate;filterTemplate;footerTemplate;emptyFilterTemplate;emptyTemplate;selectedItemsTemplate;checkIconTemplate;loadingIconTemplate;filterIconTemplate;removeTokenIconTemplate;closeIconTemplate;clearIconTemplate;dropdownIconTemplate;itemCheckboxIconTemplate;headerCheckboxIconTemplate;headerCheckboxFocus;filterOptions;preventModelTouched;preventDocumentDefault;focused=!1;itemsWrapper;_displaySelectedLabel=!0;_maxSelectedLabels=3;modelValue=(0,e.vPA)(null);_filterValue=(0,e.vPA)(null);_options=(0,e.vPA)(null);startRangeIndex=(0,e.vPA)(-1);focusedOptionIndex=(0,e.vPA)(-1);selectedOptions;clickInProgress=!1;get containerClass(){return{"p-multiselect p-component p-inputwrapper":!0,"p-disabled":this.disabled,"p-multiselect-clearable":this.showClear&&!this.disabled,"p-multiselect-chip":"chip"===this.display,"p-focus":this.focused,"p-variant-filled":"filled"===this.variant||"filled"===this.config.inputStyle()}}get inputClass(){return{"p-multiselect-label p-inputtext":!0,"p-placeholder":(this.placeholder()||this.defaultLabel)&&(this.label()===this.placeholder()||this.label()===this.defaultLabel),"p-multiselect-label-empty":!this.selectedItemsTemplate&&("p-emptylabel"===this.label()||0===this.label().length)}}get panelClass(){return{"p-multiselect-panel p-component":!0,"p-input-filled":"filled"===this.config.inputStyle(),"p-ripple-disabled":!1===this.config.ripple}}get labelClass(){return{"p-multiselect-label":!0,"p-placeholder":this.label()===this.placeholder()||this.label()===this.defaultLabel,"p-multiselect-label-empty":!(this.placeholder()||this.defaultLabel||this.modelValue()&&0!==this.modelValue().length)}}get emptyMessageLabel(){return this.emptyMessage||this.config.getTranslation(l.Yj.EMPTY_MESSAGE)}get emptyFilterMessageLabel(){return this.emptyFilterMessage||this.config.getTranslation(l.Yj.EMPTY_FILTER_MESSAGE)}get filled(){return"string"==typeof this.modelValue()?!!this.modelValue():B.BF.isNotEmpty(this.modelValue())}get isVisibleClearIcon(){return null!=this.modelValue()&&""!==this.modelValue()&&B.BF.isNotEmpty(this.modelValue())&&this.showClear&&!this.disabled&&this.filled}get toggleAllAriaLabel(){return this.config.translation.aria?this.config.translation.aria[this.allSelected()?"selectAll":"unselectAll"]:void 0}get closeAriaLabel(){return this.config.translation.aria?this.config.translation.aria.close:void 0}get listLabel(){return this.config.getTranslation(l.Yj.ARIA).listLabel}getAllVisibleAndNonVisibleOptions(){return this.group?this.flatOptions(this.options):this.options||[]}visibleOptions=(0,e.EWP)(()=>{const t=this.getAllVisibleAndNonVisibleOptions(),o=B.BF.isArray(t)&&B.BF.isObject(t[0]);if(this._filterValue()){let n;if(n=o?this.filterService.filter(t,this.searchFields(),this._filterValue(),this.filterMatchMode,this.filterLocale):t.filter(r=>r.toString().toLocaleLowerCase().includes(this._filterValue().toLocaleLowerCase())),this.group){const c=[];return(this.options||[]).forEach(k=>{const x=this.getOptionGroupChildren(k).filter(j=>n.includes(j));x.length>0&&c.push({...k,["string"==typeof this.optionGroupChildren?this.optionGroupChildren:"items"]:[...x]})}),this.flatOptions(c)}return n}return t});label=(0,e.EWP)(()=>{let t;const o=this.modelValue();if(o&&o.length&&this.displaySelectedLabel){if(B.BF.isNotEmpty(this.maxSelectedLabels)&&o.length>this.maxSelectedLabels)return this.getSelectedItemsLabel();t="";for(let n=0;n<o.length;n++)0!==n&&(t+=", "),t+=this.getLabelByValue(o[n])}else t=this.placeholder()||this.defaultLabel||"";return t});chipSelectedItems=(0,e.EWP)(()=>B.BF.isNotEmpty(this.maxSelectedLabels)&&this.modelValue()&&this.modelValue().length>this.maxSelectedLabels?this.modelValue().slice(0,this.maxSelectedLabels):this.modelValue());constructor(t,o,n,r,c,k,D){this.el=t,this.renderer=o,this.cd=n,this.zone=r,this.filterService=c,this.config=k,this.overlayService=D,(0,e.QZP)(()=>{const x=this.modelValue(),j=this.visibleOptions();j&&B.BF.isNotEmpty(j)&&(this.selectedOptions=this.optionValue&&this.optionLabel&&x?j.filter(L=>x.includes(L[this.optionLabel])||x.includes(L[this.optionValue])):x,this.cd.markForCheck())})}ngOnInit(){this.id=this.id||(0,B._Y)(),this.autoUpdateModel(),this.filterBy&&(this.filterOptions={filter:t=>this.onFilterInputChange(t),reset:()=>this.resetFilter()})}maxSelectionLimitReached(){return B.BF.isNotEmpty(this.selectionLimit)&&this.modelValue()&&this.modelValue().length===this.selectionLimit}ngAfterContentInit(){this.templates.forEach(t=>{switch(t.getType()){case"item":default:this.itemTemplate=t.template;break;case"group":this.groupTemplate=t.template;break;case"selectedItems":this.selectedItemsTemplate=t.template;break;case"header":this.headerTemplate=t.template;break;case"filter":this.filterTemplate=t.template;break;case"emptyfilter":this.emptyFilterTemplate=t.template;break;case"empty":this.emptyTemplate=t.template;break;case"footer":this.footerTemplate=t.template;break;case"loader":this.loaderTemplate=t.template;break;case"checkicon":this.checkIconTemplate=t.template,console.warn("checkicon is deprecated and will removed in v18. Use itemcheckboxicon or headercheckboxicon templates instead.");break;case"headercheckboxicon":this.headerCheckboxIconTemplate=t.template;break;case"loadingicon":this.loadingIconTemplate=t.template;break;case"filtericon":this.filterIconTemplate=t.template;break;case"removetokenicon":this.removeTokenIconTemplate=t.template;break;case"closeicon":this.closeIconTemplate=t.template;break;case"clearicon":this.clearIconTemplate=t.template;break;case"dropdownicon":this.dropdownIconTemplate=t.template;break;case"itemcheckboxicon":this.itemCheckboxIconTemplate=t.template}})}ngAfterViewInit(){this.overlayVisible&&this.show()}ngAfterViewChecked(){this.filtered&&(this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.overlayViewChild?.alignOverlay()},1)}),this.filtered=!1)}flatOptions(t){return(t||[]).reduce((o,n,r)=>{o.push({optionGroup:n,group:!0,index:r});const c=this.getOptionGroupChildren(n);return c&&c.forEach(k=>o.push(k)),o},[])}autoUpdateModel(){if(this.selectOnFocus&&this.autoOptionFocus&&!this.hasSelectedOption()){this.focusedOptionIndex.set(this.findFirstFocusedOptionIndex());const t=this.getOptionValue(this.visibleOptions()[this.focusedOptionIndex()]);this.onOptionSelect({originalEvent:null,option:[t]})}}updateModel(t,o){this.value=t,this.onModelChange(t),this.modelValue.set(t)}onInputClick(t){t.stopPropagation(),t.preventDefault(),this.focusedOptionIndex.set(-1)}onOptionSelect(t,o=!1,n=-1){const{originalEvent:r,option:c}=t;if(this.disabled||this.isOptionDisabled(c))return;let D=null;this.isSelected(c)?(D=this.modelValue().filter(x=>!B.BF.equals(x,this.getOptionValue(c),this.equalityKey())),this.onRemove.emit({newValue:this.value,removed:this.getOptionValue(c)})):D=[...this.modelValue()||[],this.getOptionValue(c)],this.updateModel(D,r),-1!==n&&this.focusedOptionIndex.set(n),o&&P.D.focus(this.focusInputViewChild?.nativeElement),this.onChange.emit({originalEvent:{...t,selected:!t.selected},value:D,itemValue:c})}findSelectedOptionIndex(){return this.hasSelectedOption()?this.visibleOptions().findIndex(t=>this.isValidSelectedOption(t)):-1}onOptionSelectRange(t,o=-1,n=-1){if(-1===o&&(o=this.findNearestSelectedOptionIndex(n,!0)),-1===n&&(n=this.findNearestSelectedOptionIndex(o)),-1!==o&&-1!==n){const r=Math.min(o,n),c=Math.max(o,n),k=this.visibleOptions().slice(r,c+1).filter(D=>this.isValidOption(D)).map(D=>this.getOptionValue(D));this.updateModel(k,t)}}searchFields(){return(this.filterBy||this.optionLabel||"label").split(",")}findNearestSelectedOptionIndex(t,o=!1){let n=-1;return this.hasSelectedOption()&&(o?(n=this.findPrevSelectedOptionIndex(t),n=-1===n?this.findNextSelectedOptionIndex(t):n):(n=this.findNextSelectedOptionIndex(t),n=-1===n?this.findPrevSelectedOptionIndex(t):n)),n>-1?n:t}findPrevSelectedOptionIndex(t){const o=this.hasSelectedOption()&&t>0?B.BF.findLastIndex(this.visibleOptions().slice(0,t),n=>this.isValidSelectedOption(n)):-1;return o>-1?o:-1}findFirstFocusedOptionIndex(){const t=this.findFirstSelectedOptionIndex();return t<0?this.findFirstOptionIndex():t}findFirstOptionIndex(){return this.visibleOptions().findIndex(t=>this.isValidOption(t))}findFirstSelectedOptionIndex(){return this.hasSelectedOption()?this.visibleOptions().findIndex(t=>this.isValidSelectedOption(t)):-1}findNextSelectedOptionIndex(t){const o=this.hasSelectedOption()&&t<this.visibleOptions().length-1?this.visibleOptions().slice(t+1).findIndex(n=>this.isValidSelectedOption(n)):-1;return o>-1?o+t+1:-1}equalityKey(){return this.optionValue?null:this.dataKey}hasSelectedOption(){return B.BF.isNotEmpty(this.modelValue())}isSelectionAllDisabled(){return this.showToggleAll&&B.BF.isEmpty(this.selectionLimit)}isValidSelectedOption(t){return this.isValidOption(t)&&this.isSelected(t)}isOptionGroup(t){return(this.group||this.optionGroupLabel)&&t.optionGroup&&t.group}isValidOption(t){return t&&!(this.isOptionDisabled(t)||this.isOptionGroup(t))}isOptionDisabled(t){return!(!this.maxSelectionLimitReached()||this.isSelected(t))||(this.optionDisabled?B.BF.resolveFieldData(t,this.optionDisabled):!(!t||void 0===t.disabled)&&t.disabled)}isSelected(t){const o=this.getOptionValue(t);return(this.modelValue()||[]).some(n=>B.BF.equals(n,o,this.equalityKey()))}isOptionMatched(t){return this.isValidOption(t)&&this.getOptionLabel(t).toString().toLocaleLowerCase(this.filterLocale).startsWith(this.searchValue.toLocaleLowerCase(this.filterLocale))}isEmpty(){return!this._options()||this.visibleOptions()&&0===this.visibleOptions().length}getOptionIndex(t,o){return this.virtualScrollerDisabled?t:o&&o.getItemOptions(t).index}getAriaPosInset(t){return(this.optionGroupLabel?t-this.visibleOptions().slice(0,t).filter(o=>this.isOptionGroup(o)).length:t)+1}get ariaSetSize(){return this.visibleOptions().filter(t=>!this.isOptionGroup(t)).length}getLabelByValue(t){const n=(this.group?this.flatOptions(this._options()):this._options()||[]).find(r=>!this.isOptionGroup(r)&&B.BF.equals(this.getOptionValue(r),t,this.equalityKey()));return n?this.getOptionLabel(n):null}getSelectedItemsLabel(){let t=/{(.*?)}/,o=this.selectedItemsLabel?this.selectedItemsLabel:this.config.getTranslation(l.Yj.SELECTION_MESSAGE);return t.test(o)?o.replace(o.match(t)[0],this.modelValue().length+""):o}getOptionLabel(t){return this.optionLabel?B.BF.resolveFieldData(t,this.optionLabel):t&&null!=t.label?t.label:t}getOptionValue(t){return this.optionValue?B.BF.resolveFieldData(t,this.optionValue):!this.optionValue&&t&&void 0!==t.value?t.value:t}getOptionGroupLabel(t){return this.optionGroupLabel?B.BF.resolveFieldData(t,this.optionGroupLabel):t&&null!=t.label?t.label:t}getOptionGroupChildren(t){return this.optionGroupChildren?B.BF.resolveFieldData(t,this.optionGroupChildren):t.items}onKeyDown(t){if(this.disabled)return void t.preventDefault();const o=t.metaKey||t.ctrlKey;switch(t.code){case"ArrowDown":this.onArrowDownKey(t);break;case"ArrowUp":this.onArrowUpKey(t);break;case"Home":this.onHomeKey(t);break;case"End":this.onEndKey(t);break;case"PageDown":this.onPageDownKey(t);break;case"PageUp":this.onPageUpKey(t);break;case"Enter":case"Space":this.onEnterKey(t);break;case"Escape":this.onEscapeKey(t);break;case"Tab":this.onTabKey(t);break;case"ShiftLeft":case"ShiftRight":this.onShiftKey();break;default:if("KeyA"===t.code&&o){const n=this.visibleOptions().filter(r=>this.isValidOption(r)).map(r=>this.getOptionValue(r));this.updateModel(n,t),t.preventDefault();break}!o&&B.BF.isPrintableCharacter(t.key)&&(!this.overlayVisible&&this.show(),this.searchOptions(t,t.key),t.preventDefault())}}onFilterKeyDown(t){switch(t.code){case"ArrowDown":this.onArrowDownKey(t);break;case"ArrowUp":this.onArrowUpKey(t,!0);break;case"ArrowLeft":case"ArrowRight":this.onArrowLeftKey(t,!0);break;case"Home":this.onHomeKey(t,!0);break;case"End":this.onEndKey(t,!0);break;case"Enter":case"NumpadEnter":this.onEnterKey(t);break;case"Escape":this.onEscapeKey(t);break;case"Tab":this.onTabKey(t,!0)}}onArrowLeftKey(t,o=!1){o&&this.focusedOptionIndex.set(-1)}onArrowDownKey(t){const o=-1!==this.focusedOptionIndex()?this.findNextOptionIndex(this.focusedOptionIndex()):this.findFirstFocusedOptionIndex();t.shiftKey&&this.onOptionSelectRange(t,this.startRangeIndex(),o),this.changeFocusedOptionIndex(t,o),!this.overlayVisible&&this.show(),t.preventDefault(),t.stopPropagation()}onArrowUpKey(t,o=!1){if(t.altKey&&!o)-1!==this.focusedOptionIndex()&&this.onOptionSelect(t,this.visibleOptions()[this.focusedOptionIndex()]),this.overlayVisible&&this.hide(),t.preventDefault();else{const n=-1!==this.focusedOptionIndex()?this.findPrevOptionIndex(this.focusedOptionIndex()):this.findLastFocusedOptionIndex();t.shiftKey&&this.onOptionSelectRange(t,n,this.startRangeIndex()),this.changeFocusedOptionIndex(t,n),!this.overlayVisible&&this.show(),t.preventDefault()}t.stopPropagation()}onHomeKey(t,o=!1){const{currentTarget:n}=t;if(o)n.setSelectionRange(0,t.shiftKey?n.value.length:0),this.focusedOptionIndex.set(-1);else{let r=t.metaKey||t.ctrlKey,c=this.findFirstOptionIndex();t.shiftKey&&r&&this.onOptionSelectRange(t,c,this.startRangeIndex()),this.changeFocusedOptionIndex(t,c),!this.overlayVisible&&this.show()}t.preventDefault()}onEndKey(t,o=!1){const{currentTarget:n}=t;if(o){const r=n.value.length;n.setSelectionRange(t.shiftKey?0:r,r),this.focusedOptionIndex.set(-1)}else{let r=t.metaKey||t.ctrlKey,c=this.findLastFocusedOptionIndex();t.shiftKey&&r&&this.onOptionSelectRange(t,this.startRangeIndex(),c),this.changeFocusedOptionIndex(t,c),!this.overlayVisible&&this.show()}t.preventDefault()}onPageDownKey(t){this.scrollInView(this.visibleOptions().length-1),t.preventDefault()}onPageUpKey(t){this.scrollInView(0),t.preventDefault()}onEnterKey(t){this.overlayVisible?-1!==this.focusedOptionIndex()&&(t.shiftKey?this.onOptionSelectRange(t,this.focusedOptionIndex()):this.onOptionSelect({originalEvent:t,option:this.visibleOptions()[this.focusedOptionIndex()]})):this.onArrowDownKey(t),t.preventDefault()}onEscapeKey(t){this.overlayVisible&&this.hide(!0),t.preventDefault()}onDeleteKey(t){this.showClear&&(this.clear(t),t.preventDefault())}onTabKey(t,o=!1){o||(this.overlayVisible&&this.hasFocusableElements()?(P.D.focus(t.shiftKey?this.lastHiddenFocusableElementOnOverlay.nativeElement:this.firstHiddenFocusableElementOnOverlay.nativeElement),t.preventDefault()):(-1!==this.focusedOptionIndex()&&this.onOptionSelect({originalEvent:t,option:this.visibleOptions()[this.focusedOptionIndex()]}),this.overlayVisible&&this.hide(this.filter)))}onShiftKey(){this.startRangeIndex.set(this.focusedOptionIndex())}onContainerClick(t){if(!(this.disabled||this.loading||this.readonly||t.target.isSameNode(this.focusInputViewChild?.nativeElement))){if("INPUT"===t.target.tagName||"clearicon"===t.target.getAttribute("data-pc-section")||t.target.closest('[data-pc-section="clearicon"]'))return void t.preventDefault();if(!this.overlayViewChild||!this.overlayViewChild.el.nativeElement.contains(t.target)){if(this.clickInProgress)return;this.clickInProgress=!0,setTimeout(()=>{this.clickInProgress=!1},150),this.overlayVisible?this.hide(!0):this.show(!0)}this.focusInputViewChild?.nativeElement.focus({preventScroll:!0}),this.onClick.emit(t),this.cd.detectChanges()}}onFirstHiddenFocus(t){const o=t.relatedTarget===this.focusInputViewChild?.nativeElement?P.D.getFirstFocusableElement(this.overlayViewChild?.overlayViewChild?.nativeElement,':not([data-p-hidden-focusable="true"])'):this.focusInputViewChild?.nativeElement;P.D.focus(o)}onInputFocus(t){this.focused=!0;const o=-1!==this.focusedOptionIndex()?this.focusedOptionIndex():this.overlayVisible&&this.autoOptionFocus?this.findFirstFocusedOptionIndex():-1;this.focusedOptionIndex.set(o),this.overlayVisible&&this.scrollInView(this.focusedOptionIndex()),this.onFocus.emit({originalEvent:t})}onInputBlur(t){this.focused=!1,this.onBlur.emit({originalEvent:t}),this.preventModelTouched||this.onModelTouched(),this.preventModelTouched=!1}onFilterInputChange(t){this._filterValue.set(t.target.value),this.focusedOptionIndex.set(-1),this.onFilter.emit({originalEvent:t,filter:this._filterValue()}),!this.virtualScrollerDisabled&&this.scroller.scrollToIndex(0),setTimeout(()=>{this.overlayViewChild.alignOverlay()})}onLastHiddenFocus(t){const o=t.relatedTarget===this.focusInputViewChild?.nativeElement?P.D.getLastFocusableElement(this.overlayViewChild?.overlayViewChild?.nativeElement,':not([data-p-hidden-focusable="true"])'):this.focusInputViewChild?.nativeElement;P.D.focus(o)}onOptionMouseEnter(t,o){this.focusOnHover&&this.changeFocusedOptionIndex(t,o)}onHeaderCheckboxKeyDown(t){if(this.disabled)t.preventDefault();else switch(t.code){case"Space":case"Enter":this.onToggleAll(t)}}onremoveTokenIconKeyDown(t,o){if(this.disabled)t.preventDefault();else{switch(t.code){case"Space":case"Enter":case"NumpadEnter":this.removeOption(o,t)}t.preventDefault(),t.stopPropagation()}}onFilterBlur(t){this.focusedOptionIndex.set(-1)}onHeaderCheckboxFocus(){this.headerCheckboxFocus=!0}onHeaderCheckboxBlur(){this.headerCheckboxFocus=!1}onToggleAll(t){if(!this.disabled&&!this.readonly){if(null!=this.selectAll)this.onSelectAllChange.emit({originalEvent:t,checked:!this.allSelected()});else{const r=[...this.getAllVisibleAndNonVisibleOptions().filter(k=>this.isSelected(k)&&(this.optionDisabled?B.BF.resolveFieldData(k,this.optionDisabled):!(!k||void 0===k.disabled)&&k.disabled)),...this.allSelected()?this.visibleOptions().filter(k=>!this.isValidOption(k)&&this.isSelected(k)):this.visibleOptions().filter(k=>this.isSelected(k)||this.isValidOption(k))].map(k=>this.getOptionValue(k)),c=[...new Set(r)];this.updateModel(c,t),(!c.length||c.length===this.getAllVisibleAndNonVisibleOptions().length)&&this.onSelectAllChange.emit({originalEvent:t,checked:!!c.length})}this.partialSelected()&&(this.selectedOptions=null,this.cd.markForCheck()),this.onChange.emit({originalEvent:t,value:this.value}),P.D.focus(this.headerCheckboxViewChild?.nativeElement),this.headerCheckboxFocus=!0,t.preventDefault(),t.stopPropagation()}}changeFocusedOptionIndex(t,o){this.focusedOptionIndex()!==o&&(this.focusedOptionIndex.set(o),this.scrollInView())}get virtualScrollerDisabled(){return!this.virtualScroll}scrollInView(t=-1){if(this.itemsViewChild&&this.itemsViewChild.nativeElement){const n=P.D.findSingle(this.itemsViewChild.nativeElement,`li[id="${-1!==t?`${this.id}_${t}`:this.focusedOptionId}"]`);n?n.scrollIntoView&&n.scrollIntoView({block:"nearest",inline:"nearest"}):this.virtualScrollerDisabled||setTimeout(()=>{this.virtualScroll&&this.scroller?.scrollToIndex(-1!==t?t:this.focusedOptionIndex())},0)}}get focusedOptionId(){return-1!==this.focusedOptionIndex()?`${this.id}_${this.focusedOptionIndex()}`:null}writeValue(t){this.value=t,!B.BF.isEmpty(this.selectionLimit)&&B.BF.isEmpty(this.value)?this.modelValue.set([]):this.modelValue.set(this.value),this.cd.markForCheck()}registerOnChange(t){this.onModelChange=t}registerOnTouched(t){this.onModelTouched=t}setDisabledState(t){this.disabled=t,this.cd.markForCheck()}allSelected(){return null!==this.selectAll?this.selectAll:B.BF.isNotEmpty(this.visibleOptions())&&this.visibleOptions().every(t=>this.isOptionGroup(t)||this.isOptionDisabled(t)||this.isSelected(t))}partialSelected(){return this.selectedOptions&&this.selectedOptions.length>0&&this.selectedOptions.length<this.options.length}show(t){this.overlayVisible=!0;const o=-1!==this.focusedOptionIndex()?this.focusedOptionIndex():this.autoOptionFocus?this.findFirstFocusedOptionIndex():-1;this.focusedOptionIndex.set(o),t&&P.D.focus(this.focusInputViewChild?.nativeElement),this.cd.markForCheck()}hide(t){this.overlayVisible=!1,this.focusedOptionIndex.set(-1),this.filter&&this.resetFilterOnHide&&this.resetFilter(),"modal"===this.overlayOptions?.mode&&P.D.unblockBodyScroll(),t&&P.D.focus(this.focusInputViewChild?.nativeElement),this.onPanelHide.emit(),this.cd.markForCheck()}onOverlayAnimationStart(t){switch(t.toState){case"visible":if(this.itemsWrapper=P.D.findSingle(this.overlayViewChild?.overlayViewChild?.nativeElement,this.virtualScroll?".p-scroller":".p-multiselect-items-wrapper"),this.virtualScroll&&this.scroller?.setContentEl(this.itemsViewChild?.nativeElement),this._options()&&this._options().length)if(this.virtualScroll){const o=B.BF.isNotEmpty(this.modelValue())?this.focusedOptionIndex():-1;-1!==o&&this.scroller?.scrollToIndex(o)}else{let o=P.D.findSingle(this.itemsWrapper,'[data-p-highlight="true"]');o&&o.scrollIntoView({block:"nearest",inline:"nearest"})}this.filterInputChild&&this.filterInputChild.nativeElement&&(this.preventModelTouched=!0,this.autofocusFilter&&this.filterInputChild.nativeElement.focus()),this.onPanelShow.emit();break;case"void":this.itemsWrapper=null,this.onModelTouched()}}resetFilter(){this.filterInputChild&&this.filterInputChild.nativeElement&&(this.filterInputChild.nativeElement.value=""),this._filterValue.set(null),this._filteredOptions=null}close(t){this.hide(),t.preventDefault(),t.stopPropagation()}clear(t){this.value=null,this.updateModel(null,t),this.selectedOptions=null,this.onClear.emit(),this._disableTooltip=!0,t.stopPropagation()}labelContainerMouseLeave(){this._disableTooltip&&(this._disableTooltip=!1)}removeOption(t,o){let n=this.modelValue().filter(r=>!B.BF.equals(r,t,this.equalityKey()));this.updateModel(n,o),this.onChange.emit({originalEvent:o,value:n,itemValue:t}),this.onClear.emit(),o&&o.stopPropagation()}findNextItem(t){let o=t.nextElementSibling;return o?P.D.hasClass(o.children[0],"p-disabled")||P.D.isHidden(o.children[0])||P.D.hasClass(o,"p-multiselect-item-group")?this.findNextItem(o):o.children[0]:null}findPrevItem(t){let o=t.previousElementSibling;return o?P.D.hasClass(o.children[0],"p-disabled")||P.D.isHidden(o.children[0])||P.D.hasClass(o,"p-multiselect-item-group")?this.findPrevItem(o):o.children[0]:null}findNextOptionIndex(t){const o=t<this.visibleOptions().length-1?this.visibleOptions().slice(t+1).findIndex(n=>this.isValidOption(n)):-1;return o>-1?o+t+1:t}findPrevOptionIndex(t){const o=t>0?B.BF.findLastIndex(this.visibleOptions().slice(0,t),n=>this.isValidOption(n)):-1;return o>-1?o:t}findLastSelectedOptionIndex(){return this.hasSelectedOption()?B.BF.findLastIndex(this.visibleOptions(),t=>this.isValidSelectedOption(t)):-1}findLastFocusedOptionIndex(){const t=this.findLastSelectedOptionIndex();return t<0?this.findLastOptionIndex():t}findLastOptionIndex(){return B.BF.findLastIndex(this.visibleOptions(),t=>this.isValidOption(t))}searchOptions(t,o){this.searchValue=(this.searchValue||"")+o;let n=-1,r=!1;return-1!==this.focusedOptionIndex()?(n=this.visibleOptions().slice(this.focusedOptionIndex()).findIndex(c=>this.isOptionMatched(c)),n=-1===n?this.visibleOptions().slice(0,this.focusedOptionIndex()).findIndex(c=>this.isOptionMatched(c)):n+this.focusedOptionIndex()):n=this.visibleOptions().findIndex(c=>this.isOptionMatched(c)),-1!==n&&(r=!0),-1===n&&-1===this.focusedOptionIndex()&&(n=this.findFirstFocusedOptionIndex()),-1!==n&&this.changeFocusedOptionIndex(t,n),this.searchTimeout&&clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout(()=>{this.searchValue="",this.searchTimeout=null},500),r}activateFilter(){if(this.hasFilter()&&this._options)if(this.group){let t=[];for(let o of this.options){let n=this.filterService.filter(this.getOptionGroupChildren(o),this.searchFields(),this.filterValue,this.filterMatchMode,this.filterLocale);n&&n.length&&t.push({...o,[this.optionGroupChildren]:n})}this._filteredOptions=t}else this._filteredOptions=this.filterService.filter(this.options,this.searchFields(),this.filterValue,this.filterMatchMode,this.filterLocale);else this._filteredOptions=null}hasFocusableElements(){return P.D.getFocusableElements(this.overlayViewChild.overlayViewChild.nativeElement,':not([data-p-hidden-focusable="true"])').length>0}hasFilter(){return this._filterValue()&&this._filterValue().trim().length>0}static \u0275fac=function(o){return new(o||i)(e.rXU(e.aKT),e.rXU(e.sFG),e.rXU(e.gRc),e.rXU(e.SKi),e.rXU(l.E),e.rXU(l.r1),e.rXU(l.si))};static \u0275cmp=e.VBU({type:i,selectors:[["p-multiSelect"]],contentQueries:function(o,n,r){if(1&o&&(e.wni(r,l.wi,5),e.wni(r,l.Y9,5),e.wni(r,l.Ei,4)),2&o){let c;e.mGM(c=e.lsd())&&(n.footerFacet=c.first),e.mGM(c=e.lsd())&&(n.headerFacet=c.first),e.mGM(c=e.lsd())&&(n.templates=c)}},viewQuery:function(o,n){if(1&o&&(e.GBs(He,5),e.GBs(Ue,5),e.GBs(We,5),e.GBs(Je,5),e.GBs(Ke,5),e.GBs(qe,5),e.GBs(Qe,5),e.GBs(Ze,5),e.GBs(et,5)),2&o){let r;e.mGM(r=e.lsd())&&(n.containerViewChild=r.first),e.mGM(r=e.lsd())&&(n.overlayViewChild=r.first),e.mGM(r=e.lsd())&&(n.filterInputChild=r.first),e.mGM(r=e.lsd())&&(n.focusInputViewChild=r.first),e.mGM(r=e.lsd())&&(n.itemsViewChild=r.first),e.mGM(r=e.lsd())&&(n.scroller=r.first),e.mGM(r=e.lsd())&&(n.lastHiddenFocusableElementOnOverlay=r.first),e.mGM(r=e.lsd())&&(n.firstHiddenFocusableElementOnOverlay=r.first),e.mGM(r=e.lsd())&&(n.headerCheckboxViewChild=r.first)}},hostAttrs:[1,"p-element","p-inputwrapper"],hostVars:4,hostBindings:function(o,n){2&o&&e.AVh("p-inputwrapper-focus",n.focused||n.overlayVisible)("p-inputwrapper-filled",n.filled)},inputs:{id:"id",ariaLabel:"ariaLabel",style:"style",styleClass:"styleClass",panelStyle:"panelStyle",panelStyleClass:"panelStyleClass",inputId:"inputId",disabled:[2,"disabled","disabled",e.L39],readonly:[2,"readonly","readonly",e.L39],group:[2,"group","group",e.L39],filter:[2,"filter","filter",e.L39],filterPlaceHolder:"filterPlaceHolder",filterLocale:"filterLocale",overlayVisible:[2,"overlayVisible","overlayVisible",e.L39],tabindex:[2,"tabindex","tabindex",e.Udg],variant:"variant",appendTo:"appendTo",dataKey:"dataKey",name:"name",ariaLabelledBy:"ariaLabelledBy",displaySelectedLabel:"displaySelectedLabel",maxSelectedLabels:"maxSelectedLabels",selectionLimit:[2,"selectionLimit","selectionLimit",t=>(0,e.Udg)(t,null)],selectedItemsLabel:"selectedItemsLabel",showToggleAll:[2,"showToggleAll","showToggleAll",e.L39],emptyFilterMessage:"emptyFilterMessage",emptyMessage:"emptyMessage",resetFilterOnHide:[2,"resetFilterOnHide","resetFilterOnHide",e.L39],dropdownIcon:"dropdownIcon",optionLabel:"optionLabel",optionValue:"optionValue",optionDisabled:"optionDisabled",optionGroupLabel:"optionGroupLabel",optionGroupChildren:"optionGroupChildren",showHeader:[2,"showHeader","showHeader",e.L39],filterBy:"filterBy",scrollHeight:"scrollHeight",lazy:[2,"lazy","lazy",e.L39],virtualScroll:[2,"virtualScroll","virtualScroll",e.L39],loading:[2,"loading","loading",e.L39],virtualScrollItemSize:[2,"virtualScrollItemSize","virtualScrollItemSize",e.Udg],loadingIcon:"loadingIcon",virtualScrollOptions:"virtualScrollOptions",overlayOptions:"overlayOptions",ariaFilterLabel:"ariaFilterLabel",filterMatchMode:"filterMatchMode",tooltip:"tooltip",tooltipPosition:"tooltipPosition",tooltipPositionStyle:"tooltipPositionStyle",tooltipStyleClass:"tooltipStyleClass",autofocusFilter:[2,"autofocusFilter","autofocusFilter",e.L39],display:"display",autocomplete:"autocomplete",showClear:[2,"showClear","showClear",e.L39],autofocus:[2,"autofocus","autofocus",e.L39],autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",defaultLabel:"defaultLabel",placeholder:"placeholder",options:"options",filterValue:"filterValue",itemSize:"itemSize",selectAll:"selectAll",focusOnHover:[2,"focusOnHover","focusOnHover",e.L39],filterFields:"filterFields",selectOnFocus:[2,"selectOnFocus","selectOnFocus",e.L39],autoOptionFocus:[2,"autoOptionFocus","autoOptionFocus",e.L39]},outputs:{onChange:"onChange",onFilter:"onFilter",onFocus:"onFocus",onBlur:"onBlur",onClick:"onClick",onClear:"onClear",onPanelShow:"onPanelShow",onPanelHide:"onPanelHide",onLazyLoad:"onLazyLoad",onRemove:"onRemove",onSelectAllChange:"onSelectAllChange"},features:[e.Jv_([Dn]),e.GFd],ngContentSelectors:nt,decls:17,vars:44,consts:[["container",""],["focusInput",""],["elseBlock",""],["overlay",""],["token",""],["firstHiddenFocusableEl",""],["buildInItems",""],["lastHiddenFocusableEl",""],["builtInFilterElement",""],["headerCheckbox",""],["filterInput",""],["scroller",""],["items",""],["emptyFilter",""],["empty",""],[3,"click","ngClass","ngStyle"],[1,"p-hidden-accessible"],["role","combobox","pAutoFocus","",3,"focus","blur","keydown","pTooltip","tooltipPosition","positionStyle","tooltipStyleClass","autofocus"],[1,"p-multiselect-label-container",3,"mouseleave","pTooltip","tooltipDisabled","tooltipPosition","positionStyle","tooltipStyleClass"],[3,"ngClass"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"p-multiselect-trigger"],[4,"ngIf","ngIfElse"],[3,"visibleChange","onAnimationStart","onHide","visible","options","target","appendTo","autoZIndex","baseZIndex","showTransitionOptions","hideTransitionOptions"],["pTemplate","content"],["class","p-multiselect-token",4,"ngFor","ngForOf"],[1,"p-multiselect-token"],[1,"p-multiselect-token-label"],[3,"ngClass","styleClass","click","keydown",4,"ngIf"],["class","p-multiselect-token-icon",3,"click","keydown",4,"ngIf"],[3,"click","keydown","ngClass","styleClass"],[1,"p-multiselect-token-icon",3,"click","keydown"],[4,"ngTemplateOutlet"],[3,"styleClass","click",4,"ngIf"],["class","p-multiselect-clear-icon",3,"click",4,"ngIf"],[3,"click","styleClass"],[1,"p-multiselect-clear-icon",3,"click"],["aria-hidden","true",3,"ngClass",4,"ngIf"],["aria-hidden","true",3,"class",4,"ngIf"],["aria-hidden","true",3,"ngClass"],["aria-hidden","true"],["class","p-multiselect-trigger-icon",4,"ngIf"],["class","p-multiselect-trigger-icon",3,"ngClass",4,"ngIf"],[3,"styleClass",4,"ngIf"],[1,"p-multiselect-trigger-icon",3,"ngClass"],[3,"styleClass"],[1,"p-multiselect-trigger-icon"],[3,"ngClass","ngStyle"],["role","presentation",1,"p-hidden-accessible","p-hidden-focusable",3,"focus"],["class","p-multiselect-header",4,"ngIf"],[1,"p-multiselect-items-wrapper",3,"ngStyle"],[3,"items","style","itemSize","autoSize","tabindex","lazy","options","onLazyLoad",4,"ngIf"],["class","p-multiselect-footer",4,"ngIf"],[1,"p-multiselect-header"],["class","p-checkbox p-component",3,"ngClass","click","keydown",4,"ngIf"],["class","p-multiselect-filter-container",4,"ngIf"],["type","button","pRipple","",1,"p-multiselect-close","p-link","p-button-icon-only",3,"click"],["class","p-multiselect-close-icon",4,"ngIf"],[1,"p-checkbox","p-component",3,"click","keydown","ngClass"],["type","checkbox",3,"focus","blur","readonly","disabled"],["role","checkbox",1,"p-checkbox-box",3,"ngClass"],["class","p-checkbox-icon",4,"ngIf"],[1,"p-checkbox-icon"],[1,"p-multiselect-filter-container"],["type","text","role","searchbox","role","searchbox",1,"p-multiselect-filter","p-inputtext","p-component",3,"input","keydown","click","blur","value","disabled"],["class","p-multiselect-filter-icon",4,"ngIf"],[1,"p-multiselect-filter-icon"],[1,"p-multiselect-close-icon"],[3,"onLazyLoad","items","itemSize","autoSize","tabindex","lazy","options"],["pTemplate","loader"],["role","listbox","aria-multiselectable","true",1,"p-multiselect-items","p-component",3,"ngClass","ngStyle"],["ngFor","",3,"ngForOf"],["class","p-multiselect-empty-message","role","option",3,"ngStyle",4,"ngIf"],["role","option",1,"p-multiselect-item-group",3,"ngStyle"],[3,"onClick","onMouseEnter","id","option","selected","label","disabled","template","checkIconTemplate","itemCheckboxIconTemplate","itemSize","focused","ariaPosInset","ariaSetSize"],["role","option",1,"p-multiselect-empty-message",3,"ngStyle"],[1,"p-multiselect-footer"]],template:function(o,n){if(1&o){const r=e.RV6();e.NAR(tt),e.j41(0,"div",15,0),e.bIt("click",function(k){return e.eBV(r),e.Njj(n.onContainerClick(k))}),e.j41(2,"div",16)(3,"input",17,1),e.bIt("focus",function(k){return e.eBV(r),e.Njj(n.onInputFocus(k))})("blur",function(k){return e.eBV(r),e.Njj(n.onInputBlur(k))})("keydown",function(k){return e.eBV(r),e.Njj(n.onKeyDown(k))}),e.k0s()(),e.j41(5,"div",18),e.bIt("mouseleave",function(){return e.eBV(r),e.Njj(n.labelContainerMouseLeave())}),e.j41(6,"div",19),e.DNE(7,bt,3,2,"ng-container",20)(8,vt,1,0,"ng-container",21),e.k0s(),e.DNE(9,kt,3,2,"ng-container",20),e.k0s(),e.j41(10,"div",22),e.DNE(11,xt,3,2,"ng-container",23)(12,Bt,2,2,"ng-template",null,2,e.C5r),e.k0s(),e.j41(14,"p-overlay",24,3),e.mxI("visibleChange",function(k){return e.eBV(r),e.DH7(n.overlayVisible,k)||(n.overlayVisible=k),e.Njj(k)}),e.bIt("onAnimationStart",function(k){return e.eBV(r),e.Njj(n.onOverlayAnimationStart(k))})("onHide",function(){return e.eBV(r),e.Njj(n.hide())}),e.DNE(16,wn,12,18,"ng-template",25),e.k0s()()}if(2&o){let r;const c=e.sdS(13);e.HbH(n.styleClass),e.Y8G("ngClass",n.containerClass)("ngStyle",n.style),e.BMQ("id",n.id),e.R7$(2),e.BMQ("data-p-hidden-accessible",!0),e.R7$(),e.Y8G("pTooltip",n.tooltip)("tooltipPosition",n.tooltipPosition)("positionStyle",n.tooltipPositionStyle)("tooltipStyleClass",n.tooltipStyleClass)("autofocus",n.autofocus),e.BMQ("aria-disabled",n.disabled)("id",n.inputId)("aria-label",n.ariaLabel)("aria-labelledby",n.ariaLabelledBy)("aria-haspopup","listbox")("aria-expanded",null!==(r=n.overlayVisible)&&void 0!==r&&r)("aria-controls",n.overlayVisible?n.id+"_list":null)("tabindex",n.disabled?-1:n.tabindex)("aria-activedescendant",n.focused?n.focusedOptionId:void 0)("value",n.label()||"empty"),e.R7$(2),e.Y8G("pTooltip",n.tooltip)("tooltipDisabled",n._disableTooltip)("tooltipPosition",n.tooltipPosition)("positionStyle",n.tooltipPositionStyle)("tooltipStyleClass",n.tooltipStyleClass),e.R7$(),e.Y8G("ngClass",n.labelClass),e.R7$(),e.Y8G("ngIf",!n.selectedItemsTemplate),e.R7$(),e.Y8G("ngTemplateOutlet",n.selectedItemsTemplate)("ngTemplateOutletContext",e.l_i(41,it,n.selectedOptions,n.removeOption.bind(n))),e.R7$(),e.Y8G("ngIf",n.isVisibleClearIcon),e.R7$(2),e.Y8G("ngIf",n.loading)("ngIfElse",c),e.R7$(3),e.R50("visible",n.overlayVisible),e.Y8G("options",n.overlayOptions)("target","@parent")("appendTo",n.appendTo)("autoZIndex",n.autoZIndex)("baseZIndex",n.baseZIndex)("showTransitionOptions",n.showTransitionOptions)("hideTransitionOptions",n.hideTransitionOptions)}},dependencies:()=>[b.YU,b.Sq,b.bT,b.T3,b.B3,U.hJ,l.Ei,ne.m,J.n,Z.H,Y.q,G.S,$.W,V.I,A.A,N.D,jn],styles:["@layer primeng{.p-multiselect{display:inline-flex;cursor:pointer;position:relative;-webkit-user-select:none;user-select:none}.p-multiselect-trigger{display:flex;align-items:center;justify-content:center;flex-shrink:0}.p-multiselect-label-container{overflow:hidden;flex:1 1 auto;cursor:pointer;display:flex}.p-multiselect-label{display:block;white-space:nowrap;cursor:pointer;overflow:hidden;text-overflow:ellipsis}.p-multiselect-label-empty{overflow:hidden;visibility:hidden}.p-multiselect-token{cursor:default;display:inline-flex;align-items:center;flex:0 0 auto}.p-multiselect-token-icon{cursor:pointer}.p-multiselect-token-label{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:100px}.p-multiselect-items-wrapper{overflow:auto}.p-multiselect-items{margin:0;padding:0;list-style-type:none}.p-multiselect-item{cursor:pointer;display:flex;align-items:center;font-weight:400;white-space:nowrap;position:relative;overflow:hidden}.p-multiselect-header{display:flex;align-items:center;justify-content:space-between}.p-multiselect-filter-container{position:relative;flex:1 1 auto}.p-multiselect-filter-icon{position:absolute;top:50%;margin-top:-.5rem}.p-multiselect-filter-container .p-inputtext{width:100%}.p-multiselect-close{display:flex;align-items:center;justify-content:center;flex-shrink:0;overflow:hidden;position:relative}.p-fluid .p-multiselect{display:flex}.p-multiselect-clear-icon{position:absolute;top:50%;margin-top:-.5rem;cursor:pointer}.p-multiselect-clearable{position:relative}}\n"],encapsulation:2,changeDetection:0})}return i})(),Mn=(()=>{class i{static \u0275fac=function(o){return new(o||i)};static \u0275mod=e.$C({type:i});static \u0275inj=e.G2t({imports:[b.MD,U.z_,l.Gg,ne.S,J.Z,Z.h,Y.u,G.S,$.W,V.I,A.A,N.D,G.S,_e.Q,U.z_,l.Gg,Z.h]})}return i})();var ye=f(3227),Oe=f(5901),M=f(544),ue=f(935),q=f(9998),se=f(5716);const Pn=(i,s,t)=>({"p-togglebutton p-button p-component":!0,"p-button-icon-only":i,"p-highlight":s,"p-disabled":t}),Gn=(i,s)=>({"p-button-icon":!0,"p-button-icon-left":i,"p-button-icon-right":s}),Bn=i=>({$implicit:i});function Ln(i,s){if(1&i&&e.nrm(0,"span",4),2&i){const t=e.XpG(2);e.HbH(t.checked?t.onIcon:t.offIcon),e.Y8G("ngClass",e.l_i(4,Gn,"left"===t.iconPos,"right"===t.iconPos)),e.BMQ("data-pc-section","icon")}}function zn(i,s){if(1&i&&e.DNE(0,Ln,1,7,"span",3),2&i){const t=e.XpG();e.Y8G("ngIf",t.onIcon||t.offIcon)}}function An(i,s){1&i&&e.eu8(0)}function $n(i,s){if(1&i&&e.DNE(0,An,1,0,"ng-container",5),2&i){const t=e.XpG();e.Y8G("ngTemplateOutlet",t.iconTemplate)("ngTemplateOutletContext",e.eq3(2,Bn,t.checked))}}function Vn(i,s){if(1&i&&(e.j41(0,"span",6),e.EFF(1),e.k0s()),2&i){const t=e.XpG();e.BMQ("data-pc-section","label"),e.R7$(),e.JRh(t.checked?t.hasOnLabel?t.onLabel:"":t.hasOffLabel?t.offLabel:"")}}const Nn={provide:F.kq,useExisting:(0,e.Rfq)(()=>Ce),multi:!0};let Ce=(()=>{class i{cd;onLabel;offLabel;onIcon;offIcon;ariaLabel;ariaLabelledBy;disabled;style;styleClass;inputId;tabindex=0;iconPos="left";autofocus;onChange=new e.bkB;templates;iconTemplate;checked=!1;onModelChange=()=>{};onModelTouched=()=>{};constructor(t){this.cd=t}ngAfterContentInit(){this.templates.forEach(t=>{t.getType(),this.iconTemplate=t.template})}toggle(t){if(this.disabled)return t.preventDefault(),void t.stopPropagation();this.checked=!this.checked,this.onModelChange(this.checked),this.onModelTouched(),this.onChange.emit({originalEvent:t,checked:this.checked}),this.cd.markForCheck()}onKeyDown(t){switch(t.code){case"Enter":case"Space":this.toggle(t),t.preventDefault()}}onBlur(){this.onModelTouched()}writeValue(t){this.checked=t,this.cd.markForCheck()}registerOnChange(t){this.onModelChange=t}registerOnTouched(t){this.onModelTouched=t}setDisabledState(t){this.disabled=t,this.cd.markForCheck()}get hasOnLabel(){return this.onLabel&&this.onLabel.length>0}get hasOffLabel(){return this.offLabel&&this.offLabel.length>0}static \u0275fac=function(o){return new(o||i)(e.rXU(e.gRc))};static \u0275cmp=e.VBU({type:i,selectors:[["p-toggleButton"]],contentQueries:function(o,n,r){if(1&o&&e.wni(r,l.Ei,4),2&o){let c;e.mGM(c=e.lsd())&&(n.templates=c)}},hostAttrs:[1,"p-element"],inputs:{onLabel:"onLabel",offLabel:"offLabel",onIcon:"onIcon",offIcon:"offIcon",ariaLabel:"ariaLabel",ariaLabelledBy:"ariaLabelledBy",disabled:[2,"disabled","disabled",e.L39],style:"style",styleClass:"styleClass",inputId:"inputId",tabindex:[2,"tabindex","tabindex",e.Udg],iconPos:"iconPos",autofocus:[2,"autofocus","autofocus",e.L39]},outputs:{onChange:"onChange"},features:[e.Jv_([Nn]),e.GFd],decls:4,vars:17,consts:[["role","switch","pRipple","","pAutoFocus","",3,"click","keydown","ngClass","ngStyle","autofocus"],[3,"class","ngClass"],["class","p-button-label",4,"ngIf"],[3,"class","ngClass",4,"ngIf"],[3,"ngClass"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"p-button-label"]],template:function(o,n){1&o&&(e.j41(0,"div",0),e.bIt("click",function(c){return n.toggle(c)})("keydown",function(c){return n.onKeyDown(c)}),e.DNE(1,zn,1,1,"span",1)(2,$n,1,4,"ng-container")(3,Vn,2,2,"span",2),e.k0s()),2&o&&(e.HbH(n.styleClass),e.Y8G("ngClass",e.sMw(13,Pn,n.onIcon&&n.offIcon&&!n.hasOnLabel&&!n.hasOffLabel,n.checked,n.disabled))("ngStyle",n.style)("autofocus",n.autofocus),e.BMQ("tabindex",n.disabled?null:n.tabindex)("aria-checked",n.checked)("aria-labelledby",n.ariaLabelledBy)("aria-label",n.ariaLabel)("data-pc-name","togglebutton")("data-pc-section","root"),e.R7$(),e.vxM(n.iconTemplate?2:1),e.R7$(2),e.Y8G("ngIf",n.onLabel||n.offLabel))},dependencies:[b.YU,b.bT,b.T3,b.B3,J.n,Y.q],styles:['@layer primeng{.p-button[_ngcontent-%COMP%]{margin:0;display:inline-flex;cursor:pointer;-webkit-user-select:none;user-select:none;align-items:center;vertical-align:bottom;text-align:center;overflow:hidden;position:relative}.p-button-label[_ngcontent-%COMP%]{flex:1 1 auto}.p-button-icon-right[_ngcontent-%COMP%]{order:1}.p-button[_ngcontent-%COMP%]:disabled{cursor:default;pointer-events:none}.p-button-icon-only[_ngcontent-%COMP%]{justify-content:center}.p-button-icon-only[_ngcontent-%COMP%]:after{content:"p";visibility:hidden;clip:rect(0 0 0 0);width:0}.p-button-vertical[_ngcontent-%COMP%]{flex-direction:column}.p-button-icon-bottom[_ngcontent-%COMP%]{order:2}.p-button-group[_ngcontent-%COMP%]   .p-button[_ngcontent-%COMP%]{margin:0}.p-button-group[_ngcontent-%COMP%]   .p-button[_ngcontent-%COMP%]:focus, .p-button-group[_ngcontent-%COMP%]   p-button[_ngcontent-%COMP%]:focus   .p-button[_ngcontent-%COMP%], .p-buttonset[_ngcontent-%COMP%]   .p-button[_ngcontent-%COMP%]:focus, .p-buttonset[_ngcontent-%COMP%]   p-button[_ngcontent-%COMP%]:focus   .p-button[_ngcontent-%COMP%]{position:relative;z-index:1}.p-button-group[_ngcontent-%COMP%]   .p-button[_ngcontent-%COMP%]:not(:last-child), .p-button-group[_ngcontent-%COMP%]   .p-button[_ngcontent-%COMP%]:not(:last-child):hover, .p-button-group[_ngcontent-%COMP%]   p-button[_ngcontent-%COMP%]:not(:last-child)   .p-button[_ngcontent-%COMP%], .p-button-group[_ngcontent-%COMP%]   p-button[_ngcontent-%COMP%]:not(:last-child)   .p-button[_ngcontent-%COMP%]:hover, .p-buttonset[_ngcontent-%COMP%]   .p-button[_ngcontent-%COMP%]:not(:last-child), .p-buttonset[_ngcontent-%COMP%]   .p-button[_ngcontent-%COMP%]:not(:last-child):hover, .p-buttonset[_ngcontent-%COMP%]   p-button[_ngcontent-%COMP%]:not(:last-child)   .p-button[_ngcontent-%COMP%], .p-buttonset[_ngcontent-%COMP%]   p-button[_ngcontent-%COMP%]:not(:last-child)   .p-button[_ngcontent-%COMP%]:hover{border-right:0 none}.p-button-group[_ngcontent-%COMP%]   .p-button[_ngcontent-%COMP%]:not(:first-of-type):not(:last-of-type), .p-button-group[_ngcontent-%COMP%]   p-button[_ngcontent-%COMP%]:not(:first-of-type):not(:last-of-type)   .p-button[_ngcontent-%COMP%], .p-buttonset[_ngcontent-%COMP%]   .p-button[_ngcontent-%COMP%]:not(:first-of-type):not(:last-of-type), .p-buttonset[_ngcontent-%COMP%]   p-button[_ngcontent-%COMP%]:not(:first-of-type):not(:last-of-type)   .p-button[_ngcontent-%COMP%]{border-radius:0}.p-button-group[_ngcontent-%COMP%]   .p-button[_ngcontent-%COMP%]:first-of-type:not(:only-of-type), .p-button-group[_ngcontent-%COMP%]   p-button[_ngcontent-%COMP%]:first-of-type:not(:only-of-type)   .p-button[_ngcontent-%COMP%], .p-buttonset[_ngcontent-%COMP%]   .p-button[_ngcontent-%COMP%]:first-of-type:not(:only-of-type), .p-buttonset[_ngcontent-%COMP%]   p-button[_ngcontent-%COMP%]:first-of-type:not(:only-of-type)   .p-button[_ngcontent-%COMP%]{border-top-right-radius:0;border-bottom-right-radius:0}.p-button-group[_ngcontent-%COMP%]   .p-button[_ngcontent-%COMP%]:last-of-type:not(:only-of-type), .p-button-group[_ngcontent-%COMP%]   p-button[_ngcontent-%COMP%]:last-of-type:not(:only-of-type)   .p-button[_ngcontent-%COMP%], .p-buttonset[_ngcontent-%COMP%]   .p-button[_ngcontent-%COMP%]:last-of-type:not(:only-of-type), .p-buttonset[_ngcontent-%COMP%]   p-button[_ngcontent-%COMP%]:last-of-type:not(:only-of-type)   .p-button[_ngcontent-%COMP%]{border-top-left-radius:0;border-bottom-left-radius:0}p-button[iconpos=right][_ngcontent-%COMP%]   spinnericon[_ngcontent-%COMP%]{order:1}}'],changeDetection:0})}return i})(),Xn=(()=>{class i{static \u0275fac=function(o){return new(o||i)};static \u0275mod=e.$C({type:i});static \u0275inj=e.G2t({imports:[b.MD,J.Z,l.Gg,Y.u,l.Gg]})}return i})();const Yn=()=>[30,50,100],Hn=()=>({}),fe=()=>({"min-width":"50rem"});function Un(i,s){if(1&i){const t=e.RV6();e.j41(0,"div",6)(1,"p-calendar",7),e.mxI("ngModelChange",function(n){e.eBV(t);const r=e.XpG();return e.DH7(r.dateRange,n)||(r.dateRange=n),e.Njj(n)}),e.k0s(),e.j41(2,"p-button",8),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.findOrders())}),e.k0s()()}if(2&i){const t=e.XpG();e.R7$(),e.R50("ngModel",t.dateRange),e.Y8G("readonlyInput",!0)("selectOtherMonths",!0)("showClear",!0)}}function Wn(i,s){if(1&i){const t=e.RV6();e.j41(0,"p-button",9),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.importOrders())}),e.k0s()}if(2&i){const t=e.XpG();e.Y8G("icon",t.isLoading?"pi pi-download":"")}}function Jn(i,s){if(1&i&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"number"),e.k0s()),2&i){const t=e.XpG(2);e.R7$(),e.SpI("~",e.i5U(2,1,t.summary.expectedPayout,"1.2-2"),"\u20bd")}}function Kn(i,s){1&i&&(e.j41(0,"span"),e.EFF(1,"-"),e.k0s())}function qn(i,s){if(1&i&&(e.qex(0),e.nrm(1,"img",33),e.bVm()),2&i){const t=e.XpG().$implicit;e.R7$(),e.FS9("src",t.value.primaryImage,e.B4B)}}function Qn(i,s){1&i&&(e.qex(0),e.nrm(1,"p-skeleton",34),e.bVm())}function Zn(i,s){if(1&i&&(e.j41(0,"div",32),e.DNE(1,qn,2,1,"ng-container",17)(2,Qn,2,0,"ng-container",17),e.j41(3,"div"),e.EFF(4),e.k0s()()),2&i){const t=s.$implicit;e.R7$(),e.Y8G("ngIf",t.value),e.R7$(),e.Y8G("ngIf",!t.value),e.R7$(2),e.JRh(t.key)}}function ei(i,s){if(1&i&&(e.qex(0),e.EFF(1),e.bVm()),2&i){const t=e.XpG().$implicit;e.R7$(),e.SpI(" ",t.value.name," ")}}function ti(i,s){1&i&&(e.qex(0),e.nrm(1,"p-skeleton",35),e.bVm())}function ni(i,s){if(1&i&&(e.j41(0,"div",32),e.DNE(1,ei,2,1,"ng-container",17)(2,ti,2,0,"ng-container",17),e.k0s()),2&i){const t=s.$implicit;e.R7$(),e.Y8G("ngIf",t.value),e.R7$(),e.Y8G("ngIf",!t.value)}}function ii(i,s){if(1&i){const t=e.RV6();e.j41(0,"tr"),e.nrm(1,"th",24),e.j41(2,"th",25),e.EFF(3," \u0421\u043e\u0441\u0442\u0430\u0432 \u0437\u0430\u043a\u0430\u0437\u0430 "),e.nrm(4,"p-sortIcon",26),e.k0s(),e.j41(5,"th",24),e.EFF(6,"\u0421\u0443\u043c\u043c\u0430"),e.k0s(),e.j41(7,"th",24),e.EFF(8,"\u0421\u0442\u0430\u0442\u0443\u0441"),e.k0s(),e.j41(9,"th",24),e.EFF(10,"\u0421\u043a\u043b\u0430\u0434"),e.k0s(),e.j41(11,"th",24),e.EFF(12,"\u041b\u043e\u043a\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f"),e.k0s(),e.nrm(13,"th"),e.k0s(),e.j41(14,"tr"),e.nrm(15,"th"),e.j41(16,"th")(17,"p-multiSelect",27),e.nI1(18,"keyvalue"),e.bIt("onClear",function(){e.eBV(t);const n=e.XpG(3);return e.Njj(n.updateSelectedProductPackageIDs())})("onPanelHide",function(){e.eBV(t);const n=e.XpG(3);return e.Njj(n.updateSelectedProductPackageIDs())}),e.mxI("ngModelChange",function(n){e.eBV(t);const r=e.XpG(3);return e.DH7(r.selectedProductPackageIDs,n)||(r.selectedProductPackageIDs=n),e.Njj(n)}),e.DNE(19,Zn,5,3,"ng-template",28),e.k0s()(),e.nrm(20,"th"),e.j41(21,"th")(22,"p-multiSelect",29),e.nI1(23,"keyvalue"),e.bIt("onClear",function(){e.eBV(t);const n=e.XpG(3);return e.Njj(n.updateSelectedStatuses())})("onPanelHide",function(){e.eBV(t);const n=e.XpG(3);return e.Njj(n.updateSelectedStatuses())}),e.mxI("ngModelChange",function(n){e.eBV(t);const r=e.XpG(3);return e.DH7(r.selectedStatuses,n)||(r.selectedStatuses=n),e.Njj(n)}),e.k0s()(),e.j41(24,"th")(25,"p-multiSelect",30),e.nI1(26,"keyvalue"),e.bIt("onClear",function(){e.eBV(t);const n=e.XpG(3);return e.Njj(n.updateSelectedWarehouseIDs())})("onPanelHide",function(){e.eBV(t);const n=e.XpG(3);return e.Njj(n.updateSelectedWarehouseIDs())}),e.mxI("ngModelChange",function(n){e.eBV(t);const r=e.XpG(3);return e.DH7(r.selectedWarehouseIDs,n)||(r.selectedWarehouseIDs=n),e.Njj(n)}),e.DNE(27,ni,3,2,"ng-template",28),e.k0s()(),e.j41(28,"th")(29,"p-toggleButton",31),e.bIt("onChange",function(){e.eBV(t);const n=e.XpG(3);return e.Njj(n.updateLocalizationFilter())}),e.mxI("ngModelChange",function(n){e.eBV(t);const r=e.XpG(3);return e.DH7(r.nonLocalOnly,n)||(r.nonLocalOnly=n),e.Njj(n)}),e.k0s()(),e.nrm(30,"th"),e.k0s()}if(2&i){const t=e.XpG(3);e.R7$(17),e.R50("ngModel",t.selectedProductPackageIDs),e.Y8G("options",e.bMT(18,13,t.products))("resetFilterOnHide",!0)("showClear",!0),e.R7$(5),e.R50("ngModel",t.selectedStatuses),e.Y8G("options",e.bMT(23,15,t.orderStatuses))("resetFilterOnHide",!0)("showClear",!0),e.R7$(3),e.R50("ngModel",t.selectedWarehouseIDs),e.Y8G("options",e.bMT(26,17,t.warehouses))("resetFilterOnHide",!0)("showClear",!0),e.R7$(4),e.R50("ngModel",t.nonLocalOnly)}}function oi(i,s){if(1&i&&(e.j41(0,"div"),e.nrm(1,"img",45),e.k0s()),2&i){const t=e.XpG().$implicit;e.R7$(),e.Y8G("src",t.primaryImage,e.B4B)}}function ai(i,s){if(1&i&&(e.qex(0),e.EFF(1),e.bVm()),2&i){const t=e.XpG().$implicit;e.R7$(),e.SpI(" - ",t.price*t.quantity,"\u20bd")}}function ri(i,s){if(1&i&&(e.qex(0),e.nrm(1,"div",42),e.DNE(2,oi,2,1,"div",17),e.j41(3,"span",43)(4,"a",44),e.EFF(5),e.k0s(),e.EFF(6),e.j41(7,"b"),e.EFF(8),e.DNE(9,ai,2,1,"ng-container",17),e.k0s()(),e.bVm()),2&i){const t=s.$implicit;e.R7$(2),e.Y8G("ngIf",t.primaryImage),e.R7$(),e.Y8G("title",t.name),e.R7$(),e.FS9("href",t.link,e.B4B),e.R7$(),e.JRh(t.productPackageID),e.R7$(),e.SpI(" x ",t.price,"\u20bd x "),e.R7$(2),e.SpI("",t.quantity,"\u0448\u0442"),e.R7$(),e.Y8G("ngIf",1!=t.quantity)}}function li(i,s){if(1&i&&(e.qex(0),e.j41(1,"p-tag",48),e.EFF(2),e.k0s(),e.EFF(3," - "),e.j41(4,"p-tag",49),e.EFF(5),e.k0s(),e.bVm()),2&i){const t=e.XpG().$implicit;e.R7$(),e.Y8G("icon",t.clusterFrom?"":"pi pi-question-circle"),e.R7$(),e.SpI("",t.clusterFrom," "),e.R7$(2),e.Y8G("icon",t.clusterTo?"":"pi pi-question-circle"),e.R7$(),e.SpI("",t.clusterTo," ")}}function ui(i,s){if(1&i&&(e.j41(0,"p-tag",50),e.EFF(1),e.k0s()),2&i){const t=e.XpG().$implicit;e.R7$(),e.SpI(" ",t.clusterFrom," ")}}function si(i,s){if(1&i&&(e.j41(0,"div"),e.nrm(1,"p-tag",46),e.EFF(2," x"),e.j41(3,"b"),e.EFF(4),e.k0s(),e.EFF(5),e.DNE(6,li,6,4,"ng-container",17)(7,ui,2,1,"p-tag",47),e.k0s()),2&i){const t=s.$implicit,o=e.XpG(4);e.R7$(),e.Y8G("icon","pi "+o.orderStatusIcons.get(t.status))("pTooltip",o.orderStatuses.get(t.status))("severity",o.orderStatusSeverities.get(t.status)),e.R7$(3),e.JRh(t.count),e.R7$(),e.SpI(" ",t.warehouseName," "),e.R7$(),e.Y8G("ngIf",t.clusterFrom!=t.clusterTo),e.R7$(),e.Y8G("ngIf",t.clusterFrom==t.clusterTo)}}function ci(i,s){if(1&i&&(e.j41(0,"tr")(1,"td"),e.nrm(2,"i",36),e.k0s(),e.j41(3,"td")(4,"div")(5,"span",37),e.EFF(6,"\u0422\u043e\u0432\u0430\u0440"),e.k0s(),e.j41(7,"div",38),e.EFF(8),e.nI1(9,"date"),e.k0s(),e.j41(10,"div"),e.DNE(11,ri,10,7,"ng-container",39),e.k0s()()(),e.j41(12,"td")(13,"div")(14,"span",40),e.EFF(15,"\u0421\u0443\u043c\u043c\u0430"),e.k0s(),e.j41(16,"div"),e.EFF(17),e.nI1(18,"number"),e.k0s()()(),e.j41(19,"td",41)(20,"div")(21,"span",40),e.EFF(22,"\u041d\u0430\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435"),e.k0s(),e.DNE(23,si,8,7,"div",39),e.k0s()()()),2&i){const t=s.$implicit,o=e.XpG(3);e.R7$(2),e.ZvI("pi ",o.getOrderTypeIcon(t.type),""),e.Y8G("pRowToggler",t),e.R7$(6),e.JRh(e.i5U(9,8,t.date,"y-MM-dd HH:mm")),e.R7$(3),e.Y8G("ngForOf",t.products),e.R7$(6),e.SpI(" ",e.i5U(18,11,t.sum,"1.2-2"),"\u20bd "),e.R7$(6),e.Y8G("ngForOf",t.directions)}}function pi(i,s){1&i&&(e.j41(0,"tr")(1,"th"),e.EFF(2,"\u0410\u0440\u0442\u0438\u043a\u0443\u043b"),e.k0s(),e.j41(3,"th"),e.EFF(4,"\u0421\u0442\u0430\u0442\u0443\u0441"),e.k0s(),e.j41(5,"th"),e.EFF(6,"\u0426\u0435\u043d\u0430"),e.k0s(),e.j41(7,"th"),e.EFF(8,"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e"),e.k0s(),e.j41(9,"th"),e.EFF(10,"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435"),e.k0s()())}function di(i,s){if(1&i&&(e.j41(0,"tr")(1,"td")(2,"div")(3,"span",37),e.EFF(4,"\u0410\u0440\u0442\u0438\u043a\u0443\u043b"),e.k0s(),e.j41(5,"div"),e.EFF(6),e.k0s()()(),e.j41(7,"td")(8,"div")(9,"span",37),e.EFF(10,"\u0426\u0435\u043d\u0430"),e.k0s(),e.j41(11,"div"),e.nrm(12,"p-tag",54),e.k0s()()(),e.j41(13,"td")(14,"div")(15,"span",37),e.EFF(16,"\u0426\u0435\u043d\u0430"),e.k0s(),e.j41(17,"div"),e.EFF(18),e.nI1(19,"number"),e.k0s()()(),e.j41(20,"td")(21,"div")(22,"span",37),e.EFF(23,"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e"),e.k0s(),e.j41(24,"div"),e.EFF(25),e.k0s()()(),e.j41(26,"td")(27,"div")(28,"span",37),e.EFF(29,"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435"),e.k0s(),e.j41(30,"div"),e.EFF(31),e.k0s()()()()),2&i){let t,o;const n=s.$implicit,r=e.XpG(6);e.R7$(6),e.SpI(" ",n.product.productPackageID," "),e.R7$(6),e.Y8G("severity",null!==(t=r.orderStatusSeverities.get(n.extendedStatus))&&void 0!==t?t:"danger")("value",null!==(o=r.orderStatuses.get(n.extendedStatus))&&void 0!==o?o:"?"),e.R7$(6),e.SpI(" ",e.i5U(19,6,n.price,"1.2-2"),"\u20bd "),e.R7$(7),e.SpI(" ",n.quantity," "),e.R7$(6),e.SpI(" ",n.product.name," ")}}function _i(i,s){1&i&&(e.j41(0,"tr")(1,"th"),e.EFF(2,"ID"),e.k0s(),e.j41(3,"th"),e.EFF(4,"\u0414\u0430\u0442\u0430"),e.k0s(),e.j41(5,"th"),e.EFF(6,"\u0421\u0443\u043c\u043c\u0430"),e.k0s(),e.j41(7,"th"),e.EFF(8,"\u041a\u043e\u043c\u0438\u0441\u0441\u0438\u044f"),e.k0s(),e.j41(9,"th"),e.EFF(10,"\u0422\u0438\u043f \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438"),e.k0s(),e.j41(11,"th"),e.EFF(12,"\u0422\u0438\u043f \u043d\u0430\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u044f"),e.k0s()())}function fi(i,s){if(1&i&&(e.j41(0,"tr")(1,"td")(2,"div")(3,"span",37),e.EFF(4,"ID"),e.k0s(),e.j41(5,"div")(6,"a",52),e.nI1(7,"date"),e.EFF(8),e.k0s()()()(),e.j41(9,"td")(10,"div")(11,"span",37),e.EFF(12,"\u0414\u0430\u0442\u0430"),e.k0s(),e.j41(13,"div"),e.EFF(14),e.nI1(15,"date"),e.k0s()()(),e.j41(16,"td")(17,"div")(18,"span",37),e.EFF(19,"\u0421\u0443\u043c\u043c\u0430"),e.k0s(),e.j41(20,"div"),e.EFF(21),e.nI1(22,"number"),e.k0s()()(),e.j41(23,"td")(24,"div")(25,"span",37),e.EFF(26,"\u041a\u043e\u043c\u0438\u0441\u0441\u0438\u044f"),e.k0s(),e.j41(27,"div"),e.EFF(28),e.nI1(29,"number"),e.k0s()()(),e.j41(30,"td")(31,"div")(32,"span",37),e.EFF(33,"\u0422\u0438\u043f \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438"),e.k0s(),e.j41(34,"div"),e.EFF(35),e.k0s()()(),e.j41(36,"td")(37,"div")(38,"span",37),e.EFF(39,"\u0422\u0438\u043f \u043d\u0430\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u044f"),e.k0s(),e.j41(40,"div"),e.EFF(41),e.k0s()()()()),2&i){const t=s.$implicit,o=e.XpG(7);e.R7$(6),e.FCK("href","https://seller.ozon.ru/app/finances/financial-statement/",t.iD,"?date=",e.i5U(7,9,t.date,"y-MM-dd HH:mm"),"",e.B4B),e.R7$(2),e.JRh(t.iD),e.R7$(6),e.SpI(" ",e.i5U(15,12,t.date,"y-MM-dd HH:mm")," "),e.R7$(7),e.SpI(" ",e.i5U(22,15,t.amount,"1.2-2"),"\u20bd "),e.R7$(7),e.SpI(" ",e.i5U(29,18,t.saleCommission,"1.2-2"),"\u20bd "),e.R7$(7),e.SpI(" ",o.getOperationTypeText(t.operationType)," "),e.R7$(6),e.SpI(" ",o.getTransactionTypeText(t.accrualType)," ")}}function mi(i,s){if(1&i&&(e.qex(0),e.j41(1,"tr")(2,"td",41)(3,"h5")(4,"a",52),e.EFF(5),e.k0s()()()(),e.j41(6,"tr")(7,"td",41)(8,"p-table",53),e.DNE(9,_i,13,0,"ng-template",20)(10,fi,42,21,"ng-template",21),e.k0s()()(),e.bVm()),2&i){const t=e.XpG().$implicit;e.R7$(4),e.Mz_("href","https://seller.ozon.ru/app/finances/transactions-order?page=1&pageSize=50&search=",t.postingNumber,"",e.B4B),e.R7$(),e.SpI("\u041e\u043f\u0435\u0440\u0430\u0446\u0438\u0438 \u043f\u043e \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044e \u2116",t.postingNumber,""),e.R7$(3),e.Y8G("breakpoint","960px")("tableStyle",e.lJ4(6,fe))("value",t.operations)}}function hi(i,s){if(1&i&&(e.qex(0),e.j41(1,"tr")(2,"td",51)(3,"a",52),e.EFF(4),e.k0s()()(),e.j41(5,"tr")(6,"td",41)(7,"p-table",53),e.DNE(8,pi,11,0,"ng-template",20)(9,di,32,9,"ng-template",21),e.k0s()()(),e.DNE(10,mi,11,7,"ng-container",17),e.bVm()),2&i){const t=s.$implicit;e.R7$(3),e.Mz_("href","https://seller.ozon.ru/app/postings/fbo/",t.postingNumber,"",e.B4B),e.R7$(),e.SpI("\u041e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u2116",t.postingNumber,""),e.R7$(3),e.Y8G("breakpoint","960px")("tableStyle",e.lJ4(7,fe))("value",t.orderItems),e.R7$(3),e.Y8G("ngIf",null==t.operations?null:t.operations.length)}}function gi(i,s){if(1&i&&(e.qex(0),e.j41(1,"tr")(2,"td",41)(3,"h5"),e.EFF(4,"\u0421\u043e\u0441\u0442\u0430\u0432 \u0437\u0430\u043a\u0430\u0437\u0430"),e.k0s()()(),e.DNE(5,hi,11,8,"ng-container",39),e.bVm()),2&i){const t=e.XpG().$implicit;e.R7$(5),e.Y8G("ngForOf",t.postings)}}function bi(i,s){1&i&&(e.j41(0,"tr")(1,"th"),e.EFF(2,"ID"),e.k0s(),e.j41(3,"th"),e.EFF(4,"\u0414\u0430\u0442\u0430"),e.k0s(),e.j41(5,"th"),e.EFF(6,"\u0421\u0443\u043c\u043c\u0430"),e.k0s(),e.j41(7,"th"),e.EFF(8,"\u041a\u043e\u043c\u0438\u0441\u0441\u0438\u044f"),e.k0s(),e.j41(9,"th"),e.EFF(10,"\u0422\u0438\u043f \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438"),e.k0s(),e.j41(11,"th"),e.EFF(12,"\u0422\u0438\u043f \u043d\u0430\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u044f"),e.k0s()())}function vi(i,s){if(1&i&&(e.j41(0,"tr")(1,"td")(2,"div")(3,"span",37),e.EFF(4,"ID"),e.k0s(),e.j41(5,"div")(6,"a",52),e.nI1(7,"date"),e.EFF(8),e.k0s()()()(),e.j41(9,"td")(10,"div")(11,"span",37),e.EFF(12,"\u0414\u0430\u0442\u0430"),e.k0s(),e.j41(13,"div"),e.EFF(14),e.nI1(15,"date"),e.k0s()()(),e.j41(16,"td")(17,"div")(18,"span",37),e.EFF(19,"\u0421\u0443\u043c\u043c\u0430"),e.k0s(),e.j41(20,"div"),e.EFF(21),e.nI1(22,"number"),e.k0s()()(),e.j41(23,"td")(24,"div")(25,"span",37),e.EFF(26,"\u041a\u043e\u043c\u0438\u0441\u0441\u0438\u044f"),e.k0s(),e.j41(27,"div"),e.EFF(28),e.nI1(29,"number"),e.k0s()()(),e.j41(30,"td")(31,"div")(32,"span",37),e.EFF(33,"\u0422\u0438\u043f \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438"),e.k0s(),e.j41(34,"div"),e.EFF(35),e.k0s()()(),e.j41(36,"td")(37,"div")(38,"span",37),e.EFF(39,"\u0422\u0438\u043f \u043d\u0430\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u044f"),e.k0s(),e.j41(40,"div"),e.EFF(41),e.k0s()()()()),2&i){const t=s.$implicit,o=e.XpG(5);e.R7$(6),e.FCK("href","https://seller.ozon.ru/app/finances/financial-statement/",t.iD,"?date=",e.i5U(7,9,t.date,"y-MM-dd HH:mm"),"",e.B4B),e.R7$(2),e.JRh(t.iD),e.R7$(6),e.SpI(" ",e.i5U(15,12,t.date,"y-MM-dd HH:mm")," "),e.R7$(7),e.SpI(" ",e.i5U(22,15,t.amount,"1.2-2"),"\u20bd "),e.R7$(7),e.SpI(" ",e.i5U(29,18,t.saleCommission,"1.2-2"),"\u20bd "),e.R7$(7),e.SpI(" ",o.getOperationTypeText(t.operationType)," "),e.R7$(6),e.SpI(" ",o.getTransactionTypeText(t.accrualType)," ")}}function yi(i,s){if(1&i&&(e.qex(0),e.j41(1,"tr")(2,"td",41)(3,"h5")(4,"a",52),e.EFF(5),e.k0s()()()(),e.j41(6,"tr")(7,"td",41)(8,"p-table",55),e.DNE(9,bi,13,0,"ng-template",20)(10,vi,42,21,"ng-template",21),e.k0s()()(),e.bVm()),2&i){const t=e.XpG().$implicit;e.R7$(4),e.Mz_("href","https://seller.ozon.ru/app/finances/transactions-order?page=1&pageSize=50&search=",t.ozonOrderNumber,"",e.B4B),e.R7$(),e.SpI("\u041e\u043f\u0435\u0440\u0430\u0446\u0438\u0438 \u043f\u043e \u0437\u0430\u043a\u0430\u0437\u0443 \u2116",t.ozonOrderNumber,""),e.R7$(3),e.Y8G("breakpoint","960px")("tableStyle",e.lJ4(6,fe))("value",t.orderOperations)}}function Oi(i,s){if(1&i&&e.DNE(0,gi,6,1,"ng-container",17)(1,yi,11,7,"ng-container",17),2&i){const t=s.$implicit;e.Y8G("ngIf",null==t.postings?null:t.postings.length),e.R7$(),e.Y8G("ngIf",null==t.orderOperations?null:t.orderOperations.length)}}function Ci(i,s){if(1&i&&(e.qex(0),e.j41(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td"),e.EFF(8),e.k0s(),e.j41(9,"td"),e.EFF(10),e.k0s(),e.j41(11,"td"),e.EFF(12),e.nI1(13,"number"),e.k0s(),e.bVm()),2&i){const t=e.XpG(5);e.R7$(2),e.JRh(t.summary.totalOrderCount),e.R7$(2),e.JRh(t.summary.totalProductCount),e.R7$(2),e.JRh(t.summary.cancelledProductCount),e.R7$(2),e.JRh(t.summary.returnedProductCount),e.R7$(2),e.JRh(t.summary.nonLocalProductCount),e.R7$(2),e.SpI("",e.i5U(13,6,t.summary.totalSum,"1.2-2"),"\u20bd")}}function Si(i,s){1&i&&(e.j41(0,"td",41),e.nrm(1,"p-skeleton",58),e.k0s())}function ki(i,s){if(1&i&&(e.j41(0,"tr")(1,"th",41)(2,"table",56)(3,"tr"),e.nrm(4,"th"),e.j41(5,"th"),e.EFF(6,"\u0417\u0430\u043a\u0430\u0437\u043e\u0432"),e.k0s(),e.j41(7,"th"),e.EFF(8,"\u0422\u043e\u0432\u0430\u0440\u043e\u0432"),e.k0s(),e.j41(9,"th"),e.EFF(10,"\u041e\u0442\u043c\u0435\u043d"),e.k0s(),e.j41(11,"th"),e.EFF(12,"\u0412\u043e\u0437\u0432\u0440\u0430\u0442\u043e\u0432"),e.k0s(),e.j41(13,"th"),e.EFF(14,"\u041d\u0435\u043b\u043e\u043a\u0430\u043b\u044c\u043d\u044b\u0445"),e.k0s(),e.j41(15,"th"),e.EFF(16,"\u0421\u0443\u043c\u043c\u0430"),e.k0s()(),e.j41(17,"tr")(18,"th"),e.EFF(19,"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430"),e.k0s(),e.j41(20,"td"),e.EFF(21),e.k0s(),e.j41(22,"td"),e.EFF(23),e.k0s(),e.j41(24,"td"),e.EFF(25),e.k0s(),e.j41(26,"td"),e.EFF(27),e.k0s(),e.j41(28,"td"),e.EFF(29),e.k0s(),e.j41(30,"td"),e.EFF(31),e.nI1(32,"number"),e.k0s()(),e.j41(33,"tr")(34,"th"),e.EFF(35,"\u0412\u0441\u0435\u0433\u043e"),e.k0s(),e.DNE(36,Ci,14,9,"ng-container",17)(37,Si,2,0,"td",57),e.k0s()()()()),2&i){const t=e.XpG(4);e.R7$(21),e.JRh(t.pageSummary.orderCount),e.R7$(2),e.JRh(t.pageSummary.productCount),e.R7$(2),e.JRh(t.pageSummary.canceledProductCount),e.R7$(2),e.JRh(t.pageSummary.returnedProductCount),e.R7$(2),e.JRh(t.pageSummary.nonLocalProductCount),e.R7$(2),e.SpI("",e.i5U(32,8,t.pageSummary.orderSum,"1.2-2"),"\u20bd"),e.R7$(5),e.Y8G("ngIf",t.summary),e.R7$(),e.Y8G("ngIf",t.summary)}}function Ei(i,s){if(1&i&&e.DNE(0,ki,38,11,"tr",17),2&i){const t=e.XpG(3);e.Y8G("ngIf",t.pageSummary)}}function Ii(i,s){if(1&i){const t=e.RV6();e.j41(0,"p-table",19),e.bIt("onFilter",function(n){e.eBV(t);const r=e.XpG(2);return e.Njj(r.onFilter(n))})("onLazyLoad",function(n){e.eBV(t);const r=e.XpG(2);return e.Njj(r.onDataLazyLoad(n))})("onSort",function(n){e.eBV(t);const r=e.XpG(2);return e.Njj(r.onFilter(n))}),e.DNE(1,ii,31,19,"ng-template",20)(2,ci,24,14,"ng-template",21)(3,Oi,2,2,"ng-template",22)(4,Ei,1,1,"ng-template",23),e.k0s()}if(2&i){const t=e.XpG(2);e.Y8G("lazy",!0)("loading",t.loading)("loading",t.loading)("paginator",!0)("rowsPerPageOptions",e.lJ4(11,Yn))("rows",t.filterModel.count)("showCurrentPageReport",!1)("sortOrder",-1)("tableStyle",e.lJ4(12,Hn))("totalRecords",t.summary.totalFilteredOrderCount)("value",t.data)}}function Fi(i,s){if(1&i&&(e.j41(0,"div",10)(1,"div",11)(2,"div",12)(3,"div",13)(4,"div",14)(5,"div",15),e.EFF(6,"\u0417\u0430\u043a\u0430\u0437\u044b"),e.k0s(),e.j41(7,"div")(8,"div",16)(9,"span"),e.EFF(10,"\u0417\u0430\u043a\u0430\u0437\u043e\u0432"),e.k0s(),e.j41(11,"span"),e.EFF(12),e.k0s()()(),e.j41(13,"div",16)(14,"span"),e.EFF(15,"\u0422\u043e\u0432\u0430\u0440\u043e\u0432"),e.k0s(),e.j41(16,"span"),e.EFF(17),e.k0s()(),e.j41(18,"div")(19,"div",16)(20,"span"),e.EFF(21,"\u041a \u0432\u044b\u043f\u043b\u0430\u0442\u0435"),e.k0s(),e.DNE(22,Jn,3,4,"span",17)(23,Kn,2,0,"span",17),e.k0s()(),e.j41(24,"div")(25,"div",16)(26,"span"),e.EFF(27,"\u0421\u0443\u043c\u043c\u0430 \u043f\u0440\u043e\u0434\u0430\u0436"),e.k0s(),e.j41(28,"span"),e.EFF(29),e.nI1(30,"number"),e.k0s()()()()()(),e.j41(31,"div",12)(32,"div",13)(33,"div",14)(34,"div",15),e.EFF(35,"\u0412\u043e\u0437\u0432\u0440\u0430\u0442\u044b"),e.k0s(),e.j41(36,"div",16)(37,"span"),e.EFF(38,"\u0422\u043e\u0432\u0430\u0440\u043e\u0432 \u043e\u0442\u043c\u0435\u043d\u0435\u043d\u043e"),e.k0s(),e.j41(39,"span"),e.EFF(40),e.k0s()(),e.j41(41,"div",16)(42,"span"),e.EFF(43,"\u0422\u043e\u0432\u0430\u0440\u043e\u0432 \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0435\u043d\u043e"),e.k0s(),e.j41(44,"span"),e.EFF(45),e.k0s()(),e.j41(46,"div",16)(47,"span"),e.EFF(48,"\u0421\u0443\u043c\u043c\u0430"),e.k0s(),e.j41(49,"span"),e.EFF(50),e.nI1(51,"number"),e.k0s()(),e.j41(52,"div",16)(53,"span"),e.EFF(54,"% \u0432\u043e\u0437\u0432\u0440\u0430\u0442\u043e\u0432"),e.k0s(),e.j41(55,"span"),e.EFF(56),e.nI1(57,"number"),e.k0s()()()()(),e.j41(58,"div",12)(59,"div",13)(60,"div",14)(61,"div",15),e.EFF(62,"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043d\u044b\u0435 \u0437\u0430\u043a\u0430\u0437\u044b"),e.k0s(),e.j41(63,"div")(64,"div",16)(65,"span"),e.EFF(66,"\u0417\u0430\u043a\u0430\u0437\u043e\u0432"),e.k0s(),e.j41(67,"span"),e.EFF(68),e.k0s()()(),e.j41(69,"div",16)(70,"span"),e.EFF(71,"\u0422\u043e\u0432\u0430\u0440\u043e\u0432"),e.k0s(),e.j41(72,"span"),e.EFF(73),e.k0s()(),e.j41(74,"div")(75,"div",16)(76,"span"),e.EFF(77,"\u041a \u0432\u044b\u043f\u043b\u0430\u0442\u0435"),e.k0s(),e.j41(78,"span"),e.EFF(79),e.nI1(80,"number"),e.k0s()()(),e.j41(81,"div")(82,"div",16)(83,"span"),e.EFF(84,"\u0421\u0443\u043c\u043c\u0430 \u043f\u0440\u043e\u0434\u0430\u0436"),e.k0s(),e.j41(85,"span"),e.EFF(86),e.nI1(87,"number"),e.k0s()()()()()()(),e.DNE(88,Ii,5,13,"p-table",18),e.k0s()),2&i){const t=e.XpG();e.R7$(12),e.JRh(t.summary.totalOrderCount),e.R7$(5),e.JRh(t.summary.totalProductCount),e.R7$(5),e.Y8G("ngIf",t.summary.expectedPayout),e.R7$(),e.Y8G("ngIf",!t.summary.expectedPayout),e.R7$(6),e.SpI("",e.i5U(30,14,t.summary.totalSalesSum,"1.2-2"),"\u20bd"),e.R7$(11),e.JRh(t.summary.cancelledProductCount),e.R7$(5),e.JRh(t.summary.returnedProductCount),e.R7$(5),e.SpI("",e.i5U(51,17,t.summary.returnSum,"1.2-2"),"\u20bd"),e.R7$(6),e.SpI("",e.i5U(57,20,100*t.summary.returnProductCountPercentage,"1.1-1"),"%"),e.R7$(12),e.JRh(t.summary.finalizedOrderCount),e.R7$(5),e.JRh(t.summary.finalizedProductCount),e.R7$(6),e.SpI("",e.i5U(80,23,t.summary.finalizedSum,"1.2-2"),"\u20bd"),e.R7$(7),e.SpI("",e.i5U(87,26,t.summary.finalizedSalesSum,"1.2-2"),"\u20bd"),e.R7$(2),e.Y8G("ngIf",t.data)}}var ee=function(i){return i[i.Returned=-1]="Returned",i}(ee||{}),X=function(i){return i[i.ThisDay=0]="ThisDay",i[i.PreviousDay=1]="PreviousDay",i[i.Day=2]="Day",i[i.ThisWeek=3]="ThisWeek",i[i.PreviousWeek=4]="PreviousWeek",i[i.Week=5]="Week",i[i.ThisMonth=6]="ThisMonth",i[i.PreviousMonth=7]="PreviousMonth",i[i.Month=8]="Month",i[i.Custom=9]="Custom",i}(X||{});let Ti=(()=>{class i extends d.x{static{this.FilterID="OzonSalesOrderListComponent"}constructor(t,o,n,r,c,k,D,x){super(x),this.ozonSalesOrderClient=t,this.ozonPostingCommandClient=o,this.ozonOperationCommandClient=n,this.messageService=r,this.warehouseClient=c,this.ozonProductClient=k,this.dbService=D,this.dateRangeTypes=X,this.loading=!1,this.products=new Map,this.warehouses=new Map,this.isLoading=!1,this.findOrdersSubject=new v.t(null),this.knownProducts=new Map,this.knownWarehouses=new Map,this.filterModel={dateRangeType:X.ThisDay,offset:0,gatherSummary:!0,count:50},this.dateRangeOptions=[{name:"\u0421\u0435\u0433\u043e\u0434\u043d\u044f",value:X.ThisDay},{name:"\u0412\u0447\u0435\u0440\u0430",value:X.PreviousDay},{name:"\u0421\u0443\u0442\u043a\u0438",value:X.Day},{name:"\u042d\u0442\u0430 \u043d\u0435\u0434\u0435\u043b\u044f",value:X.ThisWeek},{name:"\u041f\u0440\u0435\u0434\u044b\u0434\u0443\u0449\u0430\u044f \u043d\u0435\u0434\u0435\u043b\u044f",value:X.PreviousWeek},{name:"\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u044f\u044f \u043d\u0435\u0434\u0435\u043b\u044f",value:X.Week},{name:"\u042d\u0442\u043e\u0442 \u043c\u0435\u0441\u044f\u0446",value:X.ThisMonth},{name:"\u041f\u0440\u0435\u0434\u044b\u0434\u0443\u0449\u0438\u0439 \u043c\u0435\u0441\u044f\u0446",value:X.PreviousMonth},{name:"\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0439 \u043c\u0435\u0441\u044f\u0446",value:X.Month},{name:"\u0417\u0430 \u043f\u0435\u0440\u0438\u043e\u0434",value:X.Custom}],this.orderStatuses=new Map([[ee.Returned,"\u0412\u043e\u0437\u0432\u0440\u0430\u0442"],[a.D.PostingStatus.AwaitingPackaging,"\u041e\u0436\u0438\u0434\u0430\u0435\u0442 \u0443\u043f\u0430\u043a\u043e\u0432\u043a\u0438"],[a.D.PostingStatus.AwaitingDeliver,"\u041e\u0436\u0438\u0434\u0430\u0435\u0442 \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0438"],[a.D.PostingStatus.Delivering,"\u0414\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442\u0441\u044f"],[a.D.PostingStatus.Delivered,"\u0414\u043e\u0441\u0442\u0430\u0432\u043b\u0435\u043d"],[a.D.PostingStatus.Cancelled,"\u041e\u0442\u043c\u0435\u043d\u0451\u043d"],[a.D.PostingStatus.AwaitingRegistration,"\u041e\u0436\u0438\u0434\u0430\u0435\u0442 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438"],[a.D.PostingStatus.AcceptanceInProgress,"\u0418\u0434\u0451\u0442 \u043f\u0440\u0438\u0451\u043c\u043a\u0430"],[a.D.PostingStatus.AwaitingApprove,"\u041e\u0436\u0438\u0434\u0430\u0435\u0442 \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0438\u044f"],[a.D.PostingStatus.Arbitration,"\u0410\u0440\u0431\u0438\u0442\u0440\u0430\u0436"],[a.D.PostingStatus.ClientArbitration,"\u041a\u043b\u0438\u0435\u043d\u0442\u0441\u043a\u0438\u0439 \u0430\u0440\u0431\u0438\u0442\u0440\u0430\u0436 \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0438"],[a.D.PostingStatus.DriverPickup,"\u0423 \u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044f"],[a.D.PostingStatus.NotAccepted,"\u041d\u0435 \u043f\u0440\u0438\u043d\u044f\u0442\u043e"],[a.D.PostingStatus.SentBySeller,"\u041e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043e \u043f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a\u043e\u043c"]]),this.orderStatusSeverities=new Map([[ee.Returned,"danger"],[a.D.PostingStatus.AwaitingDeliver,"warning"],[a.D.PostingStatus.Cancelled,"contrast"],[a.D.PostingStatus.AwaitingPackaging,"warning"],[a.D.PostingStatus.Delivering,"info"],[a.D.PostingStatus.Delivered,"success"]]),this.orderStatusIcons=new Map([[ee.Returned,"pi-ban"],[a.D.PostingStatus.AwaitingDeliver,"pi-car"],[a.D.PostingStatus.Cancelled,"pi-replay"],[a.D.PostingStatus.AwaitingPackaging,"pi-box"],[a.D.PostingStatus.Delivering,"pi-car"],[a.D.PostingStatus.Delivered,"pi-dollar"],[a.D.PostingStatus.Delivered,"pi-dollar"]]),this.localizationFilter=null,this.nonLocalOnly=!1}static getPageSummary(t){let o=0,n=0,r=0,c=0,k=0;const D=t.length;for(const x of t)o+=x.sum,x.orderItems.forEach(j=>{j.extendedStatus==a.D.PostingStatus.Cancelled?r+=j.quantity:j.extendedStatus==ee.Returned?(c+=j.quantity,k+=j.clusterTo!==j.clusterFrom?j.quantity:0):(n+=j.quantity,k+=j.clusterTo!==j.clusterFrom?j.quantity:0)});return{canceledProductCount:r,orderCount:D,orderSum:o,productCount:n,returnedProductCount:c,nonLocalProductCount:k}}static mapOrder(t){const o=new Map,n=new Set,r=new Set,c=new Map,k=new Map,D=[],x={cancelledProductCount:0,directions:[],hasNonCancelledOrderItems:!1,hasNonFinalizedOrderItems:!1,hasNonLocalOrderItems:!1,nonLocalProductCount:0,orderItems:t.orderItems,orderOperations:D,orderWarehouses:[],postings:[],productCount:0,productIDs:[],products:[],returnSum:0,returnedProductCount:0,salesSum:0,statuses:[],sum:0},j=new Map;for(const R of t.operations)if(x.sum+=R.amount,R.postingNumber==t.ozonOrderNumber)D.push(R);else{if((R.operationType==a.D.OperationType.ReturnAgentOperationRFBS||R.operationType==a.D.OperationType.OperationReturnGoodsFBSofRMS||R.operationType==a.D.OperationType.MarketplaceSellerReexposureDeliveryReturnOperation||R.operationType==a.D.OperationType.ClientReturnAgentOperation||R.operationType==a.D.OperationType.OperationItemReturn||R.operationType==a.D.OperationType.MarketplaceServiceItemReturnFlowLogistic||R.operationType==a.D.OperationType.MarketplaceReturnStorageServiceAtThePickupPointFbsItem)&&n.add(R.postingNumber),o.has(R.postingNumber))o.get(R.postingNumber).operations.push(R);else{const te={postingNumber:R.postingNumber,orderItems:[],operations:[R]};x.postings.push(te),o.set(R.postingNumber,te)}c.set(R.postingNumber,(c.get(R.postingNumber)??0)+R.amount)}const L=new Set;for(const R of t.orderItems){const te=c.get(R.postingNumber)??0,K=n.has(R.postingNumber)?ee.Returned:R.status;R.clusterFrom!==R.clusterTo&&R.status!=a.D.PostingStatus.Cancelled&&(x.nonLocalProductCount+=R.quantity,x.hasNonLocalOrderItems=!0),L.add(K);const H=`${R.clusterFrom}#${R.clusterTo}#${R.ozonWarehouseID}#${K}`;if(j.has(H))j.get(H).count+=R.quantity;else{let Q=R.ozonWarehouse?.name??"-";r.has(Q)||(x.orderWarehouses.push(Q),r.add(Q));const De={clusterFrom:R.clusterFrom,clusterTo:R.clusterTo,count:R.quantity,status:K,warehouseName:Q};x.directions.push(De),j.set(H,De)}if(o.has(R.postingNumber))o.get(R.postingNumber).orderItems.push(R);else{const Q={postingNumber:R.postingNumber,orderItems:[R],operations:[]};o.set(R.postingNumber,Q),x.postings.push(Q)}if(k.has(R.product.productPackageID))k.get(R.product.productPackageID).quantity+=R.quantity;else{const Q={link:"https://www.ozon.ru/product/"+R.product.sku,name:R.product.name,price:R.price,primaryImage:R.product.primaryImage,productPackageID:R.product.productPackageID,quantity:R.quantity};k.set(R.product.productPackageID,Q),x.productIDs.push(R.product.productPackageID.toString()),x.products.push(Q)}K==ee.Returned?(x.returnedProductCount+=R.quantity,x.returnSum+=te):K==a.D.PostingStatus.Cancelled?x.cancelledProductCount+=R.quantity:(x.productCount+=R.quantity,x.hasNonCancelledOrderItems=!0,x.salesSum+=R.quantity*R.price,K!=a.D.PostingStatus.Delivered&&(x.hasNonFinalizedOrderItems=!0)),Object.assign(R,{extendedStatus:K})}return L.forEach(R=>{x.statuses.push(R)}),Object.assign(t,x)}static getDateRange(t,o){let n=new Date,r=null;switch(t){case X.ThisDay:n.setHours(0,0,0,0);break;case X.PreviousDay:n.setDate(n.getDate()-1),n.setHours(0,0,0,0),r=new Date(n);break;case X.Day:n.setDate(n.getDate()-1);break;case X.ThisWeek:n.setDate(n.getDate()-(n.getDay()?n.getDay()-1:6)),n.setHours(0,0,0,0);break;case X.PreviousWeek:r=new Date(n);const k=r.getDay()??7;r.setHours(0,0,0,0),r.setDate(r.getDate()-k),n=new Date(r),n.setDate(n.getDate()-6);break;case X.Week:n.setDate(n.getDate()-7);break;case X.ThisMonth:n.setHours(0,0,0,0),n.setDate(1);break;case X.PreviousMonth:n.setHours(0,0,0,0),n.setDate(1),r=new Date(n),r.setDate(r.getDate()-1),n.setMonth(n.getMonth()-1);break;case X.Month:n.setMonth(n.getMonth()-1);break;default:n=o?.[0],n=null==n?null:new Date(n.getFullYear(),n.getMonth(),n.getDate()),r=o?.[1],r=null==r?null:new Date(r.getFullYear(),r.getMonth(),r.getDate())}return[n,r]}ngOnInit(){this.titleService.setTitle("\u0417\u0430\u043a\u0430\u0437\u044b Ozon"),this.findOrdersSubject.pipe((0,S.Q)(this.destroyed)).pipe((0,E.p)(t=>!!t)).subscribe(t=>{this.localizationFilter=null;const o=Object.assign({},t,{offset:0,productPackageIDs:[],warehouseIDs:[],statuses:[],nonLocalOnly:!1,dateRangeType:this.dateRangeType});this.dbService.update("filters",{id:i.FilterID,data:o}).pipe((0,g.W)(n=>(this.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f \u0444\u0438\u043b\u044c\u0442\u0440\u0430",severity:"error",detail:n}),y.w))).subscribe(()=>{this.findOrders(t)})}),this.dbService.getByID("filters",i.FilterID).subscribe(t=>{t&&t.data&&(this.filterModel=t.data,this.dateRangeType=t.data.dataRangeType),this.changeReportDate()})}changeReportDate(){this.findOrdersSubject.next(this.filterModel)}getSummary(t){return{cancelledProductCount:t.cancelledProductCount,expectedPayout:t.finalizedSum*t.totalSalesSum/t.finalizedSalesSum,finalizedOrderCount:t.finalizedOrderCount,finalizedProductCount:t.finalizedProductCount,finalizedSalesSum:t.finalizedSalesSum,finalizedSum:t.finalizedSum,nonLocalProductCount:t.nonLocalProductCount,returnProductCountPercentage:t.finalizedProductCount&&t.returnedProductCount?t.returnedProductCount/t.finalizedProductCount:0,returnSum:t.returnSum,returnedProductCount:t.returnedProductCount,totalFilteredOrderCount:t.totalFilteredOrderCount,totalOrderCount:t.totalOrderCount,totalProductCount:t.totalProductCount,totalSalesSum:t.totalSalesSum,totalSum:t.amount}}getOrderTypeIcon(t){switch(t){case a.D.OzonSalesOrderType.Fbo:return"ozon-fbo";case a.D.OzonSalesOrderType.Fbs:return"ozon-fbs";default:return"pi-question"}}importOrders(){var t=this;return(0,O.A)(function*(){const[o,n]=i.getDateRange(t.dateRangeType,t.dateRange);n?.setDate(n.getDate()+1);const r=(0,g.W)(c=>(t.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0438\u043c\u043f\u043e\u0440\u0442\u0430 \u0442\u043e\u0432\u0430\u0440\u043e\u0432",severity:"error",detail:c}),t.loading=!1,y.w));t.ozonPostingCommandClient.importOzonFboPostings(o,n).pipe(r).subscribe(()=>{t.ozonOperationCommandClient.importOzonOperations(o,n).pipe(r).subscribe(()=>{t.findOrdersSubject.next(t.filterModel)})})})()}findOrders(t){const[o,n]=i.getDateRange(this.dateRangeType,this.dateRange);n?.setDate(n.getDate()+1),t.gatherSummary=!t.offset,t.dateFrom=o,t.dateTo=n;const r=new a.D.FindOzonSalesOrdersModel(t);this.loading=!0,this.pageSummary=void 0,this.ozonSalesOrderClient.findSalesOzonOrders(r).pipe((0,g.W)(c=>(this.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u043e\u0432",severity:"error",detail:c}),this.loading=!1,y.w))).subscribe(c=>{this.loading=!1;let k=0;this.data=c?.items.map(D=>{const x=i.mapOrder(D);return x.orderItems.forEach(L=>{L.extendedStatus==a.D.PostingStatus.Cancelled||L.extendedStatus==ee.Returned||(k+=L.quantity),this.knownProducts.set(L.product.productPackageID,L.product)}),x}),this.filterModel.gatherSummary&&(this.updateProducts(c.iDs),this.updateWarehouses(c.warehouseIDs),this.summary=this.getSummary(c)),this.pageSummary=i.getPageSummary(this.data)})}getTransactionTypeText(t){return a.D.TransactionType[t]}getOperationTypeText(t){return a.D.OperationType[t]}onFilter(t){console.log(t)}updateSelectedProductPackageIDs(){const t=this.selectedProductPackageIDs?.map(o=>+o).sort((o,n)=>o-n);(t?.length!=this.filterModel.productPackageIDs?.length||!t?.every((o,n)=>o==this.filterModel.productPackageIDs[n]))&&(this.filterModel.productPackageIDs=t,this.findOrdersSubject.next(this.filterModel))}updateLocalizationFilter(){this.filterModel.nonLocalOnly!=this.nonLocalOnly&&(this.filterModel.nonLocalOnly=this.nonLocalOnly,this.findOrdersSubject.next(this.filterModel))}updateSelectedWarehouseIDs(){const t=this.selectedWarehouseIDs?.length??0,o=this.filterModel.warehouseIDs?.length??0,n=this.selectedWarehouseIDs?.map(r=>+r).sort((r,c)=>r-c);(t!=o||!n?.every((r,c)=>r==this.filterModel.warehouseIDs[c]))&&(this.filterModel.warehouseIDs=n,this.findOrdersSubject.next(this.filterModel))}updateSelectedStatuses(){const t=this.selectedStatuses?.length??0,o=this.filterModel.statuses?.length??0,n=this.selectedStatuses?.map(r=>+r).sort((r,c)=>r-c);(t!=o||!n?.every((r,c)=>r==this.filterModel.statuses[c]))&&(this.filterModel.statuses=n,this.findOrdersSubject.next(this.filterModel))}onDataLazyLoad(t){(this.filterModel.offset!=t.first||this.filterModel.count!=t.rows)&&(this.filterModel.offset=t.first,this.filterModel.count=t.rows,this.findOrdersSubject.next(this.filterModel))}updateWarehouses(t){if(this.warehouses.clear(),t&&t.length){const o=[];for(const n of t)this.knownWarehouses.has(n)?this.warehouses.set(n,this.knownWarehouses.get(n)):(this.warehouses.set(n,void 0),o.push(n));o.length&&this.warehouseClient.getOzonWarehouses(new a.D.FindOzonWarehousesModel({includeAliases:!1})).pipe((0,g.W)(n=>(this.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438 \u043e \u0441\u043a\u043b\u0430\u0434\u0430\u0445",severity:"error",detail:n}),y.w))).subscribe(n=>{for(const r of n)this.knownWarehouses.set(r.iD,r),this.warehouses.has(r.iD)&&this.warehouses.set(r.iD,r)})}}updateProducts(t){if(this.products.clear(),t&&t.length){const o=[];for(const n of t)this.knownProducts.has(n)?this.products.set(n,this.knownProducts.get(n)):(this.products.set(n,void 0),o.push(n));o.length&&this.ozonProductClient.findOzonProducts(new a.D.FindOzonProductsModel({iDs:o,count:-1,offset:0,includeStocks:!1})).pipe((0,g.W)(n=>(this.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438 \u043e \u0442\u043e\u0432\u0430\u0440\u0430\u0445",severity:"error",detail:n}),y.w))).subscribe(n=>{for(const r of n.items)this.knownProducts.set(r.productPackageID,r),this.products.has(r.productPackageID)&&this.products.set(r.productPackageID,r)})}}static{this.\u0275fac=function(o){return new(o||i)(e.rXU(a.D.OzonSalesOrderClient),e.rXU(u.X.PostingClient),e.rXU(u.X.OperationClient),e.rXU(l.bg),e.rXU(a.D.WarehouseClient),e.rXU(a.D.OzonProductClient),e.rXU(p.MX),e.rXU(_.hE))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-ozon-sales-order-list"]],features:[e.Vt3],decls:8,vars:7,consts:[["header","\u0417\u0430\u043a\u0430\u0437\u044b Ozon"],[1,"justify-content-center"],["icon","pi pi-search","optionLabel","name","optionValue","value",3,"onOptionClick","ngModelChange","ngModel","allowEmpty","disabled","options"],["class","justify-content-center mb-1",4,"ngIf"],["label","\u0418\u043c\u043f\u043e\u0440\u0442 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0439","styleClass","m-3",3,"icon","click",4,"ngIf"],["class","card",4,"ngIf"],[1,"justify-content-center","mb-1"],["placeholder","\u041f\u0435\u0440\u0438\u043e\u0434","selectionMode","range",3,"ngModelChange","ngModel","readonlyInput","selectOtherMonths","showClear"],["icon","pi pi-search","label","\u041d\u0430\u0439\u0442\u0438 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f",3,"click"],["label","\u0418\u043c\u043f\u043e\u0440\u0442 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0439","styleClass","m-3",3,"click","icon"],[1,"card"],[1,"grid"],[1,"col-12","md:col-4"],[1,"card","text-right"],[1,"text-900","font-medium","text-xl","mb-3"],[1,"text-500","text-center"],[1,"flex","justify-content-between"],[4,"ngIf"],["dataKey","iD","responsiveLayout","stack","sortField","date",3,"lazy","loading","paginator","rowsPerPageOptions","rows","showCurrentPageReport","sortOrder","tableStyle","totalRecords","value","onFilter","onLazyLoad","onSort",4,"ngIf"],["dataKey","iD","responsiveLayout","stack","sortField","date",3,"onFilter","onLazyLoad","onSort","lazy","loading","paginator","rowsPerPageOptions","rows","showCurrentPageReport","sortOrder","tableStyle","totalRecords","value"],["pTemplate","header"],["pTemplate","body"],["pTemplate","rowexpansion"],["pTemplate","footer"],["width","1%"],["pSortableColumn","date","width","1%"],["field","date"],["appendTo","body","filterBy","key","maxSelectedLabels","3","optionLabel","key","optionValue","key","placeholder","\u041b\u044e\u0431\u043e\u0439 \u0430\u0440\u0442\u0438\u043a\u0443\u043b",3,"onClear","onPanelHide","ngModelChange","ngModel","options","resetFilterOnHide","showClear"],["pTemplate","item"],["appendTo","body","optionLabel","value","optionValue","key","placeholder","\u041b\u044e\u0431\u043e\u0439",3,"onClear","onPanelHide","ngModelChange","ngModel","options","resetFilterOnHide","showClear"],["appendTo","body","filterBy","value.name","maxSelectedLabels","3","optionLabel","value.name","optionValue","key","placeholder","\u041b\u044e\u0431\u043e\u0439 \u0441\u043a\u043b\u0430\u0434",3,"onClear","onPanelHide","ngModelChange","ngModel","options","resetFilterOnHide","showClear"],["inputId","localFilter","offLabel","\u041b\u044e\u0431\u044b\u0435","onLabel","\u041d\u0435\u043b\u043e\u043a\u0430\u043b\u044c\u043d\u044b\u0435",1,"p-button-sm",3,"onChange","ngModelChange","ngModel"],[1,"flex","align-items-center","gap-2"],[2,"width","3rem",3,"src"],["height","3rem","width","3rem"],["height","3rem","width","6rem"],[3,"pRowToggler"],[1,"p-column-title","font-bold"],[1,"mb-2"],[4,"ngFor","ngForOf"],[1,"p-column-title"],["colspan","7"],[1,"vertical-align-middle"],[3,"title"],["target","_blank",3,"href"],["width","50",3,"src"],[3,"icon","pTooltip","severity"],["severity","success",4,"ngIf"],["severity","info",3,"icon"],["severity","danger",3,"icon"],["severity","success"],["colspan","7",1,"text-left","justify-content-start"],["rel","noreferrer","target","_blank",3,"href"],["responsiveLayout","stack",3,"breakpoint","tableStyle","value"],[3,"severity","value"],["dataKey","iD","responsiveLayout","stack",3,"breakpoint","tableStyle","value"],[1,"text-right","p-1"],["colspan","7",4,"ngIf"],["height","2rem"]],template:function(o,n){1&o&&(e.nrm(0,"p-toast")(1,"p-scrollTop"),e.j41(2,"p-card",0)(3,"div",1)(4,"p-selectButton",2),e.bIt("onOptionClick",function(){return n.changeReportDate()}),e.mxI("ngModelChange",function(c){return e.DH7(n.dateRangeType,c)||(n.dateRangeType=c),c}),e.k0s()(),e.DNE(5,Un,3,4,"div",3)(6,Wn,1,1,"p-button",4),e.k0s(),e.DNE(7,Fi,89,29,"div",5)),2&o&&(e.R7$(4),e.R50("ngModel",n.dateRangeType),e.Y8G("allowEmpty",!1)("disabled",n.loading)("options",n.dateRangeOptions),e.R7$(),e.Y8G("ngIf",n.dateRangeType==n.dateRangeTypes.Custom),e.R7$(),e.Y8G("ngIf",void 0!==n.dateRangeType),e.R7$(),e.Y8G("ngIf",n.summary))},dependencies:[l.Ei,h.$n,I.Vv,T.Z,b.Sq,b.bT,F.BC,F.vS,oe,ye.l,Oe.JC,M.XI,M.Tg,M.FP,M.yc,ue.v,q.y8,se.E,Ce,ne.m,b.QX,b.vh,b.lG],styles:["@media (min-width: 961px){.p-column-title[_ngcontent-%COMP%]{display:none}}@media (max-width: 960px){.p-column-title[_ngcontent-%COMP%]{display:block}.p-datatable-tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:block}}"]})}}return i})();var Ri=f(9974),xi=f(5343),Se=f(4360),wi=f(8750);function ke(i){return(0,Ri.N)((s,t)=>{let o=!1,n=null,r=null;const c=()=>{if(r?.unsubscribe(),r=null,o){o=!1;const k=n;n=null,t.next(k)}};s.subscribe((0,Se._)(t,k=>{r?.unsubscribe(),o=!0,n=k,r=(0,Se._)(t,c,xi.l),(0,wi.Tg)(i(k)).subscribe(r)},()=>{c(),t.complete()},void 0,()=>{n=r=null}))})}var Di=f(8839),ji=f(1584);function Ee(i=0,s=Di.E){return i<0&&(i=0),(0,ji.O)(i,i,s)}var Mi=f(1874),me=f(2637),ae=f(5430),re=f(2242),Ie=f(4799),ce=f(6781),pe=f(1802),Fe=f(672);const Pi=()=>["name"],Gi=()=>[25,50,100],Bi=()=>({"min-width":"75rem"}),Li=()=>({"p-inputtext":!1}),zi=()=>({width:"50vw"});function Ai(i,s){if(1&i){const t=e.RV6();e.j41(0,"button",19),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.clearIDFilter())}),e.k0s()}}function $i(i,s){if(1&i){const t=e.RV6();e.j41(0,"button",19),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.clearNameFilter())}),e.k0s()}}function Vi(i,s){if(1&i){const t=e.RV6();e.j41(0,"tr"),e.nrm(1,"th"),e.j41(2,"th",9),e.EFF(3," ID "),e.nrm(4,"p-sortIcon",10),e.k0s(),e.j41(5,"th",11),e.EFF(6," \u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 "),e.nrm(7,"p-sortIcon",12),e.k0s(),e.j41(8,"th"),e.EFF(9,"\u0418\u043d\u0434\u0435\u043a\u0441\u044b \u0446\u0435\u043d"),e.k0s(),e.j41(10,"th"),e.EFF(11,"\u041a\u043e\u043c\u0438\u0441\u0441\u0438\u0438"),e.k0s(),e.nrm(12,"th"),e.k0s(),e.j41(13,"tr"),e.nrm(14,"th"),e.j41(15,"th")(16,"div",13)(17,"p-inputNumber",14),e.nI1(18,"async"),e.bIt("ngModelChange",function(n){e.eBV(t);const r=e.XpG();return e.Njj(r.idFilterSubject.next(n))}),e.k0s(),e.DNE(19,Ai,1,0,"button",15),e.nI1(20,"async"),e.k0s()(),e.j41(21,"th")(22,"div",13)(23,"input",16),e.nI1(24,"async"),e.bIt("ngModelChange",function(n){e.eBV(t);const r=e.XpG();return e.Njj(r.nameFilterSubject.next(n))}),e.k0s(),e.DNE(25,$i,1,0,"button",15),e.nI1(26,"async"),e.k0s()(),e.j41(27,"th")(28,"div",17)(29,"p-triStateCheckbox",18),e.mxI("ngModelChange",function(n){e.eBV(t);const r=e.XpG();return e.DH7(r.priceIndexFilter,n)||(r.priceIndexFilter=n),e.Njj(n)}),e.k0s()()(),e.nrm(30,"th"),e.k0s()}if(2&i){const t=e.XpG();e.R7$(17),e.Y8G("ngClass",e.lJ4(16,Li))("ngModel",e.bMT(18,8,t.idFilterSubject))("useGrouping",!1),e.R7$(2),e.Y8G("ngIf",e.bMT(20,10,t.idFilterSubject)),e.R7$(4),e.Y8G("ngModel",e.bMT(24,12,t.nameFilterSubject)),e.R7$(2),e.Y8G("ngIf",e.bMT(26,14,t.nameFilterSubject)),e.R7$(4),e.R50("ngModel",t.priceIndexFilter),e.Y8G("label",null==t.priceIndexFilter?"\u0411\u0435\u0437 \u0444\u0438\u043b\u044c\u0442\u0440\u0430":t.priceIndexFilter?"\u0421 \u0438\u043d\u0434\u0435\u043a\u0441\u0430\u043c\u0438 \u0446\u0435\u043d":"\u0421 \u043f\u043b\u043e\u0445\u0438\u043c\u0438 \u0438\u043d\u0434\u0435\u043a\u0441\u0430\u043c\u0438 \u0446\u0435\u043d")}}function Ni(i,s){if(1&i&&(e.j41(0,"div",31)(1,"p-tag",32),e.EFF(2),e.k0s()()),2&i){const t=e.XpG().$implicit,o=e.XpG();e.R7$(),e.Y8G("severity",o.getPriceIndexSeverity(t.externalCompetitorPriceIndexValue)),e.R7$(),e.SpI(" \u0412\u043d\u0435\u0448\u043d\u0438\u0439: ",t.externalCompetitorPriceIndexValue," ")}}function Xi(i,s){if(1&i&&(e.j41(0,"div",17)(1,"p-tag",33),e.EFF(2),e.k0s()()),2&i){const t=e.XpG().$implicit,o=e.XpG();e.R7$(),e.Y8G("severity",o.getPriceIndexSeverity(t.externalPriceIndexValue)),e.R7$(),e.SpI("\u0412\u043d\u0435\u0448\u043d\u0438\u0439 \u0441\u0432\u043e\u0439: ",t.externalPriceIndexValue," ")}}function Yi(i,s){if(1&i&&(e.j41(0,"div",17)(1,"p-tag",33),e.EFF(2),e.k0s()()),2&i){const t=e.XpG().$implicit,o=e.XpG();e.R7$(),e.Y8G("severity",o.getPriceIndexSeverity(t.ozonCompetitorPriceIndexValue)),e.R7$(),e.SpI(" \u041e\u0437\u043e\u043d: ",t.ozonCompetitorPriceIndexValue," ")}}function Hi(i,s){1&i&&(e.j41(0,"tr")(1,"th"),e.EFF(2,"\u0421\u0445\u0435\u043c\u0430"),e.k0s(),e.j41(3,"th"),e.EFF(4,"\u041a\u043e\u043c\u0438\u0441\u0441\u0438\u044f, %"),e.k0s(),e.j41(5,"th"),e.EFF(6,"\u041a\u043e\u043c\u0438\u0441\u0441\u0438\u044f, \u0432\u0430\u043b\u044e\u0442\u0430"),e.k0s(),e.j41(7,"th"),e.EFF(8,"\u0414\u043e\u0441\u0442\u0430\u0432\u043a\u0430, \u0432\u0430\u043b\u044e\u0442\u0430"),e.k0s(),e.j41(9,"th"),e.EFF(10,"\u0412\u043e\u0437\u0432\u0440\u0430\u0442, \u0432\u0430\u043b\u044e\u0442\u0430"),e.k0s()())}function Ui(i,s){if(1&i&&(e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td"),e.EFF(8),e.k0s(),e.j41(9,"td"),e.EFF(10),e.k0s()()),2&i){const t=s.$implicit;e.R7$(2),e.JRh(t.schema),e.R7$(2),e.JRh(t.commissionCost),e.R7$(2),e.JRh(t.commissionPercent),e.R7$(2),e.JRh(t.deliveryCost),e.R7$(2),e.JRh(t.returnCost)}}function Wi(i,s){if(1&i&&e.nrm(0,"button",34),2&i){const t=e.XpG(),n=t.$implicit;e.Y8G("icon",t.expanded?"pi pi-chevron-down":"pi pi-chevron-right")("pRowToggler",n)}}function Ji(i,s){if(1&i){const t=e.RV6();e.j41(0,"tr")(1,"td")(2,"a",20),e.nrm(3,"i",21),e.k0s(),e.j41(4,"a",20),e.nrm(5,"i",22),e.k0s()(),e.j41(6,"td"),e.EFF(7),e.k0s(),e.j41(8,"td"),e.EFF(9),e.k0s(),e.j41(10,"td"),e.DNE(11,Ni,3,2,"div",23)(12,Xi,3,2,"div",24)(13,Yi,3,2,"div",24),e.k0s(),e.j41(14,"td",25)(15,"p-accordion")(16,"p-accordionTab",26)(17,"p-table",27),e.DNE(18,Hi,11,0,"ng-template",3)(19,Ui,11,5,"ng-template",4),e.k0s()()()(),e.j41(20,"td")(21,"p-button",28),e.bIt("click",function(){const n=e.eBV(t).$implicit,r=e.XpG();return e.Njj(r.showBarcodeGenerator(n))}),e.k0s(),e.j41(22,"p-button",29),e.bIt("click",function(n){const r=e.eBV(t).$implicit,c=e.XpG();return e.Njj(c.confirmProductRemoval(n,r))}),e.k0s(),e.DNE(23,Wi,1,2,"button",30),e.k0s()()}if(2&i){const t=s.$implicit;e.R7$(2),e.Mz_("href","https://www.ozon.ru/product/",t.sku,"",e.B4B),e.R7$(2),e.Mz_("href","https://seller.ozon.ru/app/prices/control?search=",t.sku,"",e.B4B),e.R7$(3),e.JRh(t.productPackageID),e.R7$(2),e.JRh(t.name),e.R7$(2),e.Y8G("ngIf",t.externalCompetitorPriceIndexValue),e.R7$(),e.Y8G("ngIf",t.externalPriceIndexValue),e.R7$(),e.Y8G("ngIf",t.ozonCompetitorPriceIndexValue),e.R7$(4),e.Y8G("value",t.commissions),e.R7$(6),e.Y8G("ngIf",null==t.stocks?null:t.stocks.length)}}function Ki(i,s){1&i&&(e.j41(0,"tr")(1,"th",38),e.EFF(2,"\u0421\u043a\u043b\u0430\u0434 "),e.nrm(3,"p-sortIcon",39),e.k0s(),e.j41(4,"th",40),e.EFF(5,"\u041a\u043b\u0430\u0441\u0442\u0435\u0440 "),e.nrm(6,"p-sortIcon",41),e.k0s(),e.j41(7,"th",42),e.EFF(8,"\u041d\u0430\u043b\u0438\u0447\u0438\u0435 "),e.nrm(9,"p-sortIcon",43),e.k0s(),e.j41(10,"th",44),e.EFF(11,"\u0420\u0435\u0437\u0435\u0440\u0432 "),e.nrm(12,"p-sortIcon",45),e.k0s()())}function qi(i,s){if(1&i&&(e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td",46),e.EFF(6),e.k0s(),e.j41(7,"td",46),e.EFF(8),e.k0s()()),2&i){const t=s.$implicit;e.R7$(2),e.JRh(t.warehouse.name),e.R7$(2),e.JRh(t.warehouse.warehouseCluster),e.R7$(2),e.JRh(t.present),e.R7$(2),e.JRh(t.reserved)}}function Qi(i,s){if(1&i&&(e.j41(0,"tr")(1,"td",47),e.EFF(2,"\u0412\u0441\u0435\u0433\u043e:"),e.k0s(),e.j41(3,"td",46),e.EFF(4),e.k0s(),e.j41(5,"td",46),e.EFF(6),e.k0s()()),2&i){const t=e.XpG(2).$implicit;e.R7$(4),e.JRh(t.totalPresent),e.R7$(2),e.JRh(t.totalReserved)}}function Zi(i,s){if(1&i&&(e.j41(0,"tr")(1,"td",36)(2,"div")(3,"p-table",27),e.DNE(4,Ki,13,0,"ng-template",3)(5,qi,9,4,"ng-template",4)(6,Qi,7,2,"ng-template",37),e.k0s()()()()),2&i){const t=e.XpG().$implicit;e.R7$(3),e.Y8G("value",t.stocks)}}function eo(i,s){if(1&i&&e.DNE(0,Zi,7,1,"tr",35),2&i){const t=s.$implicit;e.Y8G("ngIf",null==t.stocks?null:t.stocks.length)}}function to(i,s){if(1&i){const t=e.RV6();e.qex(0),e.j41(1,"div",56)(2,"div",57)(3,"label",58),e.EFF(4,"\u0422\u0435\u043a\u0441\u0442"),e.k0s(),e.j41(5,"input",59),e.mxI("ngModelChange",function(n){const r=e.eBV(t).$implicit;return e.DH7(r.text,n)||(r.text=n),e.Njj(n)}),e.k0s()()(),e.j41(6,"div",57)(7,"label",60),e.EFF(8,"\u0420\u0430\u0437\u043c\u0435\u0440 \u0448\u0440\u0438\u0444\u0442\u0430"),e.k0s(),e.j41(9,"p-inputNumber",61),e.mxI("ngModelChange",function(n){const r=e.eBV(t).$implicit;return e.DH7(r.fontSize,n)||(r.fontSize=n),e.Njj(n)}),e.k0s()(),e.j41(10,"div",57)(11,"label",62),e.EFF(12,"\u0416\u0438\u0440\u043d\u044b\u0439"),e.k0s(),e.j41(13,"p-checkbox",63),e.mxI("ngModelChange",function(n){const r=e.eBV(t).$implicit;return e.DH7(r.bold,n)||(r.bold=n),e.Njj(n)}),e.k0s()(),e.bVm()}if(2&i){const t=s.$implicit;e.R7$(5),e.R50("ngModel",t.text),e.R7$(4),e.R50("ngModel",t.fontSize),e.Y8G("showButtons",!0),e.R7$(4),e.R50("ngModel",t.bold),e.Y8G("binary",!0)}}function no(i,s){if(1&i&&(e.qSk(),e.qex(0),e.nrm(1,"rect",64),e.bVm()),2&i){const t=s.$implicit;e.R7$(),e.BMQ("width",3*t.width)("x",3*t.offset+89)}}function io(i,s){if(1&i&&(e.qSk(),e.qex(0),e.nrm(1,"text",65),e.bVm()),2&i){const t=s.$implicit,o=s.index,n=e.XpG(3);e.R7$(),e.Y8G("innerHTML",t.text,e.npT),e.BMQ("font-size",t.fontSize)("font-weight",t.bold?"bold":"normal")("y",160+40*o/n.barcodeTexts.length)}}function oo(i,s){if(1&i){const t=e.RV6();e.j41(0,"div",50),e.DNE(1,to,14,5,"ng-container",51),e.j41(2,"div")(3,"p-button",52),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.addBarcodeText())}),e.k0s()()(),e.j41(4,"div"),e.qSk(),e.j41(5,"svg",53),e.nrm(6,"rect",54),e.DNE(7,no,2,2,"ng-container",51)(8,io,2,4,"ng-container",51),e.k0s(),e.joV(),e.j41(9,"a",55),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.downloadBarcode())}),e.EFF(10,"\u0421\u043a\u0430\u0447\u0430\u0442\u044c"),e.k0s()()}if(2&i){const t=e.XpG(2);e.R7$(),e.Y8G("ngForOf",t.barcodeTexts),e.R7$(6),e.Y8G("ngForOf",t.barcodeData),e.R7$(),e.Y8G("ngForOf",t.barcodeTexts),e.R7$(),e.Y8G("download",t.selectedProductForBarcode.productPackageID+".png")}}function ao(i,s){if(1&i){const t=e.RV6();e.j41(0,"p-dialog",48),e.bIt("onShow",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.onShowBarcodeDialog())}),e.DNE(1,oo,11,4,"ng-template",49),e.k0s()}if(2&i){const t=e.XpG();e.Aen(e.lJ4(6,zi)),e.Y8G("draggable",!1)("modal",!0)("resizable",!1)("visible",!!t.selectedProductForBarcode)}}let ro=(()=>{class i extends d.x{addBarcodeText(){this.barcodeTexts=[...this.barcodeTexts,{fontSize:10,text:"",bold:!1}]}constructor(t,o,n,r,c,k){super(k),this.ozonProductClient=t,this.messageService=o,this.ozonProductCommandHandler=n,this.route=r,this.confirmationService=c,this.barcodeHeight=10,this.priceIndexFilter=null,this.filterModel={count:50,includeStocks:!0,offset:0},this.findModelSubject=new v.t(null),this.idFilterSubject=new v.t(null),this.nameFilterSubject=new v.t(null)}ngOnInit(){this.titleService.setTitle("Ozon Products");const t=this.route.snapshot.paramMap.get("ids");t&&(this.ids=t.split(",").map(o=>+o)),this.px2mmFactor=this.calcPx2MmFactor(),this.idFilterSubject.pipe((0,E.p)(o=>!o||o>=100)).pipe(ke(()=>Ee(500))).subscribe(()=>this.updateFilter()),this.nameFilterSubject.pipe((0,E.p)(o=>!o||o.length>2)).pipe(ke(()=>Ee(500))).subscribe(()=>this.updateFilter()),this.findModelSubject.pipe((0,S.Q)(this.destroyed)).pipe((0,E.p)(o=>!!o&&o.count>0)).subscribe(o=>{this.findProducts(new a.D.FindOzonProductsModel(o))})}findProducts(t){this.loading=!0,this.ozonProductClient.findOzonProducts(t).pipe((0,S.Q)(this.destroyed)).pipe((0,g.W)(o=>(this.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430",severity:"error",detail:o}),this.loading=!1,y.w))).subscribe(o=>{this.loading=!1,o.items?.forEach(n=>{const r=n.stocks.reduce((j,L)=>j+L.present,0),c=n.stocks.reduce((j,L)=>j+L.reserved,0),k=[n.externalCompetitorPriceIndexValue,n.externalPriceIndexValue,n.ozonCompetitorPriceIndexValue].filter(j=>j>0),D=Math.max(...k);Object.assign(n,{totalPresent:r,totalReserved:c,hasPriceIndex:D>0,hasBadPriceIndex:D>1.01})}),this.data=o.items,this.totalRecords=o.totalCount})}confirmProductRemoval(t,o){this.confirmationService.confirm({target:t.target,message:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0442\u043e\u0432\u0430\u0440?",header:"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0438\u0435 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f",icon:"pi pi-exclamation-triangle",acceptIcon:"none",rejectIcon:"none",rejectButtonStyleClass:"p-button-text",accept:()=>{this.ozonProductCommandHandler.removeOzonProduct(o.productPackageID).pipe((0,g.W)(n=>(this.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f \u0442\u043e\u0432\u0430\u0440\u0430",severity:"error",detail:n}),y.w))).subscribe(()=>{const n=this.data.indexOf(o);this.data.splice(n,1),this.messageService.add({summary:"\u0422\u043e\u0432\u0430\u0440 \u0443\u0434\u0430\u043b\u0451\u043d",severity:"success"})})}})}onDataLazyLoad(t){if(this.filterModel.offset=t.first,t.sortField){switch(t.sortField){case"name":this.filterModel.orderField=a.D.FindOzonProductsModelSortField.ProductName;break;case"productPackageID":this.filterModel.orderField=a.D.FindOzonProductsModelSortField.ProductPackageID}this.filterModel.orderAscending=t.sortOrder>0}this.updateFilter()}onShowBarcodeDialog(){this.barcodeTexts=[]}calcPx2MmFactor(){const t=document.createElement("div");t.style.position="absolute",t.style.width="100mm",document.body.appendChild(t);const o=t.getBoundingClientRect();return document.body.removeChild(t),o.width/100}showBarcodeGenerator(t){if(t.barcodes?.length>0){this.selectedProductForBarcode=t;const o=this.selectedProductForBarcode.barcodes[0],n={};Mi(n,o,{format:"code128",height:this.barcodeHeight*this.px2mmFactor,text:o,background:"rgba(255, 255, 255, 1)",font:"monospace",fontOptions:"bold",marginTop:0,fontSize:16,lineColor:"black",margin:2*this.px2mmFactor,textMargin:0,flat:!0});const r=[];let c;for(let k=0;k<n.encodings[0].data.length;k++)"1"==n.encodings[0].data[k]?c?c.width++:c={width:1,offset:k}:c?.width>0&&(r.push(c),c=null);c&&r.push(c),this.barcodeData=r}}downloadBarcode(){var t=this;return(0,O.A)(function*(){yield new Promise(()=>{try{const r=document.getElementById("barcodeImage").outerHTML,c=btoa(encodeURIComponent(r).replace(/%([0-9A-F]{2})/g,(D,x)=>String.fromCharCode(parseInt(x,16)))),k=document.createElement("a");k.href="data:image/svg+xml;base64,"+c,k.download=t.selectedProductForBarcode.productPackageID+".svg",k.click()}catch(n){t.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430",severity:"error",detail:n})}})})()}importProducts(){var t=this;return(0,O.A)(function*(){yield t.ozonProductCommandHandler.importOzonProducts().pipe((0,g.W)(o=>(t.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0438\u043c\u043f\u043e\u0440\u0442\u0430 \u0442\u043e\u0432\u0430\u0440\u043e\u0432",severity:"error",detail:o}),y.w))).subscribe(()=>{t.messageService.add({summary:"\u0423\u0441\u043f\u0435\u0445",severity:"success",detail:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0442\u043e\u0432\u0430\u0440\u043e\u0432 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u0430"}),t.filterModel.offset=0,t.updateFilter()})})()}updateStocks(){var t=this;return(0,O.A)(function*(){t.ozonProductCommandHandler.importOzonProductStocks().pipe((0,g.W)(o=>(t.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430",severity:"error",detail:o}),y.w))).subscribe(()=>{t.messageService.add({summary:"\u0423\u0441\u043f\u0435\u0445",severity:"success",detail:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0441\u043a\u043b\u0430\u0434\u043e\u0432 \u041e\u0437\u043e\u043d \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u0430"}),t.filterModel.offset=0,t.updateFilter()})})()}getPriceIndexSeverity(t){let o;return o=t<=1.01?"success":t<=1.05?"warning":"danger",o}updateFilter(){this.filterModel.iDs=this.ids,this.filterModel.hasBadPriceIndex=!1===this.priceIndexFilter,this.filterModel.hasAnyPriceIndex=this.priceIndexFilter,this.filterModel.productName=this.nameFilterSubject.value,this.filterModel.productPackageID=this.idFilterSubject.value,this.findModelSubject.next(this.filterModel)}clearIDFilter(){this.idFilterSubject.next(null)}clearNameFilter(){this.nameFilterSubject.next(null)}static{this.\u0275fac=function(o){return new(o||i)(e.rXU(a.D.OzonProductClient),e.rXU(l.bg),e.rXU(u.X.OzonProductClient),e.rXU(C.nX),e.rXU(l.td),e.rXU(_.hE))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-ozon-product-list"]],features:[e.Vt3],decls:11,vars:13,consts:[["label","\u0418\u043c\u043f\u043e\u0440\u0442 \u0442\u043e\u0432\u0430\u0440\u043e\u0432","pButton","","pRipple","","type","button",1,"mb-2",3,"click"],["label","\u0418\u043c\u043f\u043e\u0440\u0442 \u043e\u0441\u0442\u0430\u0442\u043a\u043e\u0432","pButton","","pRipple","","type","button",1,"ml-1","mb-2",3,"click"],["dataKey","productPackageID",3,"onLazyLoad","globalFilterFields","lazy","loading","paginator","rowsPerPageOptions","rows","tableStyle","totalRecords","value"],["pTemplate","header"],["pTemplate","body"],["pTemplate","rowexpansion"],["header","\u0413\u0435\u043d\u0435\u0440\u0430\u0446\u0438\u044f \u0431\u0430\u0440\u043a\u043e\u0434\u0430",3,"draggable","modal","resizable","style","visible","onShow",4,"ngIf"],[1,"hidden"],["id","barcode",2,"display","none"],["pSortableColumn","productPackageID","width","20%"],["field","productPackageID"],["pSortableColumn","name"],["field","name"],[1,"flex","flex-nowrap"],["pInputText","",3,"ngModelChange","ngClass","ngModel","useGrouping"],["icon","pi pi-trash","pButton","",3,"click",4,"ngIf"],["pInputText","","type","text",3,"ngModelChange","ngModel"],[1,"flex","white-space-nowrap"],["inputId","priceIndexFilter",3,"ngModelChange","ngModel","label"],["icon","pi pi-trash","pButton","",3,"click"],["target","_blank",3,"href"],[1,"pi","ozon-fbo"],[1,"pi","ozon-seller"],["class","flex-nowrap",4,"ngIf"],["class","flex white-space-nowrap",4,"ngIf"],["width","1%"],["header","\u041a\u043e\u043c\u0438\u0441\u0441\u0438\u0438"],[3,"value"],["icon","pi pi-chart-bar",3,"click"],["icon","pi pi-trash","pRipple","","styleClass","p-button-danger","type","button",3,"click"],["class","p-button-text p-button-rounded p-button-plain","pButton","","pRipple","","type","button",3,"icon","pRowToggler",4,"ngIf"],[1,"flex-nowrap"],[1,"flex","white-space-nowrap",3,"severity"],[3,"severity"],["pButton","","pRipple","","type","button",1,"p-button-text","p-button-rounded","p-button-plain",3,"icon","pRowToggler"],[4,"ngIf"],["colspan","6"],["pTemplate","footer"],["pSortableColumn","warehouse.name"],["field","warehouse.name"],["pSortableColumn","warehouse.warehouseCluster"],["field","warehouse.warehouseCluster"],["pSortableColumn","present","width","10%"],["field","present"],["pSortableColumn","reserved","width","10%"],["field","reserved"],[1,"text-right"],["colspan","2",1,"text-right"],["header","\u0413\u0435\u043d\u0435\u0440\u0430\u0446\u0438\u044f \u0431\u0430\u0440\u043a\u043e\u0434\u0430",3,"onShow","draggable","modal","resizable","visible"],["pTemplate","content"],[1,"card"],[4,"ngFor","ngForOf"],["icon","pi pi-plus","label","\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0442\u0435\u043a\u0441\u0442",3,"click"],["id","barcodeImage","xmlns","http://www.w3.org/2000/svg"],["fill","white","height","600em","width","350em"],[1,"p-ripple","p-element","p-button","p-component",3,"click","download"],[1,"flex"],[1,"flex-auto"],["for","text",1,"block","font-bold"],["inputId","text","pInputText","",3,"ngModelChange","ngModel"],["for","fontSize",1,"mb-2","block","font-bold"],["inputId","fontSize",3,"ngModelChange","ngModel","showButtons"],["for","fontWeight",1,"mb-2","block","font-bold"],["inputId","binary",3,"ngModelChange","ngModel","binary"],["fill","black","height","60","y","50"],["fill","black","text-anchor","middle","x","50%",3,"innerHTML"]],template:function(o,n){1&o&&(e.nrm(0,"p-toast")(1,"p-confirmDialog"),e.j41(2,"button",0),e.bIt("click",function(){return n.importProducts()}),e.k0s(),e.j41(3,"button",1),e.bIt("click",function(){return n.updateStocks()}),e.k0s(),e.j41(4,"p-table",2),e.bIt("onLazyLoad",function(c){return n.onDataLazyLoad(c)}),e.DNE(5,Vi,31,17,"ng-template",3)(6,Ji,24,11,"ng-template",4)(7,eo,1,1,"ng-template",5),e.k0s(),e.DNE(8,ao,2,7,"p-dialog",6),e.j41(9,"div",7),e.qSk(),e.nrm(10,"svg",8),e.k0s()),2&o&&(e.R7$(4),e.Y8G("globalFilterFields",e.lJ4(10,Pi))("lazy",!0)("loading",n.loading)("paginator",!0)("rowsPerPageOptions",e.lJ4(11,Gi))("rows",n.filterModel.count)("tableStyle",e.lJ4(12,Bi))("totalRecords",n.totalRecords)("value",n.data),e.R7$(4),e.Y8G("ngIf",n.selectedProductForBarcode))},dependencies:[me.nD,me.gV,l.Ei,h._f,h.$n,ae.Sc,re.S,b.YU,b.Sq,b.bT,Ie.T,ce.l,F.me,F.BC,F.vS,pe.YI,M.XI,M.Tg,M.FP,M.yc,ue.v,q.y8,Fe.kk,b.Jj]})}}return i})();var lo=f(6354);const uo=["table"],so=()=>({"min-width":"75rem"}),co=()=>[10,25,50],po=()=>({width:"50vw"}),_o=()=>["code_128","ean","upc","upc_e","ean_8"];function fo(i,s){1&i&&(e.j41(0,"tr")(1,"th"),e.EFF(2,"\u0414\u0430\u0442\u0430"),e.k0s(),e.j41(3,"th"),e.EFF(4,"\u0421\u0442\u0430\u0442\u0443\u0441"),e.k0s(),e.j41(5,"th"),e.EFF(6,"\u0421\u043a\u043b\u0430\u0434 \u043e\u0442\u0433\u0440\u0443\u0437\u043a\u0438"),e.k0s(),e.j41(7,"th"),e.EFF(8,"\u0421\u043a\u043b\u0430\u0434\u044b \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f"),e.k0s(),e.j41(9,"th"),e.EFF(10,"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043f\u043e\u0437\u0438\u0446\u0438\u0439"),e.k0s(),e.j41(11,"th"),e.EFF(12,"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0442\u043e\u0432\u0430\u0440\u043e\u0432"),e.k0s(),e.nrm(13,"th"),e.k0s())}function mo(i,s){if(1&i&&(e.j41(0,"tr")(1,"td")(2,"a",8),e.EFF(3),e.nI1(4,"date"),e.k0s()(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td"),e.EFF(8),e.k0s(),e.j41(9,"td"),e.EFF(10),e.k0s(),e.j41(11,"td"),e.EFF(12),e.k0s(),e.j41(13,"td"),e.EFF(14),e.k0s(),e.j41(15,"td"),e.nrm(16,"button",9),e.k0s()()),2&i){const t=s.$implicit,o=s.expanded;e.R7$(2),e.FS9("href",t.link,e.B4B),e.R7$(),e.JRh(e.i5U(4,9,t.date,"y-MM-dd")),e.R7$(3),e.JRh(t.statusName),e.R7$(2),e.JRh(null==t.ozonWarehouse?null:t.ozonWarehouse.name),e.R7$(2),e.JRh(t.warehouses),e.R7$(2),e.JRh(t.totalItemCount),e.R7$(2),e.JRh(t.totalQuantity),e.R7$(2),e.Y8G("pRowToggler",t)("icon",o?"pi pi-chevron-down":"pi pi-chevron-right")}}function ho(i,s){1&i&&(e.j41(0,"tr")(1,"th",13),e.EFF(2,"\u0410\u0440\u0442\u0438\u043a\u0443\u043b "),e.nrm(3,"p-sortIcon",14),e.k0s(),e.j41(4,"th",15),e.EFF(5,"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 "),e.nrm(6,"p-sortIcon",16),e.k0s(),e.j41(7,"th",17),e.EFF(8,"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e "),e.nrm(9,"p-sortIcon",18),e.k0s()())}function go(i,s){if(1&i&&(e.j41(0,"tr",19)(1,"td",10)(2,"b"),e.EFF(3),e.k0s()()()),2&i){const t=s.$implicit;e.R7$(3),e.JRh(null==t.ozonWarehouse?null:t.ozonWarehouse.name)}}function bo(i,s){if(1&i&&(e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s()()),2&i){const t=s.$implicit;e.R7$(2),e.JRh(t.productPackageID),e.R7$(2),e.JRh(t.productPackage.name),e.R7$(2),e.JRh(t.quantity)}}function vo(i,s){if(1&i&&(e.j41(0,"tr")(1,"td",10)(2,"p-table",11),e.DNE(3,ho,10,0,"ng-template",4)(4,go,4,1,"ng-template",12)(5,bo,7,3,"ng-template",5),e.k0s()()()),2&i){const t=s.$implicit;e.R7$(2),e.Y8G("value",t.orderItems)}}function yo(i,s){if(1&i){const t=e.RV6();e.j41(0,"ngx-barcode-scanner",22),e.bIt("valueChange",function(n){e.eBV(t);const r=e.XpG(2);return e.Njj(r.onValueChanged(n))}),e.k0s(),e.EFF(1)}if(2&i){const t=e.XpG(2);e.Y8G("codes",e.lJ4(3,_o))("errorThreshold",.1),e.R7$(),e.SpI(" ",t.barcode," ")}}function Oo(i,s){if(1&i){const t=e.RV6();e.j41(0,"p-dialog",20),e.mxI("valueChange",function(n){e.eBV(t);const r=e.XpG();return e.DH7(r.barcode,n)||(r.barcode=n),e.Njj(n)})("visibleChange",function(n){e.eBV(t);const r=e.XpG();return e.DH7(r.showScanBarcodeDialog,n)||(r.showScanBarcodeDialog=n),e.Njj(n)}),e.DNE(1,yo,2,4,"ng-template",21),e.k0s()}if(2&i){const t=e.XpG();e.Aen(e.lJ4(7,po)),e.R50("value",t.barcode),e.Y8G("modal",!0),e.R50("visible",t.showScanBarcodeDialog),e.Y8G("draggable",!1)("resizable",!1)}}let Co=(()=>{class i extends d.x{constructor(t,o,n,r){super(r),this.supplyOrderClient=t,this.supplyOrderCommandHandler=o,this.messageService=n,this.findSupplyOrdersSubject=new v.t(null),this.rows=50}closeCellEdit(){}editComplete(t){if("ozonCrossDockWarehouseID"==t.field){const o=t.data;this.supplyOrderCommandHandler.updateOzonSupplyOrderCrossDockWarehouse(o.iD,o.ozonCrossDockWarehouse?.iD).pipe((0,g.W)(n=>(this.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430",severity:"error",detail:n}),y.w))).subscribe()}}ngOnInit(){this.titleService.setTitle("\u041f\u043e\u0441\u0442\u0430\u0432\u043a\u0438 Ozon"),this.findSupplyOrdersSubject.pipe((0,E.p)(t=>!!t)).pipe((0,S.Q)(this.destroyed)).pipe((0,lo.T)(t=>{this.findSupplyOrders(t)}))}onValueChanged(t){}scanBarcode(){this.showScanBarcodeDialog=!0}findSupplyOrders(t){this.supplyOrderClient.findOzonSupplyOrders(t).pipe((0,S.Q)(this.destroyed)).pipe((0,g.W)(o=>(this.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430",severity:"error",detail:o}),y.w))).subscribe(o=>{this.data=o.items,this.data.forEach(n=>{const r=n.orderItems.reduce((D,x)=>(x.ozonWarehouse?.name&&D.add(x.ozonWarehouse.name),D),new Set),c=n;c.statusName=this.getOrderStatusName(n.status),c.warehouses=[...r].join(", "),c.link=`${n.state==a.D.SupplyOrderState.DataFilling?"https://seller.ozon.ru/app/supply/orders/draft":"https://seller.ozon.ru/app/supply/orders"}/${c.iD}`}),this.totalRecords=o.totalCount})}getOrderStatusName(t){let o;const n=Object.values(a.D.SupplyOrderState);switch(null==t?a.D.SupplyOrderState.Unknown:n[t]){case a.D.SupplyOrderState.AcceptanceAtStorageWarehouse:o="\u041f\u0440\u0438\u0451\u043c\u043a\u0430 \u043d\u0430 \u0441\u043a\u043b\u0430\u0434\u0435 \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f";break;case a.D.SupplyOrderState.Cancelled:o="\u041e\u0442\u043c\u0435\u043d\u0435\u043d\u0430";break;case a.D.SupplyOrderState.DataFilling:o="\u0417\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435";break;case a.D.SupplyOrderState.AcceptedAtSupplyWarehouse:o="\u041f\u0440\u0438\u043d\u044f\u0442\u0430 \u043d\u0430 \u0441\u043a\u043b\u0430\u0434\u0435 \u043e\u0442\u0433\u0440\u0443\u0437\u043a\u0438";break;case a.D.SupplyOrderState.Completed:o="\u0417\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u0430";break;case a.D.SupplyOrderState.InTransit:o="\u0412 \u043f\u0443\u0442\u0438";break;case a.D.SupplyOrderState.ReadyToSupply:o="\u0413\u043e\u0442\u043e\u0432\u0430 \u043a \u043e\u0442\u0433\u0440\u0443\u0437\u043a\u0435";break;case a.D.SupplyOrderState.RejectedAtSupplyWarehouse:o="\u041e\u0442\u043a\u0430\u0437\u0430\u043d\u043e \u0432 \u043f\u0440\u0438\u0451\u043c\u043a\u0435";break;case a.D.SupplyOrderState.ReportRejected:o="\u0421\u043f\u043e\u0440";break;case a.D.SupplyOrderState.ReportsConfirmationAwaiting:o="\u0421\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u0435 \u0430\u043a\u0442\u043e\u0432";break;case a.D.SupplyOrderState.Unknown:o="\u0421\u0442\u0430\u0442\u0443\u0441 \u043d\u0435 \u0437\u0430\u0434\u0430\u043d";break;default:throw Error(`Unsupported status ${t}`)}return o}onDataLazyLoad(t){const o=new a.D.FindOzonSupplyOrdersModel({offset:t.first,count:t.rows});this.findSupplyOrdersSubject.next(o),this.findSupplyOrders(o)}importSupplyOrders(){var t=this;return(0,O.A)(function*(){t.supplyOrderCommandHandler.updateOzonSupplyOrders().pipe((0,g.W)(o=>(t.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0438\u043c\u043f\u043e\u0440\u0442\u0430 \u0437\u0430\u044f\u0432\u043e\u043a \u043d\u0430 \u043f\u043e\u0441\u0442\u0430\u0432\u043a\u0443",severity:"error",detail:o}),y.w))).subscribe(()=>{t.messageService.add({summary:"\u0423\u0441\u043f\u0435\u0445",severity:"success",detail:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0437\u0430\u044f\u0432\u043e\u043a \u043d\u0430 \u043f\u043e\u0441\u0442\u0430\u0432\u043a\u0443 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u0430"}),t.onDataLazyLoad({first:0,rows:t.rows})})})()}static{this.\u0275fac=function(o){return new(o||i)(e.rXU(a.D.OzonSupplyOrderClient),e.rXU(u.X.OzonSupplyOrderClient),e.rXU(l.bg),e.rXU(_.hE))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-ozon-supply-order-list"]],viewQuery:function(o,n){if(1&o&&e.GBs(uo,5),2&o){let r;e.mGM(r=e.lsd())&&(n.table=r.first)}},features:[e.Vt3],decls:9,vars:11,consts:[["table",""],["label","\u0421\u043a\u0430\u043d\u0438\u0440\u043e\u0432\u0430\u0442\u044c",3,"click"],["pButton","","pRipple","","type","button","label","\u0418\u043c\u043f\u043e\u0440\u0442 \u0437\u0430\u044f\u0432\u043e\u043a \u043d\u0430 \u043f\u043e\u0441\u0442\u0430\u0432\u043a\u0443",1,"ml-1",3,"click"],["dataKey","iD","editMode","cell",3,"onLazyLoad","onEditComplete","value","lazy","tableStyle","paginator","rows","rowsPerPageOptions","totalRecords","loading"],["pTemplate","header"],["pTemplate","body"],["pTemplate","rowexpansion"],["header","\u0421\u043a\u0430\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u0434\u0430",3,"value","modal","style","visible","draggable","resizable","valueChange","visibleChange",4,"ngIf"],["target","_blank",3,"href"],["type","button","pButton","","pRipple","",1,"p-button-text","p-button-rounded","p-button-plain",3,"pRowToggler","icon"],["colspan","7"],["rowGroupMode","subheader","groupRowsBy","ozonWarehouse?.name",3,"value"],["pTemplate","groupheader"],["pSortableColumn","productPackageID"],["field","productPackageID"],["pSortableColumn","productPackage.name"],["field","productPackage.name"],["pSortableColumn","quantity"],["field","quantity"],["pRowGroupHeader",""],["header","\u0421\u043a\u0430\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u0434\u0430",3,"valueChange","visibleChange","value","modal","visible","draggable","resizable"],["pTemplate","content"],["width","300",3,"valueChange","codes","errorThreshold"]],template:function(o,n){if(1&o){const r=e.RV6();e.nrm(0,"p-toast"),e.j41(1,"p-button",1),e.bIt("click",function(){return e.eBV(r),e.Njj(n.scanBarcode())}),e.k0s(),e.j41(2,"button",2),e.bIt("click",function(){return e.eBV(r),e.Njj(n.importSupplyOrders())}),e.k0s(),e.j41(3,"p-table",3,0),e.bIt("onLazyLoad",function(k){return e.eBV(r),e.Njj(n.onDataLazyLoad(k))})("onEditComplete",function(k){return e.eBV(r),e.Njj(n.editComplete(k))}),e.DNE(5,fo,14,0,"ng-template",4)(6,mo,17,12,"ng-template",5)(7,vo,6,1,"ng-template",6),e.k0s(),e.DNE(8,Oo,2,8,"p-dialog",7)}2&o&&(e.R7$(3),e.Y8G("value",n.data)("lazy",!0)("tableStyle",e.lJ4(9,so))("paginator",!0)("rows",n.rows)("rowsPerPageOptions",e.lJ4(10,co))("totalRecords",n.totalRecords)("loading",n.loading),e.R7$(5),e.Y8G("ngIf",n.showScanBarcodeDialog))},dependencies:[l.Ei,h._f,h.$n,b.bT,ce.l,M.XI,M.Tg,M.$I,M.FP,M.yc,q.y8,b.vh]})}}return i})();var de=f(5558),Te=f(2102);const So=()=>[50,250,1e3],ko=()=>({"max-width":"300px"}),Eo=()=>({"min-width":"50rem"});function Io(i,s){if(1&i&&(e.j41(0,"div"),e.EFF(1),e.nI1(2,"number"),e.k0s(),e.j41(3,"div"),e.EFF(4),e.nI1(5,"number"),e.k0s(),e.j41(6,"div"),e.EFF(7),e.nI1(8,"number"),e.k0s(),e.j41(9,"div"),e.EFF(10),e.nI1(11,"number"),e.k0s()),2&i){const t=e.XpG().ngIf;e.R7$(),e.SpI("\u0421\u0443\u043c\u043c\u0430: ",e.i5U(2,4,t.sum,"1.2-2"),""),e.R7$(3),e.SpI("\u041d\u0430\u0447\u0438\u0441\u043b\u0435\u043d\u043e: ",e.i5U(5,7,t.accrual,"1.2-2"),""),e.R7$(3),e.SpI("\u041a\u043e\u043c\u0438\u0441\u0441\u0438\u044f: ",e.i5U(8,10,t.commission,"1.2-2"),""),e.R7$(3),e.SpI("\u041d\u0430\u0447\u0438\u0441\u043b\u0435\u043d\u043e \u0437\u0430 \u0432\u044b\u0447\u0435\u0442\u043e\u043c \u043a\u043e\u043c\u0438\u0441\u0441\u0438\u0438: ",e.i5U(11,13,t.accrual+t.commission,"1.2-2"),"")}}function Fo(i,s){if(1&i){const t=e.RV6();e.j41(0,"tr")(1,"th"),e.EFF(2,"ID"),e.k0s(),e.j41(3,"th"),e.EFF(4,"\u0414\u0430\u0442\u0430"),e.k0s(),e.j41(5,"th",11),e.EFF(6,"\u0421\u0443\u043c\u043c\u0430 "),e.nrm(7,"p-sortIcon",12),e.k0s(),e.j41(8,"th"),e.EFF(9,"\u0421\u0435\u0440\u0432\u0438\u0441\u044b"),e.k0s(),e.nrm(10,"th"),e.k0s(),e.j41(11,"tr"),e.nrm(12,"th")(13,"th")(14,"th"),e.j41(15,"th")(16,"p-multiSelect",13),e.mxI("ngModelChange",function(n){e.eBV(t);const r=e.XpG(2);return e.DH7(r.selectedServiceTypes,n)||(r.selectedServiceTypes=n),e.Njj(n)}),e.bIt("onChange",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.filterData())}),e.k0s()(),e.nrm(17,"th"),e.k0s()}if(2&i){const t=e.XpG(2);e.R7$(16),e.Aen(e.lJ4(4,ko)),e.R50("ngModel",t.selectedServiceTypes),e.Y8G("options",t.serviceTypes)}}function To(i,s){if(1&i&&(e.j41(0,"div")(1,"div",17)(2,"div"),e.EFF(3),e.k0s(),e.j41(4,"div"),e.EFF(5),e.nI1(6,"number"),e.k0s()()()),2&i){const t=s.$implicit,o=e.XpG(3);e.R7$(3),e.JRh(o.getOperationServiceType(t.type)),e.R7$(2),e.JRh(e.i5U(6,2,t.price,"1.2-2"))}}function Ro(i,s){if(1&i&&(e.j41(0,"tr",14)(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.nI1(5,"date"),e.k0s(),e.j41(6,"td")(7,"span",15),e.EFF(8,"\u0421\u0443\u043c\u043c\u0430"),e.k0s(),e.j41(9,"div"),e.EFF(10),e.nI1(11,"number"),e.k0s()(),e.j41(12,"td"),e.DNE(13,To,7,5,"div",16),e.k0s(),e.j41(14,"td"),e.EFF(15),e.k0s()()),2&i){const t=s.$implicit,o=e.XpG(2);e.Y8G("pRowToggler",t),e.R7$(2),e.SpI(" ",t.iD," "),e.R7$(2),e.SpI(" ",e.i5U(5,6,t.date,"y-MM-dd HH:mm")," "),e.R7$(6),e.SpI(" ",e.i5U(11,9,t.amount,"1.2-2"),"\u20bd "),e.R7$(3),e.Y8G("ngForOf",t.services),e.R7$(2),e.JRh(o.getOperationType(t.operationType))}}function xo(i,s){1&i&&(e.j41(0,"tr")(1,"th"),e.EFF(2,"\u0422\u0438\u043f"),e.k0s(),e.j41(3,"th"),e.EFF(4,"\u0421\u0443\u043c\u043c\u0430"),e.k0s()())}function wo(i,s){if(1&i&&(e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s()()),2&i){const t=s.$implicit,o=e.XpG(3);e.R7$(2),e.Lme("",o.getOperationServiceType(t.type),"",t.type,""),e.R7$(2),e.JRh(t.price)}}function Do(i,s){if(1&i&&(e.j41(0,"tr")(1,"td",18)(2,"h5"),e.EFF(3,"\u0421\u0435\u0440\u0432\u0438\u0441\u044b \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438"),e.k0s()()(),e.j41(4,"tr")(5,"td",18)(6,"p-table",19),e.DNE(7,xo,5,0,"ng-template",8)(8,wo,5,3,"ng-template",9),e.k0s()()()),2&i){const t=s.$implicit;e.R7$(6),e.Y8G("value",t.services)("breakpoint","960px")("tableStyle",e.lJ4(3,Eo))}}function jo(i,s){if(1&i){const t=e.RV6();e.j41(0,"div",5)(1,"p-table",6),e.bIt("onPage",function(n){e.eBV(t);const r=e.XpG();return e.Njj(r.pageChange(n))}),e.DNE(2,Io,12,16,"ng-template",7)(3,Fo,18,5,"ng-template",8)(4,Ro,16,12,"ng-template",9)(5,Do,9,4,"ng-template",10),e.k0s()()}if(2&i){const t=s.ngIf,o=e.XpG();e.R7$(),e.Y8G("value",t.items)("loading",o.loading)("totalRecords",t.totalCount)("paginator",!0)("showCurrentPageReport",!1)("rows",o.rows)("rowsPerPageOptions",e.lJ4(7,So))}}let Mo=(()=>{class i extends d.x{constructor(t,o,n,r,c){super(c),this.operationClient=t,this.messageService=o,this.operationCommandHandler=n,this.timeService=r,this.rows=50,this.isLoading=!1,this.serviceTypes=[],this.selectedServiceTypes=[],this.operationServiceTypes=Object.values(a.D.OperationServiceType),this.operationTypes=Object.values(a.D.OperationType),this.filteredData=new v.t(null),this.dataSubject=new v.t(null),this.filterSubject=new v.t(null),this.serviceTypes=Object.keys(a.D.OperationServiceType).map(k=>({type:k,text:a.D.OperationServiceType[k]})).sort((k,D)=>k.text>D.text?1:D.text>k.text?-1:0)}ngOnInit(){this.titleService.setTitle("\u0422\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0438 Ozon"),this.filterSubject.pipe((0,S.Q)(this.destroyed)).pipe((0,E.p)(t=>!!t)).pipe((0,de.n)(t=>this.operationClient.findOzonOperations(t).pipe((0,g.W)(o=>(this.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430",severity:"error",detail:o}),y.w))))).subscribe(t=>{this.dataSubject.next(t)}),this.dataSubject.pipe((0,S.Q)(this.destroyed)).pipe((0,E.p)(t=>!!t)).pipe((0,g.W)(t=>(this.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430",severity:"error",detail:t}),y.w))).subscribe(()=>{this.filterData()})}filterData(){const t=this.dataSubject.value,o=[];let n=0,r=0,c=0;if(t)for(const D of t.items){let x=!0;const j=Object.assign({},D);if(this.selectedServiceTypes.length){const L=j.services.filter(z=>this.selectedServiceTypes.find(R=>R==z.type));L.length?j.services=L:x=!1}x&&(o.push(j),r+=j.accrualsForSale,c+=j.saleCommission,n+=j.services.reduce((L,z)=>L+z.price,0)??0)}this.filteredData.next({totalCount:o.length,items:o,sum:n,commission:c,accrual:r})}importTransactions(){var t=this;return(0,O.A)(function*(){const[o,n]=[t.timeService.asUtc(t.dateRange?.[0]),t.timeService.asUtc(t.dateRange?.[1])];t.operationCommandHandler.importOzonOperations(o,n).pipe((0,g.W)(r=>(t.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430",severity:"error",detail:r}),y.w))).subscribe(()=>{t.messageService.add({summary:"\u0423\u0441\u043f\u0435\u0445",severity:"success",detail:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0439 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u0430"}),t.findTransactionsClick()})})()}findTransactionsClick(){const t=new a.D.FindOzonOperationsModel({dateFrom:this.timeService.asUtc(this.dateRange?.[0]),dateTo:this.timeService.asUtc(this.dateRange?.[1]),offset:0,count:this.rows});this.filterSubject.next(t)}getOperationServiceType(t){return this.operationServiceTypes[t]}getOperationType(t){return this.operationTypes[t]}static{this.\u0275fac=function(o){return new(o||i)(e.rXU(a.D.OperationClient),e.rXU(l.bg),e.rXU(u.X.OperationClient),e.rXU(Te.v),e.rXU(_.hE))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-ozon-transaction-list"]],features:[e.Vt3],decls:7,vars:7,consts:[["header","\u0422\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0438 Ozon"],["styleClass","m-1","selectionMode","range","placeholder","\u041f\u0435\u0440\u0438\u043e\u0434",3,"ngModelChange","ngModel","showClear","readonlyInput"],["styleClass","m-1","icon","pi pi-search","label","\u041d\u0430\u0439\u0442\u0438 \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0438",3,"click"],["styleClass","m-1","label","\u0418\u043c\u043f\u043e\u0440\u0442 \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0439",3,"click","icon"],["class","card",4,"ngIf"],[1,"card"],["responsiveLayout","stack","dataKey","iD",3,"onPage","value","loading","totalRecords","paginator","showCurrentPageReport","rows","rowsPerPageOptions"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","rowexpansion"],["pSortableColumn","sum"],["field","amount"],["appendTo","body","optionValue","type","optionLabel","text","placeholder","\u0412\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0435",3,"ngModelChange","onChange","ngModel","options"],[3,"pRowToggler"],[1,"p-column-title"],[4,"ngFor","ngForOf"],[1,"flex","justify-content-between"],["colspan","5"],["responsiveLayout","stack",3,"value","breakpoint","tableStyle"]],template:function(o,n){1&o&&(e.nrm(0,"p-toast"),e.j41(1,"p-card",0)(2,"p-calendar",1),e.mxI("ngModelChange",function(c){return e.DH7(n.dateRange,c)||(n.dateRange=c),c}),e.k0s(),e.j41(3,"p-button",2),e.bIt("click",function(){return n.findTransactionsClick()}),e.k0s(),e.j41(4,"p-button",3),e.bIt("click",function(){return n.importTransactions()}),e.k0s()(),e.DNE(5,jo,6,8,"div",4),e.nI1(6,"async")),2&o&&(e.R7$(2),e.R50("ngModel",n.dateRange),e.Y8G("showClear",!0)("readonlyInput",!0),e.R7$(2),e.Y8G("icon",n.isLoading?"pi pi-download":""),e.R7$(),e.Y8G("ngIf",e.bMT(6,5,n.filteredData)))},dependencies:[l.Ei,h.$n,I.Vv,T.Z,b.Sq,b.bT,F.BC,F.vS,oe,M.XI,M.Tg,M.FP,M.yc,q.y8,b.Jj,b.QX,b.vh]})}}return i})();const Po=()=>[8,15,30,50],Go=()=>({}),he=()=>({"min-width":"50rem"});function Bo(i,s){1&i&&(e.j41(0,"div",22)(1,"span",23),e.EFF(2,"\u0410\u0440\u0442\u0438\u043a\u0443\u043b\u044b"),e.k0s()())}function Lo(i,s){if(1&i){const t=e.RV6();e.j41(0,"p-multiSelect",24),e.bIt("onChange",function(n){const r=e.eBV(t).filterCallback;return e.Njj(r(n.value))}),e.k0s()}if(2&i){const t=s.$implicit,o=e.XpG(4);e.Y8G("ngModel",t)("filter",!1)("options",o.productPackageIDs)}}function zo(i,s){1&i&&(e.j41(0,"tr")(1,"th"),e.EFF(2," \u0422\u043e\u0432\u0430\u0440 "),e.j41(3,"p-columnFilter",15),e.DNE(4,Bo,3,0,"ng-template",12)(5,Lo,1,3,"ng-template",16),e.k0s()(),e.j41(6,"th",17),e.EFF(7,"\u0421\u0443\u043c\u043c\u0430 "),e.nrm(8,"p-sortIcon",18),e.k0s(),e.j41(9,"th",19),e.EFF(10,"\u0414\u0430\u0442\u0430 "),e.nrm(11,"p-sortIcon",20),e.k0s(),e.j41(12,"th"),e.EFF(13," \u2116 \u0437\u0430\u043a\u0430\u0437\u0430 "),e.nrm(14,"p-columnFilter",21),e.k0s()()),2&i&&(e.R7$(3),e.Y8G("showMatchModes",!1)("showOperator",!1)("showAddButton",!1),e.R7$(11),e.Y8G("showMatchModes",!1)("showOperator",!1))}function Ao(i,s){if(1&i&&(e.j41(0,"div")(1,"div"),e.EFF(2),e.k0s(),e.EFF(3),e.k0s()),2&i){const t=s.$implicit;e.R7$(2),e.JRh(t.product.name),e.R7$(),e.Lme(" ",t.product.productPackageID," x ",t.quantity," ")}}function $o(i,s){if(1&i&&(e.j41(0,"tr",25)(1,"td"),e.DNE(2,Ao,4,3,"div",26),e.k0s(),e.j41(3,"td")(4,"div"),e.EFF(5),e.nI1(6,"number"),e.k0s()(),e.j41(7,"td")(8,"div"),e.EFF(9),e.nI1(10,"date"),e.k0s()(),e.j41(11,"td")(12,"div"),e.EFF(13),e.k0s()()()),2&i){const t=s.$implicit;e.Y8G("pRowToggler",t),e.R7$(2),e.Y8G("ngForOf",t.orderItems),e.R7$(3),e.SpI(" ",e.i5U(6,5,t.sum,"1.2-2"),"\u20bd "),e.R7$(4),e.SpI(" ",e.i5U(10,8,t.date,"y-MM-dd HH:mm")," "),e.R7$(4),e.SpI(" ",t.ozonOrderNumber," ")}}function Vo(i,s){1&i&&(e.j41(0,"tr")(1,"th"),e.EFF(2,"\u0410\u0440\u0442\u0438\u043a\u0443\u043b"),e.k0s(),e.j41(3,"th"),e.EFF(4,"\u0426\u0435\u043d\u0430"),e.k0s(),e.j41(5,"th"),e.EFF(6,"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e"),e.k0s(),e.j41(7,"th"),e.EFF(8,"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435"),e.k0s()())}function No(i,s){if(1&i&&(e.j41(0,"tr")(1,"td")(2,"div")(3,"span",30),e.EFF(4,"\u0410\u0440\u0442\u0438\u043a\u0443\u043b"),e.k0s(),e.j41(5,"div"),e.EFF(6),e.k0s()()(),e.j41(7,"td")(8,"div")(9,"span",30),e.EFF(10,"\u0426\u0435\u043d\u0430"),e.k0s(),e.j41(11,"div"),e.EFF(12),e.nI1(13,"number"),e.k0s()()(),e.j41(14,"td")(15,"div")(16,"span",30),e.EFF(17,"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e"),e.k0s(),e.j41(18,"div"),e.EFF(19),e.k0s()()(),e.j41(20,"td")(21,"div")(22,"span",30),e.EFF(23,"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435"),e.k0s(),e.j41(24,"div"),e.EFF(25),e.k0s()()()()),2&i){const t=s.$implicit;e.R7$(6),e.SpI(" ",t.product.productPackageID," "),e.R7$(6),e.SpI(" ",e.i5U(13,4,t.price,"1.2-2"),"\u20bd "),e.R7$(7),e.SpI(" ",t.quantity," "),e.R7$(6),e.SpI(" ",t.product.name," ")}}function Xo(i,s){1&i&&(e.j41(0,"tr")(1,"th"),e.EFF(2,"ID"),e.k0s(),e.j41(3,"th"),e.EFF(4,"\u0414\u0430\u0442\u0430"),e.k0s(),e.j41(5,"th"),e.EFF(6,"\u0421\u0443\u043c\u043c\u0430"),e.k0s(),e.j41(7,"th"),e.EFF(8,"\u041a\u043e\u043c\u0438\u0441\u0441\u0438\u044f"),e.k0s(),e.j41(9,"th"),e.EFF(10,"\u0422\u0438\u043f \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438"),e.k0s(),e.j41(11,"th"),e.EFF(12,"\u0422\u0438\u043f \u043d\u0430\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u044f"),e.k0s()())}function Yo(i,s){if(1&i&&(e.j41(0,"tr")(1,"td")(2,"div")(3,"span",30),e.EFF(4,"ID"),e.k0s(),e.j41(5,"div"),e.EFF(6),e.k0s()()(),e.j41(7,"td")(8,"div")(9,"span",30),e.EFF(10,"\u0414\u0430\u0442\u0430"),e.k0s(),e.j41(11,"div"),e.EFF(12),e.nI1(13,"date"),e.k0s()()(),e.j41(14,"td")(15,"div")(16,"span",30),e.EFF(17,"\u0421\u0443\u043c\u043c\u0430"),e.k0s(),e.j41(18,"div"),e.EFF(19),e.nI1(20,"number"),e.k0s()()(),e.j41(21,"td")(22,"div")(23,"span",30),e.EFF(24,"\u041a\u043e\u043c\u0438\u0441\u0441\u0438\u044f"),e.k0s(),e.j41(25,"div"),e.EFF(26),e.nI1(27,"number"),e.k0s()()(),e.j41(28,"td")(29,"div")(30,"span",30),e.EFF(31,"\u0422\u0438\u043f \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438"),e.k0s(),e.j41(32,"div"),e.EFF(33),e.k0s()()(),e.j41(34,"td")(35,"div")(36,"span",30),e.EFF(37,"\u0422\u0438\u043f \u043d\u0430\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u044f"),e.k0s(),e.j41(38,"div"),e.EFF(39),e.k0s()()()()),2&i){const t=s.$implicit,o=e.XpG(7);e.R7$(6),e.SpI(" ",t.iD," "),e.R7$(6),e.SpI(" ",e.i5U(13,6,t.date,"y-MM-dd HH:mm")," "),e.R7$(7),e.SpI(" ",e.i5U(20,9,t.amount,"1.2-2"),"\u20bd "),e.R7$(7),e.SpI(" ",e.i5U(27,12,t.saleCommission,"1.2-2"),"\u20bd "),e.R7$(7),e.SpI(" ",o.getOperationTypeText(t.operationType)," "),e.R7$(6),e.SpI(" ",o.getTransactionTypeText(t.accrualType)," ")}}function Ho(i,s){if(1&i&&(e.qex(0),e.j41(1,"tr")(2,"td",28)(3,"h5"),e.EFF(4,"\u041e\u043f\u0435\u0440\u0430\u0446\u0438\u0438 \u043f\u043e \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044e"),e.k0s()()(),e.j41(5,"tr")(6,"td",28)(7,"p-table",29),e.DNE(8,Xo,13,0,"ng-template",12)(9,Yo,40,15,"ng-template",13),e.k0s()()(),e.bVm()),2&i){const t=e.XpG().$implicit;e.R7$(7),e.Y8G("value",t.operations)("breakpoint","960px")("tableStyle",e.lJ4(3,he))}}function Uo(i,s){if(1&i&&(e.qex(0),e.j41(1,"tr")(2,"td",28)(3,"p-table",29),e.DNE(4,Vo,9,0,"ng-template",12)(5,No,26,7,"ng-template",13),e.k0s()()(),e.DNE(6,Ho,10,4,"ng-container",27),e.bVm()),2&i){const t=s.$implicit;e.R7$(3),e.Y8G("value",t.orderItems)("breakpoint","960px")("tableStyle",e.lJ4(4,he)),e.R7$(3),e.Y8G("ngIf",null==t.operations?null:t.operations.length)}}function Wo(i,s){if(1&i&&(e.qex(0),e.j41(1,"tr")(2,"td",28)(3,"h5"),e.EFF(4,"\u0421\u043e\u0441\u0442\u0430\u0432 \u0437\u0430\u043a\u0430\u0437\u0430"),e.k0s()()(),e.DNE(5,Uo,7,5,"ng-container",26),e.bVm()),2&i){const t=e.XpG().$implicit;e.R7$(5),e.Y8G("ngForOf",t.orderItems)}}function Jo(i,s){1&i&&(e.j41(0,"tr")(1,"th"),e.EFF(2,"ID"),e.k0s(),e.j41(3,"th"),e.EFF(4,"\u0414\u0430\u0442\u0430"),e.k0s(),e.j41(5,"th"),e.EFF(6,"\u0421\u0443\u043c\u043c\u0430"),e.k0s(),e.j41(7,"th"),e.EFF(8,"\u041a\u043e\u043c\u0438\u0441\u0441\u0438\u044f"),e.k0s(),e.j41(9,"th"),e.EFF(10,"\u0422\u0438\u043f \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438"),e.k0s(),e.j41(11,"th"),e.EFF(12,"\u0422\u0438\u043f \u043d\u0430\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u044f"),e.k0s()())}function Ko(i,s){if(1&i&&(e.j41(0,"tr")(1,"td")(2,"div")(3,"span",30),e.EFF(4,"ID"),e.k0s(),e.j41(5,"div"),e.EFF(6),e.k0s()()(),e.j41(7,"td")(8,"div")(9,"span",30),e.EFF(10,"\u0414\u0430\u0442\u0430"),e.k0s(),e.j41(11,"div"),e.EFF(12),e.nI1(13,"date"),e.k0s()()(),e.j41(14,"td")(15,"div")(16,"span",30),e.EFF(17,"\u0421\u0443\u043c\u043c\u0430"),e.k0s(),e.j41(18,"div"),e.EFF(19),e.nI1(20,"number"),e.k0s()()(),e.j41(21,"td")(22,"div")(23,"span",30),e.EFF(24,"\u041a\u043e\u043c\u0438\u0441\u0441\u0438\u044f"),e.k0s(),e.j41(25,"div"),e.EFF(26),e.nI1(27,"number"),e.k0s()()(),e.j41(28,"td")(29,"div")(30,"span",30),e.EFF(31,"\u0422\u0438\u043f \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438"),e.k0s(),e.j41(32,"div"),e.EFF(33),e.k0s()()(),e.j41(34,"td")(35,"div")(36,"span",30),e.EFF(37,"\u0422\u0438\u043f \u043d\u0430\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u044f"),e.k0s(),e.j41(38,"div"),e.EFF(39),e.k0s()()()()),2&i){const t=s.$implicit,o=e.XpG(5);e.R7$(6),e.SpI(" ",t.iD," "),e.R7$(6),e.SpI(" ",e.i5U(13,6,t.date,"y-MM-dd HH:mm")," "),e.R7$(7),e.SpI(" ",e.i5U(20,9,t.amount,"1.2-2"),"\u20bd "),e.R7$(7),e.SpI(" ",e.i5U(27,12,t.saleCommission,"1.2-2"),"\u20bd "),e.R7$(7),e.SpI(" ",o.getOperationTypeText(t.operationType)," "),e.R7$(6),e.SpI(" ",o.getTransactionTypeText(t.accrualType)," ")}}function qo(i,s){if(1&i&&(e.qex(0),e.j41(1,"tr")(2,"td",28)(3,"h5"),e.EFF(4,"\u041e\u043f\u0435\u0440\u0430\u0446\u0438\u0438 \u043f\u043e \u0437\u0430\u043a\u0430\u0437\u0443"),e.k0s()()(),e.j41(5,"tr")(6,"td",28)(7,"p-table",31),e.DNE(8,Jo,13,0,"ng-template",12)(9,Ko,40,15,"ng-template",13),e.k0s()()(),e.bVm()),2&i){const t=e.XpG().$implicit;e.R7$(7),e.Y8G("value",t.operations)("breakpoint","960px")("tableStyle",e.lJ4(3,he))}}function Qo(i,s){if(1&i&&e.DNE(0,Wo,6,1,"ng-container",27)(1,qo,10,4,"ng-container",27),2&i){const t=s.$implicit;e.Y8G("ngIf",null==t.orderItems?null:t.orderItems.length),e.R7$(),e.Y8G("ngIf",null==t.operations?null:t.operations.length)}}function Zo(i,s){if(1&i&&(e.j41(0,"p-table",11),e.DNE(1,zo,15,5,"ng-template",12)(2,$o,14,11,"ng-template",13)(3,Qo,2,2,"ng-template",14),e.k0s()),2&i){const t=e.XpG(2);e.Y8G("value",t.data)("loading",t.loading)("paginator",!0)("showCurrentPageReport",!1)("rows",8)("rowsPerPageOptions",e.lJ4(7,Po))("tableStyle",e.lJ4(8,Go))}}function ea(i,s){if(1&i&&(e.j41(0,"div",3)(1,"div",4)(2,"div",5)(3,"div",6)(4,"div",7)(5,"div")(6,"div",8)(7,"span"),e.EFF(8,"\u0421\u0443\u043c\u043c\u0430 \u043f\u0440\u043e\u0434\u0430\u0436"),e.k0s(),e.j41(9,"span"),e.EFF(10),e.nI1(11,"number"),e.k0s()()()(),e.j41(12,"div",7)(13,"div")(14,"div",8)(15,"span"),e.EFF(16,"\u041a\u043e\u043c\u0438\u0441\u0441\u0438\u044f"),e.k0s(),e.j41(17,"span"),e.EFF(18),e.nI1(19,"number"),e.nI1(20,"number"),e.k0s()()()(),e.j41(21,"div",7)(22,"div")(23,"div",8)(24,"span"),e.EFF(25,"\u0412\u043e\u0437\u0432\u0440\u0430\u0442\u044b"),e.k0s(),e.j41(26,"span"),e.EFF(27),e.nI1(28,"number"),e.nI1(29,"number"),e.k0s()()()(),e.j41(30,"div",7)(31,"div")(32,"div",8)(33,"span"),e.EFF(34,"\u0421\u0435\u0440\u0432\u0438\u0441\u044b"),e.k0s(),e.j41(35,"span"),e.EFF(36),e.nI1(37,"number"),e.nI1(38,"number"),e.k0s()()()(),e.j41(39,"div",7)(40,"div")(41,"div",8)(42,"span"),e.EFF(43,"\u0421\u0435\u0440\u0432\u0438\u0441\u044b \u0437\u0430\u043a\u0430\u0437\u043e\u0432"),e.k0s(),e.j41(44,"span"),e.EFF(45),e.nI1(46,"number"),e.nI1(47,"number"),e.k0s()()()()()(),e.j41(48,"div",5)(49,"div",6)(50,"div",7)(51,"div",9),e.EFF(52,"\u0417\u0430\u043a\u0430\u0437\u044b"),e.k0s(),e.j41(53,"div")(54,"div",8)(55,"span"),e.EFF(56,"\u0417\u0430\u043a\u0430\u0437\u043e\u0432"),e.k0s(),e.j41(57,"span"),e.EFF(58),e.k0s()()(),e.j41(59,"div",8)(60,"span"),e.EFF(61,"\u0422\u043e\u0432\u0430\u0440\u043e\u0432"),e.k0s(),e.j41(62,"span"),e.EFF(63),e.k0s()(),e.j41(64,"div",8)(65,"span"),e.EFF(66,"\u041e\u0442\u043c\u0435\u043d"),e.k0s(),e.j41(67,"span"),e.EFF(68),e.k0s()(),e.j41(69,"div",8)(70,"span"),e.EFF(71,"\u0421\u0443\u043c\u043c\u0430 \u043e\u0442\u043c\u0435\u043d"),e.k0s(),e.j41(72,"span"),e.EFF(73),e.k0s()(),e.j41(74,"div",8)(75,"span"),e.EFF(76,"\u0412\u043e\u0437\u0432\u0440\u0430\u0442\u043e\u0432"),e.k0s(),e.j41(77,"span"),e.EFF(78),e.k0s()(),e.j41(79,"div",8)(80,"span"),e.EFF(81,"\u0421\u0443\u043c\u043c\u0430 \u0432\u043e\u0437\u0432\u0440\u0430\u0442\u043e\u0432"),e.k0s(),e.j41(82,"span"),e.EFF(83),e.k0s()()()()()(),e.DNE(84,Zo,4,9,"p-table",10),e.k0s()),2&i){const t=e.XpG();e.R7$(10),e.SpI("",e.i5U(11,16,t.summary.totalSum,"1.2-2"),"\u20bd"),e.R7$(8),e.Lme("",e.i5U(19,19,t.summary.commission,"1.2-2"),"\u20bd (",e.i5U(20,22,t.summary.totalSum+t.summary.commission,"1.2-2"),"\u20bd)"),e.R7$(9),e.Lme(" ",e.i5U(28,25,t.summary.returnedSum,"1.2-2"),"\u20bd (",e.i5U(29,28,t.summary.returnedProductCount+t.summary.totalSum+t.summary.commission-t.summary.returnedSum,"1.2-2"),"\u20bd) "),e.R7$(9),e.Lme("",e.i5U(37,31,t.summary.serviceTotalSum,"1.2-2"),"\u20bd (",e.i5U(38,34,t.summary.totalSum+t.summary.commission+t.summary.serviceTotalSum,"1.2-2"),"\u20bd)"),e.R7$(9),e.Lme("",e.i5U(46,37,t.summary.orderServiceTotalSum,"1.2-2"),"\u20bd (",e.i5U(47,40,t.summary.totalSum+t.summary.commission+t.summary.serviceTotalSum+t.summary.orderServiceTotalSum,"1.2-2"),"\u20bd)"),e.R7$(13),e.JRh(t.summary.totalOrderCount),e.R7$(5),e.JRh(t.summary.totalProductCount),e.R7$(5),e.JRh(t.summary.cancelledProductCount),e.R7$(5),e.JRh(t.summary.cancelledSum),e.R7$(5),e.JRh(t.summary.returnedProductCount),e.R7$(5),e.JRh(t.summary.returnedSum),e.R7$(),e.Y8G("ngIf",t.data)}}let ta=(()=>{class i extends d.x{constructor(t,o,n,r){super(r),this.ozonSalesOrderClient=t,this.messageService=o,this.timeService=n,this.data=[],this.excludedDates=[],this.productPackageIDs=[],this.loading=!1}ngOnInit(){this.titleService.setTitle("\u0421\u0432\u0435\u0440\u043a\u0430 \u0441 Ozon")}getDateRange(){const t=this.timeService.asUtc(this.date),o=new Date(t),n=new Date(t);return n.setMonth(n.getMonth()+1),[o,n]}prepareReport(){this.loading=!0;const[t,o]=this.getDateRange(),n=new Date(t);n.setMonth(n.getMonth()-1),this.ozonSalesOrderClient.findSalesOzonOrders(new a.D.FindOzonSalesOrdersModel({dateFrom:n,dateTo:o,offset:0,count:100})).pipe((0,S.Q)(this.destroyed)).pipe((0,g.W)(r=>(this.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430",severity:"error",detail:r}),this.loading=!1,y.w))).subscribe(r=>{this.data=r.items.filter(x=>x.operations.reduce((j,L)=>j||=L.operationType==a.D.OperationType.OperationAgentDeliveredToCustomer&&(!t||L.date>=t)&&(!o||L.date<o),!1));const c={totalOrderCount:0,totalSum:0,totalProductCount:0,sumWithCommission:0,commission:0,orderServiceTotalSum:0,orderServiceTotalCount:0,serviceTotalSum:0,cancelledProductCount:0,returnedProductCount:0,cancelledSum:0,returnedSum:0,services:{},orderServices:{}},k={},D=[];for(const x of r.items){const j=x.operations.filter(z=>(!t||z.date>=t)&&(!o||z.date<o)),L=!!j.length;for(const z of j)if(z.postingNumber==x.ozonOrderNumber)for(const R of z.services)c.orderServices[R.type]=R.price+c.services[R.type],c.orderServiceTotalSum+=R.price,c.orderServiceTotalCount++,D.push(R.price);if(L){for(const z of x.orderItems){const R=[];k[z.product.productPackageID]||(k[z.product.productPackageID]={prices:{},operations:[]});const te=k[z.product.productPackageID];te.prices[z.price]||(te.prices[z.price]={quantity:0,sum:0,commission:0});const K=te.prices[z.price];K.quantity+=z.quantity,K.sum+=z.quantity*z.price;for(const H of j)if(H.postingNumber==z.postingNumber)switch(R.push(H),H.operationType){case a.D.OperationType.OperationAgentDeliveredToCustomer:c.totalProductCount+=z.quantity,K.commission+=H.saleCommission,c.commission+=H.saleCommission,c.totalSum+=z.price*z.quantity;for(const W of H.services)c.services[W.type]=W.price+(c.services[W.type]??0),c.serviceTotalSum+=W.price;break;case a.D.OperationType.ClientReturnAgentOperation:K.commission+=H.saleCommission,c.commission+=H.saleCommission,c.returnedProductCount+=z.quantity,c.returnedSum+=H.amount,c.totalSum-=z.price*z.quantity;for(const W of H.services)c.services[W.type]=W.price+(c.services[W.type]??0),c.serviceTotalSum+=W.price;break;case a.D.OperationType.OperationItemReturn:c.commission+=H.saleCommission,c.cancelledProductCount+=z.quantity;for(const W of H.services)c.services[W.type]=W.price+(c.services[W.type]??0),c.serviceTotalSum+=W.price;break;default:console.log("x",H)}}c.totalOrderCount++}}this.summary=c,this.loading=!1})}static{this.\u0275fac=function(o){return new(o||i)(e.rXU(a.D.OzonSalesOrderClient),e.rXU(l.bg),e.rXU(Te.v),e.rXU(_.hE))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-sales-reconciliation-report"]],features:[e.Vt3],decls:4,vars:4,consts:[["header","\u0421\u0432\u0435\u0440\u043a\u0430 Ozon"],["selectionMode","single","view","month","dateFormat","yy-mm","placeholder","\u041f\u0435\u0440\u0438\u043e\u0434",3,"ngModelChange","onSelect","ngModel","disabledDates","readonlyInput"],["class","card",4,"ngIf"],[1,"card"],[1,"grid"],[1,"col-12","md:col-6"],[1,"card","text-right"],[1,"text-900","font-medium","text-xl","mb-3"],[1,"flex","justify-content-between"],[1,"text-500","text-center"],["responsiveLayout","stack","dataKey","iD",3,"value","loading","paginator","showCurrentPageReport","rows","rowsPerPageOptions","tableStyle",4,"ngIf"],["responsiveLayout","stack","dataKey","iD",3,"value","loading","paginator","showCurrentPageReport","rows","rowsPerPageOptions","tableStyle"],["pTemplate","header"],["pTemplate","body"],["pTemplate","rowexpansion"],["field","product","matchMode","intersects","display","menu",3,"showMatchModes","showOperator","showAddButton"],["pTemplate","filter"],["pSortableColumn","sum"],["field","sum"],["pSortableColumn","date"],["field","date"],["field","ozonOrderNumber","matchMode","contains","display","menu",3,"showMatchModes","showOperator"],[1,"px-3","pt-3","pb-0"],[1,"font-bold"],["placeholder","\u0412\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0435",3,"onChange","ngModel","filter","options"],[3,"pRowToggler"],[4,"ngFor","ngForOf"],[4,"ngIf"],["colspan","4"],["responsiveLayout","stack",3,"value","breakpoint","tableStyle"],[1,"p-column-title","font-bold"],["dataKey","iD","responsiveLayout","stack",3,"value","breakpoint","tableStyle"]],template:function(o,n){1&o&&(e.nrm(0,"p-toast"),e.j41(1,"p-card",0)(2,"p-calendar",1),e.mxI("ngModelChange",function(c){return e.DH7(n.date,c)||(n.date=c),c}),e.bIt("onSelect",function(){return n.prepareReport()}),e.k0s()(),e.DNE(3,ea,85,43,"div",2)),2&o&&(e.R7$(2),e.R50("ngModel",n.date),e.Y8G("disabledDates",n.excludedDates)("readonlyInput",!0),e.R7$(),e.Y8G("ngIf",n.summary))},dependencies:[l.Ei,I.Vv,T.Z,b.Sq,b.bT,F.BC,F.vS,oe,M.XI,M.Tg,M.FP,M.yc,M.rl,q.y8,b.QX,b.vh]})}}return i})();var ge=f(8805);const na=["inputtext"],ia=["container"],oa=(i,s,t,o)=>({"p-chips p-component p-input-wrapper":!0,"p-disabled":i,"p-focus":s,"p-inputwrapper-filled":t,"p-inputwrapper-focus":o}),aa=i=>({"p-inputtext p-chips-multiple-container":!0,"p-variant-filled":i}),ra=i=>({"p-chips-clearable":i}),la=i=>({"p-chips-token":!0,"p-focus":i}),ua=i=>({$implicit:i});function sa(i,s){1&i&&e.eu8(0)}function ca(i,s){if(1&i&&(e.j41(0,"span",12),e.EFF(1),e.k0s()),2&i){const t=e.XpG().$implicit,o=e.XpG();e.BMQ("data-pc-section","label"),e.R7$(),e.JRh(o.field?o.resolveFieldData(t,o.field):t)}}function pa(i,s){if(1&i){const t=e.RV6();e.j41(0,"TimesCircleIcon",15),e.bIt("click",function(n){e.eBV(t);const r=e.XpG(2).index,c=e.XpG();return e.Njj(c.removeItem(n,r))}),e.k0s()}2&i&&(e.Y8G("styleClass","p-chips-token-icon"),e.BMQ("data-pc-section","removeTokenIcon")("aria-hidden",!0))}function da(i,s){}function _a(i,s){1&i&&e.DNE(0,da,0,0,"ng-template")}function fa(i,s){if(1&i){const t=e.RV6();e.j41(0,"span",16),e.bIt("click",function(n){e.eBV(t);const r=e.XpG(2).index,c=e.XpG();return e.Njj(c.removeItem(n,r))}),e.DNE(1,_a,1,0,null,17),e.k0s()}if(2&i){const t=e.XpG(3);e.BMQ("data-pc-section","removeTokenIcon")("aria-hidden",!0),e.R7$(),e.Y8G("ngTemplateOutlet",t.removeTokenIconTemplate)}}function ma(i,s){if(1&i&&(e.qex(0),e.DNE(1,pa,1,3,"TimesCircleIcon",13)(2,fa,2,3,"span",14),e.bVm()),2&i){const t=e.XpG(2);e.R7$(),e.Y8G("ngIf",!t.removeTokenIconTemplate),e.R7$(),e.Y8G("ngIf",t.removeTokenIconTemplate)}}function ha(i,s){if(1&i){const t=e.RV6();e.j41(0,"li",9,2),e.bIt("click",function(n){const r=e.eBV(t).$implicit,c=e.XpG();return e.Njj(c.onItemClick(n,r))})("contextmenu",function(n){const r=e.eBV(t).$implicit,c=e.XpG();return e.Njj(c.onItemContextMenu(n,r))}),e.DNE(2,sa,1,0,"ng-container",10)(3,ca,2,2,"span",11)(4,ma,3,2,"ng-container",8),e.k0s()}if(2&i){const t=s.$implicit,o=s.index,n=e.XpG();e.Y8G("ngClass",e.eq3(12,la,n.focusedIndex===o)),e.BMQ("id",n.id+"_chips_item_"+o)("ariaLabel",t)("aria-selected",!0)("aria-setsize",n.value.length)("aria-posinset",o+1)("data-p-focused",n.focusedIndex===o)("data-pc-section","token"),e.R7$(2),e.Y8G("ngTemplateOutlet",n.itemTemplate)("ngTemplateOutletContext",e.eq3(14,ua,t)),e.R7$(),e.Y8G("ngIf",!n.itemTemplate),e.R7$(),e.Y8G("ngIf",!n.disabled)}}function ga(i,s){if(1&i){const t=e.RV6();e.j41(0,"TimesIcon",15),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.clear())}),e.k0s()}2&i&&e.Y8G("styleClass","p-chips-clear-icon")}function ba(i,s){}function va(i,s){1&i&&e.DNE(0,ba,0,0,"ng-template")}function ya(i,s){if(1&i){const t=e.RV6();e.j41(0,"span",19),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.clear())}),e.DNE(1,va,1,0,null,17),e.k0s()}if(2&i){const t=e.XpG(2);e.R7$(),e.Y8G("ngTemplateOutlet",t.clearIconTemplate)}}function Oa(i,s){if(1&i&&(e.j41(0,"li"),e.DNE(1,ga,1,1,"TimesIcon",13)(2,ya,2,1,"span",18),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.Y8G("ngIf",!t.clearIconTemplate),e.R7$(),e.Y8G("ngIf",t.clearIconTemplate)}}const Ca={provide:F.kq,useExisting:(0,e.Rfq)(()=>Re),multi:!0};let Re=(()=>{class i{document;el;cd;config;style;styleClass;disabled;field;placeholder;max;maxLength;ariaLabel;ariaLabelledBy;tabindex;inputId;allowDuplicate=!0;caseSensitiveDuplication=!0;inputStyle;inputStyleClass;addOnTab;addOnBlur;separator;showClear=!1;autofocus;variant="outlined";onAdd=new e.bkB;onRemove=new e.bkB;onFocus=new e.bkB;onBlur=new e.bkB;onChipClick=new e.bkB;onChipContextMenu=new e.bkB;onClear=new e.bkB;inputViewChild;containerViewChild;templates;itemTemplate;removeTokenIconTemplate;clearIconTemplate;value;onModelChange=()=>{};onModelTouched=()=>{};valueChanged;id=(0,B._Y)();focused;focusedIndex;filled;get focusedOptionId(){return null!==this.focusedIndex?`${this.id}_chips_item_${this.focusedIndex}`:null}get isMaxedOut(){return this.max&&this.value&&this.max===this.value.length}constructor(t,o,n,r){this.document=t,this.el=o,this.cd=n,this.config=r}ngAfterContentInit(){this.templates.forEach(t=>{switch(t.getType()){case"item":default:this.itemTemplate=t.template;break;case"removetokenicon":this.removeTokenIconTemplate=t.template;break;case"clearicon":this.clearIconTemplate=t.template}}),this.updateFilledState()}onWrapperClick(){this.inputViewChild?.nativeElement.focus()}onContainerFocus(){this.focused=!0}onContainerBlur(){this.focusedIndex=-1,this.focused=!1}onContainerKeyDown(t){switch(t.code){case"ArrowLeft":this.onArrowLeftKeyOn();break;case"ArrowRight":this.onArrowRightKeyOn();break;case"Backspace":this.onBackspaceKeyOn(t);break;case"Space":null!==this.focusedIndex&&this.value&&this.value.length>0&&this.onItemClick(t,this.value[this.focusedIndex])}}onArrowLeftKeyOn(){0===this.inputViewChild.nativeElement.value.length&&this.value&&this.value.length>0&&(this.focusedIndex=null===this.focusedIndex?this.value.length-1:this.focusedIndex-1,this.focusedIndex<0&&(this.focusedIndex=0))}onArrowRightKeyOn(){0===this.inputViewChild.nativeElement.value.length&&this.value&&this.value.length>0&&(this.focusedIndex===this.value.length-1?(this.focusedIndex=null,this.inputViewChild?.nativeElement.focus()):this.focusedIndex++)}onBackspaceKeyOn(t){null!==this.focusedIndex&&this.removeItem(t,this.focusedIndex)}onInput(){this.updateFilledState(),this.focusedIndex=null}onPaste(t){this.disabled||(this.separator&&((t.clipboardData||this.document.defaultView.clipboardData).getData("Text").split(this.separator).forEach(n=>{this.addItem(t,n,!0)}),this.inputViewChild.nativeElement.value=""),this.updateFilledState())}updateFilledState(){this.filled=!(!this.value||0===this.value.length)||this.inputViewChild&&this.inputViewChild.nativeElement&&""!=this.inputViewChild.nativeElement.value}onItemClick(t,o){this.onChipClick.emit({originalEvent:t,value:o})}onItemContextMenu(t,o){this.onChipContextMenu.emit({originalEvent:t,value:o})}writeValue(t){this.value=t,this.updateMaxedOut(),this.updateFilledState(),this.cd.markForCheck()}registerOnChange(t){this.onModelChange=t}registerOnTouched(t){this.onModelTouched=t}setDisabledState(t){this.disabled=t,this.cd.markForCheck()}resolveFieldData(t,o){if(t&&o){if(-1==o.indexOf("."))return t[o];{let c=o.split("."),k=t;for(var n=0,r=c.length;n<r;++n)k=k[c[n]];return k}}return null}onInputFocus(t){this.focused=!0,this.focusedIndex=null,this.onFocus.emit(t)}onInputBlur(t){this.focused=!1,this.focusedIndex=null,this.addOnBlur&&this.inputViewChild.nativeElement.value&&this.addItem(t,this.inputViewChild.nativeElement.value,!1),this.onModelTouched(),this.onBlur.emit(t)}removeItem(t,o){if(this.disabled)return;let n=this.value[o];this.value=this.value.filter((r,c)=>c!=o),this.focusedIndex=null,this.inputViewChild.nativeElement.focus(),this.onModelChange(this.value),this.onRemove.emit({originalEvent:t,value:n}),this.updateFilledState(),this.updateMaxedOut()}addItem(t,o,n){if(this.value=this.value||[],o&&o.trim().length){const r=this.caseSensitiveDuplication?this.value.includes(o):this.value.some(c=>c.toLowerCase()===o.toLowerCase());(this.allowDuplicate||!r)&&!this.isMaxedOut&&(this.value=[...this.value,o],this.onModelChange(this.value),this.onAdd.emit({originalEvent:t,value:o}))}this.updateFilledState(),this.updateMaxedOut(),this.inputViewChild.nativeElement.value="",n&&t.preventDefault()}clear(){this.value=null,this.updateFilledState(),this.onModelChange(this.value),this.updateMaxedOut(),this.onClear.emit()}onKeyDown(t){const o=t.target.value;switch(t.code){case"Backspace":0===o.length&&this.value&&this.value.length>0&&this.removeItem(t,null!==this.focusedIndex?this.focusedIndex:this.value.length-1);break;case"Enter":case"NumpadEnter":o&&o.trim().length&&!this.isMaxedOut&&this.addItem(t,o,!0);break;case"Tab":this.addOnTab&&o&&o.trim().length&&!this.isMaxedOut&&(this.addItem(t,o,!0),t.preventDefault());break;case"ArrowLeft":0===o.length&&this.value&&this.value.length>0&&this.containerViewChild?.nativeElement.focus();break;case"ArrowRight":t.stopPropagation();break;default:this.separator&&(this.separator===t.key||t.key.match(this.separator))&&this.addItem(t,o,!0)}}updateMaxedOut(){this.inputViewChild&&this.inputViewChild.nativeElement&&(this.isMaxedOut?(this.inputViewChild.nativeElement.blur(),this.inputViewChild.nativeElement.disabled=!0):(this.disabled&&this.inputViewChild.nativeElement.blur(),this.inputViewChild.nativeElement.disabled=this.disabled||!1))}static \u0275fac=function(o){return new(o||i)(e.rXU(b.qQ),e.rXU(e.aKT),e.rXU(e.gRc),e.rXU(l.r1))};static \u0275cmp=e.VBU({type:i,selectors:[["p-chips"]],contentQueries:function(o,n,r){if(1&o&&e.wni(r,l.Ei,4),2&o){let c;e.mGM(c=e.lsd())&&(n.templates=c)}},viewQuery:function(o,n){if(1&o&&(e.GBs(na,5),e.GBs(ia,5)),2&o){let r;e.mGM(r=e.lsd())&&(n.inputViewChild=r.first),e.mGM(r=e.lsd())&&(n.containerViewChild=r.first)}},hostAttrs:[1,"p-element","p-inputwrapper"],hostVars:6,hostBindings:function(o,n){2&o&&e.AVh("p-inputwrapper-filled",n.filled)("p-inputwrapper-focus",n.focused)("p-chips-clearable",n.showClear)},inputs:{style:"style",styleClass:"styleClass",disabled:[2,"disabled","disabled",e.L39],field:"field",placeholder:"placeholder",max:[2,"max","max",e.Udg],maxLength:"maxLength",ariaLabel:"ariaLabel",ariaLabelledBy:"ariaLabelledBy",tabindex:[2,"tabindex","tabindex",e.Udg],inputId:"inputId",allowDuplicate:[2,"allowDuplicate","allowDuplicate",e.L39],caseSensitiveDuplication:[2,"caseSensitiveDuplication","caseSensitiveDuplication",e.L39],inputStyle:"inputStyle",inputStyleClass:"inputStyleClass",addOnTab:[2,"addOnTab","addOnTab",e.L39],addOnBlur:[2,"addOnBlur","addOnBlur",e.L39],separator:"separator",showClear:[2,"showClear","showClear",e.L39],autofocus:[2,"autofocus","autofocus",e.L39],variant:"variant"},outputs:{onAdd:"onAdd",onRemove:"onRemove",onFocus:"onFocus",onBlur:"onBlur",onChipClick:"onChipClick",onChipContextMenu:"onChipContextMenu",onClear:"onClear"},features:[e.Jv_([Ca]),e.GFd],decls:8,vars:34,consts:[["container",""],["inputtext",""],["token",""],[3,"ngClass","ngStyle"],["tabindex","-1","role","listbox",3,"click","focus","blur","keydown","ngClass"],["role","option",3,"ngClass","click","contextmenu",4,"ngFor","ngForOf"],["role","option",1,"p-chips-input-token",3,"ngClass"],["type","text","pAutoFocus","",3,"keydown","input","paste","focus","blur","disabled","ngStyle","autofocus"],[4,"ngIf"],["role","option",3,"click","contextmenu","ngClass"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["class","p-chips-token-label",4,"ngIf"],[1,"p-chips-token-label"],[3,"styleClass","click",4,"ngIf"],["class","p-chips-token-icon",3,"click",4,"ngIf"],[3,"click","styleClass"],[1,"p-chips-token-icon",3,"click"],[4,"ngTemplateOutlet"],["class","p-chips-clear-icon",3,"click",4,"ngIf"],[1,"p-chips-clear-icon",3,"click"]],template:function(o,n){if(1&o){const r=e.RV6();e.j41(0,"div",3)(1,"ul",4,0),e.bIt("click",function(){return e.eBV(r),e.Njj(n.onWrapperClick())})("focus",function(){return e.eBV(r),e.Njj(n.onContainerFocus())})("blur",function(){return e.eBV(r),e.Njj(n.onContainerBlur())})("keydown",function(k){return e.eBV(r),e.Njj(n.onContainerKeyDown(k))}),e.DNE(3,ha,5,16,"li",5),e.j41(4,"li",6)(5,"input",7,1),e.bIt("keydown",function(k){return e.eBV(r),e.Njj(n.onKeyDown(k))})("input",function(){return e.eBV(r),e.Njj(n.onInput())})("paste",function(k){return e.eBV(r),e.Njj(n.onPaste(k))})("focus",function(k){return e.eBV(r),e.Njj(n.onInputFocus(k))})("blur",function(k){return e.eBV(r),e.Njj(n.onInputBlur(k))}),e.k0s()(),e.DNE(7,Oa,3,2,"li",8),e.k0s()()}2&o&&(e.HbH(n.styleClass),e.Y8G("ngClass",e.ziG(25,oa,n.disabled,n.focused,n.value&&n.value.length||(null==n.inputViewChild?null:n.inputViewChild.nativeElement.value)&&(null==n.inputViewChild?null:n.inputViewChild.nativeElement.value.length),n.focused))("ngStyle",n.style),e.BMQ("data-pc-name","chips")("data-pc-section","root"),e.R7$(),e.Y8G("ngClass",e.eq3(30,aa,"filled"===n.variant||"filled"===n.config.inputStyle())),e.BMQ("aria-labelledby",n.ariaLabelledBy)("aria-label",n.ariaLabel)("aria-activedescendant",n.focused?n.focusedOptionId:void 0)("aria-orientation","horizontal")("data-pc-section","container"),e.R7$(2),e.Y8G("ngForOf",n.value),e.R7$(),e.Y8G("ngClass",e.eq3(32,ra,n.showClear&&!n.disabled)),e.BMQ("data-pc-section","inputToken"),e.R7$(),e.HbH(n.inputStyleClass),e.Y8G("disabled",n.disabled||n.isMaxedOut)("ngStyle",n.inputStyle)("autofocus",n.autofocus),e.BMQ("id",n.inputId)("maxlength",n.maxLength)("placeholder",n.value&&n.value.length?null:n.placeholder)("tabindex",n.tabindex),e.R7$(2),e.Y8G("ngIf",null!=n.value&&n.filled&&!n.disabled&&n.showClear))},dependencies:()=>[b.YU,b.Sq,b.bT,b.T3,b.B3,Y.q,V.I,A.A],styles:["@layer primeng{.p-chips{display:inline-flex}.p-chips-multiple-container{margin:0;padding:0;list-style-type:none;cursor:text;overflow:hidden;display:flex;align-items:center;flex-wrap:wrap}.p-chips-token{cursor:default;display:inline-flex;align-items:center;flex:0 0 auto;max-width:100%}.p-chips-token-label{min-width:0%;overflow:auto}.p-chips-token-label::-webkit-scrollbar{display:none}.p-chips-input-token{flex:1 1 auto;display:inline-flex}.p-chips-token-icon{cursor:pointer}.p-chips-input-token input{border:0 none;outline:0 none;background-color:transparent;margin:0;padding:0;box-shadow:none;border-radius:0;width:100%}.p-fluid .p-chips{display:flex}.p-chips-clear-icon{position:absolute;top:50%;margin-top:-.5rem;cursor:pointer}.p-chips-clearable .p-inputtext{position:relative}}\n"],encapsulation:2,changeDetection:0})}return i})(),Sa=(()=>{class i{static \u0275fac=function(o){return new(o||i)};static \u0275mod=e.$C({type:i});static \u0275inj=e.G2t({imports:[b.MD,re.u,l.Gg,Y.u,V.I,A.A,re.u,l.Gg]})}return i})();const ka=()=>({"min-width":"50rem"}),Ea=()=>[50,100,250];function Ia(i,s){1&i&&(e.j41(0,"div",10)(1,"span",11),e.EFF(2,"\u041a\u043b\u0430\u0441\u0442\u0435\u0440\u044b"),e.k0s()())}function Fa(i,s){if(1&i){const t=e.RV6();e.j41(0,"p-multiSelect",12),e.bIt("onChange",function(n){const r=e.eBV(t).filterCallback;return e.Njj(r(n.value))}),e.k0s()}if(2&i){const t=s.$implicit,o=e.XpG(3);e.Y8G("ngModel",t)("filter",!1)("options",o.warehouseClusters)}}function Ta(i,s){1&i&&(e.j41(0,"tr")(1,"th"),e.nrm(2,"p-columnFilter",5),e.EFF(3," \u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 "),e.k0s(),e.j41(4,"th"),e.EFF(5,"\u0410\u0434\u0440\u0435\u0441"),e.k0s(),e.j41(6,"th"),e.EFF(7,"\u041e\u0441\u043e\u0431\u044b\u0439"),e.k0s(),e.j41(8,"th",6),e.EFF(9," \u041a\u043b\u0430\u0441\u0442\u0435\u0440"),e.nrm(10,"p-sortIcon",7),e.j41(11,"p-columnFilter",8),e.DNE(12,Ia,3,0,"ng-template",3)(13,Fa,1,3,"ng-template",9),e.k0s()(),e.j41(14,"th"),e.EFF(15,"\u041f\u0441\u0435\u0432\u0434\u043e\u043d\u0438\u043c\u044b"),e.k0s(),e.nrm(16,"th"),e.k0s()),2&i&&(e.R7$(2),e.Y8G("showMatchModes",!1)("showOperator",!1)("showAddButton",!1),e.R7$(9),e.Y8G("showMatchModes",!1)("showOperator",!1)("showAddButton",!1))}function Ra(i,s){if(1&i){const t=e.RV6();e.j41(0,"p-checkbox",20),e.mxI("ngModelChange",function(n){e.eBV(t);const r=e.XpG().$implicit;return e.DH7(r.standalone,n)||(r.standalone=n),e.Njj(n)}),e.k0s()}if(2&i){const t=e.XpG().$implicit;e.R50("ngModel",t.standalone),e.Y8G("binary",!0)}}function xa(i,s){if(1&i){const t=e.RV6();e.j41(0,"p-checkbox",21),e.mxI("ngModelChange",function(n){e.eBV(t);const r=e.XpG().$implicit;return e.DH7(r.standalone,n)||(r.standalone=n),e.Njj(n)}),e.k0s()}if(2&i){const t=e.XpG().$implicit;e.R50("ngModel",t.standalone),e.Y8G("readonly",!0)("binary",!0)}}function wa(i,s){if(1&i){const t=e.RV6();e.j41(0,"p-chips",22),e.mxI("ngModelChange",function(n){e.eBV(t);const r=e.XpG().$implicit;return e.DH7(r.aliases,n)||(r.aliases=n),e.Njj(n)}),e.k0s()}if(2&i){const t=e.XpG().$implicit;e.R50("ngModel",t.aliases)}}function Da(i,s){if(1&i&&(e.j41(0,"div"),e.EFF(1),e.k0s()),2&i){const t=s.$implicit;e.R7$(),e.JRh(t)}}function ja(i,s){if(1&i&&e.DNE(0,Da,2,1,"div",23),2&i){const t=e.XpG().$implicit;e.Y8G("ngForOf",t.aliases)}}function Ma(i,s){if(1&i){const t=e.RV6();e.j41(0,"button",24),e.bIt("click",function(){e.eBV(t);const n=e.XpG().$implicit,r=e.XpG(2);return e.Njj(r.onRowEditInit(n))}),e.k0s()}}function Pa(i,s){if(1&i){const t=e.RV6();e.j41(0,"button",25),e.bIt("click",function(){e.eBV(t);const n=e.XpG().$implicit,r=e.XpG(2);return e.Njj(r.onRowEditSave(n))}),e.k0s()}}function Ga(i,s){if(1&i){const t=e.RV6();e.j41(0,"button",26),e.bIt("click",function(){e.eBV(t);const n=e.XpG().$implicit,r=e.XpG(2);return e.Njj(r.onRowEditCancel(n))}),e.k0s()}}function Ba(i,s){if(1&i&&(e.j41(0,"tr",13)(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td")(6,"p-cellEditor"),e.DNE(7,Ra,1,2,"ng-template",14)(8,xa,1,3,"ng-template",15),e.k0s()(),e.j41(9,"td"),e.EFF(10),e.k0s(),e.j41(11,"td")(12,"p-cellEditor"),e.DNE(13,wa,1,1,"ng-template",14)(14,ja,1,1,"ng-template",15),e.k0s()(),e.j41(15,"td")(16,"div",16),e.DNE(17,Ma,1,0,"button",17)(18,Pa,1,0,"button",18)(19,Ga,1,0,"button",19),e.k0s()()()),2&i){const t=s.$implicit,o=s.editing;e.Y8G("pEditableRow",t),e.R7$(2),e.JRh(t.name),e.R7$(2),e.JRh(t.address),e.R7$(6),e.JRh(t.warehouseCluster),e.R7$(7),e.Y8G("ngIf",!o),e.R7$(),e.Y8G("ngIf",o),e.R7$(),e.Y8G("ngIf",o)}}function La(i,s){if(1&i){const t=e.RV6();e.j41(0,"p-table",2),e.bIt("onEditComplete",function(n){e.eBV(t);const r=e.XpG();return e.Njj(r.editComplete(n))}),e.DNE(1,Ta,17,6,"ng-template",3)(2,Ba,20,7,"ng-template",4),e.k0s()}if(2&i){const t=e.XpG();e.Y8G("value",t.data)("tableStyle",e.lJ4(6,ka))("paginator",!0)("rows",100)("rowsPerPageOptions",e.lJ4(7,Ea))("totalRecords",t.totalRecords)}}let za=(()=>{class i extends d.x{constructor(t,o,n){super(n),this.ozonWarehouseService=t,this.messageService=o,this.clonedData={},this.warehouseClusters=[]}ngOnInit(){this.titleService.setTitle("\u0421\u043a\u043b\u0430\u0434\u044b Ozon"),this.getOzonWarehouses()}getOzonWarehouses(){this.ozonWarehouseService.getWarehouses().pipe((0,g.W)(t=>(this.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430",severity:"error",detail:t}),y.w))).subscribe(t=>{this.data=t,this.warehouseClusters=[...t.reduce((o,n)=>(o.add(n.warehouseCluster),o),new Set)].sort()})}onRowEditInit(t){this.clonedData[t.iD]=new a.D.OzonWarehouse(t)}onRowEditCancel(t){const o=this.data.findIndex(n=>n.iD==t.iD);this.data[o]=this.clonedData[t.iD],delete this.clonedData[t.iD]}onRowEditSave(t){this.ozonWarehouseService.updateWarehouse(t).pipe((0,g.W)(o=>(this.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430",severity:"error",detail:o}),y.w))).subscribe()}importWarehouses(){var t=this;return(0,O.A)(function*(){t.ozonWarehouseService.importOzonWarehouses().pipe((0,g.W)(o=>(t.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430",severity:"error",detail:o}),y.w))).subscribe(()=>{t.messageService.add({summary:"\u0423\u0441\u043f\u0435\u0445",severity:"success",detail:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0441\u043a\u043b\u0430\u0434\u043e\u0432 \u041e\u0437\u043e\u043d \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u0430"}),t.getOzonWarehouses()})})()}static{this.\u0275fac=function(o){return new(o||i)(e.rXU(ge.t),e.rXU(l.bg),e.rXU(_.hE))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-ozon-warehouse-list"]],features:[e.Vt3],decls:5,vars:1,consts:[["pButton","","pRipple","","type","button","label","\u0418\u043c\u043f\u043e\u0440\u0442 \u0441\u043a\u043b\u0430\u0434\u043e\u0432",3,"click"],["dataKey","iD","editMode","row",3,"value","tableStyle","paginator","rows","rowsPerPageOptions","totalRecords","onEditComplete",4,"ngIf"],["dataKey","iD","editMode","row",3,"onEditComplete","value","tableStyle","paginator","rows","rowsPerPageOptions","totalRecords"],["pTemplate","header"],["pTemplate","body"],["type","text","field","name","matchMode","contains",3,"showMatchModes","showOperator","showAddButton"],["pSortableColumn","warehouseCluster"],["field","warehouseCluster"],["field","warehouseCluster","matchMode","in","display","menu",3,"showMatchModes","showOperator","showAddButton"],["pTemplate","filter"],[1,"px-3","pt-3","pb-0"],[1,"font-bold"],["placeholder","\u0412\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0435",3,"onChange","ngModel","filter","options"],[3,"pEditableRow"],["pTemplate","input"],["pTemplate","output"],[1,"flex","align-items-center","justify-content-center","gap-2"],["pButton","","pRipple","","type","button","pInitEditableRow","","icon","pi pi-pencil","class","p-button-rounded p-button-text",3,"click",4,"ngIf"],["pButton","","pRipple","","type","button","pSaveEditableRow","","icon","pi pi-check","class","p-button-rounded p-button-text p-button-success mr-2",3,"click",4,"ngIf"],["pButton","","pRipple","","type","button","pCancelEditableRow","","icon","pi pi-times","class","p-button-rounded p-button-text p-button-danger",3,"click",4,"ngIf"],["inputId","binary",3,"ngModelChange","ngModel","binary"],["inputId","binary",3,"ngModelChange","ngModel","readonly","binary"],["separator","",3,"ngModelChange","ngModel"],[4,"ngFor","ngForOf"],["pButton","","pRipple","","type","button","pInitEditableRow","","icon","pi pi-pencil",1,"p-button-rounded","p-button-text",3,"click"],["pButton","","pRipple","","type","button","pSaveEditableRow","","icon","pi pi-check",1,"p-button-rounded","p-button-text","p-button-success","mr-2",3,"click"],["pButton","","pRipple","","type","button","pCancelEditableRow","","icon","pi pi-times",1,"p-button-rounded","p-button-text","p-button-danger",3,"click"]],template:function(o,n){1&o&&(e.nrm(0,"p-toast"),e.j41(1,"h1"),e.EFF(2,"\u0421\u043a\u043b\u0430\u0434\u044b Ozon"),e.k0s(),e.j41(3,"button",0),e.bIt("click",function(){return n.importWarehouses()}),e.k0s(),e.DNE(4,La,3,8,"p-table",1)),2&o&&(e.R7$(4),e.Y8G("ngIf",n.data))},dependencies:[l.Ei,h._f,ae.Sc,Re,b.Sq,b.bT,F.BC,F.vS,oe,M.XI,M.Tg,M.c5,M.yc,M.Xk,M.Hd,M.E7,M.Tf,M.rl,q.y8]})}}return i})();var Aa=f(152);const $a=()=>({"min-width":"75rem"}),Va=()=>["name"],Na=i=>({"bg-orange-100":i});function Xa(i,s){1&i&&(e.j41(0,"tr")(1,"th",15),e.EFF(2," ID "),e.nrm(3,"p-sortIcon",16),e.k0s(),e.j41(4,"th"),e.EFF(5,"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435"),e.k0s(),e.j41(6,"th",17),e.EFF(7," \u041f\u0440\u043e\u0434\u0430\u0436 \u0437\u0430 \u043f\u0435\u0440\u0438\u043e\u0434 \u0430\u043d\u0430\u043b\u0438\u0437\u0430 "),e.nrm(8,"p-sortIcon",18),e.k0s(),e.j41(9,"th",19),e.EFF(10," \u041d\u0430\u043b\u0438\u0447\u0438\u0435 "),e.nrm(11,"p-sortIcon",20),e.k0s(),e.j41(12,"th",21),e.EFF(13," \u0420\u0435\u0437\u0435\u0440\u0432 "),e.nrm(14,"p-sortIcon",22),e.k0s(),e.j41(15,"th",23),e.EFF(16," \u0412 \u043f\u0443\u0442\u0438 "),e.nrm(17,"p-sortIcon",24),e.k0s(),e.j41(18,"th",25),e.EFF(19," \u041f\u0440\u043e\u0434\u0430\u0436 \u0432 \u0434\u0435\u043d\u044c "),e.nrm(20,"p-sortIcon",26),e.k0s(),e.j41(21,"th",27),e.EFF(22," \u0417\u0430\u043f\u0430\u0441 \u0432 \u0434\u043d\u044f\u0445 "),e.nrm(23,"p-sortIcon",28),e.k0s()(),e.j41(24,"tr")(25,"th"),e.nrm(26,"p-columnFilter",29),e.k0s(),e.j41(27,"th"),e.nrm(28,"p-columnFilter",30),e.k0s(),e.j41(29,"th"),e.nrm(30,"p-columnFilter",31),e.k0s(),e.j41(31,"th"),e.nrm(32,"p-columnFilter",32),e.k0s(),e.j41(33,"th"),e.nrm(34,"p-columnFilter",33),e.k0s(),e.j41(35,"th"),e.nrm(36,"p-columnFilter",34),e.k0s(),e.j41(37,"th"),e.nrm(38,"p-columnFilter",35),e.k0s(),e.nrm(39,"th"),e.k0s()),2&i&&(e.R7$(26),e.Y8G("min",1)("showButtons",!1)("showOperator",!1)("useGrouping",!1),e.R7$(2),e.Y8G("showMatchModes",!1)("showOperator",!1),e.R7$(2),e.Y8G("showMatchModes",!1)("showButtons",!1)("showOperator",!1)("useGrouping",!1),e.R7$(2),e.Y8G("showButtons",!1)("showOperator",!1)("useGrouping",!1),e.R7$(2),e.Y8G("showButtons",!1)("showOperator",!1)("useGrouping",!1),e.R7$(2),e.Y8G("showButtons",!1)("showOperator",!1)("useGrouping",!1),e.R7$(2),e.Y8G("showButtons",!1)("showOperator",!1))}function Ya(i,s){if(1&i&&(e.qex(0),e.j41(1,"tr",41)(2,"td"),e.EFF(3),e.k0s(),e.j41(4,"td"),e.EFF(5),e.k0s(),e.j41(6,"td"),e.EFF(7),e.k0s(),e.j41(8,"td"),e.EFF(9),e.k0s(),e.j41(10,"td"),e.EFF(11),e.k0s(),e.j41(12,"td"),e.EFF(13),e.k0s(),e.j41(14,"td"),e.EFF(15),e.nI1(16,"number"),e.k0s(),e.j41(17,"td"),e.EFF(18),e.nI1(19,"number"),e.k0s()(),e.bVm()),2&i){const t=s.$implicit;e.R7$(),e.Y8G("ngClass",e.eq3(15,Na,t.StockDays<=t.ShipmentDays)),e.R7$(2),e.JRh(t.productPackageID),e.R7$(2),e.JRh(t.productPackageName),e.R7$(2),e.JRh(t.salesCount),e.R7$(2),e.JRh(t.present),e.R7$(2),e.JRh(t.reserved),e.R7$(2),e.JRh(t.moving),e.R7$(2),e.JRh(e.i5U(16,9,t.salesRate,"1.0-1")),e.R7$(3),e.JRh(e.i5U(19,12,t.stockDays,"1.0-1"))}}function Ha(i,s){if(1&i&&(e.qex(0),e.j41(1,"tr")(2,"td",37)(3,"span",40),e.EFF(4),e.k0s()()(),e.DNE(5,Ya,20,17,"ng-container",39),e.bVm()),2&i){const t=s.$implicit;e.R7$(4),e.JRh(t.key),e.R7$(),e.Y8G("ngForOf",t.value)}}function Ua(i,s){if(1&i&&(e.j41(0,"tr",36)(1,"td",37)(2,"span",38),e.EFF(3),e.k0s()()(),e.DNE(4,Ha,6,2,"ng-container",39),e.nI1(5,"keyvalue")),2&i){const t=s.$implicit;e.R7$(3),e.JRh(t.key),e.R7$(),e.Y8G("ngForOf",e.bMT(5,2,t.value))}}function Wa(i,s){if(1&i&&(e.j41(0,"p-table",12),e.nI1(1,"keyvalue"),e.DNE(2,Xa,40,21,"ng-template",13)(3,Ua,6,4,"ng-template",14),e.k0s()),2&i){const t=e.XpG();e.Y8G("value",e.bMT(1,6,t.groupedItems))("tableStyle",e.lJ4(8,$a))("paginator",!1)("loading",t.loading)("sortOrder",1)("globalFilterFields",e.lJ4(9,Va))}}let Ja=(()=>{class i extends d.x{constructor(t,o,n,r,c){super(r),this.route=t,this.reportClient=o,this.messageService=n,this.dbService=c,this.loading=!1,this.filter=new a.D.OzonStockScarcityReportRequestModel({salesAnalysisInDays:null,notificationPeriodInDays:null,date:null,respectMinimalStock:!1,respectSupplyPreparationPeriod:!1,respectActiveSupplyOrders:!1}),this.filterSubject=new v.t(null)}ngOnInit(){this.titleService.setTitle("\u0414\u0435\u0444\u0438\u0446\u0438\u0442 \u0442\u043e\u0432\u0430\u0440\u043e\u0432 Ozon"),this.filterSubject.pipe((0,S.Q)(this.destroyed),(0,E.p)(c=>!!c),(0,Aa.B)(1e3)).pipe((0,E.p)(c=>c.salesAnalysisInDays>0&&c.notificationPeriodInDays>0)).subscribe(c=>{this.loading=!0;const k={...c};delete k.date,this.dbService.update("filters",{id:i.name,data:k}).pipe((0,g.W)(D=>(this.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f \u0444\u0438\u043b\u044c\u0442\u0440\u0430",severity:"error",detail:D}),y.w))).subscribe(),this.reportClient.getOzonStockStarvationReport(new a.D.OzonStockScarcityReportRequestModel(c)).pipe((0,g.W)(D=>(this.loading=!1,this.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430",severity:"error",detail:D}),y.w))).subscribe(D=>{this.data=D,this.groupedItems=this.data.reduce((x,j)=>{let L,z;const R=j.standaloneWarehouse?j.warehouseName:j.warehouseClusterName||"\u0411\u0435\u0437 \u043a\u043b\u0430\u0441\u0442\u0435\u0440\u0430";return x[R]?L=x[R]:(L={},x[R]=L),L[j.warehouseName]?z=L[j.warehouseName]:(z=[],L[j.warehouseName]=z),z.push(j),x},{}),this.loading=!1})});const t=+this.route.snapshot.paramMap.get("salesAnalysisInDays"),o=+this.route.snapshot.paramMap.get("notificationPeriodInDays"),r=this.route.snapshot.paramMap.get("date")?new Date:null;this.filter.salesAnalysisInDays=t>0?t:7,this.filter.notificationPeriodInDays=o>0?o:7,this.filter.date=r,this.dbService.getByID("filters",i.name).subscribe(c=>{c&&(c.data&&(this.filter=c.data),this.filterSubject.next(this.filter))}),this.filter.salesAnalysisInDays>0&&this.filter.notificationPeriodInDays>0&&this.filterSubject.next(this.filter)}onFilterChanged(){this.filterSubject.next(this.filter)}static{this.\u0275fac=function(o){return new(o||i)(e.rXU(C.nX),e.rXU(a.D.ReportClient),e.rXU(l.bg),e.rXU(_.hE),e.rXU(p.MX))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-stock-starvation-report"]],features:[e.Vt3],decls:22,vars:16,consts:[[1,"card"],[1,"flex","gap-3","m-3"],[1,"p-float-label"],["inputId","salesAnalysisInDays",3,"onInput","ngModelChange","min","required","ngModel"],["htmlFor","number-input"],["inputId","notificationPeriodInDays",3,"onInput","ngModelChange","min","required","ngModel"],["input","date","dateFormat","dd.mm.yy","placeholder","\u0414\u0430\u0442\u0430 \u043e\u0442\u0447\u0451\u0442\u0430",3,"ngModelChange","onClear","onSelect","ngModel","showClear","readonlyInput"],["for","date",1,"font-bold"],["input","respectMinimalStock","label","\u0423\u0447\u0438\u0442\u044b\u0432\u0430\u0442\u044c \u043c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u044b\u0439 \u043e\u0441\u0442\u0430\u0442\u043e\u043a",3,"ngModelChange","onChange","ngModel","binary"],["input","respectActiveSupplyOrders","label","\u0423\u0447\u0438\u0442\u044b\u0432\u0430\u0442\u044c \u043f\u043e\u0441\u0442\u0430\u0432\u043a\u0438 \u0432 \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u0435",3,"ngModelChange","onChange","ngModel","binary"],["input","respectSupplyPreparationPeriod","label","\u0423\u0447\u0438\u0442\u044b\u0432\u0430\u0442\u044c \u043f\u043e\u0434\u0433\u043e\u0442\u043e\u0432\u043a\u0443 \u043a \u043f\u043e\u0441\u0442\u0430\u0432\u043a\u0435",3,"ngModelChange","onChange","ngModel","binary"],["sortField","stockDays",3,"value","tableStyle","paginator","loading","sortOrder","globalFilterFields",4,"ngIf"],["sortField","stockDays",3,"value","tableStyle","paginator","loading","sortOrder","globalFilterFields"],["pTemplate","header"],["pTemplate","body"],["pSortableColumn","productPackageID"],["field","productPackageID"],["pSortableColumn","salesCount"],["field","salesCount"],["pSortableColumn","present"],["field","present"],["pSortableColumn","reserved"],["field","reserved"],["pSortableColumn","moving"],["field","moving"],["pSortableColumn","salesRate"],["field","salesRate"],["pSortableColumn","stockDays"],["field","stockDays"],["field","productPackageID","type","numeric",3,"min","showButtons","showOperator","useGrouping"],["field","productPackageName","matchMode","contains","type","text",3,"showMatchModes","showOperator"],["field","salesCount","type","numeric",3,"showMatchModes","showButtons","showOperator","useGrouping"],["field","present","type","numeric",3,"showButtons","showOperator","useGrouping"],["field","reserved","type","numeric",3,"showButtons","showOperator","useGrouping"],["field","moving","type","numeric",3,"showButtons","showOperator","useGrouping"],["field","salesRate","type","numeric",3,"showButtons","showOperator"],["pRowGroupHeader",""],["colspan","8"],[1,"font-bold","ml-2","text-primary-500"],[4,"ngFor","ngForOf"],[1,"font-bold","ml-4"],[3,"ngClass"]],template:function(o,n){1&o&&(e.nrm(0,"p-toast"),e.j41(1,"h1"),e.EFF(2," \u041e\u0442\u0447\u0451\u0442 \u043e \u0437\u0430\u043a\u0430\u043d\u0447\u0438\u0432\u0430\u044e\u0449\u0438\u0445\u0441\u044f \u043e\u0441\u0442\u0430\u0442\u043a\u0430\u0445\n"),e.k0s(),e.j41(3,"div",0)(4,"div",1)(5,"span",2)(6,"p-inputNumber",3),e.bIt("onInput",function(){return n.onFilterChanged()}),e.mxI("ngModelChange",function(c){return e.DH7(n.filter.salesAnalysisInDays,c)||(n.filter.salesAnalysisInDays=c),c}),e.k0s(),e.j41(7,"label",4),e.EFF(8,"\u041f\u0435\u0440\u0438\u043e\u0434 \u0430\u043d\u0430\u043b\u0438\u0437\u0430 \u043f\u0440\u043e\u0434\u0430\u0436, \u0434\u043d\u0435\u0439"),e.k0s()(),e.j41(9,"span",2)(10,"p-inputNumber",5),e.bIt("onInput",function(){return n.onFilterChanged()}),e.mxI("ngModelChange",function(c){return e.DH7(n.filter.notificationPeriodInDays,c)||(n.filter.notificationPeriodInDays=c),c}),e.k0s(),e.j41(11,"label",4),e.EFF(12,"\u0417\u0430\u043f\u0430\u0441 \u043e\u0441\u0442\u0430\u0442\u043a\u043e\u0432, \u0434\u043d\u0435\u0439"),e.k0s()(),e.j41(13,"span",2)(14,"p-calendar",6),e.mxI("ngModelChange",function(c){return e.DH7(n.filter.date,c)||(n.filter.date=c),c}),e.bIt("onClear",function(){return n.onFilterChanged()})("onSelect",function(){return n.onFilterChanged()}),e.k0s(),e.j41(15,"label",7),e.EFF(16,"\u0414\u0430\u0442\u0430 \u043e\u0442\u0447\u0451\u0442\u0430"),e.k0s()()(),e.j41(17,"div",1)(18,"p-checkbox",8),e.mxI("ngModelChange",function(c){return e.DH7(n.filter.respectMinimalStock,c)||(n.filter.respectMinimalStock=c),c}),e.bIt("onChange",function(){return n.onFilterChanged()}),e.k0s(),e.j41(19,"p-checkbox",9),e.mxI("ngModelChange",function(c){return e.DH7(n.filter.respectActiveSupplyOrders,c)||(n.filter.respectActiveSupplyOrders=c),c}),e.bIt("onChange",function(){return n.onFilterChanged()}),e.k0s(),e.j41(20,"p-checkbox",10),e.mxI("ngModelChange",function(c){return e.DH7(n.filter.respectSupplyPreparationPeriod,c)||(n.filter.respectSupplyPreparationPeriod=c),c}),e.bIt("onChange",function(){return n.onFilterChanged()}),e.k0s()()(),e.DNE(21,Wa,4,10,"p-table",11)),2&o&&(e.R7$(6),e.Y8G("min",1)("required",!0),e.R50("ngModel",n.filter.salesAnalysisInDays),e.R7$(4),e.Y8G("min",1)("required",!0),e.R50("ngModel",n.filter.notificationPeriodInDays),e.R7$(4),e.R50("ngModel",n.filter.date),e.Y8G("showClear",!0)("readonlyInput",!0),e.R7$(4),e.R50("ngModel",n.filter.respectMinimalStock),e.Y8G("binary",!0),e.R7$(),e.R50("ngModel",n.filter.respectActiveSupplyOrders),e.Y8G("binary",!0),e.R7$(),e.R50("ngModel",n.filter.respectSupplyPreparationPeriod),e.Y8G("binary",!0),e.R7$(),e.Y8G("ngIf",n.groupedItems))},dependencies:[l.Ei,I.Vv,ae.Sc,b.YU,b.Sq,b.bT,F.BC,F.YS,F.vS,pe.YI,M.XI,M.Tg,M.$I,M.yc,M.rl,q.y8,b.QX,b.lG]})}}return i})();const Ka=()=>[10,50,100,250],qa=()=>({"min-width":"50rem"}),Qa=i=>({"bg-orange-100":i});function Za(i,s){if(1&i){const t=e.RV6();e.j41(0,"h1"),e.EFF(1,"\u0410\u043a\u0446\u0438\u0438 Ozon"),e.k0s(),e.j41(2,"div",5)(3,"button",6),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.togglePromotionExpansion())}),e.k0s(),e.j41(4,"button",7),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.importOzonPromotions())}),e.k0s()(),e.j41(5,"div",5)(6,"p-checkbox",8),e.bIt("onChange",function(n){e.eBV(t);const r=e.XpG(2);return e.Njj(r.toggleDeletedFilter(n))}),e.mxI("ngModelChange",function(n){e.eBV(t);const r=e.XpG(2);return e.DH7(r.filterModel.excludeDeleted,n)||(r.filterModel.excludeDeleted=n),e.Njj(n)}),e.k0s(),e.j41(7,"label",9),e.EFF(8,"\u0418\u0441\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0430\u0440\u0445\u0438\u0432\u043d\u044b\u0435"),e.k0s()()}if(2&i){const t=e.XpG(2);e.R7$(3),e.Y8G("label",t.expandedAll?"\u0421\u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0430\u043a\u0446\u0438\u0438":"\u0420\u0430\u0437\u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0430\u043a\u0446\u0438\u0438"),e.R7$(3),e.R50("ngModel",t.filterModel.excludeDeleted),e.Y8G("binary",!0)}}function er(i,s){if(1&i&&e.nrm(0,"button",20),2&i){const t=e.XpG(),n=t.$implicit;e.Y8G("icon",t.expanded?"pi pi-chevron-down":"pi pi-chevron-right")("pRowToggler",n)}}function tr(i,s){if(1&i&&(e.qex(0,18),e.EFF(1),e.bVm()),2&i){const t=e.XpG(2).$implicit;e.R7$(),e.SpI(" (\u0417\u0430\u043a\u0430\u0437 \u043e\u0442 ",t.orderAmount,"\u20bd) ")}}function nr(i,s){if(1&i&&(e.j41(0,"div",18),e.EFF(1),e.DNE(2,tr,2,1,"ng-container",19),e.k0s()),2&i){const t=e.XpG().$implicit;e.R7$(),e.SpI(" \u0421\u043a\u0438\u0434\u043a\u0430: ","CURRENCY"===t.discountType?t.discountValue+"\u20bd":"PERCENT"===t.discountType?t.discountValue+"%":t.discountType+" - "+t.discountValue," "),e.R7$(),e.Y8G("ngIf",t.orderAmount)}}function ir(i,s){1&i&&(e.j41(0,"div",18),e.nrm(1,"i",21),e.EFF(2," \u041f\u0440\u043e\u043c\u043e\u043a\u043e\u0434 "),e.k0s())}function or(i,s){if(1&i&&(e.j41(0,"div",18),e.EFF(1," \u041d\u043e\u0432\u044b\u0445 \u0442\u043e\u0432\u0430\u0440\u043e\u0432: "),e.j41(2,"p-tag",22),e.EFF(3),e.k0s()()),2&i){const t=e.XpG().$implicit;e.R7$(2),e.Y8G("severity",t._activeProductCount?"danger":"success"),e.R7$(),e.SpI(" ",t._unconfirmedProductCount," ")}}function ar(i,s){if(1&i&&(e.j41(0,"tr")(1,"td",10)(2,"div",11),e.DNE(3,er,1,2,"button",12),e.k0s()(),e.j41(4,"td")(5,"div",13)(6,"div",14)(7,"div",15)(8,"div")(9,"div",16)(10,"a",17),e.EFF(11),e.k0s()(),e.j41(12,"div",18),e.EFF(13),e.k0s(),e.DNE(14,nr,3,2,"div",19)(15,ir,3,0,"div",19)(16,or,4,2,"div",19),e.k0s()()()()()()),2&i){const t=s.$implicit;e.R7$(3),e.Y8G("ngIf",t.products.length),e.R7$(7),e.Mz_("href","https://seller.ozon.ru/app/highlights/",t.iD,"",e.B4B),e.R7$(),e.SpI(" ",t.name," "),e.R7$(2),e.SpI(" \u0422\u0438\u043f: ",t.actionType," "),e.R7$(),e.Y8G("ngIf",t.discountValue),e.R7$(),e.Y8G("ngIf",t.isVoucherAction),e.R7$(),e.Y8G("ngIf",t.products.length)}}function rr(i,s){if(1&i){const t=e.RV6();e.j41(0,"tr")(1,"th",27)(2,"div"),e.nrm(3,"p-sortIcon",28),e.k0s(),e.j41(4,"div",29)(5,"p-checkbox",30),e.bIt("click",function(){e.eBV(t);const n=e.XpG().$implicit,r=e.XpG(2);return e.Njj(r.toggleCheckedProducts(n))}),e.mxI("ngModelChange",function(n){e.eBV(t);const r=e.XpG().$implicit;return e.DH7(r.allChecked,n)||(r.allChecked=n),e.Njj(n)}),e.k0s()()(),e.j41(6,"th",31),e.EFF(7,"\u0410\u0440\u0442\u0438\u043a\u0443\u043b "),e.nrm(8,"p-sortIcon",32),e.k0s(),e.j41(9,"th"),e.EFF(10,"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435"),e.k0s(),e.j41(11,"th")(12,"div"),e.EFF(13,"\u0426\u0435\u043d\u0430 \u043f\u0440\u043e\u0434\u0430\u0436\u0438"),e.k0s(),e.j41(14,"div",33),e.EFF(15,"\u041f\u043e\u043b\u043d\u0430\u044f \u0446\u0435\u043d\u0430"),e.k0s(),e.j41(16,"div",33),e.EFF(17,"\u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0446\u0435\u043d\u0430"),e.k0s()(),e.j41(18,"th"),e.EFF(19," \u0426\u0435\u043d\u0430 \u043f\u043e \u0430\u043a\u0446\u0438\u0438 "),e.nrm(20,"br"),e.j41(21,"span",33),e.EFF(22,"\u041c\u0430\u043a\u0441. \u0446\u0435\u043d\u0430 \u043f\u043e \u0430\u043a\u0446\u0438\u0438"),e.k0s()(),e.j41(23,"th"),e.EFF(24,"\u041c\u0438\u043d. \u0441\u0442\u043e\u043a"),e.k0s(),e.j41(25,"th"),e.EFF(26,"\u0421\u0442\u043e\u043a"),e.k0s()()}if(2&i){const t=e.XpG().$implicit;e.R7$(5),e.R50("ngModel",t.allChecked),e.Y8G("binary",!0)}}function lr(i,s){1&i&&(e.qex(0),e.j41(1,"tr"),e.nrm(2,"td",10),e.j41(3,"td",35),e.nrm(4,"p-skeleton",36),e.k0s(),e.nrm(5,"td",23),e.k0s(),e.bVm())}function ur(i,s){if(1&i){const t=e.RV6();e.j41(0,"input",42),e.mxI("ngModelChange",function(n){e.eBV(t);const r=e.XpG(2).$implicit;return e.DH7(r.actionPrice,n)||(r.actionPrice=n),e.Njj(n)}),e.k0s(),e.j41(1,"div",33),e.EFF(2),e.k0s()}if(2&i){const t=e.XpG(2).$implicit;e.R50("ngModel",t.actionPrice),e.R7$(2),e.JRh(t.maxActionPrice)}}function sr(i,s){if(1&i&&(e.qex(0),e.j41(1,"p-tag",22)(2,"span",43),e.EFF(3),e.k0s()(),e.bVm()),2&i){const t=e.XpG(3).$implicit,o=e.XpG(3);e.R7$(),e.Y8G("severity",o.getPriceSeverity(t)),e.R7$(2),e.JRh(t.actionPrice)}}function cr(i,s){1&i&&(e.qex(0),e.EFF(1,"-"),e.bVm())}function pr(i,s){if(1&i&&(e.DNE(0,sr,4,2,"ng-container",34)(1,cr,2,0,"ng-container",34),e.j41(2,"div",33),e.EFF(3),e.k0s()),2&i){const t=e.XpG(2).$implicit;e.Y8G("ngIf",!!t.actionPrice),e.R7$(),e.Y8G("ngIf",!t.actionPrice),e.R7$(2),e.JRh(t.maxActionPrice)}}function dr(i,s){if(1&i){const t=e.RV6();e.qex(0),e.j41(1,"tr",37)(2,"td",10)(3,"div",38)(4,"p-checkbox",30),e.bIt("click",function(){e.eBV(t);const n=e.XpG().$implicit,r=e.XpG().$implicit,c=e.XpG(2);return e.Njj(c.changeCandidateState(r,n))}),e.mxI("ngModelChange",function(n){e.eBV(t);const r=e.XpG().$implicit;return e.DH7(r._active,n)||(r._active=n),e.Njj(n)}),e.k0s()()(),e.j41(5,"td")(6,"a",17),e.EFF(7),e.k0s()(),e.j41(8,"td"),e.EFF(9),e.k0s(),e.j41(10,"td")(11,"div"),e.EFF(12),e.k0s(),e.j41(13,"div",33),e.EFF(14),e.k0s(),e.j41(15,"div",33),e.EFF(16),e.k0s()(),e.j41(17,"td",39)(18,"p-cellEditor"),e.DNE(19,ur,3,2,"ng-template",40)(20,pr,4,3,"ng-template",41),e.k0s()(),e.j41(21,"td"),e.EFF(22),e.k0s(),e.j41(23,"td"),e.EFF(24),e.k0s()(),e.bVm()}if(2&i){const t=e.XpG().$implicit;e.R7$(),e.Y8G("ngClass",e.eq3(13,Qa,!t.isCandidate&&!t.confirmed)),e.R7$(3),e.R50("ngModel",t._active),e.Y8G("binary",!0),e.R7$(2),e.Mz_("href","https://seller.ozon.ru/app/prices/manager/",t.ozonProduct.ozonProductID,"/prices",e.B4B),e.R7$(),e.SpI(" ",t.ozonProduct.productPackageID," "),e.R7$(2),e.JRh(t.ozonProduct.name),e.R7$(3),e.JRh(t.ozonProduct.marketingPrice||"-"),e.R7$(2),e.JRh(t.ozonProduct.price||"-"),e.R7$(2),e.JRh(t.ozonProduct.minPrice||"-"),e.R7$(),e.Y8G("pEditableColumn",t.actionPrice),e.R7$(5),e.JRh(t.stock),e.R7$(2),e.JRh(t.minStock)}}function _r(i,s){if(1&i&&e.DNE(0,lr,6,0,"ng-container",34)(1,dr,25,15,"ng-container",34),2&i){const t=s.$implicit;e.Y8G("ngIf",!t.ozonProduct),e.R7$(),e.Y8G("ngIf",t.ozonProduct)}}function fr(i,s){if(1&i){const t=e.RV6();e.j41(0,"button",44),e.bIt("click",function(){e.eBV(t);const n=e.XpG().$implicit,r=e.XpG(2);return e.Njj(r.updatePromotionProducts(n))}),e.k0s()}}function mr(i,s){if(1&i&&(e.j41(0,"tr")(1,"td",23)(2,"p-table",24),e.DNE(3,rr,27,2,"ng-template",25)(4,_r,2,2,"ng-template",3)(5,fr,1,0,"ng-template",26),e.k0s()()()),2&i){const t=s.$implicit;e.R7$(2),e.Y8G("sortOrder",-1)("value",t.products)}}function hr(i,s){if(1&i){const t=e.RV6();e.j41(0,"p-table",1),e.bIt("onPage",function(n){e.eBV(t);const r=e.XpG();return e.Njj(r.pageChange(n))}),e.DNE(1,Za,9,3,"ng-template",2)(2,ar,17,8,"ng-template",3)(3,mr,6,2,"ng-template",4),e.k0s()}if(2&i){const t=e.XpG();e.Y8G("expandedRowKeys",t.expandedRowKeys)("loading",t.loading)("paginator",!0)("rowsPerPageOptions",e.lJ4(8,Ka))("rows",t.filterModel.count)("tableStyle",e.lJ4(9,qa))("totalRecords",t.totalRecords)("value",t.data)}}let gr=(()=>{class i extends d.x{static{this.FilterID="OzonPromotionListComponent"}constructor(t,o,n,r,c,k){super(k),this.promotionReader=t,this.promotionWriter=o,this.messageService=n,this.ozonProductClient=r,this.dbService=c,this.loading=!1,this.expandedAll=!1,this.expandedRowKeys={},this.findModelSubject=new v.t(null),this.cachedProducts=new Map}ngOnInit(){this.titleService.setTitle("\u0410\u043a\u0446\u0438\u0438 Ozon"),this.findModelSubject.pipe((0,E.p)(t=>!!t)).pipe((0,S.Q)(this.destroyed)).pipe((0,de.n)(t=>{const o=Object.assign({},t);return this.dbService.update("filters",{id:i.FilterID,data:o}).pipe((0,g.W)(r=>(this.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043a",severity:"error",detail:r}),y.w))).subscribe(),this.findOzonPromotions(t)})).subscribe(t=>{const o=t.items.reduce((n,r)=>(this.preparePromotion(r),r.products.forEach(c=>{this.cachedProducts.has(c.iD)||n.add(c.iD)}),n),new Set);this.data=t.items,o.size?this.loadOzonProducts(o):this.data.forEach(n=>this.setOzonProducts(n)),this.totalRecords=t.totalCount}),this.dbService.getByID("filters",i.FilterID).subscribe(t=>{const o={count:50,offset:0,excludeCandidates:!1,includeProduct:!0,excludeDeleted:!0};t?.data&&Object.assign(o,t.data),this.filterModel=new a.D.FindOzonPromotionsModel(o),this.findModelSubject.next(this.filterModel)})}pageChange(t){(this.filterModel.count!=t.rows||this.filterModel.offset!=t.first)&&(this.filterModel.offset=t.first,this.findModelSubject.next(this.filterModel))}preparePromotion(t){Object.defineProperty(t,"_activeProductCount",{get:()=>t.products.filter(n=>!n.isCandidate).length});let o=0;return t.products.forEach(n=>{Object.defineProperty(n,"_active",{get:()=>!n.isCandidate,set:r=>n.isCandidate=!r}),o+=+(!n.confirmed&&!n.isCandidate)}),Object.assign(t,{_totalProductCount:t.products.length,_unconfirmedProductCount:o}),t}toggleDeletedFilter(){this.findModelSubject.next(this.filterModel)}changeCandidateState(t,o){if(!o.isCandidate&&!o.actionPrice){const n=o.ozonProduct;o.actionPrice=n.marketingPrice||n.price||n.minPrice}this.sortProducts(t),this.resetGroupCheckedState(t)}sortProducts(t){t.products.sort((o,n)=>{const c=n.ozonProduct,k=this.getMinimalPrice(o.ozonProduct),D=this.getMinimalPrice(c);return+o.isCandidate-+n.isCandidate||+o.confirmed-+n.confirmed||+(null!=o.maxActionPrice&&null!=k&&k<o.maxActionPrice)-+(null!=n.maxActionPrice&&null!=D&&D<n.maxActionPrice)||+(null==k)-+(null==D)||+(+k<o.maxActionPrice)-+(+D<n.maxActionPrice)})}getMinimalPrice(t){return t?.minPrice||t?.marketingPrice}getPriceSeverity(t){const o=this.getMinimalPrice(t.ozonProduct);return t.maxActionPrice<o?"danger":"success"}setOzonProducts(t){t.products.forEach(o=>{o.ozonProduct=this.cachedProducts.get(o.iD)}),this.sortProducts(t)}resetGroupCheckedState(t){const o=t;o.allChecked=!1,o.normalChecked=!1}toggleCheckedProducts(t){const o=t.allChecked;t.products.forEach(n=>{n.isCandidate=!o})}loadOzonProducts(t){this.ozonProductClient.findOzonProducts(new a.D.FindOzonProductsModel({productIDs:[...t],includeStocks:!1,offset:0,count:1e5})).subscribe(o=>{o.items.forEach(n=>{n.ozonProductID&&this.cachedProducts.set(n.ozonProductID,n)}),this.data.forEach(n=>this.setOzonProducts(n))})}updatePromotionProducts(t){const o=t.products.filter(n=>!n.isCandidate);this.promotionWriter.updateOzonPromotionProducts(t.iD,o).pipe((0,g.W)(n=>(this.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430",severity:"error",detail:n}),y.w))).subscribe(n=>{let r=!1;if(n.additionErrors)for(const k of Object.keys(n.additionErrors)){r=!0;const D=this.cachedProducts.get(+k);this.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430",severity:"error",detail:`\u041e\u0448\u0438\u0431\u043a\u0430 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u0442\u043e\u0432\u0430\u0440\u0430 #${D.name} \u0432 \u0430\u043a\u0446\u0438\u044e: ${n.additionErrors[k]}`})}if(n.deletionErrors)for(const k of Object.keys(n.deletionErrors)){r=!0;const D=this.cachedProducts.get(+k);this.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430",severity:"error",detail:`\u041e\u0448\u0438\u0431\u043a\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f \u0442\u043e\u0432\u0430\u0440\u0430 #${D.name} \u0438\u0437 \u0430\u043a\u0446\u0438\u0438: ${n.additionErrors[k]}`})}r||this.messageService.add({summary:"\u0423\u0441\u043f\u0435\u0445",severity:"success",detail:"\u0421\u043f\u0438\u0441\u043e\u043a \u043f\u0440\u043e\u0434\u0443\u043a\u0442\u043e\u0432 \u0430\u043a\u0446\u0438\u0438 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0438\u0437\u043c\u0435\u043d\u0451\u043d"});const c=this.data.findIndex(k=>k.iD==t.iD);this.data[c]=this.preparePromotion(t)})}togglePromotionExpansion(){this.expandedAll=!this.expandedAll,this.data.forEach(t=>{t.products.length&&(this.expandedRowKeys[t.iD]=this.expandedAll)})}findOzonPromotions(t){return this.promotionReader.findOzonPromotions(t).pipe((0,g.W)(o=>(this.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430",severity:"error",detail:o}),y.w)))}importOzonPromotions(){var t=this;return(0,O.A)(function*(){t.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430",severity:"error",detail:"\u041d\u0435 \u0440\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u043d\u043e"})})()}static{this.\u0275fac=function(o){return new(o||i)(e.rXU(a.D.OzonPromotionClient),e.rXU(u.X.OzonPromotionClient),e.rXU(l.bg),e.rXU(a.D.OzonProductClient),e.rXU(p.MX),e.rXU(_.hE))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-ozon-promotion-list"]],features:[e.Vt3],decls:2,vars:1,consts:[["dataKey","iD",3,"expandedRowKeys","loading","paginator","rowsPerPageOptions","rows","tableStyle","totalRecords","value","onPage",4,"ngIf"],["dataKey","iD",3,"onPage","expandedRowKeys","loading","paginator","rowsPerPageOptions","rows","tableStyle","totalRecords","value"],["pTemplate","caption"],["pTemplate","body"],["pTemplate","rowexpansion"],[1,"flex","gap-3","p-2"],["pButton","","pRipple","","type","button",3,"click","label"],["label","\u0418\u043c\u043f\u043e\u0440\u0442 \u0430\u043a\u0446\u0438\u0439","pButton","","pRipple","","type","button",3,"click"],["inputId","deletedPromotionFilter",3,"onChange","ngModelChange","ngModel","binary"],["for","deletedPromotionFilter"],[2,"width","1%"],[1,"flex","align-items-center","justify-content-center","gap-2"],["class","p-button-text p-button-rounded p-button-plain","pButton","","pRipple","","type","button",3,"icon","pRowToggler",4,"ngIf"],[1,"flex","flex-column","sm:flex-row","sm:align-items-center"],[1,"flex","flex-column","md:flex-row","justify-content-between","md:align-items-center","flex-1"],[1,"flex","flex-row","md:flex-column","justify-content-between","align-items-start","gap-2"],[1,"text-lg","font-medium","font-bold","text-900","mt-2"],["target","_blank",3,"href"],[1,"text-lg","font-medium","text-900","mt-2"],["class","text-lg font-medium text-900 mt-2",4,"ngIf"],["pButton","","pRipple","","type","button",1,"p-button-text","p-button-rounded","p-button-plain",3,"icon","pRowToggler"],[1,"pi","pi-barcode","text-blue-500"],[3,"severity"],["colspan","2"],["sortField","_active",3,"sortOrder","value"],["pTemplate","header"],["pTemplate","footer"],["pSortableColumn","_active"],["field","_active"],[1,"p-2"],[3,"click","ngModelChange","ngModel","binary"],["pSortableColumn","ozonProduct.productPackageID"],["field","ozonProduct.productPackageID"],[1,"text-500"],[4,"ngIf"],["colspan","4"],["height","4rem","width","100%"],[3,"ngClass"],[1,"gap-2","p-2"],["pEditableColumnField","product.actionPrice",1,"text-center",3,"pEditableColumn"],["pTemplate","input"],["pTemplate","output"],["pInputText","","type","number",3,"ngModelChange","ngModel"],[1,"text-white-500"],["label","\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c","pButton","","pRipple","","type","button",3,"click"]],template:function(o,n){1&o&&(e.DNE(0,hr,4,10,"p-table",0),e.nrm(1,"p-toast")),2&o&&e.Y8G("ngIf",n.data&&n.filterModel)},dependencies:[l.Ei,h._f,ae.Sc,re.S,b.YU,b.bT,F.me,F.Q0,F.BC,F.vS,M.XI,M.Tg,M.FP,M.hp,M.c5,M.yc,ue.v,q.y8,se.E]})}}return i})();var br=f(1413),vr=f(8141),xe=f(8537),we=f(8833);const yr=["productAutocomplete"],Or=()=>[10,25,50],Cr=()=>({"min-width":"75rem"}),Sr=()=>({width:"50vw"});function kr(i,s){1&i&&(e.j41(0,"tr")(1,"th"),e.EFF(2,"\u0412\u043a\u043b\u044e\u0447\u0435\u043d\u0430"),e.k0s(),e.j41(3,"th"),e.EFF(4,"\u0421\u043a\u043b\u0430\u0434 \u043e\u0442\u0433\u0440\u0443\u0437\u043a\u0438"),e.k0s(),e.j41(5,"th"),e.EFF(6,"\u0421\u043a\u043b\u0430\u0434 \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f"),e.k0s(),e.j41(7,"th"),e.EFF(8,"\u041e\u043a\u043d\u043e"),e.k0s(),e.j41(9,"th"),e.EFF(10,"\u041c\u0438\u043d. \u0434\u0430\u0442\u0430"),e.k0s(),e.j41(11,"th"),e.EFF(12,"\u041c\u0430\u043a\u0441. \u0434\u0430\u0442\u0430"),e.k0s(),e.j41(13,"th"),e.EFF(14,"\u0421\u0442\u0430\u0442\u0443\u0441"),e.k0s(),e.j41(15,"th"),e.EFF(16,"\u0417\u0430\u043f\u0443\u0441\u043a\u043e\u0432"),e.k0s(),e.nrm(17,"th"),e.k0s())}function Er(i,s){if(1&i&&(e.j41(0,"div"),e.EFF(1),e.k0s()),2&i){const t=s.$implicit;e.R7$(),e.JRh(t.dropOffWarehouseName)}}function Ir(i,s){if(1&i){const t=e.RV6();e.j41(0,"button",11),e.bIt("click",function(){e.eBV(t);const n=e.XpG().$implicit,r=e.XpG();return e.Njj(r.editTask(n))}),e.k0s()}}function Fr(i,s){if(1&i&&(e.j41(0,"tr")(1,"td"),e.nrm(2,"p-checkbox",7),e.k0s(),e.j41(3,"td"),e.DNE(4,Er,2,1,"div",8),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td"),e.EFF(8),e.k0s(),e.j41(9,"td"),e.EFF(10),e.k0s(),e.j41(11,"td"),e.EFF(12),e.k0s(),e.j41(13,"td"),e.EFF(14),e.k0s(),e.j41(15,"td"),e.EFF(16),e.k0s(),e.j41(17,"td"),e.DNE(18,Ir,1,0,"button",9),e.nrm(19,"button",10),e.k0s()()),2&i){const t=s.expanded,o=s.$implicit;e.R7$(2),e.Y8G("disabled",!0)("ngModel",o.enabled)("binary",!0),e.R7$(2),e.Y8G("ngForOf",o.items),e.R7$(2),e.JRh(o.targetWarehouseName),e.R7$(2),e.SpI("",o.timeReserveInHours,"\u0447"),e.R7$(2),e.JRh(o.minDate?o.minDate+"\u0447":"-"),e.R7$(2),e.JRh(o.maxDate?o.maxDate+"\u0447":"-"),e.R7$(2),e.JRh(o.status),e.R7$(2),e.JRh(o.runCount),e.R7$(2),e.Y8G("ngIf",!o.finished),e.R7$(),e.Y8G("icon",t?"pi pi-chevron-down":"pi pi-chevron-right")("pRowToggler",o)}}function Tr(i,s){1&i&&(e.j41(0,"tr")(1,"th"),e.EFF(2,"\u0410\u0440\u0442\u0438\u043a\u0443\u043b"),e.k0s(),e.j41(3,"th"),e.EFF(4,"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435"),e.k0s(),e.j41(5,"th"),e.EFF(6,"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e"),e.k0s()())}function Rr(i,s){1&i&&(e.qex(0),e.j41(1,"td",15),e.nrm(2,"p-skeleton",16),e.k0s(),e.bVm())}function xr(i,s){if(1&i&&(e.qex(0),e.j41(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.bVm()),2&i){const t=s.ngIf,o=e.XpG().$implicit;e.R7$(2),e.JRh(t.productPackageID),e.R7$(2),e.JRh(t.name),e.R7$(2),e.JRh(o.quantity)}}function wr(i,s){if(1&i&&(e.j41(0,"tr"),e.DNE(1,Rr,3,0,"ng-container",14)(2,xr,7,3,"ng-container",14),e.k0s()),2&i){const t=s.$implicit,o=e.XpG(2);e.R7$(),e.Y8G("ngIf",!(null!=o.products&&o.products.has(t.iD))),e.R7$(),e.Y8G("ngIf",null==o.products?null:o.products.get(t.iD))}}function Dr(i,s){if(1&i&&(e.j41(0,"tr")(1,"td",12)(2,"p-table",13),e.DNE(3,Tr,7,0,"ng-template",3)(4,wr,3,2,"ng-template",4),e.k0s()()()),2&i){const t=s.$implicit;e.R7$(2),e.Y8G("value",t.products)}}function jr(i,s){1&i&&(e.j41(0,"div",40),e.EFF(1,"(\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0441\u043a\u043b\u0430\u0434\u044b \u043e\u0442\u0433\u0440\u0443\u0437\u043a\u0438)"),e.k0s())}function Mr(i,s){if(1&i&&(e.j41(0,"div",41),e.EFF(1),e.k0s()),2&i){const t=s.$implicit;e.R7$(),e.JRh(t.name)}}function Pr(i,s){if(1&i&&e.DNE(0,jr,2,0,"div",38)(1,Mr,2,1,"div",39),2&i){const t=s.$implicit;e.Y8G("ngIf",!(null!=t&&t.length)),e.R7$(),e.Y8G("ngForOf",t)}}function Gr(i,s){if(1&i&&(e.j41(0,"div",42)(1,"div"),e.EFF(2),e.k0s()()),2&i){const t=s.$implicit;e.R7$(2),e.Lme("",t.productPackageID,": ",t.name,"")}}function Br(i,s){1&i&&e.EFF(0,"\u0410\u0440\u0442\u0438\u043a\u0443\u043b \u0442\u043e\u0432\u0430\u0440\u0430")}function Lr(i,s){if(1&i){const t=e.RV6();e.j41(0,"p-inputNumber",43),e.mxI("ngModelChange",function(n){e.eBV(t);const r=e.XpG(2);return e.DH7(r.newItemProduct.quantity,n)||(r.newItemProduct.quantity=n),e.Njj(n)}),e.k0s()}if(2&i){const t=e.XpG(2);e.R50("ngModel",t.newItemProduct.quantity)}}function zr(i,s){1&i&&(e.j41(0,"div",45),e.EFF(1,"\u0422\u043e\u0432\u0430\u0440\u044b"),e.k0s())}function Ar(i,s){1&i&&(e.j41(0,"tr")(1,"th"),e.EFF(2,"\u0410\u0440\u0442\u0438\u043a\u0443\u043b"),e.k0s(),e.j41(3,"th"),e.EFF(4,"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435"),e.k0s(),e.j41(5,"th"),e.EFF(6,"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e"),e.k0s(),e.nrm(7,"th"),e.k0s())}function $r(i,s){if(1&i){const t=e.RV6();e.j41(0,"p-inputNumber",27),e.mxI("ngModelChange",function(n){e.eBV(t);const r=e.XpG().$implicit;return e.DH7(r.quantity,n)||(r.quantity=n),e.Njj(n)}),e.k0s()}if(2&i){const t=e.XpG().$implicit;e.Y8G("useGrouping",!1),e.R50("ngModel",t.quantity)}}function Vr(i,s){if(1&i&&e.EFF(0),2&i){const t=e.XpG().$implicit;e.SpI(" ",t.quantity," ")}}function Nr(i,s){if(1&i){const t=e.RV6();e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td",46)(6,"p-cellEditor"),e.DNE(7,$r,1,2,"ng-template",47)(8,Vr,1,1,"ng-template",48),e.k0s()(),e.j41(9,"td")(10,"button",49),e.bIt("click",function(){const n=e.eBV(t).$implicit,r=e.XpG(3);return e.Njj(r.removeNewItemProduct(n))}),e.k0s()()()}if(2&i){const t=s.$implicit;e.R7$(2),e.JRh(t.id),e.R7$(2),e.JRh(t.name),e.R7$(),e.Y8G("pEditableColumn",t.count)}}function Xr(i,s){if(1&i&&(e.j41(0,"p-table",13),e.DNE(1,zr,2,0,"ng-template",44)(2,Ar,8,0,"ng-template",3)(3,Nr,11,3,"ng-template",4),e.k0s()),2&i){const t=e.XpG(2);e.Y8G("value",t.newItem.products)}}function Yr(i,s){if(1&i){const t=e.RV6();e.j41(0,"p-dialog",17),e.mxI("visibleChange",function(n){e.eBV(t);const r=e.XpG();return e.DH7(r.showEditDialog,n)||(r.showEditDialog=n),e.Njj(n)}),e.bIt("onHide",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.onHideDialog())}),e.j41(1,"div",18)(2,"div",19)(3,"label",20),e.EFF(4,"\u0421\u043a\u043b\u0430\u0434\u044b \u043e\u0442\u0433\u0440\u0443\u0437\u043a\u0438"),e.k0s(),e.j41(5,"p-multiSelect",21),e.mxI("ngModelChange",function(n){e.eBV(t);const r=e.XpG();return e.DH7(r.newItem.dropOffWarehouses,n)||(r.newItem.dropOffWarehouses=n),e.Njj(n)}),e.DNE(6,Pr,2,2,"ng-template",22),e.k0s()(),e.j41(7,"div",19)(8,"label",23),e.EFF(9,"\u0421\u043a\u043b\u0430\u0434 \u043f\u043e\u0441\u0442\u0430\u0432\u043a\u0438"),e.k0s(),e.j41(10,"p-dropdown",24),e.mxI("ngModelChange",function(n){e.eBV(t);const r=e.XpG();return e.DH7(r.newItem.targetWarehouseID,n)||(r.newItem.targetWarehouseID=n),e.Njj(n)}),e.k0s()(),e.j41(11,"div",19)(12,"label",25),e.EFF(13,"\u0410\u043a\u0442\u0438\u0432\u043d\u0430"),e.k0s(),e.j41(14,"p-checkbox",26),e.mxI("ngModelChange",function(n){e.eBV(t);const r=e.XpG();return e.DH7(r.newItem.enabled,n)||(r.newItem.enabled=n),e.Njj(n)}),e.k0s()(),e.j41(15,"div",19)(16,"label",25),e.EFF(17,"\u0420\u0435\u0437\u0435\u0440\u0432 \u0432\u0440\u0435\u043c\u0435\u043d\u0438, \u0447"),e.k0s(),e.j41(18,"p-inputNumber",27),e.mxI("ngModelChange",function(n){e.eBV(t);const r=e.XpG();return e.DH7(r.newItem.timeReserveInHours,n)||(r.newItem.timeReserveInHours=n),e.Njj(n)}),e.k0s()(),e.j41(19,"div",19)(20,"label",28),e.EFF(21,"\u041a\u0440\u0430\u0439\u043d\u0438\u0435 \u0434\u0430\u0442\u044b"),e.k0s(),e.j41(22,"p-calendar",29),e.mxI("ngModelChange",function(n){e.eBV(t);const r=e.XpG();return e.DH7(r.newItem.minDate,n)||(r.newItem.minDate=n),e.Njj(n)}),e.k0s()(),e.j41(23,"div")(24,"label",30),e.EFF(25,"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0442\u043e\u0432\u0430\u0440"),e.k0s(),e.j41(26,"p-autoComplete",31,0),e.nI1(28,"async"),e.bIt("completeMethod",function(n){e.eBV(t);const r=e.XpG();return e.Njj(r.findProductsByName(n))})("onSelect",function(n){e.eBV(t);const r=e.XpG();return e.Njj(r.selectProduct(n))}),e.DNE(29,Gr,3,2,"ng-template",32)(30,Br,1,0,"ng-template",33),e.k0s(),e.DNE(31,Lr,1,1,"p-inputNumber",34),e.j41(32,"div")(33,"button",35),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.addNewItemProduct())}),e.EFF(34,"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0442\u043e\u0432\u0430\u0440"),e.k0s()()(),e.j41(35,"div",36),e.DNE(36,Xr,4,1,"p-table",37),e.k0s(),e.j41(37,"button",35),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.addSupplyRegistrationTask(n.newItem))}),e.EFF(38),e.k0s()()()}if(2&i){const t=e.XpG();e.Aen(e.lJ4(30,Sr)),e.Y8G("draggable",!0)("modal",!0)("resizable",!0),e.R50("visible",t.showEditDialog),e.R7$(),e.Y8G("disabled",t.addingTask),e.R7$(4),e.R50("ngModel",t.newItem.dropOffWarehouses),e.Y8G("options",t.dropOffWarehouses),e.R7$(5),e.R50("ngModel",t.newItem.targetWarehouseID),e.Y8G("autoDisplayFirst",!1)("options",t.targetWarehouses)("filter",!0)("showClear",!0),e.R7$(4),e.R50("ngModel",t.newItem.enabled),e.Y8G("binary",!0),e.R7$(4),e.Y8G("useGrouping",!1),e.R50("ngModel",t.newItem.timeReserveInHours),e.R7$(4),e.R50("ngModel",t.newItem.minDate),e.Y8G("showClear",!0)("readonlyInput",!0),e.R7$(4),e.Y8G("minLength",3)("suggestions",e.bMT(28,28,t.newItemProducts)),e.R7$(5),e.Y8G("ngIf",t.newItemProduct),e.R7$(2),e.Y8G("disabled",!t.isValidNewItemProduct),e.R7$(3),e.Y8G("ngIf",t.newItem.products.length),e.R7$(),e.Y8G("disabled",!t.isValidNewItem||t.addingTask),e.R7$(),e.SpI(" ",t.editItem?"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"," ")}}let Hr=(()=>{class i extends d.x{static{this.FilterID="OzonSupplyRegistrationTaskListComponent"}constructor(t,o,n,r,c,k,D){super(D),this.supplyOrderClient=t,this.supplyOrderCommandHandler=o,this.ozonProductClient=n,this.messageService=r,this.warehouseService=c,this.dbService=k,this.findModelSubject=new v.t(null),this.findProductPackageSubject=new v.t(null),this.newItemProducts=new v.t([]),this.newItem=void 0,this.editItem=void 0,this.newItemProduct=void 0,this.productSearchSubject=new br.B}get isValidNewItem(){return this.newItem&&this.newItem.targetWarehouseID&&this.newItem.dropOffWarehouses.length>0&&this.newItem.products.length>0}get isValidNewItemProduct(){return this.newItemProduct&&!!this.newItemProduct.id&&!!this.newItemProduct.quantity}ngOnInit(){this.titleService.setTitle("\u041f\u043e\u0441\u0442\u0430\u0432\u043a\u0438 Ozon"),this.productSearchSubject.pipe((0,S.Q)(this.destroyed)).pipe((0,de.n)(t=>this.ozonProductClient.findOzonProducts(new a.D.FindOzonProductsModel({count:100,offset:0,productName:t,includeStocks:!1})).pipe((0,g.W)(o=>(this.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u043e\u0438\u0441\u043a\u0430 \u0442\u043e\u0432\u0430\u0440\u043e\u0432",severity:"error",detail:o}),y.w))))).subscribe(t=>{const o=new Set(this.newItem.products.map(r=>r.id)),n=t.items.filter(r=>!o.has(r.productPackageID));this.newItemProducts.next(n)}),this.warehouseService.getWarehouses().pipe((0,g.W)(t=>(this.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0441\u043a\u043b\u0430\u0434\u043e\u0432",severity:"error",detail:t}),y.w))).subscribe(t=>{this.dropOffWarehouses=t.filter(o=>o.type===a.D.OzonWarehouseType.CrossDock||o.type===a.D.OzonWarehouseType.DistributionCenter||o.type===a.D.OzonWarehouseType.SortingCenter).sort((o,n)=>o.name.localeCompare(n.name)),this.targetWarehouses=t.filter(o=>o.type===a.D.OzonWarehouseType.Fulfillment).sort((o,n)=>o.name.localeCompare(n.name))}),this.findProductPackageSubject.pipe((0,E.p)(t=>!!t&&t.productName?.length>=3)).pipe((0,S.Q)(this.destroyed)).pipe((0,vr.M)(()=>{this.loadingProducts=!0})),this.findModelSubject.pipe((0,E.p)(t=>!!t)).pipe((0,S.Q)(this.destroyed)).pipe((0,de.n)(t=>{const o=Object.assign({},t),n={id:i.FilterID,data:o};return this.loading=!0,this.dbService.update("filters",n).pipe((0,g.W)(r=>(this.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043a",severity:"error",detail:r}),y.w))).subscribe(),this.supplyOrderClient.findOzonSupplyRegistrationTasks(t)})).pipe((0,g.W)(t=>(this.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0434\u0430\u043d\u043d\u044b\u0445",severity:"error",detail:t}),this.loading=!1,y.w))).subscribe(t=>{this.loading=!1;const o=new Set;t.items.forEach(n=>{const r=n;n.products.forEach(k=>o.add(k.iD));let c=6;if(n.finished)c=1;else if(n.runCount>=10)c=2;else for(const k of n.items)if(c=k.hasCreateSupplyOperationID?3:k.draftID?4:k.hasCreateDraftOperationID?5:6,6!=c)break;r.status=this.getTaskStatusText(c)}),this.data=t,o.size?this.ozonProductClient.findOzonProducts(new a.D.FindOzonProductsModel({iDs:[...o],offset:0,count:void 0,includeStocks:!1})).subscribe(n=>{this.products=n.items.reduce((r,c)=>(r.set(c.productPackageID,c),r),new Map)}):this.products=new Map}),this.dbService.getByID("filters",i.FilterID).subscribe(t=>{const o={count:50,offset:0,excludeCandidates:!1,includeProduct:!0,excludeDeleted:!0};t?.data&&Object.assign(o,t.data),this.filterModel=new a.D.FindOzonSupplyRegistrationTasksModel(o),this.findModelSubject.next(this.filterModel)})}pageChange(t){(this.filterModel.count!=t.rows||this.filterModel.offset!=t.first)&&(this.filterModel.offset=t.first,this.findModelSubject.next(this.filterModel))}removeNewItemProduct(t){const o=this.newItem.products.indexOf(t);o>=0&&this.newItem.products.splice(o,1)}addSupplyRegistrationTask(t){this.addingTask=!0;const o={targetWarehouseID:t.targetWarehouseID,dropOffWarehouseIDs:t.dropOffWarehouses,products:t.products.reduce((n,r)=>(n[r.id.toString()]=r.quantity,n),{}),timeReserveInHours:t.timeReserveInHours??void 0,iD:this.editItem?this.editItem.iD:void 0};this.supplyOrderCommandHandler.addOzonSupplyRegistrationTask(new u.X.OzonSupplyRegistrationTask(o)).pipe((0,g.W)(n=>(this.messageService.add({summary:this.editItem?"\u041e\u0448\u0438\u0431\u043a\u0430 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f \u0437\u0430\u0434\u0430\u0447\u0438":"\u041e\u0448\u0438\u0431\u043a\u0430 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u0437\u0430\u0434\u0430\u0447\u0438",severity:"error",detail:n}),this.addingTask=!1,y.w))).subscribe(()=>{this.messageService.add({summary:this.editItem?"\u0417\u0430\u0434\u0430\u0447\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0430":"\u0417\u0430\u0434\u0430\u0447\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0430",severity:"success"}),this.newItem=void 0,this.editItem=void 0,this.addingTask=!1})}editTask(t){this.editItem=t,this.newItem={enabled:t.enabled,dropOffWarehouses:t.items.map(o=>o.dropOffWarehouseID),timeReserveInHours:t.timeReserveInHours,maxDate:t.maxDate,minDate:t.minDate,targetWarehouseID:t.targetWarehouseID,products:t.products.map(o=>({id:o.iD,quantity:o.quantity}))},this.showEditDialog=!0}selectProduct(t){const o=t.value;o?this.newItemProduct={id:o.productPackageID,name:o.name,quantity:1}:(this.newItemProduct.quantity=void 0,this.newItemProduct.id=void 0)}openAddNewItemDialog(){this.newItem={enabled:!0,dropOffWarehouses:[],targetWarehouseID:void 0,timeReserveInHours:void 0,minDate:void 0,maxDate:void 0,products:[]},this.showEditDialog=!0}findProductsByName(t){t.query.trim().length>2&&this.productSearchSubject.next(t.query)}addNewItemProduct(){this.isValidNewItemProduct&&(this.newItem.products.push(this.newItemProduct),this.productAutocomplete.clear(),this.newItemProduct={id:void 0,name:void 0,quantity:void 0})}getTaskStatusText(t){let o;switch(t){case 1:o="\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0430";break;case 2:o="\u041c\u0430\u043a\u0441\u0438\u043c\u0443\u043c \u043f\u043e\u043f\u044b\u0442\u043e\u043a";break;case 3:o="\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043e\u0442\u0433\u0440\u0443\u0437\u043a\u0438";break;case 4:o="\u0421\u043e\u0437\u0434\u0430\u043d \u0447\u0435\u0440\u043d\u043e\u0432\u0438\u043a";break;case 5:o="\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0447\u0435\u0440\u043d\u043e\u0432\u0438\u043a\u0430";break;case 6:o="\u041e\u0436\u0438\u0434\u0430\u043d\u0438\u0435";break;default:o="\u041d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u0435\u043d"}return o}onHideDialog(){console.log("hide")}static{this.\u0275fac=function(o){return new(o||i)(e.rXU(a.D.OzonSupplyOrderClient),e.rXU(u.X.OzonSupplyOrderClient),e.rXU(a.D.OzonProductClient),e.rXU(l.bg),e.rXU(ge.t),e.rXU(p.MX),e.rXU(_.hE))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-ozon-supply-registration-task-list"]],viewQuery:function(o,n){if(1&o&&e.GBs(yr,5),2&o){let r;e.mGM(r=e.lsd())&&(n.productAutocomplete=r.first)}},features:[e.Vt3],decls:8,vars:11,consts:[["productAutocomplete",""],["pButton","",3,"click"],["dataKey","iD","editMode","cell",3,"onPage","lazy","loading","paginator","rowsPerPageOptions","rows","tableStyle","totalRecords","value"],["pTemplate","header"],["pTemplate","body"],["pTemplate","rowexpansion"],["header","\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0437\u0430\u0434\u0430\u0447\u0438 \u043d\u0430 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044e \u043f\u043e\u0441\u0442\u0430\u0432\u043a\u0438",3,"draggable","modal","resizable","style","visible","visibleChange","onHide",4,"ngIf"],[3,"disabled","ngModel","binary"],[4,"ngFor","ngForOf"],["icon","pi pi-pencil","class","p-button-text p-button-rounded p-button-plain","pButton","",3,"click",4,"ngIf"],["pButton","","pRipple","","type","button",1,"p-button-text","p-button-rounded","p-button-plain",3,"icon","pRowToggler"],["icon","pi pi-pencil","pButton","",1,"p-button-text","p-button-rounded","p-button-plain",3,"click"],["colspan","9"],[3,"value"],[4,"ngIf"],["colspan","3"],["height","3rem"],["header","\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0437\u0430\u0434\u0430\u0447\u0438 \u043d\u0430 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044e \u043f\u043e\u0441\u0442\u0430\u0432\u043a\u0438",3,"visibleChange","onHide","draggable","modal","resizable","visible"],[1,"card",3,"disabled"],[1,"flex-auto","mb-3"],["for","dropOffWarehouse",1,"mb-2","block","font-bold"],["appendTo","body","inputId","dropOffWarehouse","optionLabel","name","optionValue","iD",3,"ngModelChange","ngModel","options"],["pTemplate","selectedItems"],["for","targetWarehouse",1,"mb-2","block","font-bold"],["appendTo","body","filterBy","name","inputId","targetWarehouse","optionLabel","name","optionValue","iD","placeholder","\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0441\u043a\u043b\u0430\u0434 \u043f\u043e\u0441\u0442\u0430\u0432\u043a\u0438",3,"ngModelChange","ngModel","autoDisplayFirst","options","filter","showClear"],["for","timeReserveInHours",1,"mb-2","block","font-bold"],[3,"ngModelChange","ngModel","binary"],[3,"ngModelChange","useGrouping","ngModel"],["for","minDate",1,"mb-2","block","font-bold"],["inputId","minDate","selectionMode","range","dateFormat","dd.mm.yy",3,"ngModelChange","ngModel","showClear","readonlyInput"],["for","newProduct",1,"mb-2","block","font-bold"],["field","name","inputId","newProduct","placeholder","\u041f\u043e\u0438\u0441\u043a \u0442\u043e\u0432\u0430\u0440\u0430","styleClass","mb-3",3,"completeMethod","onSelect","minLength","suggestions"],["pTemplate","item"],["pTemplate","selectedItem"],["inputId","newItemProductQuantity",3,"ngModel","ngModelChange",4,"ngIf"],["pButton","",3,"click","disabled"],[1,"m-3"],[3,"value",4,"ngIf"],["class","text-500 m-2",4,"ngIf"],["class","m-2",4,"ngFor","ngForOf"],[1,"text-500","m-2"],[1,"m-2"],[1,"flex","align-items-center","gap-2"],["inputId","newItemProductQuantity",3,"ngModelChange","ngModel"],["pTemplate","caption"],[1,"flex","align-items-center","justify-content-between"],["pEditableColumnField","count",3,"pEditableColumn"],["pTemplate","input"],["pTemplate","output"],["pButton","",1,"pi","pi-trash",3,"click"]],template:function(o,n){1&o&&(e.nrm(0,"p-toast"),e.j41(1,"button",1),e.bIt("click",function(){return n.openAddNewItemDialog()}),e.EFF(2,"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"),e.k0s(),e.j41(3,"p-table",2),e.bIt("onPage",function(c){return n.pageChange(c)}),e.DNE(4,kr,18,0,"ng-template",3)(5,Fr,20,13,"ng-template",4)(6,Dr,5,1,"ng-template",5),e.k0s(),e.DNE(7,Yr,39,31,"p-dialog",6)),2&o&&(e.R7$(3),e.Y8G("lazy",!0)("loading",n.loading)("paginator",!0)("rowsPerPageOptions",e.lJ4(9,Or))("rows",null==n.filterModel?null:n.filterModel.count)("tableStyle",e.lJ4(10,Cr))("totalRecords",null==n.data?null:n.data.totalCount)("value",null==n.data?null:n.data.items),e.R7$(4),e.Y8G("ngIf",n.newItem))},dependencies:[l.Ei,xe.j9,h._f,I.Vv,ae.Sc,b.Sq,b.bT,ce.l,we.ms,F.BC,F.vS,pe.YI,oe,M.XI,M.FP,M.hp,M.c5,q.y8,se.E,b.Jj]})}}return i})(),Ur=(()=>{class i{static{this.\u0275fac=function(o){return new(o||i)}}static{this.\u0275mod=e.$C({type:i})}static{this.\u0275inj=e.G2t({imports:[C.iI.forChild([{path:"warehouse/list",component:za},{path:"salesOrders",component:Ti},{path:"action",component:gr},{path:"product",component:ro},{path:"transaction",component:Mo},{path:"supplyOrder",component:Co},{path:"supplyRegistrationTask",component:Hr},{path:"reconciliation",component:ta},{path:"stock-starvation-report",component:Ja}]),C.iI]})}}return i})(),Wr=(()=>{class i{static{this.\u0275fac=function(o){return new(o||i)}}static{this.\u0275mod=e.$C({type:i})}static{this.\u0275inj=e.G2t({})}}return i})(),Jr=(()=>{class i{static \u0275fac=function(o){return new(o||i)};static \u0275mod=e.$C({type:i});static \u0275inj=e.G2t({imports:[b.MD]})}return i})();var Kr=f(9615);let qr=(()=>{class i{static{this.\u0275fac=function(o){return new(o||i)}}static{this.\u0275mod=e.$C({type:i})}static{this.\u0275inj=e.G2t({providers:[a.D.WarehouseClient,a.D.ReportClient,a.D.OzonSalesOrderClient,a.D.OperationClient,a.D.OzonProductClient,a.D.OzonSupplyOrderClient,u.X.PostingClient,u.X.OperationClient,u.X.OzonProductClient,u.X.OzonSupplyOrderClient,u.X.WarehouseClient,u.X.OzonPromotionClient,a.D.ProductClient,a.D.OzonPromotionClient,ge.t,l.bg,l.td],imports:[me.h6,xe.$$,h.tm,I.rO,T.D,ae.q4,Sa,Wr,b.MD,Ie.F,ce.P,we.kr,Kr.e,F.YN,pe.O3,Jr,re.u,Mn,Ur,ye.F,Oe.xs,M.bG,ue.$,q.MB,se.k,Fe.AG,Xn,ne.S]})}}return i})()},1874:(w,m,f)=>{var C=T(f(3209)),v=T(f(3931)),E=T(f(9246)),y=T(f(8084)),a=T(f(2042)),u=T(f(1951)),p=T(f(650)),_=f(1498),I=T(f(5482));function T(G){return G&&G.__esModule?G:{default:G}}var F=function(){},P=function($,V,A){var N=new F;if(typeof $>"u")throw Error("No element to render on was provided.");return N._renderProperties=(0,a.default)($),N._encodings=[],N._options=I.default,N._errorHandler=new p.default(N),typeof V<"u"&&((A=A||{}).format||(A.format=ne()),N.options(A)[A.format](V,A).render()),N};for(var U in P.getModule=function(G){return C.default[G]},C.default)C.default.hasOwnProperty(U)&&J(C.default,U);function J(G,$){F.prototype[$]=F.prototype[$.toUpperCase()]=F.prototype[$.toLowerCase()]=function(V,A){var N=this;return N._errorHandler.wrapBarcodeCall(function(){A.text=typeof A.text>"u"?void 0:""+A.text;var Y=(0,v.default)(N._options,A);Y=(0,u.default)(Y);var ie=Z(V,G[$],Y);return N._encodings.push(ie),N})}}function Z(G,$,V){var A=new $(G=""+G,V);if(!A.valid())throw new _.InvalidInputException(A.constructor.name,G);var N=A.encode();N=(0,E.default)(N);for(var Y=0;Y<N.length;Y++)N[Y].options=(0,v.default)(V,N[Y].options);return N}function ne(){return C.default.CODE128?"CODE128":Object.keys(C.default)[0]}function B(G,$,V){$=(0,E.default)($);for(var A=0;A<$.length;A++)$[A].options=(0,v.default)(V,$[A].options),(0,y.default)($[A].options);(0,y.default)(V),new(0,G.renderer)(G.element,$,V).render(),G.afterRender&&G.afterRender()}F.prototype.options=function(G){return this._options=(0,v.default)(this._options,G),this},F.prototype.blank=function(G){var $=new Array(G+1).join("0");return this._encodings.push({data:$}),this},F.prototype.init=function(){var G;if(this._renderProperties)for(var $ in Array.isArray(this._renderProperties)||(this._renderProperties=[this._renderProperties]),this._renderProperties){var V=(0,v.default)(this._options,(G=this._renderProperties[$]).options);"auto"==V.format&&(V.format=ne()),this._errorHandler.wrapBarcodeCall(function(){var Y=Z(V.value,C.default[V.format.toUpperCase()],V);B(G,Y,V)})}},F.prototype.render=function(){if(!this._renderProperties)throw new _.NoElementException;if(Array.isArray(this._renderProperties))for(var G=0;G<this._renderProperties.length;G++)B(this._renderProperties[G],this._encodings,this._options);else B(this._renderProperties,this._encodings,this._options);return this},F.prototype._defaults=I.default,typeof window<"u"&&(window.JsBarcode=P),typeof jQuery<"u"&&(jQuery.fn.JsBarcode=function(G,$){var V=[];return jQuery(this).each(function(){V.push(this)}),P(V,G,$)}),w.exports=P},2933:(w,m)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.default=function C(O,v){(function f(C,O){if(!(C instanceof O))throw new TypeError("Cannot call a class as a function")})(this,C),this.data=O,this.text=v.text||O,this.options=v}},3166:(w,m,f)=>{Object.defineProperty(m,"__esModule",{value:!0});var b=function(){function a(e,u){for(var l=0;l<u.length;l++){var p=u[l];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(e,p.key,p)}}return function(e,u,l){return u&&a(e.prototype,u),l&&a(e,l),e}}(),O=function S(a){return a&&a.__esModule?a:{default:a}}(f(2933)),v=f(9973),d=function(a){function e(u,l){!function E(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var p=function g(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?a:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,u.substring(1),l));return p.bytes=u.split("").map(function(_){return _.charCodeAt(0)}),p}return function y(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}(e,a),b(e,[{key:"valid",value:function(){return/^[\x00-\x7F\xC8-\xD3]+$/.test(this.data)}},{key:"encode",value:function(){var l=this.bytes,p=l.shift()-105,_=v.SET_BY_CODE[p];if(void 0===_)throw new RangeError("The encoding does not start with a start character.");!0===this.shouldEncodeAsEan128()&&l.unshift(v.FNC1);var h=e.next(l,1,_);return{text:this.text===this.data?this.text.replace(/[^\x20-\x7E]/g,""):this.text,data:e.getBar(p)+h.result+e.getBar((h.checksum+p)%v.MODULO)+e.getBar(v.STOP)}}},{key:"shouldEncodeAsEan128",value:function(){var l=this.options.ean128||!1;return"string"==typeof l&&(l="true"===l.toLowerCase()),l}}],[{key:"getBar",value:function(l){return v.BARS[l]?v.BARS[l].toString():""}},{key:"correctIndex",value:function(l,p){if(p===v.SET_A){var _=l.shift();return _<32?_+64:_-32}return p===v.SET_B?l.shift()-32:10*(l.shift()-48)+l.shift()-48}},{key:"next",value:function(l,p,_){if(!l.length)return{result:"",checksum:0};var h=void 0,I=void 0;if(l[0]>=200){I=l.shift()-105;var T=v.SWAP[I];void 0!==T?h=e.next(l,p+1,T):((_===v.SET_A||_===v.SET_B)&&I===v.SHIFT&&(l[0]=_===v.SET_A?l[0]>95?l[0]-96:l[0]:l[0]<32?l[0]+96:l[0]),h=e.next(l,p+1,_))}else I=e.correctIndex(l,_),h=e.next(l,p+1,_);return{result:e.getBar(I)+h.result,checksum:I*p+h.checksum}}}]),e}(O.default);m.default=d},4675:(w,m,f)=>{Object.defineProperty(m,"__esModule",{value:!0});var b=function(){function a(e,u){for(var l=0;l<u.length;l++){var p=u[l];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(e,p.key,p)}}return function(e,u,l){return u&&a(e.prototype,u),l&&a(e,l),e}}(),O=function S(a){return a&&a.__esModule?a:{default:a}}(f(3166)),v=f(9973),d=function(a){function e(u,l){return function E(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function g(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?a:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,v.A_START_CHAR+u,l))}return function y(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}(e,a),b(e,[{key:"valid",value:function(){return new RegExp("^"+v.A_CHARS+"+$").test(this.data)}}]),e}(O.default);m.default=d},4502:(w,m,f)=>{Object.defineProperty(m,"__esModule",{value:!0});var b=function(){function a(e,u){for(var l=0;l<u.length;l++){var p=u[l];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(e,p.key,p)}}return function(e,u,l){return u&&a(e.prototype,u),l&&a(e,l),e}}(),O=function S(a){return a&&a.__esModule?a:{default:a}}(f(3166)),v=f(9973),d=function(a){function e(u,l){return function E(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function g(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?a:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,v.B_START_CHAR+u,l))}return function y(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}(e,a),b(e,[{key:"valid",value:function(){return new RegExp("^"+v.B_CHARS+"+$").test(this.data)}}]),e}(O.default);m.default=d},2693:(w,m,f)=>{Object.defineProperty(m,"__esModule",{value:!0});var b=function(){function a(e,u){for(var l=0;l<u.length;l++){var p=u[l];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(e,p.key,p)}}return function(e,u,l){return u&&a(e.prototype,u),l&&a(e,l),e}}(),O=function S(a){return a&&a.__esModule?a:{default:a}}(f(3166)),v=f(9973),d=function(a){function e(u,l){return function E(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function g(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?a:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,v.C_START_CHAR+u,l))}return function y(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}(e,a),b(e,[{key:"valid",value:function(){return new RegExp("^"+v.C_CHARS+"+$").test(this.data)}}]),e}(O.default);m.default=d},714:(w,m,f)=>{Object.defineProperty(m,"__esModule",{value:!0});var C=S(f(3166)),v=S(f(5113));function S(a){return a&&a.__esModule?a:{default:a}}function g(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?a:e}var d=function(a){function e(u,l){if(function E(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),/^[\x00-\x7F\xC8-\xD3]+$/.test(u))var p=g(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,(0,v.default)(u),l));else p=g(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,u,l));return g(p)}return function y(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}(e,a),e}(C.default);m.default=d},5113:(w,m,f)=>{Object.defineProperty(m,"__esModule",{value:!0});var b=f(9973),C=function(y){return y.match(new RegExp("^"+b.A_CHARS+"*"))[0].length},O=function(y){return y.match(new RegExp("^"+b.B_CHARS+"*"))[0].length},v=function(y){return y.match(new RegExp("^"+b.C_CHARS+"*"))[0]};function S(g,y){var d=y?b.A_CHARS:b.B_CHARS,a=g.match(new RegExp("^("+d+"+?)(([0-9]{2}){2,})([^0-9]|$)"));if(a)return a[1]+"\xcc"+E(g.substring(a[1].length));var e=g.match(new RegExp("^"+d+"+"))[0];return e.length===g.length?g:e+String.fromCharCode(y?205:206)+S(g.substring(e.length),!y)}function E(g){var y=v(g),d=y.length;if(d===g.length)return g;g=g.substring(d);var a=C(g)>=O(g);return y+String.fromCharCode(a?206:205)+S(g,a)}m.default=function(g){var y=void 0;if(v(g).length>=2)y=b.C_START_CHAR+E(g);else{var a=C(g)>O(g);y=(a?b.A_START_CHAR:b.B_START_CHAR)+S(g,a)}return y.replace(/[\xCD\xCE]([^])[\xCD\xCE]/,function(e,u){return"\xcb"+u})}},9973:(w,m)=>{var f;function b(U,J,Z){return J in U?Object.defineProperty(U,J,{value:Z,enumerable:!0,configurable:!0,writable:!0}):U[J]=Z,U}Object.defineProperty(m,"__esModule",{value:!0});var C=m.SET_A=0,O=m.SET_B=1,v=m.SET_C=2,E=(m.SHIFT=98,m.START_A=103),g=m.START_B=104,y=m.START_C=105;m.MODULO=103,m.STOP=106,m.FNC1=207,m.SET_BY_CODE=(b(f={},E,C),b(f,g,O),b(f,y,v),f),m.SWAP={101:C,100:O,99:v},m.A_START_CHAR="\xd0",m.B_START_CHAR="\xd1",m.C_START_CHAR="\xd2",m.A_CHARS="[\0-_\xc8-\xcf]",m.B_CHARS="[ -\x7f\xc8-\xcf]",m.C_CHARS="(\xcf*[0-9]{2}\xcf*)",m.BARS=[11011001100,11001101100,11001100110,10010011e3,10010001100,10001001100,10011001e3,10011000100,10001100100,11001001e3,11001000100,11000100100,10110011100,10011011100,10011001110,10111001100,10011101100,10011100110,11001110010,11001011100,11001001110,11011100100,11001110100,11101101110,11101001100,11100101100,11100100110,11101100100,11100110100,11100110010,11011011e3,11011000110,11000110110,10100011e3,10001011e3,10001000110,10110001e3,10001101e3,10001100010,11010001e3,11000101e3,11000100010,10110111e3,10110001110,10001101110,10111011e3,10111000110,10001110110,11101110110,11010001110,11000101110,11011101e3,11011100010,11011101110,11101011e3,11101000110,11100010110,11101101e3,11101100010,11100011010,11101111010,11001000010,11110001010,1010011e4,10100001100,1001011e4,10010000110,10000101100,10000100110,1011001e4,10110000100,1001101e4,10011000010,10000110100,10000110010,11000010010,1100101e4,11110111010,11000010100,10001111010,10100111100,10010111100,10010011110,10111100100,10011110100,10011110010,11110100100,11110010100,11110010010,11011011110,11011110110,11110110110,10101111e3,10100011110,10001011110,10111101e3,10111100010,11110101e3,11110100010,10111011110,10111101110,11101011110,11110101110,11010000100,1101001e4,11010011100,1100011101011]},9152:(w,m,f)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.CODE128C=m.CODE128B=m.CODE128A=m.CODE128=void 0;var C=d(f(714)),v=d(f(4675)),E=d(f(4502)),y=d(f(2693));function d(a){return a&&a.__esModule?a:{default:a}}m.CODE128=C.default,m.CODE128A=v.default,m.CODE128B=E.default,m.CODE128C=y.default},3803:(w,m,f)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.CODE39=void 0;var b=function(){function h(I,T){for(var F=0;F<T.length;F++){var P=T[F];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(I,P.key,P)}}return function(I,T,F){return T&&h(I.prototype,T),F&&h(I,F),I}}(),y=function(h){function I(T,F){return function S(h,I){if(!(h instanceof I))throw new TypeError("Cannot call a class as a function")}(this,I),T=T.toUpperCase(),F.mod43&&(T+=function l(h){return d[h]}(function _(h){for(var I=0,T=0;T<h.length;T++)I+=p(h[T]);return I%=43}(T))),function E(h,I){if(!h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!I||"object"!=typeof I&&"function"!=typeof I?h:I}(this,(I.__proto__||Object.getPrototypeOf(I)).call(this,T,F))}return function g(h,I){if("function"!=typeof I&&null!==I)throw new TypeError("Super expression must either be null or a function, not "+typeof I);h.prototype=Object.create(I&&I.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}}),I&&(Object.setPrototypeOf?Object.setPrototypeOf(h,I):h.__proto__=I)}(I,h),b(I,[{key:"encode",value:function(){for(var F=e("*"),P=0;P<this.data.length;P++)F+=e(this.data[P])+"0";return{data:F+=e("*"),text:this.text}}},{key:"valid",value:function(){return-1!==this.data.search(/^[0-9A-Z\-\.\ \$\/\+\%]+$/)}}]),I}(function v(h){return h&&h.__esModule?h:{default:h}}(f(2933)).default),d=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","-","."," ","$","/","+","%","*"],a=[20957,29783,23639,30485,20951,29813,23669,20855,29789,23645,29975,23831,30533,22295,30149,24005,21623,29981,23837,22301,30023,23879,30545,22343,30161,24017,21959,30065,23921,22385,29015,18263,29141,17879,29045,18293,17783,29021,18269,17477,17489,17681,20753,35770];function e(h){return function u(h){return a[h].toString(2)}(p(h))}function p(h){return d.indexOf(h)}m.CODE39=y},7331:(w,m,f)=>{Object.defineProperty(m,"__esModule",{value:!0});var b=function(){function u(l,p){for(var _=0;_<p.length;_++){var h=p[_];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(l,h.key,h)}}return function(l,p,_){return p&&u(l.prototype,p),_&&u(l,_),l}}(),C=f(2846),v=g(f(2143));function g(u){return u&&u.__esModule?u:{default:u}}var e=function(u){function l(p,_){!function y(u,l){if(!(u instanceof l))throw new TypeError("Cannot call a class as a function")}(this,l);var h=function d(u,l){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!l||"object"!=typeof l&&"function"!=typeof l?u:l}(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,p,_));return h.fontSize=!_.flat&&_.fontSize>10*_.width?10*_.width:_.fontSize,h.guardHeight=_.height+h.fontSize/2+_.textMargin,h}return function a(u,l){if("function"!=typeof l&&null!==l)throw new TypeError("Super expression must either be null or a function, not "+typeof l);u.prototype=Object.create(l&&l.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),l&&(Object.setPrototypeOf?Object.setPrototypeOf(u,l):u.__proto__=l)}(l,u),b(l,[{key:"encode",value:function(){return this.options.flat?this.encodeFlat():this.encodeGuarded()}},{key:"leftText",value:function(_,h){return this.text.substr(_,h)}},{key:"leftEncode",value:function(_,h){return(0,v.default)(_,h)}},{key:"rightText",value:function(_,h){return this.text.substr(_,h)}},{key:"rightEncode",value:function(_,h){return(0,v.default)(_,h)}},{key:"encodeGuarded",value:function(){var _={fontSize:this.fontSize},h={height:this.guardHeight};return[{data:C.SIDE_BIN,options:h},{data:this.leftEncode(),text:this.leftText(),options:_},{data:C.MIDDLE_BIN,options:h},{data:this.rightEncode(),text:this.rightText(),options:_},{data:C.SIDE_BIN,options:h}]}},{key:"encodeFlat",value:function(){return{data:[C.SIDE_BIN,this.leftEncode(),C.MIDDLE_BIN,this.rightEncode(),C.SIDE_BIN].join(""),text:this.text}}}]),l}(g(f(2933)).default);m.default=e},7779:(w,m,f)=>{Object.defineProperty(m,"__esModule",{value:!0});var b=function(){function u(l,p){for(var _=0;_<p.length;_++){var h=p[_];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(l,h.key,h)}}return function(l,p,_){return p&&u(l.prototype,p),_&&u(l,_),l}}(),C=function u(l,p,_){null===l&&(l=Function.prototype);var h=Object.getOwnPropertyDescriptor(l,p);if(void 0===h){var I=Object.getPrototypeOf(l);return null===I?void 0:u(I,p,_)}if("value"in h)return h.value;var T=h.get;return void 0===T?void 0:T.call(_)},O=f(2846),S=function E(u){return u&&u.__esModule?u:{default:u}}(f(7331)),a=function(l){return(10-l.substr(0,12).split("").map(function(_){return+_}).reduce(function(_,h,I){return I%2?_+3*h:_+h},0)%10)%10},e=function(u){function l(p,_){(function g(u,l){if(!(u instanceof l))throw new TypeError("Cannot call a class as a function")})(this,l),-1!==p.search(/^[0-9]{12}$/)&&(p+=a(p));var h=function y(u,l){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!l||"object"!=typeof l&&"function"!=typeof l?u:l}(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,p,_));return h.lastChar=_.lastChar,h}return function d(u,l){if("function"!=typeof l&&null!==l)throw new TypeError("Super expression must either be null or a function, not "+typeof l);u.prototype=Object.create(l&&l.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),l&&(Object.setPrototypeOf?Object.setPrototypeOf(u,l):u.__proto__=l)}(l,u),b(l,[{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]{13}$/)&&+this.data[12]===a(this.data)}},{key:"leftText",value:function(){return C(l.prototype.__proto__||Object.getPrototypeOf(l.prototype),"leftText",this).call(this,1,6)}},{key:"leftEncode",value:function(){var _=this.data.substr(1,6),h=O.EAN13_STRUCTURE[this.data[0]];return C(l.prototype.__proto__||Object.getPrototypeOf(l.prototype),"leftEncode",this).call(this,_,h)}},{key:"rightText",value:function(){return C(l.prototype.__proto__||Object.getPrototypeOf(l.prototype),"rightText",this).call(this,7,6)}},{key:"rightEncode",value:function(){var _=this.data.substr(7,6);return C(l.prototype.__proto__||Object.getPrototypeOf(l.prototype),"rightEncode",this).call(this,_,"RRRRRR")}},{key:"encodeGuarded",value:function(){var _=C(l.prototype.__proto__||Object.getPrototypeOf(l.prototype),"encodeGuarded",this).call(this);return this.options.displayValue&&(_.unshift({data:"000000000000",text:this.text.substr(0,1),options:{textAlign:"left",fontSize:this.fontSize}}),this.options.lastChar&&(_.push({data:"00"}),_.push({data:"00000",text:this.options.lastChar,options:{fontSize:this.fontSize}}))),_}}]),l}(S.default);m.default=e},197:(w,m,f)=>{Object.defineProperty(m,"__esModule",{value:!0});var b=function(){function u(l,p){for(var _=0;_<p.length;_++){var h=p[_];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(l,h.key,h)}}return function(l,p,_){return p&&u(l.prototype,p),_&&u(l,_),l}}(),C=f(2846),v=g(f(2143));function g(u){return u&&u.__esModule?u:{default:u}}var e=function(u){function l(p,_){return function y(u,l){if(!(u instanceof l))throw new TypeError("Cannot call a class as a function")}(this,l),function d(u,l){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!l||"object"!=typeof l&&"function"!=typeof l?u:l}(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,p,_))}return function a(u,l){if("function"!=typeof l&&null!==l)throw new TypeError("Super expression must either be null or a function, not "+typeof l);u.prototype=Object.create(l&&l.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),l&&(Object.setPrototypeOf?Object.setPrototypeOf(u,l):u.__proto__=l)}(l,u),b(l,[{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]{2}$/)}},{key:"encode",value:function(){var _=C.EAN2_STRUCTURE[parseInt(this.data)%4];return{data:"1011"+(0,v.default)(this.data,_,"01"),text:this.text}}}]),l}(g(f(2933)).default);m.default=e},6400:(w,m,f)=>{Object.defineProperty(m,"__esModule",{value:!0});var b=function(){function l(p,_){for(var h=0;h<_.length;h++){var I=_[h];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(p,I.key,I)}}return function(p,_,h){return _&&l(p.prototype,_),h&&l(p,h),p}}(),C=f(2846),v=g(f(2143));function g(l){return l&&l.__esModule?l:{default:l}}var u=function(l){function p(_,h){return function y(l,p){if(!(l instanceof p))throw new TypeError("Cannot call a class as a function")}(this,p),function d(l,p){if(!l)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!p||"object"!=typeof p&&"function"!=typeof p?l:p}(this,(p.__proto__||Object.getPrototypeOf(p)).call(this,_,h))}return function a(l,p){if("function"!=typeof p&&null!==p)throw new TypeError("Super expression must either be null or a function, not "+typeof p);l.prototype=Object.create(p&&p.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(l,p):l.__proto__=p)}(p,l),b(p,[{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]{5}$/)}},{key:"encode",value:function(){var h=C.EAN5_STRUCTURE[function(p){return p.split("").map(function(h){return+h}).reduce(function(h,I,T){return T%2?h+9*I:h+3*I},0)%10}(this.data)];return{data:"1011"+(0,v.default)(this.data,h,"01"),text:this.text}}}]),p}(g(f(2933)).default);m.default=u},2587:(w,m,f)=>{Object.defineProperty(m,"__esModule",{value:!0});var b=function(){function e(u,l){for(var p=0;p<l.length;p++){var _=l[p];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(u,_.key,_)}}return function(u,l,p){return l&&e(u.prototype,l),p&&e(u,p),u}}(),C=function e(u,l,p){null===u&&(u=Function.prototype);var _=Object.getOwnPropertyDescriptor(u,l);if(void 0===_){var h=Object.getPrototypeOf(u);return null===h?void 0:e(h,l,p)}if("value"in _)return _.value;var I=_.get;return void 0===I?void 0:I.call(p)},v=function S(e){return e&&e.__esModule?e:{default:e}}(f(7331)),d=function(u){return(10-u.substr(0,7).split("").map(function(p){return+p}).reduce(function(p,_,h){return h%2?p+_:p+3*_},0)%10)%10},a=function(e){function u(l,p){return function E(e,u){if(!(e instanceof u))throw new TypeError("Cannot call a class as a function")}(this,u),-1!==l.search(/^[0-9]{7}$/)&&(l+=d(l)),function g(e,u){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!u||"object"!=typeof u&&"function"!=typeof u?e:u}(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,l,p))}return function y(e,u){if("function"!=typeof u&&null!==u)throw new TypeError("Super expression must either be null or a function, not "+typeof u);e.prototype=Object.create(u&&u.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),u&&(Object.setPrototypeOf?Object.setPrototypeOf(e,u):e.__proto__=u)}(u,e),b(u,[{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]{8}$/)&&+this.data[7]===d(this.data)}},{key:"leftText",value:function(){return C(u.prototype.__proto__||Object.getPrototypeOf(u.prototype),"leftText",this).call(this,0,4)}},{key:"leftEncode",value:function(){var p=this.data.substr(0,4);return C(u.prototype.__proto__||Object.getPrototypeOf(u.prototype),"leftEncode",this).call(this,p,"LLLL")}},{key:"rightText",value:function(){return C(u.prototype.__proto__||Object.getPrototypeOf(u.prototype),"rightText",this).call(this,4,4)}},{key:"rightEncode",value:function(){var p=this.data.substr(4,4);return C(u.prototype.__proto__||Object.getPrototypeOf(u.prototype),"rightEncode",this).call(this,p,"RRRR")}}]),u}(v.default);m.default=a},1541:(w,m,f)=>{Object.defineProperty(m,"__esModule",{value:!0});var b=function(){function u(l,p){for(var _=0;_<p.length;_++){var h=p[_];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(l,h.key,h)}}return function(l,p,_){return p&&u(l.prototype,p),_&&u(l,_),l}}();m.checksum=e;var O=E(f(2143));function E(u){return u&&u.__esModule?u:{default:u}}var a=function(u){function l(p,_){(function g(u,l){if(!(u instanceof l))throw new TypeError("Cannot call a class as a function")})(this,l),-1!==p.search(/^[0-9]{11}$/)&&(p+=e(p));var h=function y(u,l){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!l||"object"!=typeof l&&"function"!=typeof l?u:l}(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,p,_));return h.displayValue=_.displayValue,h.fontSize=_.fontSize>10*_.width?10*_.width:_.fontSize,h.guardHeight=_.height+h.fontSize/2+_.textMargin,h}return function d(u,l){if("function"!=typeof l&&null!==l)throw new TypeError("Super expression must either be null or a function, not "+typeof l);u.prototype=Object.create(l&&l.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),l&&(Object.setPrototypeOf?Object.setPrototypeOf(u,l):u.__proto__=l)}(l,u),b(l,[{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]{12}$/)&&this.data[11]==e(this.data)}},{key:"encode",value:function(){return this.options.flat?this.flatEncoding():this.guardedEncoding()}},{key:"flatEncoding",value:function(){var _="";return _+="101",_+=(0,O.default)(this.data.substr(0,6),"LLLLLL"),_+="01010",_+=(0,O.default)(this.data.substr(6,6),"RRRRRR"),{data:_+="101",text:this.text}}},{key:"guardedEncoding",value:function(){var _=[];return this.displayValue&&_.push({data:"00000000",text:this.text.substr(0,1),options:{textAlign:"left",fontSize:this.fontSize}}),_.push({data:"101"+(0,O.default)(this.data[0],"L"),options:{height:this.guardHeight}}),_.push({data:(0,O.default)(this.data.substr(1,5),"LLLLL"),text:this.text.substr(1,5),options:{fontSize:this.fontSize}}),_.push({data:"01010",options:{height:this.guardHeight}}),_.push({data:(0,O.default)(this.data.substr(6,5),"RRRRR"),text:this.text.substr(6,5),options:{fontSize:this.fontSize}}),_.push({data:(0,O.default)(this.data[11],"R")+"101",options:{height:this.guardHeight}}),this.displayValue&&_.push({data:"00000000",text:this.text.substr(11,1),options:{textAlign:"right",fontSize:this.fontSize}}),_}}]),l}(E(f(2933)).default);function e(u){var p,l=0;for(p=1;p<11;p+=2)l+=parseInt(u[p]);for(p=0;p<11;p+=2)l+=3*parseInt(u[p]);return(10-l%10)%10}m.default=a},7638:(w,m,f)=>{Object.defineProperty(m,"__esModule",{value:!0});var b=function(){function _(h,I){for(var T=0;T<I.length;T++){var F=I[T];F.enumerable=F.enumerable||!1,F.configurable=!0,"value"in F&&(F.writable=!0),Object.defineProperty(h,F.key,F)}}return function(h,I,T){return I&&_(h.prototype,I),T&&_(h,T),h}}(),O=g(f(2143)),S=g(f(2933)),E=f(1541);function g(_){return _&&_.__esModule?_:{default:_}}function d(_,h){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!h||"object"!=typeof h&&"function"!=typeof h?_:h}var e=["XX00000XXX","XX10000XXX","XX20000XXX","XXX00000XX","XXXX00000X","XXXXX00005","XXXXX00006","XXXXX00007","XXXXX00008","XXXXX00009"],u=[["EEEOOO","OOOEEE"],["EEOEOO","OOEOEE"],["EEOOEO","OOEEOE"],["EEOOOE","OOEEEO"],["EOEEOO","OEOOEE"],["EOOEEO","OEEOOE"],["EOOOEE","OEEEOO"],["EOEOEO","OEOEOE"],["EOEOOE","OEOEEO"],["EOOEOE","OEEOEO"]],l=function(_){function h(I,T){!function y(_,h){if(!(_ instanceof h))throw new TypeError("Cannot call a class as a function")}(this,h);var F=d(this,(h.__proto__||Object.getPrototypeOf(h)).call(this,I,T));if(F.isValid=!1,-1!==I.search(/^[0-9]{6}$/))F.middleDigits=I,F.upcA=p(I,"0"),F.text=T.text||""+F.upcA[0]+I+F.upcA[F.upcA.length-1],F.isValid=!0;else{if(-1===I.search(/^[01][0-9]{7}$/))return d(F);if(F.middleDigits=I.substring(1,I.length-1),F.upcA=p(F.middleDigits,I[0]),F.upcA[F.upcA.length-1]!==I[I.length-1])return d(F);F.isValid=!0}return F.displayValue=T.displayValue,F.fontSize=T.fontSize>10*T.width?10*T.width:T.fontSize,F.guardHeight=T.height+F.fontSize/2+T.textMargin,F}return function a(_,h){if("function"!=typeof h&&null!==h)throw new TypeError("Super expression must either be null or a function, not "+typeof h);_.prototype=Object.create(h&&h.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),h&&(Object.setPrototypeOf?Object.setPrototypeOf(_,h):_.__proto__=h)}(h,_),b(h,[{key:"valid",value:function(){return this.isValid}},{key:"encode",value:function(){return this.options.flat?this.flatEncoding():this.guardedEncoding()}},{key:"flatEncoding",value:function(){var T="";return T+="101",T+=this.encodeMiddleDigits(),{data:T+="010101",text:this.text}}},{key:"guardedEncoding",value:function(){var T=[];return this.displayValue&&T.push({data:"00000000",text:this.text[0],options:{textAlign:"left",fontSize:this.fontSize}}),T.push({data:"101",options:{height:this.guardHeight}}),T.push({data:this.encodeMiddleDigits(),text:this.text.substring(1,7),options:{fontSize:this.fontSize}}),T.push({data:"010101",options:{height:this.guardHeight}}),this.displayValue&&T.push({data:"00000000",text:this.text[7],options:{textAlign:"right",fontSize:this.fontSize}}),T}},{key:"encodeMiddleDigits",value:function(){var T=this.upcA[0],P=u[parseInt(this.upcA[this.upcA.length-1])][parseInt(T)];return(0,O.default)(this.middleDigits,P)}}]),h}(S.default);function p(_,h){for(var I=parseInt(_[_.length-1]),T=e[I],F="",P=0,U=0;U<T.length;U++){var J=T[U];F+="X"===J?_[P++]:J}return(F=""+h+F)+(0,E.checksum)(F)}m.default=l},2846:(w,m)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.SIDE_BIN="101",m.MIDDLE_BIN="01010",m.BINARIES={L:["0001101","0011001","0010011","0111101","0100011","0110001","0101111","0111011","0110111","0001011"],G:["0100111","0110011","0011011","0100001","0011101","0111001","0000101","0010001","0001001","0010111"],R:["1110010","1100110","1101100","1000010","1011100","1001110","1010000","1000100","1001000","1110100"],O:["0001101","0011001","0010011","0111101","0100011","0110001","0101111","0111011","0110111","0001011"],E:["0100111","0110011","0011011","0100001","0011101","0111001","0000101","0010001","0001001","0010111"]},m.EAN2_STRUCTURE=["LL","LG","GL","GG"],m.EAN5_STRUCTURE=["GGLLL","GLGLL","GLLGL","GLLLG","LGGLL","LLGGL","LLLGG","LGLGL","LGLLG","LLGLG"],m.EAN13_STRUCTURE=["LLLLLL","LLGLGG","LLGGLG","LLGGGL","LGLLGG","LGGLLG","LGGGLL","LGLGLG","LGLGGL","LGGLGL"]},2143:(w,m,f)=>{Object.defineProperty(m,"__esModule",{value:!0});var b=f(2846);m.default=function(v,S,E){var g=v.split("").map(function(d,a){return b.BINARIES[S[a]]}).map(function(d,a){return d?d[v[a]]:""});if(E){var y=v.length-1;g=g.map(function(d,a){return a<y?d+E:d})}return g.join("")}},9995:(w,m,f)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.UPCE=m.UPC=m.EAN2=m.EAN5=m.EAN8=m.EAN13=void 0;var C=l(f(7779)),v=l(f(2587)),E=l(f(6400)),y=l(f(197)),a=l(f(1541)),u=l(f(7638));function l(p){return p&&p.__esModule?p:{default:p}}m.EAN13=C.default,m.EAN8=v.default,m.EAN5=E.default,m.EAN2=y.default,m.UPC=a.default,m.UPCE=u.default},9257:(w,m,f)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.GenericBarcode=void 0;var b=function(){function d(a,e){for(var u=0;u<e.length;u++){var l=e[u];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(a,l.key,l)}}return function(a,e,u){return e&&d(a.prototype,e),u&&d(a,u),a}}(),y=function(d){function a(e,u){return function S(d,a){if(!(d instanceof a))throw new TypeError("Cannot call a class as a function")}(this,a),function E(d,a){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!a||"object"!=typeof a&&"function"!=typeof a?d:a}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e,u))}return function g(d,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+typeof a);d.prototype=Object.create(a&&a.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(d,a):d.__proto__=a)}(a,d),b(a,[{key:"encode",value:function(){return{data:"10101010101010101010101010101010101010101",text:this.text}}},{key:"valid",value:function(){return!0}}]),a}(function v(d){return d&&d.__esModule?d:{default:d}}(f(2933)).default);m.GenericBarcode=y},3534:(w,m,f)=>{Object.defineProperty(m,"__esModule",{value:!0});var b=function(){function a(e,u){for(var l=0;l<u.length;l++){var p=u[l];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(e,p.key,p)}}return function(e,u,l){return u&&a(e.prototype,u),l&&a(e,l),e}}(),C=f(2218),d=function(a){function e(){return function E(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function g(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?a:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function y(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}(e,a),b(e,[{key:"valid",value:function(){return-1!==this.data.search(/^([0-9]{2})+$/)}},{key:"encode",value:function(){var l=this,p=this.data.match(/.{2}/g).map(function(_){return l.encodePair(_)}).join("");return{data:C.START_BIN+p+C.END_BIN,text:this.text}}},{key:"encodePair",value:function(l){var p=C.BINARIES[l[1]];return C.BINARIES[l[0]].split("").map(function(_,h){return("1"===_?"111":"1")+("1"===p[h]?"000":"0")}).join("")}}]),e}(function S(a){return a&&a.__esModule?a:{default:a}}(f(2933)).default);m.default=d},6023:(w,m,f)=>{Object.defineProperty(m,"__esModule",{value:!0});var b=function(){function a(e,u){for(var l=0;l<u.length;l++){var p=u[l];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(e,p.key,p)}}return function(e,u,l){return u&&a(e.prototype,u),l&&a(e,l),e}}(),O=function v(a){return a&&a.__esModule?a:{default:a}}(f(3534)),y=function(e){var u=e.substr(0,13).split("").map(function(l){return parseInt(l,10)}).reduce(function(l,p,_){return l+p*(3-_%2*2)},0);return 10*Math.ceil(u/10)-u},d=function(a){function e(u,l){return function S(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),-1!==u.search(/^[0-9]{13}$/)&&(u+=y(u)),function E(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?a:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,u,l))}return function g(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}(e,a),b(e,[{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]{14}$/)&&+this.data[13]===y(this.data)}}]),e}(O.default);m.default=d},2218:(w,m)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.START_BIN="1010",m.END_BIN="11101",m.BINARIES=["00110","10001","01001","11000","00101","10100","01100","00011","10010","01010"]},9319:(w,m,f)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.ITF14=m.ITF=void 0;var C=S(f(3534)),v=S(f(6023));function S(E){return E&&E.__esModule?E:{default:E}}m.ITF=C.default,m.ITF14=v.default},8778:(w,m,f)=>{Object.defineProperty(m,"__esModule",{value:!0});var b=function(){function a(e,u){for(var l=0;l<u.length;l++){var p=u[l];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(e,p.key,p)}}return function(e,u,l){return u&&a(e.prototype,u),l&&a(e,l),e}}(),y=function(a){function e(u,l){return function S(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function E(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?a:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,u,l))}return function g(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}(e,a),b(e,[{key:"encode",value:function(){for(var l="110",p=0;p<this.data.length;p++){var h=parseInt(this.data[p]).toString(2);h=d(h,4-h.length);for(var I=0;I<h.length;I++)l+="0"==h[I]?"100":"110"}return{data:l+="1001",text:this.text}}},{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]+$/)}}]),e}(function v(a){return a&&a.__esModule?a:{default:a}}(f(2933)).default);function d(a,e){for(var u=0;u<e;u++)a="0"+a;return a}m.default=y},3167:(w,m,f)=>{Object.defineProperty(m,"__esModule",{value:!0});var C=function v(d){return d&&d.__esModule?d:{default:d}}(f(8778)),O=f(2821),y=function(d){function a(e,u){return function S(d,a){if(!(d instanceof a))throw new TypeError("Cannot call a class as a function")}(this,a),function E(d,a){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!a||"object"!=typeof a&&"function"!=typeof a?d:a}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e+(0,O.mod10)(e),u))}return function g(d,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+typeof a);d.prototype=Object.create(a&&a.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(d,a):d.__proto__=a)}(a,d),a}(C.default);m.default=y},1522:(w,m,f)=>{Object.defineProperty(m,"__esModule",{value:!0});var C=function v(d){return d&&d.__esModule?d:{default:d}}(f(8778)),O=f(2821),y=function(d){function a(e,u){return function S(d,a){if(!(d instanceof a))throw new TypeError("Cannot call a class as a function")}(this,a),e+=(0,O.mod10)(e),e+=(0,O.mod10)(e),function E(d,a){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!a||"object"!=typeof a&&"function"!=typeof a?d:a}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e,u))}return function g(d,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+typeof a);d.prototype=Object.create(a&&a.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(d,a):d.__proto__=a)}(a,d),a}(C.default);m.default=y},8552:(w,m,f)=>{Object.defineProperty(m,"__esModule",{value:!0});var C=function v(d){return d&&d.__esModule?d:{default:d}}(f(8778)),O=f(2821),y=function(d){function a(e,u){return function S(d,a){if(!(d instanceof a))throw new TypeError("Cannot call a class as a function")}(this,a),function E(d,a){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!a||"object"!=typeof a&&"function"!=typeof a?d:a}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e+(0,O.mod11)(e),u))}return function g(d,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+typeof a);d.prototype=Object.create(a&&a.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(d,a):d.__proto__=a)}(a,d),a}(C.default);m.default=y},677:(w,m,f)=>{Object.defineProperty(m,"__esModule",{value:!0});var C=function v(d){return d&&d.__esModule?d:{default:d}}(f(8778)),O=f(2821),y=function(d){function a(e,u){return function S(d,a){if(!(d instanceof a))throw new TypeError("Cannot call a class as a function")}(this,a),e+=(0,O.mod11)(e),e+=(0,O.mod10)(e),function E(d,a){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!a||"object"!=typeof a&&"function"!=typeof a?d:a}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e,u))}return function g(d,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+typeof a);d.prototype=Object.create(a&&a.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(d,a):d.__proto__=a)}(a,d),a}(C.default);m.default=y},2821:(w,m)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.mod10=function f(C){for(var O=0,v=0;v<C.length;v++){var S=parseInt(C[v]);O+=(v+C.length)%2==0?S:2*S%10+Math.floor(2*S/10)}return(10-O%10)%10},m.mod11=function b(C){for(var O=0,v=[2,3,4,5,6,7],S=0;S<C.length;S++){var E=parseInt(C[C.length-1-S]);O+=v[S%v.length]*E}return(11-O%11)%11}},3641:(w,m,f)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.MSI1110=m.MSI1010=m.MSI11=m.MSI10=m.MSI=void 0;var C=e(f(8778)),v=e(f(3167)),E=e(f(8552)),y=e(f(1522)),a=e(f(677));function e(u){return u&&u.__esModule?u:{default:u}}m.MSI=C.default,m.MSI10=v.default,m.MSI11=E.default,m.MSI1010=y.default,m.MSI1110=a.default},9468:(w,m,f)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.codabar=void 0;var b=function(){function d(a,e){for(var u=0;u<e.length;u++){var l=e[u];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(a,l.key,l)}}return function(a,e,u){return e&&d(a.prototype,e),u&&d(a,u),a}}(),y=function(d){function a(e,u){(function S(d,a){if(!(d instanceof a))throw new TypeError("Cannot call a class as a function")})(this,a),0===e.search(/^[0-9\-\$\:\.\+\/]+$/)&&(e="A"+e+"A");var l=function E(d,a){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!a||"object"!=typeof a&&"function"!=typeof a?d:a}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e.toUpperCase(),u));return l.text=l.options.text||l.text.replace(/[A-D]/g,""),l}return function g(d,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+typeof a);d.prototype=Object.create(a&&a.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(d,a):d.__proto__=a)}(a,d),b(a,[{key:"valid",value:function(){return-1!==this.data.search(/^[A-D][0-9\-\$\:\.\+\/]+[A-D]$/)}},{key:"encode",value:function(){for(var u=[],l=this.getEncodings(),p=0;p<this.data.length;p++)u.push(l[this.data.charAt(p)]),p!==this.data.length-1&&u.push("0");return{text:this.text,data:u.join("")}}},{key:"getEncodings",value:function(){return{0:"101010011",1:"101011001",2:"101001011",3:"110010101",4:"101101001",5:"110101001",6:"100101011",7:"100101101",8:"100110101",9:"110100101","-":"101001101",$:"101100101",":":"1101011011","/":"1101101011",".":"1101101101","+":"1011011011",A:"1011001001",B:"1001001011",C:"1010010011",D:"1010011001"}}}]),a}(function v(d){return d&&d.__esModule?d:{default:d}}(f(2933)).default);m.codabar=y},3209:(w,m,f)=>{Object.defineProperty(m,"__esModule",{value:!0});var b=f(3803),C=f(9152),O=f(9995),v=f(9319),S=f(3641),E=f(4322),g=f(9468),y=f(9257);m.default={CODE39:b.CODE39,CODE128:C.CODE128,CODE128A:C.CODE128A,CODE128B:C.CODE128B,CODE128C:C.CODE128C,EAN13:O.EAN13,EAN8:O.EAN8,EAN5:O.EAN5,EAN2:O.EAN2,UPC:O.UPC,UPCE:O.UPCE,ITF14:v.ITF14,ITF:v.ITF,MSI:S.MSI,MSI10:S.MSI10,MSI11:S.MSI11,MSI1010:S.MSI1010,MSI1110:S.MSI1110,pharmacode:E.pharmacode,codabar:g.codabar,GenericBarcode:y.GenericBarcode}},4322:(w,m,f)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.pharmacode=void 0;var b=function(){function d(a,e){for(var u=0;u<e.length;u++){var l=e[u];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(a,l.key,l)}}return function(a,e,u){return e&&d(a.prototype,e),u&&d(a,u),a}}(),y=function(d){function a(e,u){!function S(d,a){if(!(d instanceof a))throw new TypeError("Cannot call a class as a function")}(this,a);var l=function E(d,a){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!a||"object"!=typeof a&&"function"!=typeof a?d:a}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e,u));return l.number=parseInt(e,10),l}return function g(d,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+typeof a);d.prototype=Object.create(a&&a.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(d,a):d.__proto__=a)}(a,d),b(a,[{key:"encode",value:function(){for(var u=this.number,l="";!isNaN(u)&&0!=u;)u%2==0?(l="11100"+l,u=(u-2)/2):(l="100"+l,u=(u-1)/2);return{data:l=l.slice(0,-2),text:this.text}}},{key:"valid",value:function(){return this.number>=3&&this.number<=131070}}]),a}(function v(d){return d&&d.__esModule?d:{default:d}}(f(2933)).default);m.pharmacode=y},650:(w,m)=>{Object.defineProperty(m,"__esModule",{value:!0});var f=function(){function O(v,S){for(var E=0;E<S.length;E++){var g=S[E];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(v,g.key,g)}}return function(v,S,E){return S&&O(v.prototype,S),E&&O(v,E),v}}(),C=function(){function O(v){(function b(O,v){if(!(O instanceof v))throw new TypeError("Cannot call a class as a function")})(this,O),this.api=v}return f(O,[{key:"handleCatch",value:function(S){if("InvalidInputException"!==S.name)throw S;if(this.api._options.valid===this.api._defaults.valid)throw S.message;this.api._options.valid(!1),this.api.render=function(){}}},{key:"wrapBarcodeCall",value:function(S){try{var E=S.apply(void 0,arguments);return this.api._options.valid(!0),E}catch(g){return this.handleCatch(g),this.api}}}]),O}();m.default=C},1498:(w,m)=>{function f(E,g){if(!(E instanceof g))throw new TypeError("Cannot call a class as a function")}function b(E,g){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!g||"object"!=typeof g&&"function"!=typeof g?E:g}function C(E,g){if("function"!=typeof g&&null!==g)throw new TypeError("Super expression must either be null or a function, not "+typeof g);E.prototype=Object.create(g&&g.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(E,g):E.__proto__=g)}Object.defineProperty(m,"__esModule",{value:!0});var O=function(){function g(y,d){f(this,g);var a=b(this,(g.__proto__||Object.getPrototypeOf(g)).call(this));return a.name="InvalidInputException",a.symbology=y,a.input=d,a.message='"'+a.input+'" is not a valid input for '+a.symbology,a}return C(g,Error),g}(),v=function(){function g(){f(this,g);var y=b(this,(g.__proto__||Object.getPrototypeOf(g)).call(this));return y.name="InvalidElementException",y.message="Not supported type to render on",y}return C(g,Error),g}(),S=function(){function g(){f(this,g);var y=b(this,(g.__proto__||Object.getPrototypeOf(g)).call(this));return y.name="NoElementException",y.message="No element to render on.",y}return C(g,Error),g}();m.InvalidInputException=O,m.InvalidElementException=v,m.NoElementException=S},8084:(w,m)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.default=function f(b){return b.marginTop=b.marginTop||b.margin,b.marginBottom=b.marginBottom||b.margin,b.marginRight=b.marginRight||b.margin,b.marginLeft=b.marginLeft||b.margin,b}},329:(w,m,f)=>{Object.defineProperty(m,"__esModule",{value:!0});var C=S(f(1951)),v=S(f(5482));function S(g){return g&&g.__esModule?g:{default:g}}m.default=function E(g){var y={};for(var d in v.default)v.default.hasOwnProperty(d)&&(g.hasAttribute("jsbarcode-"+d.toLowerCase())&&(y[d]=g.getAttribute("jsbarcode-"+d.toLowerCase())),g.hasAttribute("data-"+d.toLowerCase())&&(y[d]=g.getAttribute("data-"+d.toLowerCase())));return y.value=g.getAttribute("jsbarcode-value")||g.getAttribute("data-value"),(0,C.default)(y)}},2042:(w,m,f)=>{Object.defineProperty(m,"__esModule",{value:!0});var b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O=g(f(329)),S=g(f(2368)),E=f(1498);function g(e){return e&&e.__esModule?e:{default:e}}m.default=function y(e){if("string"==typeof e)return function d(e){var u=document.querySelectorAll(e);if(0!==u.length){for(var l=[],p=0;p<u.length;p++)l.push(y(u[p]));return l}}(e);if(Array.isArray(e)){for(var u=[],l=0;l<e.length;l++)u.push(y(e[l]));return u}if(typeof HTMLCanvasElement<"u"&&e instanceof HTMLImageElement)return function a(e){var u=document.createElement("canvas");return{element:u,options:(0,O.default)(e),renderer:S.default.CanvasRenderer,afterRender:function(){e.setAttribute("src",u.toDataURL())}}}(e);if(e&&e.nodeName&&"svg"===e.nodeName.toLowerCase()||typeof SVGElement<"u"&&e instanceof SVGElement)return{element:e,options:(0,O.default)(e),renderer:S.default.SVGRenderer};if(typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement)return{element:e,options:(0,O.default)(e),renderer:S.default.CanvasRenderer};if(e&&e.getContext)return{element:e,renderer:S.default.CanvasRenderer};if(e&&"object"===(typeof e>"u"?"undefined":b(e))&&!e.nodeName)return{element:e,renderer:S.default.ObjectRenderer};throw new E.InvalidElementException}},9246:(w,m)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.default=function f(b){var C=[];return function O(v){if(Array.isArray(v))for(var S=0;S<v.length;S++)O(v[S]);else v.text=v.text||"",v.data=v.data||"",C.push(v)}(b),C}},3931:(w,m)=>{Object.defineProperty(m,"__esModule",{value:!0});var f=Object.assign||function(b){for(var C=1;C<arguments.length;C++){var O=arguments[C];for(var v in O)Object.prototype.hasOwnProperty.call(O,v)&&(b[v]=O[v])}return b};m.default=function(b,C){return f({},b,C)}},1951:(w,m)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.default=function f(b){var C=["width","height","textMargin","fontSize","margin","marginTop","marginBottom","marginLeft","marginRight"];for(var O in C)C.hasOwnProperty(O)&&"string"==typeof b[O=C[O]]&&(b[O]=parseInt(b[O],10));return"string"==typeof b.displayValue&&(b.displayValue="false"!=b.displayValue),b}},5482:(w,m)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.default={width:2,height:100,format:"auto",displayValue:!0,fontOptions:"",font:"monospace",text:void 0,textAlign:"center",textPosition:"bottom",textMargin:2,fontSize:20,background:"#ffffff",lineColor:"#000000",margin:10,marginTop:void 0,marginBottom:void 0,marginLeft:void 0,marginRight:void 0,valid:function(){}}},8682:(w,m,f)=>{Object.defineProperty(m,"__esModule",{value:!0});var b=function(){function y(d,a){for(var e=0;e<a.length;e++){var u=a[e];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(d,u.key,u)}}return function(d,a,e){return a&&y(d.prototype,a),e&&y(d,e),d}}(),O=function S(y){return y&&y.__esModule?y:{default:y}}(f(3931)),v=f(2283),g=function(){function y(d,a,e){(function E(y,d){if(!(y instanceof d))throw new TypeError("Cannot call a class as a function")})(this,y),this.canvas=d,this.encodings=a,this.options=e}return b(y,[{key:"render",value:function(){if(!this.canvas.getContext)throw new Error("The browser does not support canvas.");this.prepareCanvas();for(var a=0;a<this.encodings.length;a++){var e=(0,O.default)(this.options,this.encodings[a].options);this.drawCanvasBarcode(e,this.encodings[a]),this.drawCanvasText(e,this.encodings[a]),this.moveCanvasDrawing(this.encodings[a])}this.restoreCanvas()}},{key:"prepareCanvas",value:function(){var a=this.canvas.getContext("2d");a.save(),(0,v.calculateEncodingAttributes)(this.encodings,this.options,a);var e=(0,v.getTotalWidthOfEncodings)(this.encodings),u=(0,v.getMaximumHeightOfEncodings)(this.encodings);this.canvas.width=e+this.options.marginLeft+this.options.marginRight,this.canvas.height=u,a.clearRect(0,0,this.canvas.width,this.canvas.height),this.options.background&&(a.fillStyle=this.options.background,a.fillRect(0,0,this.canvas.width,this.canvas.height)),a.translate(this.options.marginLeft,0)}},{key:"drawCanvasBarcode",value:function(a,e){var p,u=this.canvas.getContext("2d"),l=e.data;p="top"==a.textPosition?a.marginTop+a.fontSize+a.textMargin:a.marginTop,u.fillStyle=a.lineColor;for(var _=0;_<l.length;_++){var h=_*a.width+e.barcodePadding;"1"===l[_]?u.fillRect(h,p,a.width,a.height):l[_]&&u.fillRect(h,p,a.width,a.height*l[_])}}},{key:"drawCanvasText",value:function(a,e){var p,_,u=this.canvas.getContext("2d");a.displayValue&&(_="top"==a.textPosition?a.marginTop+a.fontSize-a.textMargin:a.height+a.textMargin+a.marginTop+a.fontSize,u.font=a.fontOptions+" "+a.fontSize+"px "+a.font,"left"==a.textAlign||e.barcodePadding>0?(p=0,u.textAlign="left"):"right"==a.textAlign?(p=e.width-1,u.textAlign="right"):(p=e.width/2,u.textAlign="center"),u.fillText(e.text,p,_))}},{key:"moveCanvasDrawing",value:function(a){this.canvas.getContext("2d").translate(a.width,0)}},{key:"restoreCanvas",value:function(){this.canvas.getContext("2d").restore()}}]),y}();m.default=g},2368:(w,m,f)=>{Object.defineProperty(m,"__esModule",{value:!0});var C=g(f(8682)),v=g(f(1538)),E=g(f(1045));function g(y){return y&&y.__esModule?y:{default:y}}m.default={CanvasRenderer:C.default,SVGRenderer:v.default,ObjectRenderer:E.default}},1045:(w,m)=>{Object.defineProperty(m,"__esModule",{value:!0});var f=function(){function O(v,S){for(var E=0;E<S.length;E++){var g=S[E];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(v,g.key,g)}}return function(v,S,E){return S&&O(v.prototype,S),E&&O(v,E),v}}(),C=function(){function O(v,S,E){(function b(O,v){if(!(O instanceof v))throw new TypeError("Cannot call a class as a function")})(this,O),this.object=v,this.encodings=S,this.options=E}return f(O,[{key:"render",value:function(){this.object.encodings=this.encodings}}]),O}();m.default=C},2283:(w,m,f)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.getTotalWidthOfEncodings=m.calculateEncodingAttributes=m.getBarcodePadding=m.getEncodingHeight=m.getMaximumHeightOfEncodings=void 0;var C=function O(a){return a&&a.__esModule?a:{default:a}}(f(3931));function v(a,e){return e.height+(e.displayValue&&a.text.length>0?e.fontSize+e.textMargin:0)+e.marginTop+e.marginBottom}function S(a,e,u){if(u.displayValue&&e<a){if("center"==u.textAlign)return Math.floor((a-e)/2);if("left"==u.textAlign)return 0;if("right"==u.textAlign)return Math.floor(a-e)}return 0}function d(a,e,u){var l;if(u)l=u;else{if(!(typeof document<"u"))return 0;l=document.createElement("canvas").getContext("2d")}l.font=e.fontOptions+" "+e.fontSize+"px "+e.font;var p=l.measureText(a);return p?p.width:0}m.getMaximumHeightOfEncodings=function y(a){for(var e=0,u=0;u<a.length;u++)a[u].height>e&&(e=a[u].height);return e},m.getEncodingHeight=v,m.getBarcodePadding=S,m.calculateEncodingAttributes=function E(a,e,u){for(var l=0;l<a.length;l++){var h,p=a[l],_=(0,C.default)(e,p.options);h=_.displayValue?d(p.text,_,u):0;var I=p.data.length*_.width;p.width=Math.ceil(Math.max(h,I)),p.height=v(p,_),p.barcodePadding=S(h,I,_)}},m.getTotalWidthOfEncodings=function g(a){for(var e=0,u=0;u<a.length;u++)e+=a[u].width;return e}},1538:(w,m,f)=>{Object.defineProperty(m,"__esModule",{value:!0});var b=function(){function d(a,e){for(var u=0;u<e.length;u++){var l=e[u];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(a,l.key,l)}}return function(a,e,u){return e&&d(a.prototype,e),u&&d(a,u),a}}(),O=function S(d){return d&&d.__esModule?d:{default:d}}(f(3931)),v=f(2283),g="http://www.w3.org/2000/svg",y=function(){function d(a,e,u){(function E(d,a){if(!(d instanceof a))throw new TypeError("Cannot call a class as a function")})(this,d),this.svg=a,this.encodings=e,this.options=u,this.document=u.xmlDocument||document}return b(d,[{key:"render",value:function(){var e=this.options.marginLeft;this.prepareSVG();for(var u=0;u<this.encodings.length;u++){var l=this.encodings[u],p=(0,O.default)(this.options,l.options),_=this.createGroup(e,p.marginTop,this.svg);this.setGroupOptions(_,p),this.drawSvgBarcode(_,p,l),this.drawSVGText(_,p,l),e+=l.width}}},{key:"prepareSVG",value:function(){for(;this.svg.firstChild;)this.svg.removeChild(this.svg.firstChild);(0,v.calculateEncodingAttributes)(this.encodings,this.options);var e=(0,v.getTotalWidthOfEncodings)(this.encodings),u=(0,v.getMaximumHeightOfEncodings)(this.encodings),l=e+this.options.marginLeft+this.options.marginRight;this.setSvgAttributes(l,u),this.options.background&&this.drawRect(0,0,l,u,this.svg).setAttribute("style","fill:"+this.options.background+";")}},{key:"drawSvgBarcode",value:function(e,u,l){var _,p=l.data;_="top"==u.textPosition?u.fontSize+u.textMargin:0;for(var h=0,I=0,T=0;T<p.length;T++)I=T*u.width+l.barcodePadding,"1"===p[T]?h++:h>0&&(this.drawRect(I-u.width*h,_,u.width*h,u.height,e),h=0);h>0&&this.drawRect(I-u.width*(h-1),_,u.width*h,u.height,e)}},{key:"drawSVGText",value:function(e,u,l){var _,h,p=this.document.createElementNS(g,"text");u.displayValue&&(p.setAttribute("style","font:"+u.fontOptions+" "+u.fontSize+"px "+u.font),h="top"==u.textPosition?u.fontSize-u.textMargin:u.height+u.textMargin+u.fontSize,"left"==u.textAlign||l.barcodePadding>0?(_=0,p.setAttribute("text-anchor","start")):"right"==u.textAlign?(_=l.width-1,p.setAttribute("text-anchor","end")):(_=l.width/2,p.setAttribute("text-anchor","middle")),p.setAttribute("x",_),p.setAttribute("y",h),p.appendChild(this.document.createTextNode(l.text)),e.appendChild(p))}},{key:"setSvgAttributes",value:function(e,u){var l=this.svg;l.setAttribute("width",e+"px"),l.setAttribute("height",u+"px"),l.setAttribute("x","0px"),l.setAttribute("y","0px"),l.setAttribute("viewBox","0 0 "+e+" "+u),l.setAttribute("xmlns",g),l.setAttribute("version","1.1"),l.setAttribute("style","transform: translate(0,0)")}},{key:"createGroup",value:function(e,u,l){var p=this.document.createElementNS(g,"g");return p.setAttribute("transform","translate("+e+", "+u+")"),l.appendChild(p),p}},{key:"setGroupOptions",value:function(e,u){e.setAttribute("style","fill:"+u.lineColor+";")}},{key:"drawRect",value:function(e,u,l,p,_){var h=this.document.createElementNS(g,"rect");return h.setAttribute("x",e),h.setAttribute("y",u),h.setAttribute("width",l),h.setAttribute("height",p),_.appendChild(h),h}}]),d}();m.default=y}}]);