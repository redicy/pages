"use strict";(self.webpackChunkseller=self.webpackChunkseller||[]).push([[259],{259:(KA,Z,o)=>{o.r(Z),o.d(Z,{PurchaseModule:()=>LA});var l=o(177),x=o(9909),D=o(2180),T=o(4412),$=o(5964),S=o(5558),d=o(9437),u=o(983),_=o(4153),e=o(4438),p=o(5779),N=o(345),f=o(544),E=o(9998),v=o(1141);const Te=()=>["/purchase/edit"],ve=()=>({"min-width":"75rem"}),ye=()=>[10,25,50],xe=()=>["name","date"],q=g=>({id:g}),Se=g=>["summary",g],Ee=g=>["edit",g];function Ne(g,n){1&g&&(e.j41(0,"tr")(1,"th"),e.EFF(2," \u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 "),e.k0s(),e.j41(3,"th",6),e.EFF(4,"\u0414\u0430\u0442\u0430 "),e.nrm(5,"p-sortIcon",7),e.k0s(),e.j41(6,"th"),e.EFF(7,"\u0421\u0442\u0430\u0442\u0443\u0441"),e.k0s(),e.j41(8,"th"),e.EFF(9,"\u0422\u043e\u0432\u0430\u0440\u044b"),e.k0s(),e.nrm(10,"th"),e.k0s(),e.j41(11,"tr")(12,"th"),e.nrm(13,"p-columnFilter",8),e.k0s(),e.nrm(14,"th")(15,"th"),e.j41(16,"th"),e.nrm(17,"p-columnFilter",9),e.k0s(),e.nrm(18,"th"),e.k0s()),2&g&&(e.R7$(13),e.Y8G("showMatchModes",!1)("showOperator",!1),e.R7$(4),e.Y8G("showMatchModes",!1)("showOperator",!1))}function ke(g,n){if(1&g&&(e.j41(0,"li"),e.EFF(1),e.k0s()),2&g){const t=n.$implicit;e.R7$(),e.SpI(" ",t.value.name," ")}}function De(g,n){if(1&g&&(e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.nI1(5,"date"),e.k0s(),e.j41(6,"td"),e.EFF(7),e.k0s(),e.j41(8,"td")(9,"ul"),e.DNE(10,ke,2,1,"li",10),e.nI1(11,"keyvalue"),e.k0s()(),e.j41(12,"td"),e.nrm(13,"p-button",11)(14,"p-button",12),e.k0s()()),2&g){const t=n.$implicit;e.R7$(2),e.JRh(t.name),e.R7$(2),e.JRh(e.i5U(5,6,t.date,"y-MM-dd")),e.R7$(3),e.JRh(t.status),e.R7$(3),e.Y8G("ngForOf",e.bMT(11,9,t.products)),e.R7$(3),e.Y8G("routerLink",e.eq3(13,Se,e.eq3(11,q,t.iD))),e.R7$(),e.Y8G("routerLink",e.eq3(17,Ee,e.eq3(15,q,t.iD)))}}function Ge(g,n){if(1&g){const t=e.RV6();e.j41(0,"p-table",3,0),e.bIt("onLazyLoad",function(C){e.eBV(t);const A=e.XpG();return e.Njj(A.onDataLazyLoad(C))}),e.DNE(2,Ne,19,4,"ng-template",4)(3,De,15,19,"ng-template",5),e.k0s()}if(2&g){const t=e.XpG();e.Y8G("value",t.data)("lazy",!0)("tableStyle",e.lJ4(9,ve))("paginator",!0)("rows",10)("rowsPerPageOptions",e.lJ4(10,ye))("totalRecords",t.totalRecords)("loading",t.loading)("globalFilterFields",e.lJ4(11,xe))}}let Fe=(()=>{class g extends D.x{constructor(t,I,C){super(C),this.productBatchService=t,this.messageService=I,this.loading=!0,this.totalRecords=0,this.purchaseFilterSubject=new T.t(null)}ngOnInit(){this.titleService.setTitle("\u0423\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0437\u0430\u043a\u0443\u043f\u043a\u0430\u043c\u0438"),this.purchaseFilterSubject.pipe((0,$.p)(t=>!!t)).pipe((0,S.n)(t=>this.productBatchService.findPurchaseBatches(t).pipe((0,d.W)(I=>(this.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0441\u043f\u0438\u0441\u043a\u0430 \u0437\u0430\u043a\u0443\u043f\u043e\u043a",severity:"error",detail:I}),this.loading=!1,u.w))))).subscribe(t=>{this.data=t.items.map(I=>{const C=I;return C.products=I.items.reduce((A,i)=>i.salesItems.reduce((a,s)=>a.set(s.productPackageID,s.productPackage),A),new Map),C}),this.totalRecords=t.totalCount,this.loading=!1}),this.purchaseFilterSubject.next(new _.D.FindPurchaseBatchesModel({count:0,offset:0}))}onDataLazyLoad(t){const I=new _.D.FindPurchaseBatchesModel({offset:t.first,count:t.rows});this.fillFilterModel(I,t.filters),this.purchaseFilterSubject.next(I)}onDateFilter(t,I){I(this.dateFilter)}fillFilterModel(t,I){t.name=I.name?.value,t.dateFrom=I.date?.[0]?.value?.[0],t.dateTo=I.date?.[0]?.value?.[1],t.article=I.article?.value||null}static{this.\u0275fac=function(I){return new(I||g)(e.rXU(_.D.PurchaseBatchClient),e.rXU(p.bg),e.rXU(N.hE))}}static{this.\u0275cmp=e.VBU({type:g,selectors:[["app-purchase-list"]],features:[e.Vt3],decls:6,vars:3,consts:[["dataTable",""],[3,"routerLink"],["dataKey","iD",3,"value","lazy","tableStyle","paginator","rows","rowsPerPageOptions","totalRecords","loading","globalFilterFields","onLazyLoad",4,"ngIf"],["dataKey","iD",3,"onLazyLoad","value","lazy","tableStyle","paginator","rows","rowsPerPageOptions","totalRecords","loading","globalFilterFields"],["pTemplate","header"],["pTemplate","body"],["pSortableColumn","date"],["field","date"],["field","name","matchMode","contains",3,"showMatchModes","showOperator"],["field","article","matchMode","containsKey",3,"showMatchModes","showOperator"],[4,"ngFor","ngForOf"],["icon","pi pi-dollar",3,"routerLink"],["icon","pi pi-pencil",3,"routerLink"]],template:function(I,C){1&I&&(e.nrm(0,"p-toast"),e.j41(1,"h1"),e.EFF(2,"\u0417\u0430\u043a\u0443\u043f\u043a\u0438"),e.k0s(),e.j41(3,"p-button",1),e.EFF(4,"\u041d\u043e\u0432\u0430\u044f"),e.k0s(),e.DNE(5,Ge,4,12,"p-table",2)),2&I&&(e.R7$(3),e.Y8G("routerLink",e.lJ4(2,Te)),e.R7$(2),e.Y8G("ngIf",C.data))},dependencies:[l.Sq,l.bT,f.XI,p.Ei,f.Tg,f.yc,f.rl,E.y8,v.$n,x.Wk,l.vh,l.lG]})}}return g})();var ee=o(1413),G=o(6977),F=o(6557),te=o(8141);let w=(()=>{class g{constructor(t,I,C,A){this.packageTypeClient=t,this.packageTypeCommandHandlerClient=I,this.messageService=C,this.purchaseClient=A,this.packageTypes=new T.t([]),this.packageTypeClient.getPackageTypes().pipe((0,d.W)(i=>(this.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0441\u043f\u0438\u0441\u043a\u0430 \u0442\u0438\u043f\u043e\u0432 \u0443\u043f\u0430\u043a\u043e\u0432\u043a\u0438",severity:"error",detail:i}),u.w))).subscribe(i=>{this.packageTypes.next(i)})}getBatch(t){return this.purchaseClient.getPurchaseBatch(t)}getSalesPlanSelfCost(t,I,C,A=!0){const i=this.getSalesItemCosts(t),a=A?this.getSalesPlanCommission(I):0,s=+I.returnCost*+I.returnPercentage/100,m=I.amount?+I.marketingBudget/I.amount:0,c=I.amount?Math.ceil(100*+I.deliveryCost/+I.amount)/100:0;return C.price+i+s+a+c+m}getPackageTypes(){return this.packageTypes.value}getPackageType(t){return this.packageTypes.value.find(I=>I.iD==t)}getSalesItemCosts(t){let I=0;for(const C of t.salesItemPackages)I+=Math.ceil(C.pricePerUom*C.amount*100)/100;return I+=t.packagingPrice,I=Math.ceil(100*I)/100,I}getSalesPlanCommission(t){return Math.ceil(+t.commissionMultiplier*+t.price)/100+ +t.commissionAddition}calcPlans(){this.purchaseClient.calcSalesPlans().pipe((0,d.W)(t=>(this.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0441\u043f\u0438\u0441\u043a\u0430 \u0442\u0438\u043f\u043e\u0432 \u0443\u043f\u0430\u043a\u043e\u0432\u043a\u0438",severity:"error",detail:t}),u.w))).subscribe(()=>{this.messageService.add({summary:"\u0423\u0441\u043f\u0435\u0445",severity:"success",detail:"\u041f\u0435\u0440\u0435\u0440\u0430\u0441\u0447\u0451\u0442 \u043f\u043b\u0430\u043d\u043e\u0432 \u043f\u0440\u043e\u0434\u0430\u0436 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0432\u0435\u0440\u0448\u0451\u043d"})})}getSalesPlansSummaries(t){return this.purchaseClient.getSalesPlansSummaries(t)}addPackageType(t){return this.packageTypeCommandHandlerClient.addPackageType(t)}updatePackageType(t){return this.packageTypeCommandHandlerClient.updatePackageType(t).pipe((0,te.M)(()=>{this.packageTypes.next(this.packageTypes.value.map(I=>I.iD==t.iD?t:I))}))}removePackageType(t){return this.packageTypeCommandHandlerClient.removePackageType(t).pipe((0,te.M)(()=>{this.packageTypes.next(this.packageTypes.value.filter(I=>I.iD!=t))}))}static{this.\u0275fac=function(I){return new(I||g)(e.KVO(_.D.PackageTypeClient),e.KVO(F.X.PackageTypeClient),e.KVO(p.bg),e.KVO(_.D.PurchaseBatchClient))}}static{this.\u0275prov=e.jDH({token:g,factory:g.\u0275fac,providedIn:"root"})}}return g})();var h=o(9417),Y=o(2637),r=o(1455),ge=o(8148),j=o(8807),P=o(1512),k=o(563),Ie=o(8542),y=o(4420);const Ce=["*"];function we(g,n){1&g&&e.eu8(0)}function je(g,n){if(1&g&&(e.qex(0),e.DNE(1,we,1,0,"ng-container",3),e.bVm()),2&g){const t=e.XpG(2);e.R7$(),e.Y8G("ngTemplateOutlet",t.contentTemplate)}}function Pe(g,n){if(1&g&&(e.j41(0,"div",1),e.SdG(1),e.DNE(2,je,2,1,"ng-container",2),e.k0s()),2&g){const t=e.XpG();e.Y8G("hidden",!t.selected),e.BMQ("id",t.tabView.getTabContentId(t.id))("aria-hidden",!t.selected)("aria-labelledby",t.tabView.getTabHeaderActionId(t.id))("data-pc-name","tabpanel"),e.R7$(2),e.Y8G("ngIf",t.contentTemplate&&(t.cache?t.loaded:t.selected))}}const Re=["content"],Me=["navbar"],Be=["prevBtn"],Ve=["nextBtn"],$e=["inkbar"],Ye=["elementToObserve"],Xe=g=>({"p-tabview p-component":!0,"p-tabview-scrollable":g}),Oe=(g,n)=>({"p-highlight":g,"p-disabled":n});function Le(g,n){1&g&&e.nrm(0,"ChevronLeftIcon"),2&g&&e.BMQ("aria-hidden",!0)}function Ue(g,n){}function He(g,n){1&g&&e.DNE(0,Ue,0,0,"ng-template")}function ze(g,n){if(1&g){const t=e.RV6();e.j41(0,"button",15,4),e.bIt("click",function(){e.eBV(t);const C=e.XpG();return e.Njj(C.navBackward())}),e.DNE(2,Le,1,1,"ChevronLeftIcon",16)(3,He,1,0,null,17),e.k0s()}if(2&g){const t=e.XpG();e.BMQ("tabindex",t.tabindex)("aria-label",t.prevButtonAriaLabel),e.R7$(2),e.Y8G("ngIf",!t.previousIconTemplate),e.R7$(),e.Y8G("ngTemplateOutlet",t.previousIconTemplate)}}function Ke(g,n){if(1&g&&e.nrm(0,"span",26),2&g){const t=e.XpG(3).$implicit;e.Y8G("ngClass",t.leftIcon)}}function Qe(g,n){}function We(g,n){1&g&&e.DNE(0,Qe,0,0,"ng-template")}function Je(g,n){if(1&g&&(e.j41(0,"span",27),e.DNE(1,We,1,0,null,17),e.k0s()),2&g){const t=e.XpG(3).$implicit;e.R7$(),e.Y8G("ngTemplateOutlet",t.leftIconTemplate)}}function Ze(g,n){if(1&g&&e.nrm(0,"span",28),2&g){const t=e.XpG(3).$implicit;e.Y8G("ngClass",t.rightIcon)}}function qe(g,n){}function et(g,n){1&g&&e.DNE(0,qe,0,0,"ng-template")}function tt(g,n){if(1&g&&(e.j41(0,"span",29),e.DNE(1,et,1,0,null,17),e.k0s()),2&g){const t=e.XpG(3).$implicit;e.R7$(),e.Y8G("ngTemplateOutlet",t.rightIconTemplate)}}function gt(g,n){if(1&g&&(e.qex(0),e.DNE(1,Ke,1,1,"span",21)(2,Je,2,1,"span",22),e.j41(3,"span",23),e.EFF(4),e.k0s(),e.DNE(5,Ze,1,1,"span",24)(6,tt,2,1,"span",25),e.bVm()),2&g){const t=e.XpG(2).$implicit;e.R7$(),e.Y8G("ngIf",t.leftIcon&&!t.leftIconTemplate),e.R7$(),e.Y8G("ngIf",t.leftIconTemplate),e.R7$(2),e.JRh(t.header),e.R7$(),e.Y8G("ngIf",t.rightIcon&&!t.rightIconTemplate),e.R7$(),e.Y8G("ngIf",t.rightIconTemplate)}}function It(g,n){1&g&&e.eu8(0)}function Ct(g,n){if(1&g){const t=e.RV6();e.j41(0,"TimesIcon",32),e.bIt("click",function(C){e.eBV(t);const A=e.XpG(3).$implicit,i=e.XpG();return e.Njj(i.close(C,A))}),e.k0s()}2&g&&e.Y8G("styleClass","p-tabview-close")}function At(g,n){1&g&&e.nrm(0,"span",33)}function nt(g,n){}function it(g,n){1&g&&e.DNE(0,nt,0,0,"ng-template")}function at(g,n){if(1&g&&(e.qex(0),e.DNE(1,Ct,1,1,"TimesIcon",30)(2,At,1,0,"span",31)(3,it,1,0,null,17),e.bVm()),2&g){const t=e.XpG(2).$implicit;e.R7$(),e.Y8G("ngIf",!t.closeIconTemplate),e.R7$(),e.Y8G("ngIf",t.closeIconTemplate),e.R7$(),e.Y8G("ngTemplateOutlet",t.closeIconTemplate)}}function ot(g,n){if(1&g){const t=e.RV6();e.j41(0,"li",19)(1,"a",20),e.bIt("click",function(C){e.eBV(t);const A=e.XpG().$implicit,i=e.XpG();return e.Njj(i.open(C,A))})("keydown",function(C){e.eBV(t);const A=e.XpG().$implicit,i=e.XpG();return e.Njj(i.onTabKeyDown(C,A))}),e.DNE(2,gt,7,5,"ng-container",16)(3,It,1,0,"ng-container",17)(4,at,4,3,"ng-container",16),e.k0s()()}if(2&g){const t=e.XpG(),I=t.$implicit,C=t.index,A=e.XpG();e.HbH(I.headerStyleClass),e.Y8G("ngClass",e.l_i(19,Oe,I.selected,I.disabled))("ngStyle",I.headerStyle),e.BMQ("data-p-disabled",I.disabled),e.R7$(),e.Y8G("pTooltip",I.tooltip)("tooltipPosition",I.tooltipPosition)("positionStyle",I.tooltipPositionStyle)("tooltipStyleClass",I.tooltipStyleClass),e.BMQ("id",A.getTabHeaderActionId(I.id))("aria-controls",A.getTabContentId(I.id))("aria-selected",I.selected)("tabindex",I.disabled||!I.selected?"-1":A.tabindex)("aria-disabled",I.disabled)("data-pc-index",C)("data-pc-section","headeraction"),e.R7$(),e.Y8G("ngIf",!I.headerTemplate),e.R7$(),e.Y8G("ngTemplateOutlet",I.headerTemplate),e.R7$(),e.Y8G("ngIf",I.closable)}}function lt(g,n){1&g&&e.DNE(0,ot,5,22,"li",18),2&g&&e.Y8G("ngIf",!n.$implicit.closed)}function rt(g,n){1&g&&e.nrm(0,"ChevronRightIcon"),2&g&&e.BMQ("aria-hidden",!0)}function st(g,n){}function ct(g,n){1&g&&e.DNE(0,st,0,0,"ng-template")}function pt(g,n){if(1&g){const t=e.RV6();e.j41(0,"button",34,5),e.bIt("click",function(){e.eBV(t);const C=e.XpG();return e.Njj(C.navForward())}),e.DNE(2,rt,1,1,"ChevronRightIcon",16)(3,ct,1,0,null,17),e.k0s()}if(2&g){const t=e.XpG();e.BMQ("tabindex",t.tabindex)("aria-label",t.nextButtonAriaLabel),e.R7$(2),e.Y8G("ngIf",!t.nextIconTemplate),e.R7$(),e.Y8G("ngTemplateOutlet",t.nextIconTemplate)}}let Ae=(()=>{class g{el;viewContainer;cd;closable=!1;get headerStyle(){return this._headerStyle}set headerStyle(t){this._headerStyle=t,this.tabView.cd.markForCheck()}get headerStyleClass(){return this._headerStyleClass}set headerStyleClass(t){this._headerStyleClass=t,this.tabView.cd.markForCheck()}cache=!0;tooltip;tooltipPosition="top";tooltipPositionStyle="absolute";tooltipStyleClass;get selected(){return!!this._selected}set selected(t){this._selected=t,this.loaded||this.cd.detectChanges(),t&&(this.loaded=!0)}get disabled(){return!!this._disabled}set disabled(t){this._disabled=t,this.tabView.cd.markForCheck()}get header(){return this._header}set header(t){this._header=t,Promise.resolve().then(()=>{this.tabView.updateInkBar(),this.tabView.cd.markForCheck()})}get leftIcon(){return this._leftIcon}set leftIcon(t){this._leftIcon=t,this.tabView.cd.markForCheck()}get rightIcon(){return this._rightIcon}set rightIcon(t){this._rightIcon=t,this.tabView.cd.markForCheck()}templates;closed=!1;view=null;_headerStyle;_headerStyleClass;_selected;_disabled;_header;_leftIcon;_rightIcon=void 0;loaded=!1;id;contentTemplate;headerTemplate;leftIconTemplate;rightIconTemplate;closeIconTemplate;tabView;constructor(t,I,C,A){this.el=I,this.viewContainer=C,this.cd=A,this.tabView=t,this.id=(0,y._Y)()}ngAfterContentInit(){this.templates.forEach(t=>{switch(t.getType()){case"header":this.headerTemplate=t.template;break;case"content":default:this.contentTemplate=t.template;break;case"righticon":this.rightIconTemplate=t.template;break;case"lefticon":this.leftIconTemplate=t.template;break;case"closeicon":this.closeIconTemplate=t.template}})}ngOnDestroy(){this.view=null}static \u0275fac=function(I){return new(I||g)(e.rXU((0,e.Rfq)(()=>ne)),e.rXU(e.aKT),e.rXU(e.c1b),e.rXU(e.gRc))};static \u0275cmp=e.VBU({type:g,selectors:[["p-tabPanel"]],contentQueries:function(I,C,A){if(1&I&&e.wni(A,p.Ei,4),2&I){let i;e.mGM(i=e.lsd())&&(C.templates=i)}},hostAttrs:[1,"p-element"],inputs:{closable:[2,"closable","closable",e.L39],headerStyle:"headerStyle",headerStyleClass:"headerStyleClass",cache:[2,"cache","cache",e.L39],tooltip:"tooltip",tooltipPosition:"tooltipPosition",tooltipPositionStyle:"tooltipPositionStyle",tooltipStyleClass:"tooltipStyleClass",selected:"selected",disabled:"disabled",header:"header",leftIcon:"leftIcon",rightIcon:"rightIcon"},features:[e.GFd],ngContentSelectors:Ce,decls:1,vars:1,consts:[["class","p-tabview-panel","role","tabpanel",3,"hidden",4,"ngIf"],["role","tabpanel",1,"p-tabview-panel",3,"hidden"],[4,"ngIf"],[4,"ngTemplateOutlet"]],template:function(I,C){1&I&&(e.NAR(),e.DNE(0,Pe,3,6,"div",0)),2&I&&e.Y8G("ngIf",!C.closed)},dependencies:[l.bT,l.T3],encapsulation:2})}return g})(),ne=(()=>{class g{platformId;el;cd;renderer;style;styleClass;controlClose;scrollable;get activeIndex(){return this._activeIndex}set activeIndex(t){this._activeIndex=t,this.preventActiveIndexPropagation?this.preventActiveIndexPropagation=!1:this.tabs&&this.tabs.length&&null!=this._activeIndex&&this.tabs.length>this._activeIndex&&(this.findSelectedTab().selected=!1,this.tabs[this._activeIndex].selected=!0,this.tabChanged=!0,this.updateScrollBar(t))}selectOnFocus=!1;nextButtonAriaLabel;prevButtonAriaLabel;autoHideButtons=!0;tabindex=0;onChange=new e.bkB;onClose=new e.bkB;activeIndexChange=new e.bkB;content;navbar;prevBtn;nextBtn;inkbar;tabPanels;templates;initialized;tabs;_activeIndex;preventActiveIndexPropagation;tabChanged;backwardIsDisabled=!0;forwardIsDisabled=!1;tabChangesSubscription;nextIconTemplate;previousIconTemplate;resizeObserver;container;list;buttonVisible;elementToObserve;constructor(t,I,C,A){this.platformId=t,this.el=I,this.cd=C,this.renderer=A}ngAfterContentInit(){this.initTabs(),this.tabChangesSubscription=this.tabPanels.changes.subscribe(t=>{this.initTabs(),this.refreshButtonState(),this.callResizeObserver()}),this.templates.forEach(t=>{switch(t.getType()){case"previousicon":this.previousIconTemplate=t.template;break;case"nexticon":this.nextIconTemplate=t.template}})}callResizeObserver(){(0,l.UE)(this.platformId)&&this.autoHideButtons&&this.bindResizeObserver()}ngAfterViewInit(){this.callResizeObserver()}bindResizeObserver(){this.container=r.D.findSingle(this.el.nativeElement,'[data-pc-section="navcontent"]'),this.list=r.D.findSingle(this.el.nativeElement,'[data-pc-section="nav"]'),this.resizeObserver=new ResizeObserver(()=>{this.buttonVisible=this.list.offsetWidth>=this.container.offsetWidth,this.updateButtonState(),this.cd.detectChanges()}),this.resizeObserver.observe(this.container)}unbindResizeObserver(){this.resizeObserver.unobserve(this.elementToObserve.nativeElement),this.resizeObserver=null}ngAfterViewChecked(){(0,l.UE)(this.platformId)&&this.tabChanged&&(this.updateInkBar(),this.tabChanged=!1)}ngOnDestroy(){this.tabChangesSubscription&&this.tabChangesSubscription.unsubscribe(),this.resizeObserver&&this.unbindResizeObserver()}getTabHeaderActionId(t){return`${t}_header_action`}getTabContentId(t){return`${t}_content`}initTabs(){this.tabs=this.tabPanels.toArray(),!this.findSelectedTab()&&this.tabs.length&&(null!=this.activeIndex&&this.tabs.length>this.activeIndex?this.tabs[this.activeIndex].selected=!0:this.tabs[0].selected=!0,this.tabChanged=!0),this.cd.markForCheck()}onTabKeyDown(t,I){switch(t.code){case"ArrowLeft":this.onTabArrowLeftKey(t);break;case"ArrowRight":this.onTabArrowRightKey(t);break;case"Home":case"PageUp":this.onTabHomeKey(t);break;case"End":case"PageDown":this.onTabEndKey(t);break;case"Enter":case"Space":this.open(t,I)}}onTabArrowLeftKey(t){const I=this.findPrevHeaderAction(t.target.parentElement),C=r.D.getAttribute(I,"data-pc-index");I?this.changeFocusedTab(t,I,C):this.onTabEndKey(t),t.preventDefault()}onTabArrowRightKey(t){const I=this.findNextHeaderAction(t.target.parentElement),C=r.D.getAttribute(I,"data-pc-index");I?this.changeFocusedTab(t,I,C):this.onTabHomeKey(t),t.preventDefault()}onTabHomeKey(t){const I=this.findFirstHeaderAction(),C=r.D.getAttribute(I,"data-pc-index");this.changeFocusedTab(t,I,C),t.preventDefault()}onTabEndKey(t){const I=this.findLastHeaderAction(),C=r.D.getAttribute(I,"data-pc-index");this.changeFocusedTab(t,I,C),t.preventDefault()}changeFocusedTab(t,I,C){I&&(r.D.focus(I),I.scrollIntoView({block:"nearest"}),this.selectOnFocus)&&this.open(t,this.tabs[C])}findNextHeaderAction(t,I=!1){const C=I?t:t.nextElementSibling;return C?r.D.getAttribute(C,"data-p-disabled")||"inkbar"===r.D.getAttribute(C,"data-pc-section")?this.findNextHeaderAction(C):r.D.findSingle(C,'[data-pc-section="headeraction"]'):null}findPrevHeaderAction(t,I=!1){const C=I?t:t.previousElementSibling;return C?r.D.getAttribute(C,"data-p-disabled")||"inkbar"===r.D.getAttribute(C,"data-pc-section")?this.findPrevHeaderAction(C):r.D.findSingle(C,'[data-pc-section="headeraction"]'):null}findFirstHeaderAction(){return this.findNextHeaderAction(this.navbar.nativeElement.firstElementChild,!0)}findLastHeaderAction(){const t=this.navbar.nativeElement.lastElementChild,I="inkbar"===r.D.getAttribute(t,"data-pc-section")?t.previousElementSibling:t;return this.findPrevHeaderAction(I,!0)}open(t,I){if(I.disabled)t&&t.preventDefault();else{if(!I.selected){let C=this.findSelectedTab();C&&(C.selected=!1),this.tabChanged=!0,I.selected=!0;let A=this.findTabIndex(I);this.preventActiveIndexPropagation=!0,this.activeIndexChange.emit(A),this.onChange.emit({originalEvent:t,index:A}),this.updateScrollBar(A)}t&&t.preventDefault()}}close(t,I){this.controlClose?this.onClose.emit({originalEvent:t,index:this.findTabIndex(I),close:()=>{this.closeTab(I)}}):(this.closeTab(I),this.onClose.emit({originalEvent:t,index:this.findTabIndex(I)}))}closeTab(t){if(!t.disabled){if(t.selected){this.tabChanged=!0,t.selected=!1;for(let I=0;I<this.tabs.length;I++){let C=this.tabs[I];if(!C.closed&&!t.disabled&&C!=t){C.selected=!0;break}}}t.closed=!0,setTimeout(()=>{this.updateInkBar()})}}findSelectedTab(){for(let t=0;t<this.tabs.length;t++)if(this.tabs[t].selected)return this.tabs[t];return null}findTabIndex(t){let I=-1;for(let C=0;C<this.tabs.length;C++)if(this.tabs[C]==t){I=C;break}return I}getBlockableElement(){return this.el.nativeElement.children[0]}updateInkBar(){if((0,l.UE)(this.platformId)&&this.navbar){const t=r.D.findSingle(this.navbar.nativeElement,"li.p-highlight");if(!t)return;this.inkbar.nativeElement.style.width=r.D.getWidth(t)+"px",this.inkbar.nativeElement.style.left=r.D.getOffset(t).left-r.D.getOffset(this.navbar.nativeElement).left+"px"}}updateScrollBar(t){let I=this.navbar.nativeElement.children[t];I&&I.scrollIntoView({block:"nearest"})}updateButtonState(){const t=this.content.nativeElement,{scrollLeft:I,scrollWidth:C}=t,A=r.D.getWidth(t);this.backwardIsDisabled=0===I,this.forwardIsDisabled=Math.round(I)===C-A}refreshButtonState(){this.container=r.D.findSingle(this.el.nativeElement,'[data-pc-section="navcontent"]'),this.list=r.D.findSingle(this.el.nativeElement,'[data-pc-section="nav"]'),this.list.offsetWidth>=this.container.offsetWidth&&(this.buttonVisible=this.list.offsetWidth>=this.container.offsetWidth,this.updateButtonState(),this.cd.markForCheck())}onScroll(t){this.scrollable&&this.updateButtonState(),t.preventDefault()}getVisibleButtonWidths(){return[this.prevBtn?.nativeElement,this.nextBtn?.nativeElement].reduce((t,I)=>I?t+r.D.getWidth(I):t,0)}navBackward(){const t=this.content.nativeElement,I=r.D.getWidth(t)-this.getVisibleButtonWidths(),C=t.scrollLeft-I;t.scrollLeft=C<=0?0:C}navForward(){const t=this.content.nativeElement,I=r.D.getWidth(t)-this.getVisibleButtonWidths(),C=t.scrollLeft+I,A=t.scrollWidth-I;t.scrollLeft=C>=A?A:C}static \u0275fac=function(I){return new(I||g)(e.rXU(e.Agw),e.rXU(e.aKT),e.rXU(e.gRc),e.rXU(e.sFG))};static \u0275cmp=e.VBU({type:g,selectors:[["p-tabView"]],contentQueries:function(I,C,A){if(1&I&&(e.wni(A,Ae,4),e.wni(A,p.Ei,4)),2&I){let i;e.mGM(i=e.lsd())&&(C.tabPanels=i),e.mGM(i=e.lsd())&&(C.templates=i)}},viewQuery:function(I,C){if(1&I&&(e.GBs(Re,5),e.GBs(Me,5),e.GBs(Be,5),e.GBs(Ve,5),e.GBs($e,5),e.GBs(Ye,5)),2&I){let A;e.mGM(A=e.lsd())&&(C.content=A.first),e.mGM(A=e.lsd())&&(C.navbar=A.first),e.mGM(A=e.lsd())&&(C.prevBtn=A.first),e.mGM(A=e.lsd())&&(C.nextBtn=A.first),e.mGM(A=e.lsd())&&(C.inkbar=A.first),e.mGM(A=e.lsd())&&(C.elementToObserve=A.first)}},hostAttrs:[1,"p-element"],inputs:{style:"style",styleClass:"styleClass",controlClose:[2,"controlClose","controlClose",e.L39],scrollable:[2,"scrollable","scrollable",e.L39],activeIndex:"activeIndex",selectOnFocus:[2,"selectOnFocus","selectOnFocus",e.L39],nextButtonAriaLabel:"nextButtonAriaLabel",prevButtonAriaLabel:"prevButtonAriaLabel",autoHideButtons:[2,"autoHideButtons","autoHideButtons",e.L39],tabindex:[2,"tabindex","tabindex",e.Udg]},outputs:{onChange:"onChange",onClose:"onClose",activeIndexChange:"activeIndexChange"},features:[e.GFd],ngContentSelectors:Ce,decls:14,vars:13,consts:[["elementToObserve",""],["content",""],["navbar",""],["inkbar",""],["prevBtn",""],["nextBtn",""],[3,"ngClass","ngStyle"],[1,"p-tabview-nav-container"],["class","p-tabview-nav-prev p-tabview-nav-btn p-link","type","button","pRipple","",3,"click",4,"ngIf"],[1,"p-tabview-nav-content",3,"scroll"],["role","tablist",1,"p-tabview-nav"],["ngFor","",3,"ngForOf"],["role","presentation","aria-hidden","true",1,"p-tabview-ink-bar"],["class","p-tabview-nav-next p-tabview-nav-btn p-link","type","button","pRipple","",3,"click",4,"ngIf"],[1,"p-tabview-panels"],["type","button","pRipple","",1,"p-tabview-nav-prev","p-tabview-nav-btn","p-link",3,"click"],[4,"ngIf"],[4,"ngTemplateOutlet"],["role","presentation",3,"ngClass","ngStyle","class",4,"ngIf"],["role","presentation",3,"ngClass","ngStyle"],["role","tab","pRipple","",1,"p-tabview-nav-link",3,"click","keydown","pTooltip","tooltipPosition","positionStyle","tooltipStyleClass"],["class","p-tabview-left-icon",3,"ngClass",4,"ngIf"],["class","p-tabview-left-icon",4,"ngIf"],[1,"p-tabview-title"],["class","p-tabview-right-icon",3,"ngClass",4,"ngIf"],["class","p-tabview-right-icon",4,"ngIf"],[1,"p-tabview-left-icon",3,"ngClass"],[1,"p-tabview-left-icon"],[1,"p-tabview-right-icon",3,"ngClass"],[1,"p-tabview-right-icon"],[3,"styleClass","click",4,"ngIf"],["class","tab.closeIconTemplate",4,"ngIf"],[3,"click","styleClass"],[1,"tab.closeIconTemplate"],["type","button","pRipple","",1,"p-tabview-nav-next","p-tabview-nav-btn","p-link",3,"click"]],template:function(I,C){if(1&I){const A=e.RV6();e.NAR(),e.j41(0,"div",6)(1,"div",7,0),e.DNE(3,ze,4,4,"button",8),e.j41(4,"div",9,1),e.bIt("scroll",function(a){return e.eBV(A),e.Njj(C.onScroll(a))}),e.j41(6,"ul",10,2),e.DNE(8,lt,1,1,"ng-template",11),e.nrm(9,"li",12,3),e.k0s()(),e.DNE(11,pt,4,4,"button",13),e.k0s(),e.j41(12,"div",14),e.SdG(13),e.k0s()()}2&I&&(e.HbH(C.styleClass),e.Y8G("ngClass",e.eq3(11,Xe,C.scrollable))("ngStyle",C.style),e.BMQ("data-pc-name","tabview"),e.R7$(3),e.Y8G("ngIf",C.scrollable&&!C.backwardIsDisabled&&C.autoHideButtons),e.R7$(),e.BMQ("data-pc-section","navcontent"),e.R7$(2),e.BMQ("data-pc-section","nav"),e.R7$(2),e.Y8G("ngForOf",C.tabs),e.R7$(),e.BMQ("data-pc-section","inkbar"),e.R7$(2),e.Y8G("ngIf",C.scrollable&&!C.forwardIsDisabled&&C.buttonVisible))},dependencies:()=>[l.YU,l.Sq,l.bT,l.T3,l.B3,Ie.m,k.n,P.A,ge.Y,j.v],styles:["@layer primeng{.p-tabview-nav-container{position:relative}.p-tabview-scrollable .p-tabview-nav-container{overflow:hidden}.p-tabview-nav-content{overflow-x:auto;overflow-y:hidden;scroll-behavior:smooth;scrollbar-width:none;overscroll-behavior:contain auto}.p-tabview-nav{display:inline-flex;min-width:100%;margin:0;padding:0;list-style-type:none;flex:1 1 auto}.p-tabview-nav-link{cursor:pointer;-webkit-user-select:none;user-select:none;display:flex;align-items:center;position:relative;text-decoration:none;overflow:hidden}.p-tabview-ink-bar{display:none;z-index:1}.p-tabview-nav-link:focus{z-index:1}.p-tabview-title{line-height:1;white-space:nowrap}.p-tabview-nav-btn{position:absolute;top:0;z-index:2;height:100%;display:flex;align-items:center;justify-content:center}.p-tabview-nav-prev{left:0}.p-tabview-nav-next{right:0}.p-tabview-nav-content::-webkit-scrollbar{display:none}.p-tabview-close{z-index:1}}\n"],encapsulation:2,changeDetection:0})}return g})(),_t=(()=>{class g{static \u0275fac=function(I){return new(I||g)};static \u0275mod=e.$C({type:g});static \u0275inj=e.G2t({imports:[l.MD,p.Gg,Ie.S,k.Z,P.A,ge.Y,j.v,p.Gg]})}return g})();var X=o(2242),O=o(1802),L=o(8833),U=o(6781),ie=o(8537),ae=o(612),oe=o(935);let dt=(()=>{class g{constructor(t){this.sanitizer=t}transform(t){return this.sanitizer.bypassSecurityTrustHtml(t)}static{this.\u0275fac=function(I){return new(I||g)(e.rXU(N.up,16))}}static{this.\u0275pipe=e.EJ8({name:"safeHtml",type:g,pure:!0})}}return g})();const ut=["productPackageDropdown"],mt=["packageTypeDropdown"],ht=["salesChannelDropdown"],ft=["productAutocomplete"],bt=(g,n)=>({profitRate:20,cost:g,costWithCommission:n}),Tt=()=>({width:"50vw"});function vt(g,n){1&g&&(e.nrm(0,"i",22),e.j41(1,"span"),e.EFF(2,"\u0417\u0430\u043a\u0443\u043f\u043a\u0430"),e.k0s())}function yt(g,n){1&g&&(e.j41(0,"tr"),e.nrm(1,"th",27),e.j41(2,"th",27),e.EFF(3,"ID"),e.k0s(),e.j41(4,"th"),e.EFF(5,"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435"),e.k0s(),e.j41(6,"th",27),e.EFF(7,"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e"),e.k0s(),e.j41(8,"th",27),e.EFF(9,"\u0417\u0430\u043a\u0443\u043f\u043e\u0447\u043d\u0430\u044f \u0446\u0435\u043d\u0430"),e.k0s()())}function xt(g,n){if(1&g){const t=e.RV6();e.j41(0,"p-inputNumber",33),e.mxI("ngModelChange",function(C){e.eBV(t);const A=e.XpG().$implicit;return e.DH7(A.count,C)||(A.count=C),e.Njj(C)}),e.k0s()}if(2&g){const t=e.XpG().$implicit;e.Y8G("useGrouping",!1),e.R50("ngModel",t.count)}}function St(g,n){if(1&g&&e.EFF(0),2&g){const t=e.XpG().$implicit;e.SpI(" ",t.count," ")}}function Et(g,n){if(1&g){const t=e.RV6();e.j41(0,"p-inputNumber",34),e.mxI("ngModelChange",function(C){e.eBV(t);const A=e.XpG().$implicit;return e.DH7(A.price,C)||(A.price=C),e.Njj(C)}),e.k0s()}if(2&g){const t=e.XpG().$implicit;e.Y8G("useGrouping",!1),e.R50("ngModel",t.price),e.Y8G("maxFractionDigits",2)}}function Nt(g,n){if(1&g&&e.EFF(0),2&g){const t=e.XpG().$implicit;e.SpI(" ",t.price," ")}}function kt(g,n){if(1&g){const t=e.RV6();e.j41(0,"tr")(1,"td")(2,"p-button",28),e.bIt("click",function(){const C=e.eBV(t).rowIndex,A=e.XpG(4);return e.Njj(A.removeItem(A.calculation.items,C))}),e.k0s()(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td",29)(8,"p-cellEditor"),e.DNE(9,xt,1,2,"ng-template",30)(10,St,1,1,"ng-template",31),e.k0s()(),e.j41(11,"td",32)(12,"p-cellEditor"),e.DNE(13,Et,1,3,"ng-template",30)(14,Nt,1,1,"ng-template",31),e.k0s()()()}if(2&g){const t=n.$implicit;e.R7$(4),e.JRh(t.productID),e.R7$(2),e.JRh(t.product.name),e.R7$(),e.Y8G("pEditableColumn",t.count),e.R7$(4),e.Y8G("pEditableColumn",t.price)}}function Dt(g,n){if(1&g&&(e.j41(0,"tr")(1,"td",35),e.EFF(2,"\u0418\u0442\u043e\u0433\u043e:"),e.k0s(),e.j41(3,"td",36),e.EFF(4),e.k0s(),e.j41(5,"td",36),e.EFF(6),e.k0s()()),2&g){const t=e.XpG(4);e.R7$(4),e.SpI(" ",t.calculationTotalProductCount," "),e.R7$(2),e.SpI(" ",t.calculationTotalSum," ")}}function Gt(g,n){if(1&g&&(e.j41(0,"p-table",25),e.DNE(1,yt,10,0,"ng-template",14)(2,kt,15,4,"ng-template",15)(3,Dt,7,2,"ng-template",26),e.k0s()),2&g){const t=e.XpG(3);e.Y8G("value",t.calculation.items)}}function Ft(g,n){if(1&g&&(e.j41(0,"div",37)(1,"div"),e.EFF(2),e.k0s()()),2&g){const t=n.$implicit;e.R7$(2),e.Lme("",t.iD,": ",t.name,"")}}function wt(g,n){1&g&&e.EFF(0,"\u041f\u043e\u0438\u0441\u043a \u0442\u043e\u0432\u0430\u0440\u0430")}function jt(g,n){if(1&g){const t=e.RV6();e.j41(0,"div",5),e.DNE(1,Gt,4,1,"p-table",23),e.j41(2,"p-autoComplete",24,1),e.nI1(4,"async"),e.bIt("completeMethod",function(C){e.eBV(t);const A=e.XpG(2);return e.Njj(A.findProductsByName(C))})("onSelect",function(C){e.eBV(t);const A=e.XpG(2);return e.Njj(A.addProduct(C))}),e.DNE(5,Ft,3,2,"ng-template",18)(6,wt,1,0,"ng-template",19),e.k0s()()}if(2&g){const t=e.XpG(2);e.R7$(),e.Y8G("ngIf",t.calculation.items.length),e.R7$(),e.Y8G("suggestions",e.bMT(4,3,t.products))("minLength",3)}}function Pt(g,n){1&g&&(e.nrm(0,"i",38),e.j41(1,"span"),e.EFF(2,"\u0422\u0438\u043f\u043e\u0444\u043e\u0440\u043c\u0430\u0442\u044b"),e.k0s())}function Rt(g,n){if(1&g&&(e.j41(0,"div",37)(1,"div"),e.EFF(2),e.k0s()()),2&g){const t=n.$implicit;e.R7$(2),e.Lme("",t.product.iD,": ",t.product.name,"")}}function Mt(g,n){if(1&g&&(e.j41(0,"div",37)(1,"div"),e.EFF(2),e.k0s()()),2&g){const t=n.$implicit;e.R7$(2),e.Lme("",t.iD,": ",t.name,"")}}function Bt(g,n){1&g&&e.EFF(0,"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0430\u0440\u0442\u0438\u043a\u0443\u043b")}function Vt(g,n){if(1&g&&e.EFF(0),2&g){const t=e.XpG().$implicit;e.E5c(" \u0410\u0440\u0442\u0438\u043a\u0443\u043b: ",t.productPackage.iD,", ",t.productPackage.productCount,"\u0448\u0442, ",t.name," ")}}function $t(g,n){1&g&&(e.j41(0,"tr")(1,"th"),e.EFF(2,"\u0422\u0438\u043f \u0443\u043f\u0430\u043a\u043e\u0432\u043a\u0438"),e.k0s(),e.j41(3,"th"),e.EFF(4,"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e"),e.k0s(),e.j41(5,"th"),e.EFF(6,"\u0426\u0435\u043d\u0430 \u0443\u043f\u0430\u043a\u043e\u0432\u043a\u0438"),e.k0s(),e.j41(7,"th"),e.EFF(8,"\u0421\u0443\u043c\u043c\u0430"),e.k0s()())}function Yt(g,n){if(1&g&&(e.j41(0,"tr")(1,"td",35),e.EFF(2,"\u0418\u0442\u043e\u0433\u043e:"),e.k0s(),e.j41(3,"td",36),e.EFF(4),e.k0s()()),2&g){const t=e.XpG(3).$implicit,I=e.XpG(3);e.R7$(4),e.JRh(I.getPackagePrice(t))}}function Xt(g,n){if(1&g&&(e.j41(0,"span"),e.EFF(1),e.k0s()),2&g){const t=n.ngIf;e.R7$(),e.SpI(" ",t.name," ")}}function Ot(g,n){if(1&g){const t=e.RV6();e.j41(0,"div",48)(1,"p-inputNumber",58),e.mxI("ngModelChange",function(C){e.eBV(t);const A=e.XpG(2).$implicit;return e.DH7(A.amount,C)||(A.amount=C),e.Njj(C)}),e.k0s(),e.nrm(2,"span",59),e.nI1(3,"safeHtml"),e.k0s()}if(2&g){const t=e.XpG().ngIf,I=e.XpG().$implicit,C=e.XpG(6);e.R7$(),e.Y8G("useGrouping",!1)("minFractionDigits",t.decimalPlaces)("maxFractionDigits",t.decimalPlaces),e.R50("ngModel",I.amount),e.R7$(),e.Y8G("innerHtml",e.bMT(3,5,C.getUnitOfMeasure(t.unitOfMeasure)),e.npT)}}function Lt(g,n){if(1&g&&(e.qex(0),e.EFF(1),e.nrm(2,"span",60),e.nI1(3,"safeHtml"),e.bVm()),2&g){const t=e.XpG().ngIf,I=e.XpG().$implicit,C=e.XpG(6);e.R7$(),e.SpI(" ",I.amount,""),e.R7$(),e.Y8G("innerHtml",e.bMT(3,2,C.getUnitOfMeasure(t.unitOfMeasure)),e.npT)}}function Ut(g,n){1&g&&(e.j41(0,"p-cellEditor"),e.DNE(1,Ot,4,7,"ng-template",30)(2,Lt,4,4,"ng-template",31),e.k0s())}function Ht(g,n){if(1&g){const t=e.RV6();e.j41(0,"div",48)(1,"p-inputNumber",61),e.mxI("ngModelChange",function(C){e.eBV(t);const A=e.XpG().$implicit;return e.DH7(A.pricePerUom,C)||(A.pricePerUom=C),e.Njj(C)}),e.k0s(),e.nrm(2,"span",59),e.nI1(3,"safeHtml"),e.k0s()}if(2&g){const t=e.XpG().$implicit,I=e.XpG(6);e.R7$(),e.Y8G("useGrouping",!1)("minFractionDigits",0)("maxFractionDigits",2),e.R50("ngModel",t.pricePerUom),e.R7$(),e.Y8G("innerHtml",e.bMT(3,5,"\u20bd/"+I.getUnitOfMeasureByPackageTypeID(t.packageTypeID)),e.npT)}}function zt(g,n){if(1&g&&(e.EFF(0),e.nrm(1,"span",60)),2&g){const t=e.XpG().$implicit,I=e.XpG(6);e.SpI(" ",t.pricePerUom,"\u20bd/"),e.R7$(),e.Y8G("innerHtml",I.getUnitOfMeasureByPackageTypeID(t.packageTypeID),e.npT)}}function Kt(g,n){if(1&g){const t=e.RV6();e.j41(0,"tr")(1,"td")(2,"p-button",55),e.bIt("click",function(){const C=e.eBV(t).rowIndex,A=e.XpG(3).$implicit,i=e.XpG(3);return e.Njj(i.removeItem(A.salesItemPackages,C))}),e.k0s(),e.DNE(3,Xt,2,1,"span",21),e.k0s(),e.j41(4,"td",56),e.DNE(5,Ut,3,0,"p-cellEditor",21),e.k0s(),e.j41(6,"td",57)(7,"p-cellEditor"),e.DNE(8,Ht,4,7,"ng-template",30)(9,zt,2,2,"ng-template",31),e.k0s()(),e.j41(10,"td",36),e.EFF(11),e.nI1(12,"number"),e.k0s()()}if(2&g){const t=n.$implicit,I=e.XpG(6);e.R7$(3),e.Y8G("ngIf",I.getPackageType(t.packageTypeID)),e.R7$(),e.Y8G("pEditableColumn",t.amount),e.R7$(),e.Y8G("ngIf",I.getPackageType(t.packageTypeID)),e.R7$(),e.Y8G("pEditableColumn",t.pricePerUom),e.R7$(5),e.SpI(" ",e.i5U(12,5,t.pricePerUom*t.amount,"1.2-2"),"\u20bd ")}}function Qt(g,n){if(1&g&&(e.j41(0,"p-table",25),e.DNE(1,$t,9,0,"ng-template",14)(2,Yt,5,1,"ng-template",26)(3,Kt,13,8,"ng-template",15),e.k0s()),2&g){const t=e.XpG(2).$implicit;e.Y8G("value",t.salesItemPackages)}}function Wt(g,n){if(1&g&&(e.j41(0,"div",37),e.nrm(1,"div",62),e.nI1(2,"safeHtml"),e.k0s()),2&g){const t=n.$implicit,I=e.XpG(5);e.R7$(),e.Y8G("innerHTML",e.bMT(2,1,t.name+" ("+(null==t.price?"-":t.price)+" \u20bd/"+I.getUnitOfMeasure(t.unitOfMeasure)+")"),e.npT)}}function Jt(g,n){if(1&g&&(e.j41(0,"div",37)(1,"div"),e.EFF(2),e.k0s()()),2&g){const t=n.$implicit;e.R7$(2),e.JRh(t.name)}}function Zt(g,n){1&g&&e.EFF(0,"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u043b\u0430\u043d \u043f\u0440\u043e\u0434\u0430\u0436")}function qt(g,n){1&g&&(e.j41(0,"tr")(1,"th"),e.EFF(2,"\u041a\u0430\u043d\u0430\u043b"),e.k0s(),e.j41(3,"th",36),e.EFF(4,"\u0426\u0435\u043d\u0430"),e.k0s(),e.j41(5,"th",36),e.EFF(6,"\u0421\u0435\u0431\u0435\u0441"),e.k0s(),e.j41(7,"th",36),e.EFF(8,"\u041e\u0442\u0433\u0440\u0443\u0437\u043a\u0430"),e.k0s(),e.j41(9,"th",36),e.EFF(10,"\u0420\u0435\u043a\u043b\u0430\u043c\u0430, \u20bd/\u043f\u043b\u0430\u043d"),e.k0s(),e.j41(11,"th"),e.EFF(12,"\u041a\u043e\u043b-\u0432\u043e"),e.k0s(),e.j41(13,"th",36),e.EFF(14,"\u041a\u043e\u043c\u0438\u0441\u0441\u0438\u044f"),e.k0s(),e.j41(15,"th",36),e.EFF(16,"\u0412\u043e\u0437\u0432\u0440\u0430\u0442\u044b"),e.k0s(),e.nrm(17,"th"),e.k0s())}function eg(g,n){if(1&g){const t=e.RV6();e.j41(0,"div",48)(1,"p-inputNumber",74),e.mxI("ngModelChange",function(C){e.eBV(t);const A=e.XpG(2).$implicit;return e.DH7(A.price,C)||(A.price=C),e.Njj(C)}),e.k0s(),e.j41(2,"span",50),e.EFF(3,"\u20bd"),e.k0s()()}if(2&g){const t=e.XpG(2).$implicit;e.R7$(),e.Y8G("useGrouping",!1),e.R50("ngModel",t.price),e.Y8G("minFractionDigits",0)("maxFractionDigits",2)}}function tg(g,n){if(1&g&&(e.j41(0,"div"),e.EFF(1),e.k0s(),e.j41(2,"p-tag",75),e.EFF(3),e.nI1(4,"number"),e.nI1(5,"number"),e.k0s(),e.j41(6,"div"),e.EFF(7),e.nI1(8,"number"),e.k0s()),2&g){const t=e.XpG().ngIf,I=e.XpG().$implicit;e.R7$(),e.SpI(" ",I.price,"\u20bd "),e.R7$(),e.Y8G("severity",I.price<t.costWithCommission?"danger":(I.price-t.costWithCommission)/t.cost>t.profitRate/100?"success":"info"),e.R7$(),e.Lme(" ",e.i5U(4,6,I.price-t.costWithCommission,"1.2-2"),"\u20bd/",e.i5U(5,9,(I.price-t.costWithCommission)/t.cost*100,"1.0-2"),"% "),e.R7$(4),e.Lme(" (",e.i5U(8,12,(t.cost*(1+t.profitRate/100)+I.commissionAddition)/(1-I.commissionMultiplier/100),"1.2-2"),"\u20bd \u0434\u043b\u044f ",t.profitRate,"%) ")}}function gg(g,n){if(1&g){const t=e.RV6();e.j41(0,"div",48)(1,"p-inputNumber",76),e.mxI("ngModelChange",function(C){e.eBV(t);const A=e.XpG(2).$implicit;return e.DH7(A.deliveryCost,C)||(A.deliveryCost=C),e.Njj(C)}),e.k0s(),e.j41(2,"span",50),e.EFF(3,"\u20bd"),e.k0s()()}if(2&g){const t=e.XpG(2).$implicit;e.R7$(),e.Y8G("useGrouping",!1)("minFractionDigits",0)("maxFractionDigits",2),e.R50("ngModel",t.deliveryCost)}}function Ig(g,n){if(1&g&&(e.j41(0,"div",36),e.EFF(1),e.k0s()),2&g){const t=e.XpG(2).$implicit;e.R7$(),e.SpI(" ",t.deliveryCost,"\u20bd ")}}function Cg(g,n){if(1&g){const t=e.RV6();e.j41(0,"div",48)(1,"p-inputNumber",74),e.mxI("ngModelChange",function(C){e.eBV(t);const A=e.XpG(2).$implicit;return e.DH7(A.marketingBudget,C)||(A.marketingBudget=C),e.Njj(C)}),e.k0s(),e.j41(2,"span",50),e.EFF(3,"\u20bd"),e.k0s()()}if(2&g){const t=e.XpG(2).$implicit;e.R7$(),e.Y8G("useGrouping",!1),e.R50("ngModel",t.marketingBudget),e.Y8G("minFractionDigits",0)("maxFractionDigits",2)}}function Ag(g,n){if(1&g&&e.EFF(0),2&g){const t=e.XpG(2).$implicit;e.SpI(" ",t.marketingBudget," ")}}function ng(g,n){if(1&g){const t=e.RV6();e.j41(0,"div",48)(1,"p-inputNumber",33),e.mxI("ngModelChange",function(C){e.eBV(t);const A=e.XpG(2).$implicit;return e.DH7(A.amount,C)||(A.amount=C),e.Njj(C)}),e.k0s(),e.j41(2,"span",50),e.EFF(3,"\u0448\u0442"),e.k0s()()}if(2&g){const t=e.XpG(2).$implicit;e.R7$(),e.Y8G("useGrouping",!1),e.R50("ngModel",t.amount)}}function ig(g,n){if(1&g&&e.EFF(0),2&g){const t=e.XpG(2).$implicit;e.SpI(" ",t.amount,"\u0448\u0442 ")}}function ag(g,n){if(1&g){const t=e.RV6();e.j41(0,"div",48)(1,"p-inputNumber",74),e.mxI("ngModelChange",function(C){e.eBV(t);const A=e.XpG(2).$implicit;return e.DH7(A.commissionMultiplier,C)||(A.commissionMultiplier=C),e.Njj(C)}),e.k0s(),e.j41(2,"span",50),e.EFF(3,"%"),e.k0s()()}if(2&g){const t=e.XpG(2).$implicit;e.R7$(),e.Y8G("useGrouping",!1),e.R50("ngModel",t.commissionMultiplier),e.Y8G("minFractionDigits",1)("maxFractionDigits",1)}}function og(g,n){if(1&g&&e.EFF(0),2&g){const t=e.XpG(2).$implicit;e.SpI(" ",t.commissionMultiplier,"% ")}}function lg(g,n){if(1&g){const t=e.RV6();e.j41(0,"div",48)(1,"p-inputNumber",74),e.mxI("ngModelChange",function(C){e.eBV(t);const A=e.XpG(2).$implicit;return e.DH7(A.returnPercentage,C)||(A.returnPercentage=C),e.Njj(C)}),e.k0s(),e.j41(2,"span",50),e.EFF(3,"%"),e.k0s()()}if(2&g){const t=e.XpG(2).$implicit;e.R7$(),e.Y8G("useGrouping",!1),e.R50("ngModel",t.returnPercentage),e.Y8G("minFractionDigits",1)("maxFractionDigits",1)}}function rg(g,n){if(1&g&&e.EFF(0),2&g){const t=e.XpG(2).$implicit;e.SpI(" ",t.returnPercentage,"% ")}}function sg(g,n){if(1&g){const t=e.RV6();e.j41(0,"tr")(1,"td",66),e.EFF(2),e.k0s(),e.j41(3,"td",67)(4,"p-cellEditor"),e.DNE(5,eg,4,4,"ng-template",30)(6,tg,9,15,"ng-template",31),e.k0s()(),e.j41(7,"td",68),e.EFF(8),e.nI1(9,"number"),e.nrm(10,"br"),e.EFF(11),e.nI1(12,"number"),e.k0s(),e.j41(13,"td",69)(14,"p-cellEditor"),e.DNE(15,gg,4,4,"ng-template",30)(16,Ig,2,1,"ng-template",31),e.k0s()(),e.j41(17,"td",70)(18,"p-cellEditor"),e.DNE(19,Cg,4,4,"ng-template",30)(20,Ag,1,1,"ng-template",31),e.k0s()(),e.j41(21,"td",71)(22,"p-cellEditor"),e.DNE(23,ng,4,2,"ng-template",30)(24,ig,1,1,"ng-template",31),e.k0s()(),e.j41(25,"td",72)(26,"p-cellEditor"),e.DNE(27,ag,4,4,"ng-template",30)(28,og,1,1,"ng-template",31),e.k0s()(),e.j41(29,"td",73)(30,"p-cellEditor"),e.DNE(31,lg,4,4,"ng-template",30)(32,rg,1,1,"ng-template",31),e.k0s()(),e.j41(33,"td",66)(34,"p-button",28),e.bIt("click",function(){e.eBV(t);const C=e.XpG().rowIndex,A=e.XpG(2).$implicit,i=e.XpG(3);return e.Njj(i.removeItem(A.salesPlans,C))}),e.k0s()()()}if(2&g){const t=n.ngIf,I=e.XpG().$implicit;e.R7$(2),e.SpI(" ",I.salesChannel.name," "),e.R7$(),e.Y8G("pEditableColumn",I.price),e.R7$(5),e.SpI(" ",e.i5U(9,8,t.costWithCommission,"1.2-2"),"\u20bd "),e.R7$(3),e.SpI(" (",e.i5U(12,11,(t.cost+I.commissionAddition)/(1-I.commissionMultiplier/100),"1.2-2"),"\u20bd) "),e.R7$(6),e.Y8G("pEditableColumn",I.marketingBudget),e.R7$(4),e.Y8G("pEditableColumn",I.amount),e.R7$(4),e.Y8G("pEditableColumn",I.commissionMultiplier),e.R7$(4),e.Y8G("pEditableColumn",I.returnPercentage)}}function cg(g,n){if(1&g){const t=e.RV6();e.j41(0,"p-calendar",77),e.mxI("ngModelChange",function(C){e.eBV(t);const A=e.XpG().$implicit;return e.DH7(A.deliveryDate,C)||(A.deliveryDate=C),e.Njj(C)}),e.k0s()}if(2&g){const t=e.XpG().$implicit;e.R50("ngModel",t.deliveryDate),e.Y8G("readonlyInput",!0)}}function pg(g,n){if(1&g&&(e.EFF(0),e.nI1(1,"date")),2&g){const t=e.XpG().$implicit;e.SpI(" ",e.i5U(1,1,t.deliveryDate,"dd.MM.yyyy")," ")}}function _g(g,n){if(1&g){const t=e.RV6();e.j41(0,"div",48)(1,"p-inputNumber",74),e.mxI("ngModelChange",function(C){e.eBV(t);const A=e.XpG().$implicit;return e.DH7(A.commissionAddition,C)||(A.commissionAddition=C),e.Njj(C)}),e.k0s(),e.j41(2,"span",50),e.EFF(3,"\u20bd"),e.k0s()()}if(2&g){const t=e.XpG().$implicit;e.R7$(),e.Y8G("useGrouping",!1),e.R50("ngModel",t.commissionAddition),e.Y8G("minFractionDigits",2)("maxFractionDigits",2)}}function dg(g,n){if(1&g&&e.EFF(0),2&g){const t=e.XpG().$implicit;e.SpI(" ",t.commissionAddition,"\u20bd ")}}function ug(g,n){if(1&g){const t=e.RV6();e.j41(0,"div",48)(1,"p-inputNumber",74),e.mxI("ngModelChange",function(C){e.eBV(t);const A=e.XpG().$implicit;return e.DH7(A.returnCost,C)||(A.returnCost=C),e.Njj(C)}),e.k0s(),e.j41(2,"span",50),e.EFF(3,"\u20bd"),e.k0s()()}if(2&g){const t=e.XpG().$implicit;e.R7$(),e.Y8G("useGrouping",!1),e.R50("ngModel",t.returnCost),e.Y8G("minFractionDigits",2)("maxFractionDigits",2)}}function mg(g,n){if(1&g&&e.EFF(0),2&g){const t=e.XpG().$implicit;e.SpI(" ",t.returnCost,"\u20bd ")}}function hg(g,n){if(1&g&&(e.DNE(0,sg,35,14,"tr",21),e.j41(1,"tr")(2,"td",63)(3,"p-cellEditor"),e.DNE(4,cg,1,2,"ng-template",30)(5,pg,2,4,"ng-template",31),e.k0s()(),e.j41(6,"td",64)(7,"p-cellEditor"),e.DNE(8,_g,4,4,"ng-template",30)(9,dg,1,1,"ng-template",31),e.k0s()(),e.j41(10,"td",65)(11,"p-cellEditor"),e.DNE(12,ug,4,4,"ng-template",30)(13,mg,1,1,"ng-template",31),e.k0s()()()),2&g){const t=n.$implicit,I=e.XpG(2).$implicit,C=e.XpG().$implicit,A=e.XpG(2);e.Y8G("ngIf",e.l_i(3,bt,A.getSelfCost(I,t,C,!1),A.getSelfCost(I,t,C,!0))),e.R7$(6),e.Y8G("pEditableColumn",t.commissionAddition),e.R7$(4),e.Y8G("pEditableColumn",t.returnCost)}}function fg(g,n){if(1&g){const t=e.RV6();e.j41(0,"div",41)(1,"p-button",42),e.bIt("click",function(){e.eBV(t);const C=e.XpG().index,A=e.XpG().$implicit,i=e.XpG(2);return e.Njj(i.removeItem(A.salesItems,C))}),e.k0s(),e.j41(2,"h5"),e.EFF(3,"\u041e\u0444\u043e\u0440\u043c\u043b\u0435\u043d\u0438\u0435 \u0443\u043f\u0430\u043a\u043e\u0432\u043a\u0438"),e.k0s(),e.j41(4,"div",43)(5,"div",44)(6,"div")(7,"label",45),e.EFF(8,"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435"),e.k0s()(),e.j41(9,"input",46),e.mxI("ngModelChange",function(C){e.eBV(t);const A=e.XpG().$implicit;return e.DH7(A.name,C)||(A.name=C),e.Njj(C)}),e.k0s()(),e.j41(10,"div",44)(11,"label",47),e.EFF(12,"\u041e\u0431\u044a\u0451\u043c"),e.k0s(),e.j41(13,"div",48)(14,"p-inputNumber",49),e.mxI("ngModelChange",function(C){e.eBV(t);const A=e.XpG().$implicit;return e.DH7(A.volume,C)||(A.volume=C),e.Njj(C)}),e.k0s(),e.j41(15,"span",50),e.EFF(16,"\u043b"),e.k0s()()(),e.j41(17,"div",44)(18,"label",51),e.EFF(19,"\u0421\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c \u0444\u0430\u0441\u043e\u0432\u043a\u0438"),e.k0s(),e.j41(20,"div",48)(21,"p-inputNumber",52),e.mxI("ngModelChange",function(C){e.eBV(t);const A=e.XpG().$implicit;return e.DH7(A.packagingPrice,C)||(A.packagingPrice=C),e.Njj(C)}),e.k0s(),e.j41(22,"span",50),e.EFF(23,"\u20bd"),e.k0s()()()(),e.DNE(24,Qt,4,1,"p-table",23),e.j41(25,"p-dropdown",53,2),e.bIt("onChange",function(C){e.eBV(t);const A=e.XpG().$implicit,i=e.XpG(3);return e.Njj(i.addSalesItemPackage(A,C.value))}),e.DNE(27,Wt,3,3,"ng-template",18),e.k0s()(),e.j41(28,"div",41)(29,"p-dropdown",54,3),e.nI1(31,"async"),e.bIt("onChange",function(C){e.eBV(t);const A=e.XpG().$implicit,i=e.XpG(3);return e.Njj(i.addSalesPlan(A,C.value))}),e.DNE(32,Jt,3,1,"ng-template",18)(33,Zt,1,0,"ng-template",19),e.k0s(),e.j41(34,"p-table",25),e.DNE(35,qt,18,0,"ng-template",14)(36,hg,14,6,"ng-template",15),e.k0s()()}if(2&g){const t=e.XpG().$implicit,I=e.XpG(3);e.R7$(9),e.R50("ngModel",t.name),e.R7$(5),e.Y8G("useGrouping",!1)("minFractionDigits",0)("maxFractionDigits",1),e.R50("ngModel",t.volume),e.R7$(7),e.Y8G("useGrouping",!1)("minFractionDigits",0)("maxFractionDigits",2),e.R50("ngModel",t.packagingPrice),e.R7$(3),e.Y8G("ngIf",null==t.salesItemPackages?null:t.salesItemPackages.length),e.R7$(),e.Y8G("options",I.getAvailablePackageTypes(t)),e.R7$(4),e.Y8G("options",e.bMT(31,14,I.salesChannels))("autoDisplayFirst",!1),e.R7$(5),e.Y8G("value",t.salesPlans)}}function bg(g,n){1&g&&(e.qex(0),e.j41(1,"p-accordionTab",39),e.DNE(2,Vt,1,3,"ng-template",14)(3,fg,37,16,"ng-template",40),e.k0s(),e.bVm())}function Tg(g,n){if(1&g&&(e.qex(0),e.DNE(1,bg,4,0,"ng-container",20),e.bVm()),2&g){const t=n.$implicit;e.R7$(),e.Y8G("ngForOf",t.salesItems)}}function vg(g,n){if(1&g){const t=e.RV6();e.qex(0),e.j41(1,"p-dialog",78),e.mxI("visibleChange",function(C){e.eBV(t);const A=e.XpG(2);return e.DH7(A.duplicateProductDialogVisible,C)||(A.duplicateProductDialogVisible=C),e.Njj(C)}),e.j41(2,"p",79),e.EFF(3),e.k0s()(),e.bVm()}if(2&g){const t=e.XpG(2);e.R7$(),e.Aen(e.lJ4(7,Tt)),e.Y8G("modal",!0),e.R50("visible",t.duplicateProductDialogVisible),e.Y8G("draggable",!1)("resizable",!1),e.R7$(2),e.SpI(" ",t.addedProduct.name," ")}}function yg(g,n){if(1&g){const t=e.RV6();e.j41(0,"div",5)(1,"h5"),e.EFF(2,"\u0420\u0430\u0441\u0447\u0451\u0442 \u0434\u043e\u0445\u043e\u0434\u043d\u043e\u0441\u0442\u0438 \u043f\u043e \u0430\u0440\u0442\u0438\u043a\u0443\u043b\u0443"),e.k0s(),e.j41(3,"span",6)(4,"input",7),e.mxI("ngModelChange",function(C){e.eBV(t);const A=e.XpG();return e.DH7(A.calculation.name,C)||(A.calculation.name=C),e.Njj(C)}),e.k0s(),e.j41(5,"label",8),e.EFF(6,"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0440\u0430\u0441\u0447\u0451\u0442\u0430"),e.k0s()(),e.j41(7,"span",6)(8,"p-calendar",9),e.mxI("ngModelChange",function(C){e.eBV(t);const A=e.XpG();return e.DH7(A.calculation.date,C)||(A.calculation.date=C),e.Njj(C)}),e.k0s(),e.j41(9,"label",10),e.EFF(10,"\u0414\u0430\u0442\u0430 \u0437\u0430\u043a\u0443\u043f\u043a\u0438"),e.k0s()(),e.j41(11,"div",11)(12,"p-button",12),e.bIt("click",function(){e.eBV(t);const C=e.XpG();return e.Njj(C.savePurchaseBatch())}),e.k0s()(),e.j41(13,"p-tabView",13)(14,"p-tabPanel"),e.DNE(15,vt,3,0,"ng-template",14)(16,jt,7,5,"ng-template",15),e.k0s(),e.j41(17,"p-tabPanel"),e.DNE(18,Pt,3,0,"ng-template",14),e.j41(19,"div",5)(20,"p-dropdown",16,0),e.bIt("onChange",function(C){e.eBV(t);const A=e.XpG();return e.Njj(A.addSalesItem(C.value))}),e.DNE(22,Rt,3,2,"ng-template",17)(23,Mt,3,2,"ng-template",18)(24,Bt,1,0,"ng-template",19),e.k0s(),e.j41(25,"p-accordion"),e.DNE(26,Tg,2,1,"ng-container",20),e.k0s()()()(),e.DNE(27,vg,4,8,"ng-container",21),e.k0s()}if(2&g){const t=e.XpG();e.R7$(4),e.R50("ngModel",t.calculation.name),e.R7$(4),e.R50("ngModel",t.calculation.date),e.Y8G("readonlyInput",!0),e.R7$(12),e.Y8G("ngModel",t.selectedProduct)("options",t.calculation.items)("autoDisplayFirst",!1)("group",!0),e.R7$(6),e.Y8G("ngForOf",t.calculation.items),e.R7$(),e.Y8G("ngIf",t.addedProduct)}}let xg=(()=>{class g extends D.x{constructor(t,I,C,A,i,a,s){super(s),this.route=t,this.productClient=I,this.purchaseBatchCommandHandlerClient=C,this.salesChannelClient=A,this.messageService=i,this.purchaseService=a,this.productSearchSubject=new ee.B,this.purchaseBatchIDSubject=new ee.B,this.products=new T.t([]),this.salesChannels=new T.t([])}get duplicateProductDialogVisible(){return!!this.addedProduct}set duplicateProductDialogVisible(t){t||(this.addedProduct=null)}get calculationTotalProductCount(){return this.calculation.items.reduce((t,I)=>Math.round(t+I.count),0)}get calculationTotalSum(){return this.calculation.items.reduce((t,I)=>Math.round(t+I.price*I.count),0)}ngOnInit(){this.titleService.setTitle("\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0437\u0430\u043a\u0443\u043f\u043a\u0438"),this.purchaseBatchIDSubject.pipe((0,G.Q)(this.destroyed)).pipe((0,S.n)(I=>this.purchaseService.getBatch(I).pipe((0,d.W)(C=>(this.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0437\u0430\u043a\u0443\u043f\u043a\u0438",severity:"error",detail:C}),u.w))))).subscribe(I=>{I.items.forEach(C=>{const A=C.product.packages.reduce((i,a)=>(i.set(a.iD,a),i),new Map);C.salesItems.forEach(i=>{let a={productPackage:A.get(i.productPackageID)};Object.assign(i,a)})}),this.calculation=I,this.titleService.setTitle(`\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0437\u0430\u043a\u0443\u043f\u043a\u0438 - ${I.name}`)}),this.productSearchSubject.pipe((0,G.Q)(this.destroyed)).pipe((0,S.n)(I=>this.productClient.findProducts(new _.D.FindProductsModel({count:10,offset:0,name:I})).pipe((0,d.W)(C=>(this.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u043e\u0438\u0441\u043a\u0430 \u0442\u043e\u0432\u0430\u0440\u043e\u0432",severity:"error",detail:C}),u.w))))).subscribe(I=>{this.products.next(I.items)}),this.salesChannelClient.getSalesChannels().pipe((0,d.W)(I=>(this.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0441\u043f\u0438\u0441\u043a\u0430 \u043a\u0430\u043d\u0430\u043b\u043e\u0432 \u043f\u0440\u043e\u0434\u0430\u0436",severity:"error",detail:I}),u.w))).subscribe(I=>{this.salesChannels.next(I)});const t=+this.route.snapshot.paramMap.get("id");t>0&&t!=this.calculation?.iD?this.purchaseBatchIDSubject.next(t):this.calculation=new _.D.PurchaseBatch({date:new Date,status:_.D.PurchaseBatchStatus.Unknown,items:[],name:"\u041d\u043e\u0432\u0430\u044f \u0437\u0430\u043a\u0443\u043f\u043a\u0430",iD:0})}addSalesPlan(t,I){if(I){t.salesPlans||(t.salesPlans=[]);const C=this.getSalesItemProductPackage(t),A=this.getProductPackageBatchItem(C),i=new _.D.SalesPlan;i.salesChannel=I,i.salesChannelID=I.iD,i.amount=0,i.marketingBudget=0,i.deliveryCost=0,i.deliveryDate=new Date,i.status=_.D.SalesPlanStatus.InProcess,i.price=A.price+t.packagingPrice+this.getPackagePrice(t),t.salesPlans.push(i),this.salesChannelDropdown.clear(null)}}getSalesItemProductPackage(t){return this.getProductPackageBatchItem(t.productPackage).product.packages.find(A=>A.iD==t.productPackageID)}getProductPackageBatchItem(t){return this.calculation.items.find(C=>C.productID==t.productID)}addSalesItem(t){if(t){const I=this.getProductPackageBatchItem(t),C=this.createNewSalesItem(t,I);I.salesItems.push(C),this.productPackageDropdown.clear(null)}}removeItem(t,I){t.splice(I,1)}getAvailablePackageTypes(t){const I=[],C=new Set(t.salesItemPackages.map(i=>i.packageTypeID)),A=this.purchaseService.getPackageTypes();for(const i of A)C.has(i.iD)||I.push(i);return I}addSalesItemPackage(t,I){I&&(t.salesItemPackages.push(new _.D.SalesItemPackage({packageTypeID:I.iD,amount:0,pricePerUom:I.price??0,salesItemID:t.iD})),this.packageTypeDropdown.clear(null))}getSelfCost(t,I,C,A=!0){return this.purchaseService.getSalesPlanSelfCost(t,I,C,A)}getPackagePrice(t){return this.purchaseService.getSalesItemCosts(t)}getPackageType(t){return this.purchaseService.getPackageType(t)}findProductsByName(t){t.query.trim().length>2&&this.productSearchSubject.next(t.query)}addProduct(t){const I=t.value;if(I){this.productAutocomplete.clear();const C=this.calculation.items.find(A=>A.productID==I.iD);this.selectedProduct=null,C?this.addedProduct=I:this.calculation.items.push(new _.D.PurchaseBatchItem({productID:I.iD,count:0,product:I,purchaseBatchID:this.calculation.iD,price:0,salesItems:[],iD:0}))}}savePurchaseBatch(){this.purchaseBatchCommandHandlerClient.updatePurchaseBatch(this.calculation).pipe((0,d.W)(t=>(this.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430",severity:"error",detail:t}),u.w))).subscribe(t=>{this.calculation.iD=t.iD,this.messageService.add({summary:"\u0423\u0441\u043f\u0435\u0445",severity:"success",detail:"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0438 \u043f\u0430\u0440\u0442\u0438\u0438 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u043e"})})}getUnitOfMeasureByPackageTypeID(t){const C=this.purchaseService.getPackageTypes().find(A=>A.iD==t);return C?this.getUnitOfMeasure(C.unitOfMeasure):"?"}getUnitOfMeasure(t){let I;switch(t){case _.D.UnitOfMeasure.Piece:I="\u0448\u0442";break;case _.D.UnitOfMeasure.SquareMeter:I="\u043c&sup2;";break;default:I=""}return I}createNewSalesItem(t,I){return new _.D.SalesItem({packagingPrice:0,volume:0,salesItemPackages:[],salesPlans:[],iD:0,name:"\u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u0430\u044f \u0443\u043f\u0430\u043a\u043e\u0432\u043a\u0430",productPackageID:t.iD,productPackage:t,purchaseBatchItemID:I.iD})}static{this.\u0275fac=function(I){return new(I||g)(e.rXU(x.nX),e.rXU(_.D.ProductClient),e.rXU(F.X.PurchaseBatchClient),e.rXU(_.D.SalesChannelClient),e.rXU(p.bg),e.rXU(w),e.rXU(N.hE))}}static{this.\u0275cmp=e.VBU({type:g,selectors:[["app-purchase-editor"]],viewQuery:function(I,C){if(1&I&&(e.GBs(ut,5),e.GBs(mt,5),e.GBs(ht,5),e.GBs(ft,5)),2&I){let A;e.mGM(A=e.lsd())&&(C.productPackageDropdown=A.first),e.mGM(A=e.lsd())&&(C.packageTypeDropdown=A.first),e.mGM(A=e.lsd())&&(C.salesChannelDropdown=A.first),e.mGM(A=e.lsd())&&(C.productAutocomplete=A.first)}},features:[e.Vt3],decls:2,vars:1,consts:[["productPackageDropdown",""],["productAutocomplete",""],["packageTypeDropdown",""],["salesChannelDropdown",""],["class","card",4,"ngIf"],[1,"card"],[1,"p-float-label"],["id","productName","type","text","pInputText","",1,"w-full","md:w-30rem","mb-5","p-3",3,"ngModelChange","ngModel"],["for","productName",1,"font-bold"],["input","date","placeholder","\u0414\u0430\u0442\u0430 \u0437\u0430\u043a\u0443\u043f\u043a\u0438","dateFormat","dd.mm.yy",3,"ngModelChange","ngModel","readonlyInput"],["for","date","dateFormat","dd.mm.yy",1,"font-bold"],[1,"mt-3"],["icon","pi pi-save","label","\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",3,"click"],["styleClass","tabview-custom"],["pTemplate","header"],["pTemplate","body"],["styleClass","m-3","appendTo","body","placeholder","\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0430\u0440\u0442\u0438\u043a\u0443\u043b","optionGroupChildren","product.packages",3,"onChange","ngModel","options","autoDisplayFirst","group"],["pTemplate","group"],["pTemplate","item"],["pTemplate","selectedItem"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"pi","pi-shopping-cart","pi-fw"],[3,"value",4,"ngIf"],["styleClass","mb-3","field","name","placeholder","\u041f\u043e\u0438\u0441\u043a \u0442\u043e\u0432\u0430\u0440\u0430",3,"completeMethod","onSelect","suggestions","minLength"],[3,"value"],["pTemplate","footer"],["width","10%"],["icon","pi pi-trash",3,"click"],["pEditableColumnField","count",1,"text-right",3,"pEditableColumn"],["pTemplate","input"],["pTemplate","output"],["pEditableColumnField","price",1,"text-right",3,"pEditableColumn"],[3,"ngModelChange","useGrouping","ngModel"],[3,"ngModelChange","useGrouping","ngModel","maxFractionDigits"],["colspan","3",1,"text-right"],[1,"text-right"],[1,"flex","align-items-center","gap-2"],[1,"pi","pi-box","pi-fw"],["transitionOptions","50ms"],["pTemplate","content"],[1,"card","m-2"],["label","\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0442\u0438\u043f\u043e\u0444\u043e\u0440\u043c\u0430\u0442","styleClass","mb-3","icon","pi pi-trash",3,"click"],[1,"grid"],[1,"col","xs:col-12"],["for","name"],["maxlength","100","pInputText","","inputId","name",3,"ngModelChange","ngModel"],["for","volume"],[1,"p-inputgroup"],["inputId","volume",3,"ngModelChange","useGrouping","minFractionDigits","maxFractionDigits","ngModel"],[1,"p-inputgroup-addon"],["for","packagingPrice"],["inputId","packagingPrice",3,"ngModelChange","useGrouping","minFractionDigits","maxFractionDigits","ngModel"],["styleClass","m-3","appendTo","body","optionLabel","name","placeholder","\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043e\u0444\u043e\u0440\u043c\u043b\u0435\u043d\u0438\u0435",3,"onChange","options"],["styleClass","m-3","appendTo","body","placeholder","\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u043b\u0430\u043d \u043f\u0440\u043e\u0434\u0430\u0436","optionLabel","\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u043b\u0430\u043d \u043f\u0440\u043e\u0434\u0430\u0436",3,"onChange","options","autoDisplayFirst"],["icon","pi pi-trash","styleClass","p-button-sm",3,"click"],["pEditableColumnField","amount",1,"text-right",3,"pEditableColumn"],["pEditableColumnField","pricePerUom",1,"text-right",3,"pEditableColumn"],[3,"ngModelChange","useGrouping","minFractionDigits","maxFractionDigits","ngModel"],[1,"p-inputgroup-addon",3,"innerHtml"],[3,"innerHtml"],["emptyValue","empty",3,"ngModelChange","useGrouping","minFractionDigits","maxFractionDigits","ngModel"],[3,"innerHTML"],["pEditableColumn","",1,"text-right"],["pEditableColumnField","commissionAddition",1,"text-right",3,"pEditableColumn"],["pEditableColumnField","returnCost",1,"text-right",3,"pEditableColumn"],["rowspan","2"],["rowspan","2","pEditableColumnField","price",1,"text-right",3,"pEditableColumn"],["rowspan","2",1,"text-right"],["pEditableColumn",""],["rowspan","2","pEditableColumnField","marketingBudget",1,"text-right",3,"pEditableColumn"],["rowspan","2","pEditableColumnField","amount",1,"text-right",3,"pEditableColumn"],["pEditableColumnField","commissionMultiplier",1,"text-right",3,"pEditableColumn"],["pEditableColumnField","returnPercentage",1,"text-right",3,"pEditableColumn"],[3,"ngModelChange","useGrouping","ngModel","minFractionDigits","maxFractionDigits"],[3,"severity"],["inputId","deliveryCost",3,"ngModelChange","useGrouping","minFractionDigits","maxFractionDigits","ngModel"],["input","date","placeholder","\u0414\u0430\u0442\u0430 \u043e\u0442\u0433\u0440\u0443\u0437\u043a\u0438","appendTo","body","dateFormat","dd.mm.yy",3,"ngModelChange","ngModel","readonlyInput"],["header","\u041e\u0448\u0438\u0431\u043a\u0430",3,"visibleChange","modal","visible","draggable","resizable"],[1,"m-0"]],template:function(I,C){1&I&&(e.nrm(0,"p-toast"),e.DNE(1,yg,28,9,"div",4)),2&I&&(e.R7$(),e.Y8G("ngIf",C.calculation))},dependencies:[l.Sq,l.bT,h.me,h.BC,h.tU,h.vS,f.XI,p.Ei,f.hp,f.c5,E.y8,v.$n,Y.nD,Y.gV,ne,Ae,X.S,O.YI,L.ms,U.l,ie.j9,ae.Vv,oe.v,l.Jj,l.QX,l.vh,dt]})}}return g})();const Sg=g=>({id:g}),Eg=g=>["/purchase","edit",g];function Ng(g,n){if(1&g&&(e.j41(0,"div",4)(1,"h5"),e.EFF(2,"\u0417\u0430\u043a\u0443\u043f\u043a\u0430"),e.k0s(),e.j41(3,"div",5)(4,"div",6)(5,"div",7)(6,"span",8),e.EFF(7,"\u0421\u0443\u043c\u043c\u0430 \u0437\u0430\u043a\u0443\u043f\u043a\u0438:"),e.k0s(),e.j41(8,"span"),e.EFF(9),e.k0s()(),e.j41(10,"div",7)(11,"span",8),e.EFF(12,"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043f\u043e\u0437\u0438\u0446\u0438\u0439:"),e.k0s(),e.j41(13,"span"),e.EFF(14),e.k0s()(),e.j41(15,"div",7)(16,"span",8),e.EFF(17,"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0442\u043e\u0432\u0430\u0440\u043e\u0432:"),e.k0s(),e.j41(18,"span"),e.EFF(19),e.k0s()()()()()),2&g){const t=e.XpG(2);e.R7$(9),e.SpI("",t.batchInfo.sum,"\u20bd"),e.R7$(5),e.JRh(t.batchInfo.positionCount),e.R7$(5),e.JRh(t.batchInfo.productCount)}}function kg(g,n){if(1&g&&(e.j41(0,"div",11)(1,"div",7)(2,"div",8),e.EFF(3,"\u0422\u043e\u0432\u0430\u0440:"),e.k0s(),e.j41(4,"div"),e.EFF(5),e.k0s()(),e.j41(6,"div",7)(7,"div",8),e.EFF(8,"\u041f\u0440\u043e\u0434\u0430\u0436\u0438, \u043f\u043b\u0430\u043d:"),e.k0s(),e.j41(9,"div"),e.EFF(10),e.k0s()(),e.j41(11,"div",7)(12,"div",8),e.EFF(13,"\u041f\u0440\u043e\u0434\u0430\u0436\u0438, \u0444\u0430\u043a\u0442:"),e.k0s(),e.j41(14,"div"),e.EFF(15),e.k0s()(),e.j41(16,"div",7)(17,"div",8),e.EFF(18,"\u041f\u0440\u043e\u0434\u0430\u0436\u0438, \u043f\u043b\u0430\u043d:"),e.k0s(),e.j41(19,"div"),e.EFF(20),e.nI1(21,"number"),e.k0s()(),e.j41(22,"div",7)(23,"div",8),e.EFF(24,"\u041f\u0440\u043e\u0434\u0430\u0436\u0438, \u0444\u0430\u043a\u0442:"),e.k0s(),e.j41(25,"div"),e.EFF(26),e.nI1(27,"number"),e.k0s()(),e.j41(28,"div",7)(29,"div",8),e.EFF(30,"\u041a\u043e\u043c\u0438\u0441\u0441\u0438\u044f, \u043f\u043b\u0430\u043d:"),e.k0s(),e.j41(31,"div"),e.EFF(32),e.nI1(33,"number"),e.k0s()(),e.j41(34,"div",7)(35,"div",8),e.EFF(36,"\u041a\u043e\u043c\u0438\u0441\u0441\u0438\u044f, \u0444\u0430\u043a\u0442:"),e.k0s(),e.j41(37,"div"),e.EFF(38),e.nI1(39,"number"),e.k0s()(),e.j41(40,"div",7)(41,"div",8),e.EFF(42,"\u0414\u043e\u0441\u0442\u0430\u0432\u043a\u0430, \u043f\u043b\u0430\u043d:"),e.k0s(),e.j41(43,"div"),e.EFF(44),e.nI1(45,"number"),e.k0s()(),e.j41(46,"div",7)(47,"div",8),e.EFF(48,"\u0414\u043e\u0441\u0442\u0430\u0432\u043a\u0430, \u0444\u0430\u043a\u0442:"),e.k0s(),e.j41(49,"div"),e.EFF(50),e.nI1(51,"number"),e.k0s()(),e.j41(52,"div",7)(53,"div",8),e.EFF(54,"\u0412\u043e\u0437\u0432\u0440\u0430\u0442\u044b, \u043f\u043b\u0430\u043d:"),e.k0s(),e.j41(55,"div"),e.EFF(56),e.k0s()(),e.j41(57,"div",7)(58,"div",8),e.EFF(59,"\u0412\u043e\u0437\u0432\u0440\u0430\u0442\u044b, \u0444\u0430\u043a\u0442:"),e.k0s(),e.j41(60,"div"),e.EFF(61),e.k0s()(),e.j41(62,"div",7)(63,"div",8),e.EFF(64,"\u041f\u0440\u0438\u0431\u044b\u043b\u044c, \u043f\u043b\u0430\u043d:"),e.k0s(),e.j41(65,"div"),e.EFF(66),e.nI1(67,"number"),e.k0s()(),e.j41(68,"div",7)(69,"div",8),e.EFF(70,"\u041f\u0440\u0438\u0431\u044b\u043b\u044c, \u0444\u0430\u043a\u0442:"),e.k0s(),e.j41(71,"div"),e.EFF(72),e.nI1(73,"number"),e.k0s()()()),2&g){const t=n.$implicit;e.R7$(5),e.JRh(t.name),e.R7$(5),e.SpI("",t.plannedAmount,"\u0448\u0442"),e.R7$(5),e.SpI("",t.soldAmount,"\u0448\u0442"),e.R7$(5),e.SpI("",e.i5U(21,13,t.plannedSum,"1.2-2"),"\u20bd"),e.R7$(6),e.SpI("",e.i5U(27,16,t.soldSum,"1.2-2"),"\u20bd"),e.R7$(6),e.SpI("",e.i5U(33,19,t.plannedCommissionPercent,"1.2-2"),"\u20bd"),e.R7$(6),e.SpI("",e.i5U(39,22,t.commissionPercent,"1.2-2"),"\u20bd"),e.R7$(6),e.SpI("",e.i5U(45,25,t.plannedCommissionAddition,"1.2-2"),"\u20bd"),e.R7$(6),e.SpI("",e.i5U(51,28,t.commissionAddition,"1.2-2"),"\u20bd"),e.R7$(6),e.SpI("",t.plannedReturnCount,"\u0448\u0442"),e.R7$(5),e.SpI("",t.returnCount,"\u0448\u0442"),e.R7$(5),e.SpI("",e.i5U(67,31,t.plannedProfit,"1.2-2"),"\u20bd"),e.R7$(6),e.SpI("",e.i5U(73,34,t.profit,"1.2-2"),"\u20bd")}}function Dg(g,n){if(1&g&&(e.j41(0,"div",4)(1,"h5"),e.EFF(2),e.k0s(),e.j41(3,"div",5),e.DNE(4,kg,74,37,"div",10),e.k0s()()),2&g){const t=n.$implicit;e.R7$(2),e.SpI(" ",t.name," "),e.R7$(2),e.Y8G("ngForOf",t.plans)}}function Gg(g,n){if(1&g&&(e.j41(0,"div",4)(1,"h4"),e.EFF(2,"\u041f\u043b\u0430\u043d\u044b \u043f\u0440\u043e\u0434\u0430\u0436"),e.k0s(),e.DNE(3,Dg,5,2,"div",9),e.k0s()),2&g){const t=e.XpG(2);e.R7$(3),e.Y8G("ngForOf",t.salesInfo.salesChannels)}}function Fg(g,n){if(1&g){const t=e.RV6();e.qex(0),e.j41(1,"h1"),e.EFF(2),e.k0s(),e.j41(3,"p-button",1),e.bIt("click",function(){e.eBV(t);const C=e.XpG();return e.Njj(C.calcPlans())}),e.k0s(),e.nrm(4,"p-button",2),e.DNE(5,Ng,20,3,"div",3)(6,Gg,4,1,"div",3),e.bVm()}if(2&g){const t=e.XpG();e.R7$(2),e.JRh(t.batch.name),e.R7$(2),e.Y8G("routerLink",e.eq3(6,Eg,e.eq3(4,Sg,t.batch.iD))),e.R7$(),e.Y8G("ngIf",t.batchInfo),e.R7$(),e.Y8G("ngIf",t.salesInfo)}}let wg=(()=>{class g extends D.x{constructor(t,I,C){super(C),this.purchaseService=t,this.route=I,this.batchID=new T.t(null),this.salesPlanIDs=new T.t([])}ngOnInit(){this.titleService.setTitle("\u0421\u0432\u043e\u0434\u043a\u0430 \u043f\u043e \u0437\u0430\u043a\u0443\u043f\u043a\u0435");const t=+this.route.snapshot.paramMap.get("id");t>0&&this.batchID.next(t),this.batchID.pipe((0,G.Q)(this.destroyed)).pipe((0,$.p)(I=>!!I)).pipe((0,S.n)(I=>this.purchaseService.getBatch(I))).subscribe(I=>{this.batch=I,this.updateBatchInfo(),this.titleService.setTitle(`\u0421\u0432\u043e\u0434\u043a\u0430 \u043f\u043e \u0437\u0430\u043a\u0443\u043f\u043a\u0435 - ${I.name}`)}),this.salesPlanIDs.pipe((0,G.Q)(this.destroyed)).pipe((0,$.p)(I=>!!I?.length)).pipe((0,S.n)(I=>this.purchaseService.getSalesPlansSummaries(I))).subscribe(I=>{this.summaries=I,this.salesInfo=this.getSalesInfo(this.batch,I)})}updateBatchInfo(){this.batchInfo=this.batch?this.getBatchInfo(this.batch):{},this.salesInfo={},this.summaries=[],this.salesPlanIDs.next(this.batch.items.reduce((t,I)=>I.salesItems.reduce((C,A)=>A.salesPlans.reduce((i,a)=>(t.push(a.iD),t),t),t),[]))}getBatchInfo(t){const I={};return I.sum=t.items.reduce((C,A)=>C+A.count*A.price,0),I.productCount=t.items.reduce((C,A)=>C+A.count,0),I.positionCount=t.items.length,I}getSalesInfo(t,I){const C={},A=[];for(const i of t.items)for(const s of i.salesItems){this.purchaseService.getSalesItemCosts(s);for(const c of s.salesPlans){const b=I.find(J=>J.iD==c.iD);let V=A.find(J=>J.channelID==c.salesChannelID);V||(V={channelID:c.salesChannelID,name:c.salesChannel.name,plans:[]},A.push(V)),this.purchaseService.getSalesPlanSelfCost(s,c,i);const HA=this.purchaseService.getSalesPlanSelfCost(s,c,i)*c.amount,zA=this.purchaseService.getSalesItemCosts(s)*c.amount;V.plans.push({name:s.productPackage.name+", "+s.name,plannedAmount:c.amount,soldAmount:b.salesCount,plannedSum:c.price*c.amount,soldSum:b.salesSum,plannedCommissionAddition:-c.commissionAddition*c.amount,plannedCommissionPercent:-Math.ceil(c.amount*c.price*c.commissionMultiplier/100),commissionAddition:b.commissionAddition,commissionPercent:b.commissionPercent,plannedReturnCount:Math.ceil(c.amount*c.returnPercentage/100),returnCount:b.returnCount,plannedProfit:c.amount*c.price-HA-c.deliveryCost,profit:b.salesSum-b.returnSum+b.commissionPercent+b.commissionAddition-zA-c.deliveryCost-i.count*i.price})}}return C.salesChannels=A,C}calcPlans(){this.purchaseService.calcPlans()}static{this.\u0275fac=function(I){return new(I||g)(e.rXU(w),e.rXU(x.nX),e.rXU(N.hE))}}static{this.\u0275cmp=e.VBU({type:g,selectors:[["app-purchase-summary"]],inputs:{batchID:"batchID"},features:[e.Jv_([{provide:h.kq,useExisting:(0,e.Rfq)(()=>g),multi:!0}]),e.Vt3],decls:1,vars:1,consts:[[4,"ngIf"],["styleClass","mb-3","label","\u041f\u0435\u0440\u0435\u0441\u0447\u0438\u0442\u0430\u0442\u044c",3,"click"],["styleClass","mb-3","label","\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0437\u0430\u043a\u0443\u043f\u043a\u0443",3,"routerLink"],["class","card",4,"ngIf"],[1,"card"],[1,"grid"],[1,"col-12","md:col-6","xl:col-4"],[1,"flex","justify-content-between"],[1,"font-bold","text-900"],["class","card",4,"ngFor","ngForOf"],["class","col-6 md:col-12 xl:col-4",4,"ngFor","ngForOf"],[1,"col-6","md:col-12","xl:col-4"]],template:function(I,C){1&I&&e.DNE(0,Fg,7,8,"ng-container",0),2&I&&e.Y8G("ngIf",C.batch)},dependencies:[l.Sq,l.bT,v.$n,x.Wk,l.QX]})}}return g})();var jg=o(152),Pg=o(3294),le=o(2356),H=o(9071),re=o(3306),R=o(2423),se=o(5434),ce=o(6018),M=o(5998),z=o(8757);const pe=g=>({"p-treenode-droppoint-active":g}),Rg=(g,n)=>["p-treenode",g,n],_e=g=>({height:g}),Mg=g=>({"padding-left":g}),Bg=(g,n,t)=>({"p-treenode-selectable":g,"p-treenode-dragover":n,"p-highlight":t}),B=g=>({$implicit:g}),Vg=(g,n)=>({"p-checkbox-disabled p-disabled":g,"p-variant-filled":n}),$g=(g,n)=>({"p-highlight":g,"p-indeterminate":n}),Yg=(g,n)=>({$implicit:g,partialSelected:n}),de=g=>({display:g}),Xg=g=>({"p-treenode-collapsed":g}),Og=(g,n)=>({"p-treenode-selectable":g,"p-highlight":n}),ue=g=>({"p-treenode-connector-line":g});function Lg(g,n){if(1&g){const t=e.RV6();e.j41(0,"li",4),e.bIt("drop",function(C){e.eBV(t);const A=e.XpG(2);return e.Njj(A.onDropPoint(C,-1))})("dragover",function(C){e.eBV(t);const A=e.XpG(2);return e.Njj(A.onDropPointDragOver(C))})("dragenter",function(C){e.eBV(t);const A=e.XpG(2);return e.Njj(A.onDropPointDragEnter(C,-1))})("dragleave",function(C){e.eBV(t);const A=e.XpG(2);return e.Njj(A.onDropPointDragLeave(C))}),e.k0s()}if(2&g){const t=e.XpG(2);e.Y8G("ngClass",e.eq3(2,pe,t.draghoverPrev)),e.BMQ("aria-hidden",!0)}}function Ug(g,n){1&g&&e.nrm(0,"ChevronRightIcon",14),2&g&&e.Y8G("styleClass","p-tree-toggler-icon")}function Hg(g,n){1&g&&e.nrm(0,"ChevronDownIcon",14),2&g&&e.Y8G("styleClass","p-tree-toggler-icon")}function zg(g,n){if(1&g&&(e.qex(0),e.DNE(1,Ug,1,1,"ChevronRightIcon",13)(2,Hg,1,1,"ChevronDownIcon",13),e.bVm()),2&g){const t=e.XpG(4);e.R7$(),e.Y8G("ngIf",!t.node.expanded),e.R7$(),e.Y8G("ngIf",t.node.expanded)}}function Kg(g,n){1&g&&(e.qex(0),e.nrm(1,"SpinnerIcon",15),e.bVm()),2&g&&(e.R7$(),e.Y8G("spin",!0)("styleClass","p-tree-node-toggler-icon"))}function Qg(g,n){if(1&g&&(e.qex(0),e.DNE(1,zg,3,2,"ng-container",8)(2,Kg,2,2,"ng-container",8),e.bVm()),2&g){const t=e.XpG(3);e.R7$(),e.Y8G("ngIf",!t.node.loading),e.R7$(),e.Y8G("ngIf","icon"===t.loadingMode&&t.node.loading)}}function Wg(g,n){}function Jg(g,n){1&g&&e.DNE(0,Wg,0,0,"ng-template")}function Zg(g,n){if(1&g&&(e.j41(0,"span",16),e.DNE(1,Jg,1,0,null,17),e.k0s()),2&g){const t=e.XpG(3);e.R7$(),e.Y8G("ngTemplateOutlet",t.tree.togglerIconTemplate)("ngTemplateOutletContext",e.eq3(2,B,t.node.expanded))}}function qg(g,n){1&g&&e.nrm(0,"CheckIcon",14),2&g&&e.Y8G("styleClass","p-checkbox-icon")}function eI(g,n){1&g&&e.nrm(0,"MinusIcon",14),2&g&&e.Y8G("styleClass","p-checkbox-icon")}function tI(g,n){if(1&g&&(e.qex(0),e.DNE(1,qg,1,1,"CheckIcon",13)(2,eI,1,1,"MinusIcon",13),e.bVm()),2&g){const t=e.XpG(4);e.R7$(),e.Y8G("ngIf",!t.node.partialSelected&&t.isSelected()),e.R7$(),e.Y8G("ngIf",t.node.partialSelected)}}function gI(g,n){}function II(g,n){1&g&&e.DNE(0,gI,0,0,"ng-template")}function CI(g,n){if(1&g&&(e.j41(0,"div",18)(1,"div",19),e.DNE(2,tI,3,2,"ng-container",8)(3,II,1,0,null,17),e.k0s()()),2&g){const t=e.XpG(3);e.Y8G("ngClass",e.l_i(5,Vg,!1===t.node.selectable,"filled"===(null==t.tree?null:t.tree.config.inputStyle()))),e.R7$(),e.Y8G("ngClass",e.l_i(8,$g,t.isSelected(),t.node.partialSelected)),e.R7$(),e.Y8G("ngIf",!t.tree.checkboxIconTemplate),e.R7$(),e.Y8G("ngTemplateOutlet",t.tree.checkboxIconTemplate)("ngTemplateOutletContext",e.l_i(11,Yg,t.isSelected(),t.node.partialSelected))}}function AI(g,n){if(1&g&&e.nrm(0,"span"),2&g){const t=e.XpG(3);e.HbH(t.getIcon())}}function nI(g,n){if(1&g&&(e.j41(0,"span"),e.EFF(1),e.k0s()),2&g){const t=e.XpG(3);e.R7$(),e.JRh(t.node.label)}}function iI(g,n){1&g&&e.eu8(0)}function aI(g,n){if(1&g&&(e.j41(0,"span"),e.DNE(1,iI,1,0,"ng-container",17),e.k0s()),2&g){const t=e.XpG(3);e.R7$(),e.Y8G("ngTemplateOutlet",t.tree.getTemplateForNode(t.node))("ngTemplateOutletContext",e.eq3(2,B,t.node))}}function oI(g,n){if(1&g&&e.nrm(0,"p-treeNode",22),2&g){const t=n.$implicit,I=n.first,C=n.last,A=n.index,i=e.XpG(4);e.Y8G("node",t)("parentNode",i.node)("firstChild",I)("lastChild",C)("index",A)("itemSize",i.itemSize)("level",i.level+1)("loadingMode",i.loadingMode)}}function lI(g,n){if(1&g&&(e.j41(0,"ul",20),e.DNE(1,oI,1,8,"p-treeNode",21),e.k0s()),2&g){const t=e.XpG(3);e.Y8G("ngStyle",e.eq3(3,de,t.node.expanded?"block":"none")),e.R7$(),e.Y8G("ngForOf",t.node.children)("ngForTrackBy",t.tree.trackBy)}}function rI(g,n){if(1&g){const t=e.RV6();e.j41(0,"li",5),e.bIt("keydown",function(C){e.eBV(t);const A=e.XpG(2);return e.Njj(A.onKeyDown(C))}),e.j41(1,"div",6),e.bIt("click",function(C){e.eBV(t);const A=e.XpG(2);return e.Njj(A.onNodeClick(C))})("contextmenu",function(C){e.eBV(t);const A=e.XpG(2);return e.Njj(A.onNodeRightClick(C))})("touchend",function(){e.eBV(t);const C=e.XpG(2);return e.Njj(C.onNodeTouchEnd())})("drop",function(C){e.eBV(t);const A=e.XpG(2);return e.Njj(A.onDropNode(C))})("dragover",function(C){e.eBV(t);const A=e.XpG(2);return e.Njj(A.onDropNodeDragOver(C))})("dragenter",function(C){e.eBV(t);const A=e.XpG(2);return e.Njj(A.onDropNodeDragEnter(C))})("dragleave",function(C){e.eBV(t);const A=e.XpG(2);return e.Njj(A.onDropNodeDragLeave(C))})("dragstart",function(C){e.eBV(t);const A=e.XpG(2);return e.Njj(A.onDragStart(C))})("dragend",function(C){e.eBV(t);const A=e.XpG(2);return e.Njj(A.onDragStop(C))}),e.j41(2,"button",7),e.bIt("click",function(C){e.eBV(t);const A=e.XpG(2);return e.Njj(A.toggle(C))}),e.DNE(3,Qg,3,2,"ng-container",8)(4,Zg,2,4,"span",9),e.k0s(),e.DNE(5,CI,4,14,"div",10)(6,AI,1,2,"span",3),e.j41(7,"span",11),e.DNE(8,nI,2,1,"span",8)(9,aI,2,4,"span",8),e.k0s()(),e.DNE(10,lI,2,5,"ul",12),e.k0s()}if(2&g){const t=e.XpG(2);e.Aen(t.node.style),e.Y8G("ngClass",e.l_i(24,Rg,t.node.styleClass||"",t.isLeaf()?"p-treenode-leaf":""))("ngStyle",e.eq3(27,_e,t.itemSize+"px")),e.BMQ("aria-label",t.node.label)("aria-checked",t.ariaChecked)("aria-setsize",t.node.children?t.node.children.length:0)("aria-selected",t.ariaSelected)("aria-expanded",t.node.expanded)("aria-posinset",t.index+1)("aria-level",t.level+1)("tabindex",0===t.index?0:-1)("data-id",t.node.key),e.R7$(),e.Y8G("ngStyle",e.eq3(29,Mg,t.level*t.indentation+"rem"))("draggable",t.tree.draggableNodes)("ngClass",e.sMw(31,Bg,t.tree.selectionMode&&!1!==t.node.selectable,t.draghoverNode,t.isSelected())),e.R7$(),e.BMQ("data-pc-section","toggler"),e.R7$(),e.Y8G("ngIf",!t.tree.togglerIconTemplate),e.R7$(),e.Y8G("ngIf",t.tree.togglerIconTemplate),e.R7$(),e.Y8G("ngIf","checkbox"==t.tree.selectionMode),e.R7$(),e.Y8G("ngIf",t.node.icon||t.node.expandedIcon||t.node.collapsedIcon),e.R7$(2),e.Y8G("ngIf",!t.tree.getTemplateForNode(t.node)),e.R7$(),e.Y8G("ngIf",t.tree.getTemplateForNode(t.node)),e.R7$(),e.Y8G("ngIf",!t.tree.virtualScroll&&t.node.children&&t.node.expanded)}}function sI(g,n){if(1&g){const t=e.RV6();e.j41(0,"li",4),e.bIt("drop",function(C){e.eBV(t);const A=e.XpG(2);return e.Njj(A.onDropPoint(C,1))})("dragover",function(C){e.eBV(t);const A=e.XpG(2);return e.Njj(A.onDropPointDragOver(C))})("dragenter",function(C){e.eBV(t);const A=e.XpG(2);return e.Njj(A.onDropPointDragEnter(C,1))})("dragleave",function(C){e.eBV(t);const A=e.XpG(2);return e.Njj(A.onDropPointDragLeave(C))}),e.k0s()}if(2&g){const t=e.XpG(2);e.Y8G("ngClass",e.eq3(2,pe,t.draghoverNext)),e.BMQ("aria-hidden",!0)}}function cI(g,n){if(1&g&&(e.j41(0,"td",28)(1,"table",29)(2,"tbody")(3,"tr"),e.nrm(4,"td",30),e.k0s(),e.j41(5,"tr"),e.nrm(6,"td",30),e.k0s()()()()),2&g){const t=e.XpG(3);e.R7$(4),e.Y8G("ngClass",e.eq3(2,ue,!t.firstChild)),e.R7$(2),e.Y8G("ngClass",e.eq3(4,ue,!t.lastChild))}}function pI(g,n){if(1&g&&e.nrm(0,"PlusIcon",33),2&g){const t=e.XpG(5);e.Y8G("styleClass","p-tree-toggler-icon")("ariaLabel",t.tree.togglerAriaLabel)}}function _I(g,n){if(1&g&&e.nrm(0,"MinusIcon",33),2&g){const t=e.XpG(5);e.Y8G("styleClass","p-tree-toggler-icon")("ariaLabel",t.tree.togglerAriaLabel)}}function dI(g,n){if(1&g&&(e.qex(0),e.DNE(1,pI,1,2,"PlusIcon",32)(2,_I,1,2,"MinusIcon",32),e.bVm()),2&g){const t=e.XpG(4);e.R7$(),e.Y8G("ngIf",!t.node.expanded),e.R7$(),e.Y8G("ngIf",t.node.expanded)}}function uI(g,n){}function mI(g,n){1&g&&e.DNE(0,uI,0,0,"ng-template")}function hI(g,n){if(1&g&&(e.j41(0,"span",16),e.DNE(1,mI,1,0,null,17),e.k0s()),2&g){const t=e.XpG(4);e.R7$(),e.Y8G("ngTemplateOutlet",t.tree.togglerIconTemplate)("ngTemplateOutletContext",e.eq3(2,B,t.node.expanded))}}function fI(g,n){if(1&g){const t=e.RV6();e.j41(0,"span",31),e.bIt("click",function(C){e.eBV(t);const A=e.XpG(3);return e.Njj(A.toggle(C))}),e.DNE(1,dI,3,2,"ng-container",8)(2,hI,2,4,"span",9),e.k0s()}if(2&g){const t=e.XpG(3);e.Y8G("ngClass","p-tree-toggler"),e.R7$(),e.Y8G("ngIf",!t.tree.togglerIconTemplate),e.R7$(),e.Y8G("ngIf",t.tree.togglerIconTemplate)}}function bI(g,n){if(1&g&&e.nrm(0,"span"),2&g){const t=e.XpG(3);e.HbH(t.getIcon())}}function TI(g,n){if(1&g&&(e.j41(0,"span"),e.EFF(1),e.k0s()),2&g){const t=e.XpG(3);e.R7$(),e.JRh(t.node.label)}}function vI(g,n){1&g&&e.eu8(0)}function yI(g,n){if(1&g&&(e.j41(0,"span"),e.DNE(1,vI,1,0,"ng-container",17),e.k0s()),2&g){const t=e.XpG(3);e.R7$(),e.Y8G("ngTemplateOutlet",t.tree.getTemplateForNode(t.node))("ngTemplateOutletContext",e.eq3(2,B,t.node))}}function xI(g,n){if(1&g&&e.nrm(0,"p-treeNode",37),2&g){const I=n.first,C=n.last;e.Y8G("node",n.$implicit)("firstChild",I)("lastChild",C)}}function SI(g,n){if(1&g&&(e.j41(0,"td",34)(1,"div",35),e.DNE(2,xI,1,3,"p-treeNode",36),e.k0s()()),2&g){const t=e.XpG(3);e.Y8G("ngStyle",e.eq3(3,de,t.node.expanded?"table-cell":"none")),e.R7$(2),e.Y8G("ngForOf",t.node.children)("ngForTrackBy",t.tree.trackBy)}}function EI(g,n){if(1&g){const t=e.RV6();e.j41(0,"table")(1,"tbody")(2,"tr"),e.DNE(3,cI,7,6,"td",23),e.j41(4,"td",24)(5,"div",25),e.bIt("click",function(C){e.eBV(t);const A=e.XpG(2);return e.Njj(A.onNodeClick(C))})("contextmenu",function(C){e.eBV(t);const A=e.XpG(2);return e.Njj(A.onNodeRightClick(C))})("touchend",function(){e.eBV(t);const C=e.XpG(2);return e.Njj(C.onNodeTouchEnd())})("keydown",function(C){e.eBV(t);const A=e.XpG(2);return e.Njj(A.onNodeKeydown(C))}),e.DNE(6,fI,3,3,"span",26)(7,bI,1,2,"span",3),e.j41(8,"span",11),e.DNE(9,TI,2,1,"span",8)(10,yI,2,4,"span",8),e.k0s()()(),e.DNE(11,SI,3,5,"td",27),e.k0s()()()}if(2&g){const t=e.XpG(2);e.HbH(t.node.styleClass),e.R7$(3),e.Y8G("ngIf",!t.root),e.R7$(),e.Y8G("ngClass",e.eq3(10,Xg,!t.node.expanded)),e.R7$(),e.Y8G("ngClass",e.l_i(12,Og,t.tree.selectionMode,t.isSelected())),e.R7$(),e.Y8G("ngIf",!t.isLeaf()),e.R7$(),e.Y8G("ngIf",t.node.icon||t.node.expandedIcon||t.node.collapsedIcon),e.R7$(2),e.Y8G("ngIf",!t.tree.getTemplateForNode(t.node)),e.R7$(),e.Y8G("ngIf",t.tree.getTemplateForNode(t.node)),e.R7$(),e.Y8G("ngIf",t.node.children&&t.node.expanded)}}function NI(g,n){if(1&g&&e.DNE(0,Lg,1,4,"li",1)(1,rI,11,35,"li",2)(2,sI,1,4,"li",1)(3,EI,12,15,"table",3),2&g){const t=e.XpG();e.Y8G("ngIf",t.tree.droppableNodes),e.R7$(),e.Y8G("ngIf",!t.tree.horizontal),e.R7$(),e.Y8G("ngIf",t.tree.droppableNodes&&t.lastChild),e.R7$(),e.Y8G("ngIf",t.tree.horizontal)}}const kI=["filter"],DI=["scroller"],GI=["wrapper"],FI=(g,n,t,I)=>({"p-tree p-component":!0,"p-tree-selectable":g,"p-treenode-dragover":n,"p-tree-loading":t,"p-tree-flex-scrollable":I}),wI=g=>({options:g}),jI=g=>({"max-height":g}),PI=g=>({"p-tree p-tree-horizontal p-component":!0,"p-tree-selectable":g});function RI(g,n){if(1&g&&e.nrm(0,"i"),2&g){const t=e.XpG(3);e.HbH("p-tree-loading-icon pi-spin "+t.loadingIcon)}}function MI(g,n){1&g&&e.nrm(0,"SpinnerIcon",17),2&g&&e.Y8G("spin",!0)("styleClass","p-tree-loading-icon")}function BI(g,n){}function VI(g,n){1&g&&e.DNE(0,BI,0,0,"ng-template")}function $I(g,n){if(1&g&&(e.j41(0,"span",18),e.DNE(1,VI,1,0,null,9),e.k0s()),2&g){const t=e.XpG(4);e.R7$(),e.Y8G("ngTemplateOutlet",t.loadingIconTemplate)}}function YI(g,n){if(1&g&&(e.qex(0),e.DNE(1,MI,1,2,"SpinnerIcon",15)(2,$I,2,1,"span",16),e.bVm()),2&g){const t=e.XpG(3);e.R7$(),e.Y8G("ngIf",!t.loadingIconTemplate),e.R7$(),e.Y8G("ngIf",t.loadingIconTemplate)}}function XI(g,n){if(1&g&&(e.j41(0,"div",13),e.DNE(1,RI,1,2,"i",14)(2,YI,3,2,"ng-container",11),e.k0s()),2&g){const t=e.XpG(2);e.R7$(),e.Y8G("ngIf",t.loadingIcon),e.R7$(),e.Y8G("ngIf",!t.loadingIcon)}}function OI(g,n){1&g&&e.eu8(0)}function LI(g,n){1&g&&e.nrm(0,"SearchIcon",23),2&g&&e.Y8G("styleClass","p-tree-filter-icon")}function UI(g,n){}function HI(g,n){1&g&&e.DNE(0,UI,0,0,"ng-template")}function zI(g,n){if(1&g&&(e.j41(0,"span",24),e.DNE(1,HI,1,0,null,9),e.k0s()),2&g){const t=e.XpG(3);e.R7$(),e.Y8G("ngTemplateOutlet",t.filterIconTemplate)}}function KI(g,n){if(1&g){const t=e.RV6();e.j41(0,"div",19)(1,"input",20,0),e.bIt("keydown.enter",function(C){return e.eBV(t),e.Njj(C.preventDefault())})("input",function(C){e.eBV(t);const A=e.XpG(2);return e.Njj(A._filter(C.target.value))}),e.k0s(),e.DNE(3,LI,1,1,"SearchIcon",21)(4,zI,2,1,"span",22),e.k0s()}if(2&g){const t=e.XpG(2);e.R7$(),e.BMQ("placeholder",t.filterPlaceholder),e.R7$(2),e.Y8G("ngIf",!t.filterIconTemplate),e.R7$(),e.Y8G("ngIf",t.filterIconTemplate)}}function QI(g,n){if(1&g&&e.nrm(0,"p-treeNode",31,2),2&g){const t=n.$implicit,I=n.first,C=e.XpG(2).options,A=e.XpG(4);e.Y8G("level",t.level)("rowNode",t)("node",t.node)("parentNode",t.parent)("firstChild",I)("lastChild",t.lastChild)("index",t.index)("itemSize",C.itemSize)("indentation",A.indentation)("loadingMode",A.loadingMode)}}function WI(g,n){if(1&g&&(e.j41(0,"ul",29),e.DNE(1,QI,2,10,"p-treeNode",30),e.k0s()),2&g){const t=e.XpG(),I=t.$implicit,C=t.options,A=e.XpG(4);e.Aen(C.contentStyle),e.Y8G("ngClass",C.contentStyleClass),e.BMQ("aria-label",A.ariaLabel)("aria-labelledby",A.ariaLabelledBy),e.R7$(),e.Y8G("ngForOf",I)("ngForTrackBy",A.trackBy)}}function JI(g,n){1&g&&e.DNE(0,WI,2,7,"ul",28),2&g&&e.Y8G("ngIf",n.$implicit)}function ZI(g,n){1&g&&e.eu8(0)}function qI(g,n){if(1&g&&e.DNE(0,ZI,1,0,"ng-container",33),2&g){const t=n.options,I=e.XpG(5);e.Y8G("ngTemplateOutlet",I.loaderTemplate)("ngTemplateOutletContext",e.eq3(2,wI,t))}}function eC(g,n){1&g&&(e.qex(0),e.DNE(1,qI,1,4,"ng-template",32),e.bVm())}function tC(g,n){if(1&g){const t=e.RV6();e.j41(0,"p-scroller",26,1),e.bIt("onScroll",function(C){e.eBV(t);const A=e.XpG(3);return e.Njj(A.onScroll.emit(C))})("onScrollIndexChange",function(C){e.eBV(t);const A=e.XpG(3);return e.Njj(A.onScrollIndexChange.emit(C))})("onLazyLoad",function(C){e.eBV(t);const A=e.XpG(3);return e.Njj(A.onLazyLoad.emit(C))}),e.DNE(2,JI,1,1,"ng-template",27)(3,eC,2,0,"ng-container",11),e.k0s()}if(2&g){const t=e.XpG(3);e.Aen(e.eq3(9,_e,"flex"!==t.scrollHeight?t.scrollHeight:void 0)),e.Y8G("items",t.serializedValue)("tabindex",-1)("scrollHeight","flex"!==t.scrollHeight?void 0:"100%")("itemSize",t.virtualScrollItemSize||t._virtualNodeHeight)("lazy",t.lazy)("options",t.virtualScrollOptions),e.R7$(3),e.Y8G("ngIf",t.loaderTemplate)}}function gC(g,n){if(1&g&&e.nrm(0,"p-treeNode",38),2&g){const t=n.$implicit,I=n.first,C=n.last,A=n.index,i=e.XpG(5);e.Y8G("node",t)("firstChild",I)("lastChild",C)("index",A)("level",0)("loadingMode",i.loadingMode)}}function IC(g,n){if(1&g&&(e.j41(0,"ul",36),e.DNE(1,gC,1,6,"p-treeNode",37),e.k0s()),2&g){const t=e.XpG(4);e.BMQ("aria-label",t.ariaLabel)("aria-labelledby",t.ariaLabelledBy),e.R7$(),e.Y8G("ngForOf",t.getRootNode())("ngForTrackBy",t.trackBy)}}function CC(g,n){if(1&g&&(e.qex(0),e.j41(1,"div",34,3),e.DNE(3,IC,2,4,"ul",35),e.k0s(),e.bVm()),2&g){const t=e.XpG(3);e.R7$(),e.Y8G("ngStyle",e.eq3(2,jI,t.scrollHeight)),e.R7$(2),e.Y8G("ngIf",t.getRootNode())}}function AC(g,n){if(1&g&&(e.qex(0),e.DNE(1,tC,4,11,"p-scroller",25)(2,CC,4,4,"ng-container",11),e.bVm()),2&g){const t=e.XpG(2);e.R7$(),e.Y8G("ngIf",t.virtualScroll),e.R7$(),e.Y8G("ngIf",!t.virtualScroll)}}function nC(g,n){if(1&g&&(e.qex(0),e.EFF(1),e.bVm()),2&g){const t=e.XpG(3);e.R7$(),e.SpI(" ",t.emptyMessageLabel," ")}}function iC(g,n){1&g&&e.eu8(0,null,4)}function aC(g,n){if(1&g&&(e.j41(0,"div",39),e.DNE(1,nC,2,1,"ng-container",40)(2,iC,2,0,"ng-container",9),e.k0s()),2&g){const t=e.XpG(2);e.R7$(),e.Y8G("ngIf",!t.emptyMessageTemplate)("ngIfElse",t.emptyFilter),e.R7$(),e.Y8G("ngTemplateOutlet",t.emptyMessageTemplate)}}function oC(g,n){1&g&&e.eu8(0)}function lC(g,n){if(1&g){const t=e.RV6();e.j41(0,"div",7),e.bIt("drop",function(C){e.eBV(t);const A=e.XpG();return e.Njj(A.onDrop(C))})("dragover",function(C){e.eBV(t);const A=e.XpG();return e.Njj(A.onDragOver(C))})("dragenter",function(){e.eBV(t);const C=e.XpG();return e.Njj(C.onDragEnter())})("dragleave",function(C){e.eBV(t);const A=e.XpG();return e.Njj(A.onDragLeave(C))}),e.DNE(1,XI,3,2,"div",8)(2,OI,1,0,"ng-container",9)(3,KI,5,3,"div",10)(4,AC,3,2,"ng-container",11)(5,aC,3,3,"div",12)(6,oC,1,0,"ng-container",9),e.k0s()}if(2&g){let t;const I=e.XpG();e.HbH(I.styleClass),e.Y8G("ngClass",e.ziG(10,FI,I.selectionMode,I.dragHover,I.loading,"flex"===I.scrollHeight))("ngStyle",I.style),e.R7$(),e.Y8G("ngIf",I.loading&&"mask"===I.loadingMode),e.R7$(),e.Y8G("ngTemplateOutlet",I.headerTemplate),e.R7$(),e.Y8G("ngIf",I.filter),e.R7$(),e.Y8G("ngIf",null==(t=I.getRootNode())?null:t.length),e.R7$(),e.Y8G("ngIf",!I.loading&&(null==I.getRootNode()||0===I.getRootNode().length)),e.R7$(),e.Y8G("ngTemplateOutlet",I.footerTemplate)}}function rC(g,n){1&g&&e.eu8(0)}function sC(g,n){if(1&g&&e.nrm(0,"i"),2&g){const t=e.XpG(3);e.HbH("p-tree-loading-icon pi-spin "+t.loadingIcon)}}function cC(g,n){1&g&&e.nrm(0,"SpinnerIcon",17),2&g&&e.Y8G("spin",!0)("styleClass","p-tree-loading-icon")}function pC(g,n){}function _C(g,n){1&g&&e.DNE(0,pC,0,0,"ng-template")}function dC(g,n){if(1&g&&(e.j41(0,"span",18),e.DNE(1,_C,1,0,null,9),e.k0s()),2&g){const t=e.XpG(4);e.R7$(),e.Y8G("ngTemplateOutlet",t.loadingIconTemplate)}}function uC(g,n){if(1&g&&(e.qex(0),e.DNE(1,cC,1,2,"SpinnerIcon",15)(2,dC,2,1,"span",16),e.bVm()),2&g){const t=e.XpG(3);e.R7$(),e.Y8G("ngIf",!t.loadingIconTemplate),e.R7$(),e.Y8G("ngIf",t.loadingIconTemplate)}}function mC(g,n){if(1&g&&(e.j41(0,"div",43),e.DNE(1,sC,1,2,"i",14)(2,uC,3,2,"ng-container",11),e.k0s()),2&g){const t=e.XpG(2);e.R7$(),e.Y8G("ngIf",t.loadingIcon),e.R7$(),e.Y8G("ngIf",!t.loadingIcon)}}function hC(g,n){if(1&g&&(e.j41(0,"table"),e.nrm(1,"p-treeNode",44),e.k0s()),2&g){const t=e.XpG(2);e.R7$(),e.Y8G("node",t.value[0])("root",!0)}}function fC(g,n){if(1&g&&(e.qex(0),e.EFF(1),e.bVm()),2&g){const t=e.XpG(3);e.R7$(),e.SpI(" ",t.emptyMessageLabel," ")}}function bC(g,n){1&g&&e.eu8(0,null,4)}function TC(g,n){if(1&g&&(e.j41(0,"div",39),e.DNE(1,fC,2,1,"ng-container",40)(2,bC,2,0,"ng-container",9),e.k0s()),2&g){const t=e.XpG(2);e.R7$(),e.Y8G("ngIf",!t.emptyMessageTemplate)("ngIfElse",t.emptyFilter),e.R7$(),e.Y8G("ngTemplateOutlet",t.emptyMessageTemplate)}}function vC(g,n){1&g&&e.eu8(0)}function yC(g,n){if(1&g&&(e.j41(0,"div",41),e.DNE(1,rC,1,0,"ng-container",9)(2,mC,3,2,"div",42)(3,hC,2,2,"table",11)(4,TC,3,3,"div",12)(5,vC,1,0,"ng-container",9),e.k0s()),2&g){const t=e.XpG();e.HbH(t.styleClass),e.Y8G("ngClass",e.eq3(9,PI,t.selectionMode))("ngStyle",t.style),e.R7$(),e.Y8G("ngTemplateOutlet",t.headerTemplate),e.R7$(),e.Y8G("ngIf",t.loading),e.R7$(),e.Y8G("ngIf",t.value&&t.value[0]),e.R7$(),e.Y8G("ngIf",!t.loading&&(null==t.getRootNode()||0===t.getRootNode().length)),e.R7$(),e.Y8G("ngTemplateOutlet",t.footerTemplate)}}let xC=(()=>{class g{static ICON_CLASS="p-treenode-icon ";rowNode;node;parentNode;root;index;firstChild;lastChild;level;indentation;itemSize;loadingMode;tree;timeout;draghoverPrev;draghoverNext;draghoverNode;get ariaSelected(){return"single"===this.tree.selectionMode||"multiple"===this.tree.selectionMode?this.isSelected():void 0}get ariaChecked(){return"checkbox"===this.tree.selectionMode?this.isSelected():void 0}constructor(t){this.tree=t}ngOnInit(){this.node.parent=this.parentNode;const I=this.tree.el.nativeElement.closest("p-dialog");this.parentNode&&!I&&(this.setAllNodesTabIndexes(),this.tree.syncNodeOption(this.node,this.tree.value,"parent",this.tree.getNodeWithKey(this.parentNode.key,this.tree.value)))}getIcon(){let t;return t=this.node.icon?this.node.icon:this.node.expanded&&this.node.children&&this.node.children?.length?this.node.expandedIcon:this.node.collapsedIcon,g.ICON_CLASS+" "+t}isLeaf(){return this.tree.isNodeLeaf(this.node)}toggle(t){this.node.expanded?this.collapse(t):this.expand(t),t.stopPropagation()}expand(t){this.node.expanded=!0,this.tree.virtualScroll&&(this.tree.updateSerializedValue(),this.focusVirtualNode()),this.tree.onNodeExpand.emit({originalEvent:t,node:this.node})}collapse(t){this.node.expanded=!1,this.tree.virtualScroll&&(this.tree.updateSerializedValue(),this.focusVirtualNode()),this.tree.onNodeCollapse.emit({originalEvent:t,node:this.node})}onNodeClick(t){this.tree.onNodeClick(t,this.node)}onNodeKeydown(t){"Enter"===t.key&&this.tree.onNodeClick(t,this.node)}onNodeTouchEnd(){this.tree.onNodeTouchEnd()}onNodeRightClick(t){this.tree.onNodeRightClick(t,this.node)}isSelected(){return this.tree.isSelected(this.node)}isSameNode(t){return t.currentTarget&&(t.currentTarget.isSameNode(t.target)||t.currentTarget.isSameNode(t.target.closest('[role="treeitem"]')))}onDropPoint(t,I){t.preventDefault();let C=this.tree.dragNode,a=this.tree.dragNodeTree!==this.tree||1===I||this.tree.dragNodeIndex!==this.index-1;if(this.tree.allowDrop(C,this.node,this.tree.dragNodeScope,"between")&&a){let s={...this.createDropPointEventMetadata(I)};this.tree.validateDrop?this.tree.onNodeDrop.emit({originalEvent:t,dragNode:C,dropNode:this.node,dropPoint:"between",index:this.index,accept:()=>{this.processPointDrop(s)}}):(this.processPointDrop(s),this.tree.onNodeDrop.emit({originalEvent:t,dragNode:C,dropNode:this.node,dropPoint:"between",index:this.index}))}this.draghoverPrev=!1,this.draghoverNext=!1}processPointDrop(t){let I=t.dropNode.parent?t.dropNode.parent.children:this.tree.value;t.dragNodeSubNodes.splice(t.dragNodeIndex,1);let C=this.index;t.position<0?(C=t.dragNodeSubNodes===I?t.dragNodeIndex>t.index?t.index:t.index-1:t.index,I.splice(C,0,t.dragNode)):(C=I.length,I.push(t.dragNode)),this.tree.dragDropService.stopDrag({node:t.dragNode,subNodes:t.dropNode.parent?t.dropNode.parent.children:this.tree.value,index:t.dragNodeIndex})}createDropPointEventMetadata(t){return{dragNode:this.tree.dragNode,dragNodeIndex:this.tree.dragNodeIndex,dragNodeSubNodes:this.tree.dragNodeSubNodes,dropNode:this.node,index:this.index,position:t}}onDropPointDragOver(t){t.dataTransfer.dropEffect="move",t.preventDefault()}onDropPointDragEnter(t,I){this.tree.allowDrop(this.tree.dragNode,this.node,this.tree.dragNodeScope,"between")&&(I<0?this.draghoverPrev=!0:this.draghoverNext=!0)}onDropPointDragLeave(t){this.draghoverPrev=!1,this.draghoverNext=!1}onDragStart(t){this.tree.draggableNodes&&!1!==this.node.draggable?(t.dataTransfer.setData("text","data"),this.tree.dragDropService.startDrag({tree:this,node:this.node,subNodes:this.node?.parent?this.node.parent.children:this.tree.value,index:this.index,scope:this.tree.draggableScope})):t.preventDefault()}onDragStop(t){this.tree.dragDropService.stopDrag({node:this.node,subNodes:this.node?.parent?this.node.parent.children:this.tree.value,index:this.index})}onDropNodeDragOver(t){t.dataTransfer.dropEffect="move",this.tree.droppableNodes&&(t.preventDefault(),t.stopPropagation())}onDropNode(t){if(this.tree.droppableNodes&&!1!==this.node?.droppable){let I=this.tree.dragNode;if(this.tree.allowDrop(I,this.node,this.tree.dragNodeScope)){let C={...this.createDropNodeEventMetadata()};this.tree.validateDrop?this.tree.onNodeDrop.emit({originalEvent:t,dragNode:I,dropNode:this.node,dropPoint:"node",index:this.index,accept:()=>{this.processNodeDrop(C)}}):(this.processNodeDrop(C),this.tree.onNodeDrop.emit({originalEvent:t,dragNode:I,dropNode:this.node,dropPoint:"node",index:this.index}))}}t.preventDefault(),t.stopPropagation(),this.draghoverNode=!1}createDropNodeEventMetadata(){return{dragNode:this.tree.dragNode,dragNodeIndex:this.tree.dragNodeIndex,dragNodeSubNodes:this.tree.dragNodeSubNodes,dropNode:this.node}}processNodeDrop(t){let I=t.dragNodeIndex;t.dragNodeSubNodes.splice(I,1),t.dropNode.children?t.dropNode.children.push(t.dragNode):t.dropNode.children=[t.dragNode],this.tree.dragDropService.stopDrag({node:t.dragNode,subNodes:t.dropNode.parent?t.dropNode.parent.children:this.tree.value,index:I})}onDropNodeDragEnter(t){this.tree.droppableNodes&&!1!==this.node?.droppable&&this.tree.allowDrop(this.tree.dragNode,this.node,this.tree.dragNodeScope)&&(this.draghoverNode=!0)}onDropNodeDragLeave(t){if(this.tree.droppableNodes){let I=t.currentTarget.getBoundingClientRect();(t.x>I.left+I.width||t.x<I.left||t.y>=Math.floor(I.top+I.height)||t.y<I.top)&&(this.draghoverNode=!1)}}onKeyDown(t){if(this.isSameNode(t)&&(!this.tree.contextMenu||"block"!==this.tree.contextMenu.containerViewChild?.nativeElement.style.display))switch(t.code){case"ArrowDown":this.onArrowDown(t);break;case"ArrowUp":this.onArrowUp(t);break;case"ArrowRight":this.onArrowRight(t);break;case"ArrowLeft":this.onArrowLeft(t);break;case"Enter":case"NumpadEnter":this.onEnter(t);break;case"Space":const I=t.target instanceof HTMLElement&&t.target.nodeName;["INPUT"].includes(I)||this.onEnter(t);break;case"Tab":this.setAllNodesTabIndexes()}}onArrowUp(t){const I="toggler"===t.target.getAttribute("data-pc-section")?t.target.closest('[role="treeitem"]'):t.target.parentElement;if(I.previousElementSibling)this.focusRowChange(I,I.previousElementSibling,this.findLastVisibleDescendant(I.previousElementSibling));else{let C=this.getParentNodeElement(I);C&&this.focusRowChange(I,C)}t.preventDefault()}onArrowDown(t){const I="toggler"===t.target.getAttribute("data-pc-section")?t.target.closest('[role="treeitem"]'):t.target,C=I.children[1];if(C&&C.children.length>0)this.focusRowChange(I,C.children[0]);else if(I.parentElement.nextElementSibling)this.focusRowChange(I,I.parentElement.nextElementSibling);else{let A=this.findNextSiblingOfAncestor(I.parentElement);A&&this.focusRowChange(I,A)}t.preventDefault()}onArrowRight(t){!this.node?.expanded&&!this.tree.isNodeLeaf(this.node)&&(this.expand(t),t.currentTarget.tabIndex=-1,setTimeout(()=>{this.onArrowDown(t)},1)),t.preventDefault()}onArrowLeft(t){const I="toggler"===t.target.getAttribute("data-pc-section")?t.target.closest('[role="treeitem"]'):t.target;if(0===this.level&&!this.node?.expanded)return!1;if(this.node?.expanded)return void this.collapse(t);let C=this.getParentNodeElement(I.parentElement);C&&this.focusRowChange(t.currentTarget,C),t.preventDefault()}isActionableElement(t){const I=t.target;return I instanceof HTMLElement&&("A"==I.nodeName||"BUTTON"==I.nodeName)}onEnter(t){this.tree.onNodeClick(t,this.node),this.setTabIndexForSelectionMode(t,this.tree.nodeTouched),this.isActionableElement(t)||t.preventDefault()}setAllNodesTabIndexes(){const t=r.D.find(this.tree.el.nativeElement,".p-treenode"),I=[...t].some(C=>"true"===C.getAttribute("aria-selected")||"true"===C.getAttribute("aria-checked"));[...t].forEach(C=>{C.tabIndex=-1}),I?[...t].filter(A=>"true"===A.getAttribute("aria-selected")||"true"===A.getAttribute("aria-checked"))[0].tabIndex=0:[...t][0].tabIndex=0}setTabIndexForSelectionMode(t,I){if(null!==this.tree.selectionMode){const C=[...r.D.find(this.tree.el.nativeElement,".p-treenode")];t.currentTarget.tabIndex=!1===I?-1:0,C.every(A=>-1===A.tabIndex)&&(C[0].tabIndex=0)}}findNextSiblingOfAncestor(t){let I=this.getParentNodeElement(t);return I?I.nextElementSibling?I.nextElementSibling:this.findNextSiblingOfAncestor(I):null}findLastVisibleDescendant(t){const C=Array.from(t.children).find(A=>r.D.hasClass(A,"p-treenode")).children[1];return C&&C.children.length>0?this.findLastVisibleDescendant(C.children[C.children.length-1]):t}getParentNodeElement(t){const I=t.parentElement?.parentElement?.parentElement;return"P-TREENODE"===I?.tagName?I:null}focusNode(t){this.tree.droppableNodes?t.children[1].focus():t.children[0].focus()}focusRowChange(t,I,C){t.tabIndex="-1",I.children[0].tabIndex="0",this.focusNode(C||I)}focusVirtualNode(){this.timeout=setTimeout(()=>{let t=r.D.findSingle(document.body,`[data-id="${this.node?.key??this.node?.data}"]`);r.D.focus(t)},1)}static \u0275fac=function(I){return new(I||g)(e.rXU((0,e.Rfq)(()=>K)))};static \u0275cmp=e.VBU({type:g,selectors:[["p-treeNode"]],hostAttrs:[1,"p-element"],inputs:{rowNode:"rowNode",node:"node",parentNode:"parentNode",root:[2,"root","root",e.L39],index:[2,"index","index",e.Udg],firstChild:[2,"firstChild","firstChild",e.L39],lastChild:[2,"lastChild","lastChild",e.L39],level:[2,"level","level",e.Udg],indentation:[2,"indentation","indentation",e.Udg],itemSize:[2,"itemSize","itemSize",e.Udg],loadingMode:"loadingMode"},features:[e.GFd],decls:1,vars:1,consts:[[3,"ngIf"],["class","p-treenode-droppoint",3,"ngClass","drop","dragover","dragenter","dragleave",4,"ngIf"],["role","treeitem",3,"ngClass","ngStyle","style","keydown",4,"ngIf"],[3,"class",4,"ngIf"],[1,"p-treenode-droppoint",3,"drop","dragover","dragenter","dragleave","ngClass"],["role","treeitem",3,"keydown","ngClass","ngStyle"],[1,"p-treenode-content",3,"click","contextmenu","touchend","drop","dragover","dragenter","dragleave","dragstart","dragend","ngStyle","draggable","ngClass"],["type","button","pRipple","","tabindex","-1",1,"p-tree-toggler","p-link",3,"click"],[4,"ngIf"],["class","p-tree-toggler-icon",4,"ngIf"],["class","p-checkbox p-component","aria-hidden","true",3,"ngClass",4,"ngIf"],[1,"p-treenode-label"],["class","p-treenode-children","role","group",3,"ngStyle",4,"ngIf"],[3,"styleClass",4,"ngIf"],[3,"styleClass"],[3,"spin","styleClass"],[1,"p-tree-toggler-icon"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["aria-hidden","true",1,"p-checkbox","p-component",3,"ngClass"],["role","checkbox",1,"p-checkbox-box",3,"ngClass"],["role","group",1,"p-treenode-children",3,"ngStyle"],[3,"node","parentNode","firstChild","lastChild","index","itemSize","level","loadingMode",4,"ngFor","ngForOf","ngForTrackBy"],[3,"node","parentNode","firstChild","lastChild","index","itemSize","level","loadingMode"],["class","p-treenode-connector",4,"ngIf"],[1,"p-treenode",3,"ngClass"],["tabindex","0",1,"p-treenode-content",3,"click","contextmenu","touchend","keydown","ngClass"],[3,"ngClass","click",4,"ngIf"],["class","p-treenode-children-container",3,"ngStyle",4,"ngIf"],[1,"p-treenode-connector"],[1,"p-treenode-connector-table"],[3,"ngClass"],[3,"click","ngClass"],[3,"styleClass","ariaLabel",4,"ngIf"],[3,"styleClass","ariaLabel"],[1,"p-treenode-children-container",3,"ngStyle"],[1,"p-treenode-children"],[3,"node","firstChild","lastChild",4,"ngFor","ngForOf","ngForTrackBy"],[3,"node","firstChild","lastChild"]],template:function(I,C){1&I&&e.DNE(0,NI,4,4,"ng-template",0),2&I&&e.Y8G("ngIf",C.node)},dependencies:()=>[l.YU,l.Sq,l.bT,l.T3,l.B3,k.n,re.S,R.D,j.v,se.Q,z.N,ce.c,g],encapsulation:2})}return g})(),K=(()=>{class g{el;dragDropService;config;cd;value;selectionMode;loadingMode="mask";selection;style;styleClass;contextMenu;layout="vertical";draggableScope;droppableScope;draggableNodes;droppableNodes;metaKeySelection=!1;propagateSelectionUp=!0;propagateSelectionDown=!0;loading;loadingIcon;emptyMessage="";ariaLabel;togglerAriaLabel;ariaLabelledBy;validateDrop;filter;filterBy="label";filterMode="lenient";filterPlaceholder;filteredNodes;filterLocale;scrollHeight;lazy=!1;virtualScroll;virtualScrollItemSize;virtualScrollOptions;indentation=1.5;_templateMap;trackBy=(t,I)=>I;_virtualNodeHeight;get virtualNodeHeight(){return this._virtualNodeHeight}set virtualNodeHeight(t){this._virtualNodeHeight=t,console.warn("The virtualNodeHeight property is deprecated, use virtualScrollItemSize property instead.")}selectionChange=new e.bkB;onNodeSelect=new e.bkB;onNodeUnselect=new e.bkB;onNodeExpand=new e.bkB;onNodeCollapse=new e.bkB;onNodeContextMenuSelect=new e.bkB;onNodeDrop=new e.bkB;onLazyLoad=new e.bkB;onScroll=new e.bkB;onScrollIndexChange=new e.bkB;onFilter=new e.bkB;templates;filterViewChild;scroller;wrapperViewChild;serializedValue;headerTemplate;footerTemplate;loaderTemplate;emptyMessageTemplate;togglerIconTemplate;checkboxIconTemplate;loadingIconTemplate;filterIconTemplate;nodeTouched;dragNodeTree;dragNode;dragNodeSubNodes;dragNodeIndex;dragNodeScope;dragHover;dragStartSubscription;dragStopSubscription;constructor(t,I,C,A){this.el=t,this.dragDropService=I,this.config=C,this.cd=A}ngOnInit(){this.droppableNodes&&(this.dragStartSubscription=this.dragDropService.dragStart$.subscribe(t=>{this.dragNodeTree=t.tree,this.dragNode=t.node,this.dragNodeSubNodes=t.subNodes,this.dragNodeIndex=t.index,this.dragNodeScope=t.scope}),this.dragStopSubscription=this.dragDropService.dragStop$.subscribe(t=>{this.dragNodeTree=null,this.dragNode=null,this.dragNodeSubNodes=null,this.dragNodeIndex=null,this.dragNodeScope=null,this.dragHover=!1}))}ngOnChanges(t){t.value&&(this.updateSerializedValue(),this.hasFilterActive()&&this._filter(this.filterViewChild.nativeElement.value))}get horizontal(){return"horizontal"==this.layout}get emptyMessageLabel(){return this.emptyMessage||this.config.getTranslation(p.Yj.EMPTY_MESSAGE)}ngAfterContentInit(){this.templates.length&&(this._templateMap={}),this.templates.forEach(t=>{switch(t.getType()){case"header":this.headerTemplate=t.template;break;case"empty":this.emptyMessageTemplate=t.template;break;case"footer":this.footerTemplate=t.template;break;case"loader":this.loaderTemplate=t.template;break;case"togglericon":this.togglerIconTemplate=t.template;break;case"checkboxicon":this.checkboxIconTemplate=t.template;break;case"loadingicon":this.loadingIconTemplate=t.template;break;case"filtericon":this.filterIconTemplate=t.template;break;default:this._templateMap[t.name]=t.template}})}updateSerializedValue(){this.serializedValue=[],this.serializeNodes(null,this.getRootNode(),0,!0)}serializeNodes(t,I,C,A){I&&I.length&&I.forEach((i,a)=>{i.parent=t;const s={node:i,parent:t,level:C,visible:A&&(!t||t.expanded),lastChild:a===I.length-1,index:a};this.serializedValue.push(s),s.visible&&i.expanded&&this.serializeNodes(i,i.children,C+1,s.visible)})}onNodeClick(t,I){let C=t.target;if(!r.D.hasClass(C,"p-tree-toggler")&&!r.D.hasClass(C,"p-tree-toggler-icon")){if(this.selectionMode){if(!1===I.selectable)return void(I.style="--p-focus-ring-color: none;");if(I.style="--p-focus-ring-color: var(--primary-color)",this.hasFilteredNodes()&&!(I=this.getNodeWithKey(I.key,this.filteredNodes)))return;let A=this.findIndexInSelection(I),i=A>=0;if(this.isCheckboxSelectionMode())i?(this.propagateSelectionDown?this.propagateDown(I,!1):this.selection=this.selection.filter((a,s)=>s!=A),this.propagateSelectionUp&&I.parent&&this.propagateUp(I.parent,!1),this.selectionChange.emit(this.selection),this.onNodeUnselect.emit({originalEvent:t,node:I})):(this.propagateSelectionDown?this.propagateDown(I,!0):this.selection=[...this.selection||[],I],this.propagateSelectionUp&&I.parent&&this.propagateUp(I.parent,!0),this.selectionChange.emit(this.selection),this.onNodeSelect.emit({originalEvent:t,node:I}));else if(!this.nodeTouched&&this.metaKeySelection){let s=t.metaKey||t.ctrlKey;i&&s?(this.isSingleSelectionMode()?this.selectionChange.emit(null):(this.selection=this.selection.filter((m,c)=>c!=A),this.selectionChange.emit(this.selection)),this.onNodeUnselect.emit({originalEvent:t,node:I})):(this.isSingleSelectionMode()?this.selectionChange.emit(I):this.isMultipleSelectionMode()&&(this.selection=s&&this.selection||[],this.selection=[...this.selection,I],this.selectionChange.emit(this.selection)),this.onNodeSelect.emit({originalEvent:t,node:I}))}else this.isSingleSelectionMode()?i?(this.selection=null,this.onNodeUnselect.emit({originalEvent:t,node:I})):(this.selection=I,setTimeout(()=>{this.onNodeSelect.emit({originalEvent:t,node:I})})):i?(this.selection=this.selection.filter((s,m)=>m!=A),this.onNodeUnselect.emit({originalEvent:t,node:I})):(this.selection=[...this.selection||[],I],setTimeout(()=>{this.onNodeSelect.emit({originalEvent:t,node:I})})),this.selectionChange.emit(this.selection)}this.nodeTouched=!1}}onNodeTouchEnd(){this.nodeTouched=!0}onNodeRightClick(t,I){if(this.contextMenu){let A=t.target.getAttribute("class");if(A&&A.includes("p-tree-toggler"))return;this.findIndexInSelection(I)>=0||(this.isSingleSelectionMode()?this.selectionChange.emit(I):this.selectionChange.emit([I])),this.contextMenu.show(t),this.onNodeContextMenuSelect.emit({originalEvent:t,node:I})}}findIndexInSelection(t){return this.selectionMode&&this.selection?(this.isSingleSelectionMode()?[this.selection]:this.selection).findIndex(C=>C===t||C.key===t.key&&void 0!==C.key):-1}syncNodeOption(t,I,C,A){const i=this.hasFilteredNodes()?this.getNodeWithKey(t.key,I):null;i&&(i[C]=A||t[C])}hasFilteredNodes(){return this.filter&&this.filteredNodes&&this.filteredNodes.length}hasFilterActive(){return this.filter&&this.filterViewChild?.nativeElement?.value.length>0}getNodeWithKey(t,I){for(let C of I){if(C.key===t)return C;if(C.children){let A=this.getNodeWithKey(t,C.children);if(A)return A}}}propagateUp(t,I){if(t.children&&t.children.length){let A=0,i=!1;for(let a of t.children)this.isSelected(a)?A++:a.partialSelected&&(i=!0);if(I&&A==t.children.length)this.selection=[...this.selection||[],t],t.partialSelected=!1;else{if(!I){let a=this.findIndexInSelection(t);a>=0&&(this.selection=this.selection.filter((s,m)=>m!=a))}t.partialSelected=!!(i||A>0&&A!=t.children.length)}this.syncNodeOption(t,this.filteredNodes,"partialSelected")}let C=t.parent;C&&this.propagateUp(C,I)}propagateDown(t,I){let C=this.findIndexInSelection(t);if(I&&-1==C&&!1!==t.selectable?this.selection=[...this.selection||[],this.filterUnselectableChildren(t)]:!I&&C>-1&&(this.selection=this.selection.filter((A,i)=>i!=C)),t.partialSelected=!1,this.syncNodeOption(t,this.filteredNodes,"partialSelected"),t.children&&t.children.length)for(let A of t.children)this.propagateDown(A,I)}filterUnselectableChildren(t){let I=Object.assign({},t);if(I.children&&I.children.length)for(let C of I.children)!1===C.selectable&&(I.children=I.children.filter(A=>A!=C)),C=this.filterUnselectableChildren(C);return I}isSelected(t){return-1!=this.findIndexInSelection(t)}isSingleSelectionMode(){return this.selectionMode&&"single"==this.selectionMode}isMultipleSelectionMode(){return this.selectionMode&&"multiple"==this.selectionMode}isCheckboxSelectionMode(){return this.selectionMode&&"checkbox"==this.selectionMode}isNodeLeaf(t){return 0!=t.leaf&&!(t.children&&t.children.length)}getRootNode(){return this.filteredNodes?this.filteredNodes:this.value}getTemplateForNode(t){return this._templateMap?t.type?this._templateMap[t.type]:this._templateMap.default:null}onDragOver(t){this.droppableNodes&&(!this.value||0===this.value.length)&&(t.dataTransfer.dropEffect="move",t.preventDefault())}onDrop(t){if(this.droppableNodes&&(!this.value||0===this.value.length)){t.preventDefault();let I=this.dragNode;if(this.allowDrop(I,null,this.dragNodeScope)){let C=this.dragNodeIndex;this.value=this.value||[],this.validateDrop?this.onNodeDrop.emit({originalEvent:t,dragNode:I,dropNode:null,index:C,accept:()=>{this.processTreeDrop(I,C)}}):(this.onNodeDrop.emit({originalEvent:t,dragNode:I,dropNode:null,index:C}),this.processTreeDrop(I,C))}}}processTreeDrop(t,I){this.dragNodeSubNodes.splice(I,1),this.value.push(t),this.dragDropService.stopDrag({node:t})}onDragEnter(){this.droppableNodes&&this.allowDrop(this.dragNode,null,this.dragNodeScope)&&(this.dragHover=!0)}onDragLeave(t){if(this.droppableNodes){let I=t.currentTarget.getBoundingClientRect();(t.x>I.left+I.width||t.x<I.left||t.y>I.top+I.height||t.y<I.top)&&(this.dragHover=!1)}}allowDrop(t,I,C,A="node"){if(t){if(this.isValidDragScope(C)){let i=!0;if(I)if(t===I)i=!1;else{let a=I.parent;for(;null!=a;){if(a===t){i=!1;break}a=a.parent}}return i}return!1}return!1}isValidDragScope(t){let I=this.droppableScope;if(I){if("string"==typeof I){if("string"==typeof t)return I===t;if(Array.isArray(t))return-1!=t.indexOf(I)}else if(Array.isArray(I)){if("string"==typeof t)return-1!=I.indexOf(t);if(Array.isArray(t))for(let C of I)for(let A of t)if(C===A)return!0}return!1}return!0}_filter(t){let I=t;if(""===I)this.filteredNodes=null;else{this.filteredNodes=[];const C=this.filterBy.split(","),A=y.BF.removeAccents(I).toLocaleLowerCase(this.filterLocale),i="strict"===this.filterMode;for(let a of this.value){let s={...a},m={searchFields:C,filterText:A,isStrictMode:i};(i&&(this.findFilteredNodes(s,m)||this.isFilterMatched(s,m))||!i&&(this.isFilterMatched(s,m)||this.findFilteredNodes(s,m)))&&this.filteredNodes.push(s)}}this.updateSerializedValue(),this.onFilter.emit({filter:I,filteredValue:this.filteredNodes})}resetFilter(){this.filteredNodes=null,this.filterViewChild&&this.filterViewChild.nativeElement&&(this.filterViewChild.nativeElement.value="")}scrollToVirtualIndex(t){this.virtualScroll&&this.scroller?.scrollToIndex(t)}scrollTo(t){this.virtualScroll?this.scroller?.scrollTo(t):this.wrapperViewChild&&this.wrapperViewChild.nativeElement&&(this.wrapperViewChild.nativeElement.scrollTo?this.wrapperViewChild.nativeElement.scrollTo(t):(this.wrapperViewChild.nativeElement.scrollLeft=t.left,this.wrapperViewChild.nativeElement.scrollTop=t.top))}findFilteredNodes(t,I){if(t){let C=!1;if(t.children){let A=[...t.children];t.children=[];for(let i of A){let a={...i};this.isFilterMatched(a,I)&&(C=!0,t.children.push(a))}}if(C)return t.expanded=!0,!0}}isFilterMatched(t,I){let{searchFields:C,filterText:A,isStrictMode:i}=I,a=!1;for(let s of C)y.BF.removeAccents(String(y.BF.resolveFieldData(t,s))).toLocaleLowerCase(this.filterLocale).indexOf(A)>-1&&(a=!0);return(!a||i&&!this.isNodeLeaf(t))&&(a=this.findFilteredNodes(t,{searchFields:C,filterText:A,isStrictMode:i})||a),a}getIndex(t,I){const C=t.getItemOptions;return C?C(I).index:I}getBlockableElement(){return this.el.nativeElement.children[0]}ngOnDestroy(){this.dragStartSubscription&&this.dragStartSubscription.unsubscribe(),this.dragStopSubscription&&this.dragStopSubscription.unsubscribe()}static \u0275fac=function(I){return new(I||g)(e.rXU(e.aKT),e.rXU(p.$9,8),e.rXU(p.r1),e.rXU(e.gRc))};static \u0275cmp=e.VBU({type:g,selectors:[["p-tree"]],contentQueries:function(I,C,A){if(1&I&&e.wni(A,p.Ei,4),2&I){let i;e.mGM(i=e.lsd())&&(C.templates=i)}},viewQuery:function(I,C){if(1&I&&(e.GBs(kI,5),e.GBs(DI,5),e.GBs(GI,5)),2&I){let A;e.mGM(A=e.lsd())&&(C.filterViewChild=A.first),e.mGM(A=e.lsd())&&(C.scroller=A.first),e.mGM(A=e.lsd())&&(C.wrapperViewChild=A.first)}},hostAttrs:[1,"p-element"],inputs:{value:"value",selectionMode:"selectionMode",loadingMode:"loadingMode",selection:"selection",style:"style",styleClass:"styleClass",contextMenu:"contextMenu",layout:"layout",draggableScope:"draggableScope",droppableScope:"droppableScope",draggableNodes:[2,"draggableNodes","draggableNodes",e.L39],droppableNodes:[2,"droppableNodes","droppableNodes",e.L39],metaKeySelection:[2,"metaKeySelection","metaKeySelection",e.L39],propagateSelectionUp:[2,"propagateSelectionUp","propagateSelectionUp",e.L39],propagateSelectionDown:[2,"propagateSelectionDown","propagateSelectionDown",e.L39],loading:[2,"loading","loading",e.L39],loadingIcon:"loadingIcon",emptyMessage:"emptyMessage",ariaLabel:"ariaLabel",togglerAriaLabel:"togglerAriaLabel",ariaLabelledBy:"ariaLabelledBy",validateDrop:[2,"validateDrop","validateDrop",e.L39],filter:[2,"filter","filter",e.L39],filterBy:"filterBy",filterMode:"filterMode",filterPlaceholder:"filterPlaceholder",filteredNodes:"filteredNodes",filterLocale:"filterLocale",scrollHeight:"scrollHeight",lazy:[2,"lazy","lazy",e.L39],virtualScroll:[2,"virtualScroll","virtualScroll",e.L39],virtualScrollItemSize:[2,"virtualScrollItemSize","virtualScrollItemSize",e.Udg],virtualScrollOptions:"virtualScrollOptions",indentation:[2,"indentation","indentation",e.Udg],_templateMap:"_templateMap",trackBy:"trackBy",virtualNodeHeight:"virtualNodeHeight"},outputs:{selectionChange:"selectionChange",onNodeSelect:"onNodeSelect",onNodeUnselect:"onNodeUnselect",onNodeExpand:"onNodeExpand",onNodeCollapse:"onNodeCollapse",onNodeContextMenuSelect:"onNodeContextMenuSelect",onNodeDrop:"onNodeDrop",onLazyLoad:"onLazyLoad",onScroll:"onScroll",onScrollIndexChange:"onScrollIndexChange",onFilter:"onFilter"},features:[e.GFd,e.OA$],decls:2,vars:2,consts:[["filter",""],["scroller",""],["treeNode",""],["wrapper",""],["emptyFilter",""],[3,"ngClass","ngStyle","class","drop","dragover","dragenter","dragleave",4,"ngIf"],[3,"ngClass","ngStyle","class",4,"ngIf"],[3,"drop","dragover","dragenter","dragleave","ngClass","ngStyle"],["class","p-tree-loading-overlay p-component-overlay",4,"ngIf"],[4,"ngTemplateOutlet"],["class","p-tree-filter-container",4,"ngIf"],[4,"ngIf"],["class","p-tree-empty-message",4,"ngIf"],[1,"p-tree-loading-overlay","p-component-overlay"],[3,"class",4,"ngIf"],[3,"spin","styleClass",4,"ngIf"],["class","p-tree-loading-icon",4,"ngIf"],[3,"spin","styleClass"],[1,"p-tree-loading-icon"],[1,"p-tree-filter-container"],["type","search","autocomplete","off",1,"p-tree-filter","p-inputtext","p-component",3,"keydown.enter","input"],[3,"styleClass",4,"ngIf"],["class","p-tree-filter-icon",4,"ngIf"],[3,"styleClass"],[1,"p-tree-filter-icon"],["styleClass","p-tree-wrapper",3,"items","tabindex","style","scrollHeight","itemSize","lazy","options","onScroll","onScrollIndexChange","onLazyLoad",4,"ngIf"],["styleClass","p-tree-wrapper",3,"onScroll","onScrollIndexChange","onLazyLoad","items","tabindex","scrollHeight","itemSize","lazy","options"],["pTemplate","content"],["class","p-tree-container","role","tree",3,"ngClass","style",4,"ngIf"],["role","tree",1,"p-tree-container",3,"ngClass"],[3,"level","rowNode","node","parentNode","firstChild","lastChild","index","itemSize","indentation","loadingMode",4,"ngFor","ngForOf","ngForTrackBy"],[3,"level","rowNode","node","parentNode","firstChild","lastChild","index","itemSize","indentation","loadingMode"],["pTemplate","loader"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"p-tree-wrapper",3,"ngStyle"],["class","p-tree-container","role","tree",4,"ngIf"],["role","tree",1,"p-tree-container"],[3,"node","firstChild","lastChild","index","level","loadingMode",4,"ngFor","ngForOf","ngForTrackBy"],[3,"node","firstChild","lastChild","index","level","loadingMode"],[1,"p-tree-empty-message"],[4,"ngIf","ngIfElse"],[3,"ngClass","ngStyle"],["class","p-tree-loading-mask p-component-overlay",4,"ngIf"],[1,"p-tree-loading-mask","p-component-overlay"],[3,"node","root"]],template:function(I,C){1&I&&e.DNE(0,lC,7,15,"div",5)(1,yC,6,11,"div",6),2&I&&(e.Y8G("ngIf",!C.horizontal),e.R7$(),e.Y8G("ngIf",C.horizontal))},dependencies:()=>[l.YU,l.Sq,l.bT,l.T3,l.B3,p.Ei,H.H,M.W,z.N,xC],styles:["@layer primeng{.p-tree-container{margin:0;padding:0;list-style-type:none;overflow:auto}.p-treenode-children{margin:0;padding:0;list-style-type:none}.p-tree-wrapper{overflow:auto}.p-treenode-selectable{cursor:pointer;-webkit-user-select:none;user-select:none}.p-tree-toggler{cursor:pointer;-webkit-user-select:none;user-select:none;display:inline-flex;align-items:center;justify-content:center;overflow:hidden;position:relative;flex-shrink:0}.p-treenode-leaf>.p-treenode-content .p-tree-toggler{visibility:hidden}.p-treenode-content{display:flex;align-items:center}.p-tree-filter{width:100%}.p-tree-filter-container{position:relative;display:block;width:100%}.p-tree-filter-icon{position:absolute;top:50%;margin-top:-.5rem}.p-tree-loading{position:relative;min-height:4rem}.p-tree .p-tree-loading-overlay{position:absolute;display:flex;align-items:center;justify-content:center;z-index:2}.p-tree-flex-scrollable{display:flex;flex:1;height:100%;flex-direction:column}.p-tree-flex-scrollable .p-tree-wrapper{flex:1}.p-tree .p-treenode-droppoint{height:4px;list-style-type:none}.p-tree .p-treenode-droppoint-active{border:0 none}.p-tree-horizontal{width:auto;padding-left:0;padding-right:0;overflow:auto}.p-tree.p-tree-horizontal table,.p-tree.p-tree-horizontal tr,.p-tree.p-tree-horizontal td{border-collapse:collapse;margin:0;padding:0;vertical-align:middle}.p-tree-horizontal .p-treenode-content{font-weight:400;padding:.4em 1em .4em .2em;display:flex;align-items:center}.p-tree-horizontal .p-treenode-parent .p-treenode-content{font-weight:400;white-space:nowrap}.p-tree.p-tree-horizontal .p-treenode{background:url(data:image/gif;base64,R0lGODlhAQABAIAAALGxsf///yH/C1hNUCBEYXRhWE1QPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNC4xLWMwMzQgNDYuMjcyOTc2LCBTYXQgSmFuIDI3IDIwMDcgMjI6Mzc6MzcgICAgICAgICI+CiAgIDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+CiAgICAgIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICAgICAgICAgIHhtbG5zOnhhcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyI+CiAgICAgICAgIDx4YXA6Q3JlYXRvclRvb2w+QWRvYmUgRmlyZXdvcmtzIENTMzwveGFwOkNyZWF0b3JUb29sPgogICAgICAgICA8eGFwOkNyZWF0ZURhdGU+MjAxMC0wMy0xMVQxMDoxNjo0MVo8L3hhcDpDcmVhdGVEYXRlPgogICAgICAgICA8eGFwOk1vZGlmeURhdGU+MjAxMC0wMy0xMVQxMjo0NDoxOVo8L3hhcDpNb2RpZnlEYXRlPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIj4KICAgICAgICAgPGRjOmZvcm1hdD5pbWFnZS9naWY8L2RjOmZvcm1hdD4KICAgICAgPC9yZGY6RGVzY3JpcHRpb24+CiAgIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgCjw/eHBhY2tldCBlbmQ9InciPz4B//79/Pv6+fj39vX08/Lx8O/u7ezr6uno5+bl5OPi4eDf3t3c29rZ2NfW1dTT0tHQz87NzMvKycjHxsXEw8LBwL++vby7urm4t7a1tLOysbCvrq2sq6qpqKempaSjoqGgn56dnJuamZiXlpWUk5KRkI+OjYyLiomIh4aFhIOCgYB/fn18e3p5eHd2dXRzcnFwb25tbGtqaWhnZmVkY2JhYF9eXVxbWllYV1ZVVFNSUVBPTk1MS0pJSEdGRURDQkFAPz49PAA6OTg3NjU0MzIxMC8uLSwrKikoJyYlJCMiISAfHh0cGxoZGBcWFRQTEhEQDw4NDAsKCQgHBgUEAwIBAAAh+QQABwD/ACwAAAAAAQABAAACAkQBADs=) repeat-x scroll center center transparent;padding:.25rem 2.5rem}.p-tree.p-tree-horizontal .p-treenode.p-treenode-leaf,.p-tree.p-tree-horizontal .p-treenode.p-treenode-collapsed{padding-right:0}.p-tree.p-tree-horizontal .p-treenode-children{padding:0;margin:0}.p-tree.p-tree-horizontal .p-treenode-connector{width:1px}.p-tree.p-tree-horizontal .p-treenode-connector-table{height:100%;width:1px}.p-tree.p-tree-horizontal .p-treenode-connector-line{background:url(data:image/gif;base64,R0lGODlhAQABAIAAALGxsf///yH/C1hNUCBEYXRhWE1QPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNC4xLWMwMzQgNDYuMjcyOTc2LCBTYXQgSmFuIDI3IDIwMDcgMjI6Mzc6MzcgICAgICAgICI+CiAgIDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+CiAgICAgIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICAgICAgICAgIHhtbG5zOnhhcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyI+CiAgICAgICAgIDx4YXA6Q3JlYXRvclRvb2w+QWRvYmUgRmlyZXdvcmtzIENTMzwveGFwOkNyZWF0b3JUb29sPgogICAgICAgICA8eGFwOkNyZWF0ZURhdGU+MjAxMC0wMy0xMVQxMDoxNjo0MVo8L3hhcDpDcmVhdGVEYXRlPgogICAgICAgICA8eGFwOk1vZGlmeURhdGU+MjAxMC0wMy0xMVQxMjo0NDoxOVo8L3hhcDpNb2RpZnlEYXRlPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIj4KICAgICAgICAgPGRjOmZvcm1hdD5pbWFnZS9naWY8L2RjOmZvcm1hdD4KICAgICAgPC9yZGY6RGVzY3JpcHRpb24+CiAgIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgCjw/eHBhY2tldCBlbmQ9InciPz4B//79/Pv6+fj39vX08/Lx8O/u7ezr6uno5+bl5OPi4eDf3t3c29rZ2NfW1dTT0tHQz87NzMvKycjHxsXEw8LBwL++vby7urm4t7a1tLOysbCvrq2sq6qpqKempaSjoqGgn56dnJuamZiXlpWUk5KRkI+OjYyLiomIh4aFhIOCgYB/fn18e3p5eHd2dXRzcnFwb25tbGtqaWhnZmVkY2JhYF9eXVxbWllYV1ZVVFNSUVBPTk1MS0pJSEdGRURDQkFAPz49PAA6OTg3NjU0MzIxMC8uLSwrKikoJyYlJCMiISAfHh0cGxoZGBcWFRQTEhEQDw4NDAsKCQgHBgUEAwIBAAAh+QQABwD/ACwAAAAAAQABAAACAkQBADs=) repeat-y scroll 0 0 transparent;width:1px}.p-tree.p-tree-horizontal table{height:0}.p-scroller .p-tree-container{overflow:visible}}\n"],encapsulation:2})}return g})(),Q=(()=>{class g{static \u0275fac=function(I){return new(I||g)};static \u0275mod=e.$C({type:g});static \u0275inj=e.G2t({imports:[l.MD,p.Gg,k.Z,H.h,re.S,R.D,j.v,se.Q,M.W,z.N,ce.c,p.Gg,H.h]})}return g})();var me=o(5430),W=o(9335),he=o(1880);const SC=["container"],EC=["focusInput"],NC=["filter"],kC=["tree"],DC=["panel"],GC=["overlay"],FC=["firstHiddenFocusableEl"],wC=["lastHiddenFocusableEl"],jC=(g,n)=>({$implicit:g,placeholder:n}),fe=(g,n)=>({$implicit:g,options:n}),PC=g=>({"max-height":g}),RC=g=>({$implicit:g}),MC=(g,n)=>({$implicit:g,partialSelected:n});function BC(g,n){1&g&&e.eu8(0)}function VC(g,n){if(1&g&&(e.qex(0),e.DNE(1,BC,1,0,"ng-container",22),e.bVm()),2&g){const t=e.XpG();e.R7$(),e.Y8G("ngTemplateOutlet",t.valueTemplate)("ngTemplateOutletContext",e.l_i(2,jC,t.value,t.placeholder))}}function $C(g,n){if(1&g&&(e.qex(0),e.EFF(1),e.bVm()),2&g){const t=e.XpG(2);e.R7$(),e.SpI(" ",t.label||"empty"," ")}}function YC(g,n){if(1&g&&(e.j41(0,"div",24)(1,"span",25),e.EFF(2),e.k0s()()),2&g){const t=n.$implicit;e.R7$(2),e.JRh(t.label)}}function XC(g,n){if(1&g&&(e.qex(0),e.EFF(1),e.bVm()),2&g){const t=e.XpG(3);e.R7$(),e.JRh(t.placeholder||"empty")}}function OC(g,n){if(1&g&&e.DNE(0,YC,3,1,"div",23)(1,XC,2,1,"ng-container",16),2&g){const t=e.XpG(2);e.Y8G("ngForOf",t.value),e.R7$(),e.Y8G("ngIf",t.emptyValue)}}function LC(g,n){if(1&g&&e.DNE(0,$C,2,1,"ng-container",15)(1,OC,2,2,"ng-template",null,4,e.C5r),2&g){const t=e.sdS(2),I=e.XpG();e.Y8G("ngIf","comma"===I.display)("ngIfElse",t)}}function UC(g,n){if(1&g){const t=e.RV6();e.j41(0,"TimesIcon",28),e.bIt("click",function(C){e.eBV(t);const A=e.XpG(2);return e.Njj(A.clear(C))}),e.k0s()}2&g&&e.Y8G("styleClass","p-treeselect-clear-icon")}function HC(g,n){}function zC(g,n){1&g&&e.DNE(0,HC,0,0,"ng-template")}function KC(g,n){if(1&g){const t=e.RV6();e.j41(0,"span",29),e.bIt("click",function(C){e.eBV(t);const A=e.XpG(2);return e.Njj(A.clear(C))}),e.DNE(1,zC,1,0,null,30),e.k0s()}if(2&g){const t=e.XpG(2);e.R7$(),e.Y8G("ngTemplateOutlet",t.clearIconTemplate)}}function QC(g,n){if(1&g&&(e.qex(0),e.DNE(1,UC,1,1,"TimesIcon",26)(2,KC,2,1,"span",27),e.bVm()),2&g){const t=e.XpG();e.R7$(),e.Y8G("ngIf",!t.clearIconTemplate),e.R7$(),e.Y8G("ngIf",t.clearIconTemplate)}}function WC(g,n){1&g&&e.nrm(0,"ChevronDownIcon",31),2&g&&e.Y8G("styleClass","p-treeselect-trigger-icon")}function JC(g,n){}function ZC(g,n){1&g&&e.DNE(0,JC,0,0,"ng-template")}function qC(g,n){if(1&g&&(e.j41(0,"span",32),e.DNE(1,ZC,1,0,null,30),e.k0s()),2&g){const t=e.XpG();e.R7$(),e.Y8G("ngTemplateOutlet",t.triggerIconTemplate)}}function eA(g,n){1&g&&e.eu8(0)}function tA(g,n){1&g&&e.nrm(0,"SearchIcon",31),2&g&&e.Y8G("styleClass","p-treeselect-filter-icon")}function gA(g,n){}function IA(g,n){1&g&&e.DNE(0,gA,0,0,"ng-template")}function CA(g,n){if(1&g&&(e.j41(0,"span",43),e.DNE(1,IA,1,0,null,30),e.k0s()),2&g){const t=e.XpG(3);e.R7$(),e.Y8G("ngTemplateOutlet",t.filterIconTemplate)}}function AA(g,n){1&g&&e.nrm(0,"TimesIcon")}function nA(g,n){}function iA(g,n){1&g&&e.DNE(0,nA,0,0,"ng-template")}function aA(g,n){if(1&g&&(e.j41(0,"span"),e.DNE(1,iA,1,0,null,30),e.k0s()),2&g){const t=e.XpG(3);e.R7$(),e.Y8G("ngTemplateOutlet",t.closeIconTemplate)}}function oA(g,n){if(1&g){const t=e.RV6();e.j41(0,"div",38),e.bIt("keydown.arrowdown",function(C){e.eBV(t);const A=e.XpG(2);return e.Njj(A.onArrowDown(C))}),e.j41(1,"div",39)(2,"input",40,9),e.bIt("keydown.enter",function(C){return e.eBV(t),e.Njj(C.preventDefault())})("input",function(C){e.eBV(t);const A=e.XpG(2);return e.Njj(A.onFilterInput(C))}),e.k0s(),e.DNE(4,tA,1,1,"SearchIcon",18)(5,CA,2,1,"span",41),e.k0s(),e.j41(6,"button",42),e.bIt("click",function(){e.eBV(t);const C=e.XpG(2);return e.Njj(C.hide())}),e.DNE(7,AA,1,0,"TimesIcon",16)(8,aA,2,1,"span",16),e.k0s()()}if(2&g){const t=e.XpG(2);e.R7$(2),e.Y8G("value",t.filterValue),e.BMQ("placeholder",t.filterPlaceholder),e.R7$(2),e.Y8G("ngIf",!t.filterIconTemplate),e.R7$(),e.Y8G("ngIf",t.filterIconTemplate),e.R7$(2),e.Y8G("ngIf",!t.closeIconTemplate),e.R7$(),e.Y8G("ngIf",t.closeIconTemplate)}}function lA(g,n){1&g&&e.eu8(0)}function rA(g,n){if(1&g&&e.DNE(0,lA,1,0,"ng-container",30),2&g){const t=e.XpG(3);e.Y8G("ngTemplateOutlet",t.emptyTemplate)}}function sA(g,n){1&g&&(e.qex(0),e.DNE(1,rA,1,1,"ng-template",44),e.bVm())}function cA(g,n){1&g&&e.eu8(0)}function pA(g,n){if(1&g&&e.DNE(0,cA,1,0,"ng-container",22),2&g){const t=n.$implicit,I=e.XpG(3);e.Y8G("ngTemplateOutlet",I.itemTogglerIconTemplate)("ngTemplateOutletContext",e.eq3(2,RC,t))}}function _A(g,n){1&g&&e.DNE(0,pA,1,4,"ng-template",45)}function dA(g,n){1&g&&e.eu8(0)}function uA(g,n){if(1&g&&e.DNE(0,dA,1,0,"ng-container",22),2&g){const t=n.$implicit,I=n.partialSelected,C=e.XpG(3);e.Y8G("ngTemplateOutlet",C.itemCheckboxIconTemplate)("ngTemplateOutletContext",e.l_i(2,MC,t,I))}}function mA(g,n){1&g&&e.DNE(0,uA,1,5,"ng-template",46)}function hA(g,n){1&g&&e.eu8(0)}function fA(g,n){if(1&g&&e.DNE(0,hA,1,0,"ng-container",30),2&g){const t=e.XpG(3);e.Y8G("ngTemplateOutlet",t.itemLoadingIconTemplate)}}function bA(g,n){1&g&&e.DNE(0,fA,1,1,"ng-template",47)}function TA(g,n){1&g&&e.eu8(0)}function vA(g,n){if(1&g){const t=e.RV6();e.j41(0,"div",33,5)(2,"span",34,6),e.bIt("focus",function(C){e.eBV(t);const A=e.XpG();return e.Njj(A.onFirstHiddenFocus(C))}),e.k0s(),e.DNE(4,eA,1,0,"ng-container",22)(5,oA,9,6,"div",35),e.j41(6,"div",36)(7,"p-tree",37,7),e.bIt("selectionChange",function(C){e.eBV(t);const A=e.XpG();return e.Njj(A.onSelectionChange(C))})("onNodeExpand",function(C){e.eBV(t);const A=e.XpG();return e.Njj(A.nodeExpand(C))})("onNodeCollapse",function(C){e.eBV(t);const A=e.XpG();return e.Njj(A.nodeCollapse(C))})("onNodeSelect",function(C){e.eBV(t);const A=e.XpG();return e.Njj(A.onSelect(C))})("onNodeUnselect",function(C){e.eBV(t);const A=e.XpG();return e.Njj(A.onUnselect(C))}),e.DNE(9,sA,2,0,"ng-container",16)(10,_A,1,0,null,16)(11,mA,1,0,null,16)(12,bA,1,0,null,16),e.k0s()(),e.DNE(13,TA,1,0,"ng-container",22),e.j41(14,"span",34,8),e.bIt("focus",function(C){e.eBV(t);const A=e.XpG();return e.Njj(A.onLastHiddenFocus(C))}),e.k0s()()}if(2&g){const t=e.XpG();e.HbH(t.panelStyleClass),e.Y8G("ngStyle",t.panelStyle)("ngClass",t.panelClass),e.BMQ("id",t.listId),e.R7$(2),e.BMQ("tabindex",0)("data-p-hidden-accessible",!0)("data-p-hidden-focusable",!0),e.R7$(2),e.Y8G("ngTemplateOutlet",t.headerTemplate)("ngTemplateOutletContext",e.l_i(38,fe,t.value,t.options)),e.R7$(),e.Y8G("ngIf",t.filter),e.R7$(),e.Y8G("ngStyle",e.eq3(41,PC,t.scrollHeight)),e.R7$(),e.Y8G("value",t.options)("propagateSelectionDown",t.propagateSelectionDown)("propagateSelectionUp",t.propagateSelectionUp)("selectionMode",t.selectionMode)("selection",t.value)("metaKeySelection",t.metaKeySelection)("emptyMessage",t.emptyMessage)("filterBy",t.filterBy)("filterMode",t.filterMode)("filterPlaceholder",t.filterPlaceholder)("filterLocale",t.filterLocale)("filteredNodes",t.filteredNodes)("virtualScroll",t.virtualScroll)("virtualScrollItemSize",t.virtualScrollItemSize)("virtualScrollOptions",t.virtualScrollOptions)("_templateMap",t.templateMap)("loading",t.loading),e.R7$(2),e.Y8G("ngIf",t.emptyTemplate),e.R7$(),e.Y8G("ngIf",t.itemTogglerIconTemplate),e.R7$(),e.Y8G("ngIf",t.itemCheckboxIconTemplate),e.R7$(),e.Y8G("ngIf",t.itemLoadingIconTemplate),e.R7$(),e.Y8G("ngTemplateOutlet",t.footerTemplate)("ngTemplateOutletContext",e.l_i(43,fe,t.value,t.options)),e.R7$(),e.BMQ("tabindex",0)("data-p-hidden-accessible",!0)("data-p-hidden-focusable",!0)}}const yA={provide:h.kq,useExisting:(0,e.Rfq)(()=>be),multi:!0};let be=(()=>{class g{config;cd;el;overlayService;inputId;scrollHeight="400px";disabled;metaKeySelection=!1;variant="outlined";display="comma";selectionMode="single";tabindex="0";ariaLabel;ariaLabelledBy;placeholder;panelClass;panelStyle;panelStyleClass;containerStyle;containerStyleClass;labelStyle;labelStyleClass;overlayOptions;emptyMessage="";appendTo;filter=!1;filterBy="label";filterMode="lenient";filterPlaceholder;filterLocale;filterInputAutoFocus=!0;propagateSelectionDown=!0;propagateSelectionUp=!0;showClear=!1;resetFilterOnHide=!0;virtualScroll;virtualScrollItemSize;virtualScrollOptions;autofocus;get options(){return this._options}set options(t){this._options=t,this.updateTreeState()}get showTransitionOptions(){return this._showTransitionOptions}set showTransitionOptions(t){this._showTransitionOptions=t,console.warn("The showTransitionOptions property is deprecated since v14.2.0, use overlayOptions property instead.")}get hideTransitionOptions(){return this._hideTransitionOptions}set hideTransitionOptions(t){this._hideTransitionOptions=t,console.warn("The hideTransitionOptions property is deprecated since v14.2.0, use overlayOptions property instead.")}loading;onNodeExpand=new e.bkB;onNodeCollapse=new e.bkB;onShow=new e.bkB;onHide=new e.bkB;onClear=new e.bkB;onFilter=new e.bkB;onFocus=new e.bkB;onBlur=new e.bkB;onNodeUnselect=new e.bkB;onNodeSelect=new e.bkB;_showTransitionOptions;_hideTransitionOptions;templates;containerEl;focusInput;filterViewChild;treeViewChild;panelEl;overlayViewChild;firstHiddenFocusableElementOnOverlay;lastHiddenFocusableElementOnOverlay;filteredNodes;filterValue=null;serializedValue;valueTemplate;headerTemplate;emptyTemplate;footerTemplate;clearIconTemplate;triggerIconTemplate;filterIconTemplate;closeIconTemplate;itemTogglerIconTemplate;itemCheckboxIconTemplate;itemLoadingIconTemplate;focused;overlayVisible;selfChange;value;expandedNodes=[];_options;templateMap;onModelChange=()=>{};onModelTouched=()=>{};listId="";constructor(t,I,C,A){this.config=t,this.cd=I,this.el=C,this.overlayService=A}ngOnInit(){this.listId=(0,y._Y)()+"_list",this.updateTreeState()}ngAfterContentInit(){this.templates.length&&(this.templateMap={}),this.templates.forEach(t=>{switch(t.getType()){case"value":this.valueTemplate=t.template;break;case"header":this.headerTemplate=t.template;break;case"empty":this.emptyTemplate=t.template;break;case"footer":this.footerTemplate=t.template;break;case"clearicon":this.clearIconTemplate=t.template;break;case"triggericon":this.triggerIconTemplate=t.template;break;case"filtericon":this.filterIconTemplate=t.template;break;case"closeicon":this.closeIconTemplate=t.template;break;case"itemtogglericon":this.itemTogglerIconTemplate=t.template;break;case"itemcheckboxicon":this.itemCheckboxIconTemplate=t.template;break;case"itemloadingicon":this.itemLoadingIconTemplate=t.template;break;default:t.name?this.templateMap[t.name]=t.template:this.valueTemplate=t.template}})}onOverlayAnimationStart(t){if("visible"===t.toState)if(this.filter)y.BF.isNotEmpty(this.filterValue)&&this.treeViewChild?._filter(this.filterValue),this.filterInputAutoFocus&&this.filterViewChild?.nativeElement.focus();else{let I=r.D.getFocusableElements(this.panelEl.nativeElement);I&&I.length>0&&I[0].focus()}}onOverlayBeforeHide(t){let I=r.D.getFocusableElements(this.containerEl.nativeElement);I&&I.length>0&&I[0].focus()}onSelectionChange(t){this.value=t,this.onModelChange(this.value),this.cd.markForCheck()}onClick(t){this.disabled||!this.overlayViewChild?.el?.nativeElement?.contains(t.target)&&!r.D.hasClass(t.target,"p-treeselect-close")&&!r.D.hasClass(t.target,"p-checkbox-box")&&!r.D.hasClass(t.target,"p-checkbox-icon")&&(this.overlayVisible?this.hide():this.show(),this.focusInput?.nativeElement.focus())}onKeyDown(t){switch(t.code){case"ArrowDown":this.overlayVisible||(this.show(),t.preventDefault()),this.onArrowDown(t),t.preventDefault();break;case"Space":case"Enter":this.overlayVisible||(this.show(),t.preventDefault());break;case"Escape":this.overlayVisible&&(this.hide(),this.focusInput?.nativeElement.focus(),t.preventDefault());break;case"Tab":this.onTabKey(t)}}onFilterInput(t){this.filterValue=t.target.value,this.treeViewChild?._filter(this.filterValue),this.onFilter.emit({filter:this.filterValue,filteredValue:this.treeViewChild?.filteredNodes}),setTimeout(()=>{this.overlayViewChild.alignOverlay()})}onArrowDown(t){if(this.overlayVisible&&this.panelEl?.nativeElement){let I=r.D.getFocusableElements(this.panelEl.nativeElement,".p-treenode");I&&I.length>0&&I[0].focus(),t.preventDefault()}}onFirstHiddenFocus(t){const I=t.relatedTarget===this.focusInput?.nativeElement?r.D.getFirstFocusableElement(this.overlayViewChild?.overlayViewChild?.nativeElement,':not([data-p-hidden-focusable="true"])'):this.focusInput?.nativeElement;r.D.focus(I)}onLastHiddenFocus(t){const I=t.relatedTarget===this.focusInput?.nativeElement?r.D.getLastFocusableElement(this.overlayViewChild?.overlayViewChild?.nativeElement,':not([data-p-hidden-focusable="true"])'):this.focusInput?.nativeElement;r.D.focus(I)}show(){this.overlayVisible=!0}hide(t){this.overlayVisible=!1,this.resetFilter(),this.onHide.emit(t),this.cd.markForCheck()}clear(t){this.value=null,this.resetExpandedNodes(),this.resetPartialSelected(),this.onModelChange(this.value),this.onClear.emit(),t.stopPropagation()}checkValue(){return null!==this.value&&y.BF.isNotEmpty(this.value)}onTabKey(t,I=!1){I||(this.overlayVisible&&this.hasFocusableElements()?(r.D.focus(t.shiftKey?this.lastHiddenFocusableElementOnOverlay.nativeElement:this.firstHiddenFocusableElementOnOverlay.nativeElement),t.preventDefault()):this.overlayVisible&&this.hide(this.filter))}hasFocusableElements(){return r.D.getFocusableElements(this.overlayViewChild.overlayViewChild.nativeElement,':not([data-p-hidden-focusable="true"])').length>0}resetFilter(){this.filter&&!this.resetFilterOnHide?(this.filteredNodes=this.treeViewChild?.filteredNodes,this.treeViewChild?.resetFilter()):this.filterValue=null}updateTreeState(){if(this.value){let t="single"===this.selectionMode?[this.value]:[...this.value];this.resetExpandedNodes(),this.resetPartialSelected(),t&&this.options&&this.updateTreeBranchState(null,null,t)}}updateTreeBranchState(t,I,C){if(t){if(this.isSelected(t)&&(this.expandPath(I),C.splice(C.indexOf(t),1)),C.length>0&&t.children)for(let A of t.children)this.updateTreeBranchState(A,[...I,t],C)}else for(let A of this.options)this.updateTreeBranchState(A,[],C)}expandPath(t){for(let I of t)I.expanded=!0;this.expandedNodes=[...t]}nodeExpand(t){this.onNodeExpand.emit(t),this.expandedNodes.push(t.node)}nodeCollapse(t){this.onNodeCollapse.emit(t),this.expandedNodes.splice(this.expandedNodes.indexOf(t.node),1)}resetExpandedNodes(){for(let t of this.expandedNodes)t.expanded=!1;this.expandedNodes=[]}resetPartialSelected(t=this.options){if(t)for(let I of t)I.partialSelected=!1,I.children&&I.children?.length>0&&this.resetPartialSelected(I.children)}findSelectedNodes(t,I,C){if(t){if(this.isSelected(t)&&(C.push(t),delete I[t.key]),Object.keys(I).length&&t.children)for(let A of t.children)this.findSelectedNodes(A,I,C)}else for(let A of this.options)this.findSelectedNodes(A,I,C)}isSelected(t){return-1!=this.findIndexInSelection(t)}findIndexInSelection(t){return this.value?("single"===this.selectionMode?[this.value]:this.value).findIndex(C=>C===t||C.key===t.key&&void 0!==C.key):-1}onSelect(t){this.onNodeSelect.emit(t),"single"===this.selectionMode&&(this.hide(),this.focusInput?.nativeElement.focus())}onUnselect(t){this.onNodeUnselect.emit(t)}onInputFocus(t){this.disabled||(this.focused=!0,this.onFocus.emit(t))}onInputBlur(t){this.focused=!1,this.onBlur.emit(t),this.onModelTouched()}writeValue(t){this.value=t,this.updateTreeState(),this.cd.markForCheck()}registerOnChange(t){this.onModelChange=t}registerOnTouched(t){this.onModelTouched=t}setDisabledState(t){setTimeout(()=>{this.disabled=t,this.cd.markForCheck()})}containerClass(){return{"p-treeselect p-component p-inputwrapper":!0,"p-treeselect-chip":"chip"===this.display,"p-disabled":this.disabled,"p-focus":this.focused,"p-variant-filled":"filled"===this.variant||"filled"===this.config.inputStyle()}}labelClass(){return{"p-treeselect-label":!0,"p-placeholder":this.label===this.placeholder,"p-treeselect-label-empty":!this.placeholder&&this.emptyValue}}get emptyValue(){return!this.value||0===Object.keys(this.value).length}get emptyOptions(){return!this.options||0===this.options.length}get label(){let t=this.value||[];return t.length?t.map(I=>I.label).join(", "):"single"===this.selectionMode&&this.value?t.label:this.placeholder}static \u0275fac=function(I){return new(I||g)(e.rXU(p.r1),e.rXU(e.gRc),e.rXU(e.aKT),e.rXU(p.si))};static \u0275cmp=e.VBU({type:g,selectors:[["p-treeSelect"]],contentQueries:function(I,C,A){if(1&I&&e.wni(A,p.Ei,4),2&I){let i;e.mGM(i=e.lsd())&&(C.templates=i)}},viewQuery:function(I,C){if(1&I&&(e.GBs(SC,5),e.GBs(EC,5),e.GBs(NC,5),e.GBs(kC,5),e.GBs(DC,5),e.GBs(GC,5),e.GBs(FC,5),e.GBs(wC,5)),2&I){let A;e.mGM(A=e.lsd())&&(C.containerEl=A.first),e.mGM(A=e.lsd())&&(C.focusInput=A.first),e.mGM(A=e.lsd())&&(C.filterViewChild=A.first),e.mGM(A=e.lsd())&&(C.treeViewChild=A.first),e.mGM(A=e.lsd())&&(C.panelEl=A.first),e.mGM(A=e.lsd())&&(C.overlayViewChild=A.first),e.mGM(A=e.lsd())&&(C.firstHiddenFocusableElementOnOverlay=A.first),e.mGM(A=e.lsd())&&(C.lastHiddenFocusableElementOnOverlay=A.first)}},hostAttrs:[1,"p-element","p-inputwrapper"],hostVars:6,hostBindings:function(I,C){2&I&&e.AVh("p-inputwrapper-filled",!C.emptyValue)("p-inputwrapper-focus",C.focused)("p-treeselect-clearable",C.showClear&&!C.disabled)},inputs:{inputId:"inputId",scrollHeight:"scrollHeight",disabled:[2,"disabled","disabled",e.L39],metaKeySelection:[2,"metaKeySelection","metaKeySelection",e.L39],variant:"variant",display:"display",selectionMode:"selectionMode",tabindex:"tabindex",ariaLabel:"ariaLabel",ariaLabelledBy:"ariaLabelledBy",placeholder:"placeholder",panelClass:"panelClass",panelStyle:"panelStyle",panelStyleClass:"panelStyleClass",containerStyle:"containerStyle",containerStyleClass:"containerStyleClass",labelStyle:"labelStyle",labelStyleClass:"labelStyleClass",overlayOptions:"overlayOptions",emptyMessage:"emptyMessage",appendTo:"appendTo",filter:[2,"filter","filter",e.L39],filterBy:"filterBy",filterMode:"filterMode",filterPlaceholder:"filterPlaceholder",filterLocale:"filterLocale",filterInputAutoFocus:[2,"filterInputAutoFocus","filterInputAutoFocus",e.L39],propagateSelectionDown:[2,"propagateSelectionDown","propagateSelectionDown",e.L39],propagateSelectionUp:[2,"propagateSelectionUp","propagateSelectionUp",e.L39],showClear:[2,"showClear","showClear",e.L39],resetFilterOnHide:[2,"resetFilterOnHide","resetFilterOnHide",e.L39],virtualScroll:"virtualScroll",virtualScrollItemSize:"virtualScrollItemSize",virtualScrollOptions:"virtualScrollOptions",autofocus:[2,"autofocus","autofocus",e.L39],options:"options",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",loading:[2,"loading","loading",e.L39]},outputs:{onNodeExpand:"onNodeExpand",onNodeCollapse:"onNodeCollapse",onShow:"onShow",onHide:"onHide",onClear:"onClear",onFilter:"onFilter",onFocus:"onFocus",onBlur:"onBlur",onNodeUnselect:"onNodeUnselect",onNodeSelect:"onNodeSelect"},features:[e.Jv_([yA]),e.GFd],decls:17,vars:30,consts:[["container",""],["focusInput",""],["defaultValueTemplate",""],["overlay",""],["chipsValueTemplate",""],["panel",""],["firstHiddenFocusableEl",""],["tree",""],["lastHiddenFocusableEl",""],["filter",""],[3,"click","ngClass","ngStyle"],[1,"p-hidden-accessible"],["type","text","role","combobox","readonly","","pAutoFocus","",3,"focus","blur","keydown","disabled","autofocus"],[1,"p-treeselect-label-container"],[3,"ngClass","ngStyle"],[4,"ngIf","ngIfElse"],[4,"ngIf"],["role","button","aria-haspopup","tree",1,"p-treeselect-trigger"],[3,"styleClass",4,"ngIf"],["class","p-treeselect-trigger-icon",4,"ngIf"],[3,"visibleChange","onAnimationStart","onBeforeHide","onShow","onHide","visible","options","target","appendTo","showTransitionOptions","hideTransitionOptions"],["pTemplate","content"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["class","p-treeselect-token",4,"ngFor","ngForOf"],[1,"p-treeselect-token"],[1,"p-treeselect-token-label"],[3,"styleClass","click",4,"ngIf"],["class","p-treeselect-clear-icon",3,"click",4,"ngIf"],[3,"click","styleClass"],[1,"p-treeselect-clear-icon",3,"click"],[4,"ngTemplateOutlet"],[3,"styleClass"],[1,"p-treeselect-trigger-icon"],[1,"p-treeselect-panel","p-component",3,"ngStyle","ngClass"],["role","presentation",1,"p-hidden-accessible","p-hidden-focusable",3,"focus"],["class","p-treeselect-header",3,"keydown.arrowdown",4,"ngIf"],[1,"p-treeselect-items-wrapper",3,"ngStyle"],[3,"selectionChange","onNodeExpand","onNodeCollapse","onNodeSelect","onNodeUnselect","value","propagateSelectionDown","propagateSelectionUp","selectionMode","selection","metaKeySelection","emptyMessage","filterBy","filterMode","filterPlaceholder","filterLocale","filteredNodes","virtualScroll","virtualScrollItemSize","virtualScrollOptions","_templateMap","loading"],[1,"p-treeselect-header",3,"keydown.arrowdown"],[1,"p-treeselect-filter-container"],["type","search","autocomplete","off",1,"p-treeselect-filter","p-inputtext","p-component",3,"keydown.enter","input","value"],["class","p-treeselect-filter-icon",4,"ngIf"],[1,"p-treeselect-close","p-link",3,"click"],[1,"p-treeselect-filter-icon"],["pTemplate","empty"],["pTemplate","togglericon"],["pTemplate","checkboxicon"],["pTemplate","loadingicon"]],template:function(I,C){if(1&I){const A=e.RV6();e.j41(0,"div",10,0),e.bIt("click",function(a){return e.eBV(A),e.Njj(C.onClick(a))}),e.j41(2,"div",11)(3,"input",12,1),e.bIt("focus",function(a){return e.eBV(A),e.Njj(C.onInputFocus(a))})("blur",function(a){return e.eBV(A),e.Njj(C.onInputBlur(a))})("keydown",function(a){return e.eBV(A),e.Njj(C.onKeyDown(a))}),e.k0s()(),e.j41(5,"div",13)(6,"div",14),e.DNE(7,VC,2,5,"ng-container",15)(8,LC,3,2,"ng-template",null,2,e.C5r),e.k0s(),e.DNE(10,QC,3,2,"ng-container",16),e.k0s(),e.j41(11,"div",17),e.DNE(12,WC,1,1,"ChevronDownIcon",18)(13,qC,2,1,"span",19),e.k0s(),e.j41(14,"p-overlay",20,3),e.mxI("visibleChange",function(a){return e.eBV(A),e.DH7(C.overlayVisible,a)||(C.overlayVisible=a),e.Njj(a)}),e.bIt("onAnimationStart",function(a){return e.eBV(A),e.Njj(C.onOverlayAnimationStart(a))})("onBeforeHide",function(a){return e.eBV(A),e.Njj(C.onOverlayBeforeHide(a))})("onShow",function(a){return e.eBV(A),e.Njj(C.onShow.emit(a))})("onHide",function(a){return e.eBV(A),e.Njj(C.hide(a))}),e.DNE(16,vA,16,46,"ng-template",21),e.k0s()()}if(2&I){let A,i;const a=e.sdS(9);e.HbH(C.containerStyleClass),e.Y8G("ngClass",C.containerClass())("ngStyle",C.containerStyle),e.R7$(3),e.Y8G("disabled",C.disabled)("autofocus",C.autofocus),e.BMQ("id",C.inputId)("tabindex",C.disabled?-1:C.tabindex)("aria-controls",C.overlayVisible?C.listId:null)("aria-haspopup","tree")("aria-expanded",null!==(A=C.overlayVisible)&&void 0!==A&&A)("aria-labelledby",C.ariaLabelledBy)("aria-label",C.ariaLabel||("p-emptylabel"===C.label?void 0:C.label)),e.R7$(3),e.HbH(C.labelStyleClass),e.Y8G("ngClass",C.labelClass())("ngStyle",C.labelStyle),e.R7$(),e.Y8G("ngIf",C.valueTemplate)("ngIfElse",a),e.R7$(3),e.Y8G("ngIf",C.checkValue()&&!C.disabled&&C.showClear),e.R7$(),e.BMQ("aria-expanded",null!==(i=C.overlayVisible)&&void 0!==i&&i)("aria-label","treeselect trigger"),e.R7$(),e.Y8G("ngIf",!C.triggerIconTemplate),e.R7$(),e.Y8G("ngIf",C.triggerIconTemplate),e.R7$(),e.R50("visible",C.overlayVisible),e.Y8G("options",C.overlayOptions)("target","@parent")("appendTo",C.appendTo)("showTransitionOptions",C.showTransitionOptions)("hideTransitionOptions",C.hideTransitionOptions)}},dependencies:()=>[l.YU,l.Sq,l.bT,l.T3,l.B3,W.hJ,p.Ei,K,he.q,M.W,P.A,R.D],styles:["@layer primeng{.p-treeselect{display:inline-flex;cursor:pointer;position:relative;-webkit-user-select:none;user-select:none}.p-treeselect-trigger{display:flex;align-items:center;justify-content:center;flex-shrink:0}.p-treeselect-label-container{overflow:hidden;flex:1 1 auto;cursor:pointer;display:flex}.p-treeselect-label{display:block;white-space:nowrap;cursor:pointer;overflow:hidden;text-overflow:ellipsis}.p-treeselect-label-empty{overflow:hidden;visibility:hidden}.p-treeselect-token{cursor:default;display:inline-flex;align-items:center;flex:0 0 auto}.p-treeselect-items-wrapper{overflow:auto}.p-treeselect-header{display:flex;align-items:center;justify-content:space-between}.p-treeselect-filter-container{position:relative;flex:1 1 auto}.p-treeselect-filter-icon{position:absolute;top:50%;margin-top:-.5rem}.p-treeselect-filter-container .p-inputtext{width:100%}.p-treeselect-close{display:flex;align-items:center;justify-content:center;flex-shrink:0;overflow:hidden;position:relative;margin-left:auto}.p-treeselect-clear-icon{position:absolute;top:50%;margin-top:-.5rem}.p-fluid .p-treeselect{display:flex}.p-treeselect-clear-icon{position:absolute;top:50%;margin-top:-.5rem;cursor:pointer}.p-treeselect-clearable{position:relative}}\n"],encapsulation:2,changeDetection:0})}return g})(),xA=(()=>{class g{static \u0275fac=function(I){return new(I||g)};static \u0275mod=e.$C({type:g});static \u0275inj=e.G2t({imports:[l.MD,W.z_,k.Z,p.Gg,Q,he.u,M.W,P.A,R.D,W.z_,p.Gg,Q]})}return g})();function SA(g,n){if(1&g){const t=e.RV6();e.j41(0,"p-checkbox",7),e.mxI("ngModelChange",function(C){const A=e.eBV(t).$implicit;return e.DH7(A.data.analyzable,C)||(A.data.analyzable=C),e.Njj(C)}),e.bIt("onChange",function(C){const A=e.eBV(t).$implicit,i=e.XpG();return e.Njj(i.updateCategoryAnalizability(A.data.iD,C))}),e.k0s(),e.EFF(1)}if(2&g){const t=n.$implicit;e.R50("ngModel",t.data.analyzable),e.Y8G("binary",!0),e.R7$(),e.SpI(" ",t.label," ")}}function EA(g,n){if(1&g){const t=e.RV6();e.j41(0,"p-checkbox",7),e.mxI("ngModelChange",function(C){const A=e.eBV(t).$implicit;return e.DH7(A.data.analyzable,C)||(A.data.analyzable=C),e.Njj(C)}),e.bIt("onChange",function(C){const A=e.eBV(t).$implicit,i=e.XpG();return e.Njj(i.updateTypeAnalizability(A.data.iD,C))}),e.k0s(),e.EFF(1)}if(2&g){const t=n.$implicit;e.R50("ngModel",t.data.analyzable),e.Y8G("binary",!0),e.R7$(),e.SpI(" ",t.label," ")}}function NA(g,n){}const DA=()=>({"min-width":"75rem"}),GA=()=>[10,25,50],FA=()=>({width:"50vw"});function wA(g,n){1&g&&(e.j41(0,"tr")(1,"th"),e.EFF(2,"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435"),e.k0s(),e.j41(3,"th",6),e.EFF(4,"\u0415\u0434\u0438\u043d\u0438\u0446\u0430 \u0438\u0437\u043c\u0435\u0440\u0435\u043d\u0438\u044f "),e.nrm(5,"p-sortIcon",7),e.k0s(),e.j41(6,"th"),e.EFF(7,"\u041a\u0432\u0430\u043d\u0442"),e.k0s(),e.j41(8,"th"),e.EFF(9,"\u0426\u0435\u043d\u044b"),e.k0s(),e.nrm(10,"th"),e.k0s())}function jA(g,n){if(1&g&&(e.j41(0,"li"),e.EFF(1),e.k0s()),2&g){const t=n.$implicit;e.R7$(),e.SpI(" ",t.name," ")}}function PA(g,n){if(1&g){const t=e.RV6();e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td")(8,"ul"),e.DNE(9,jA,2,1,"li",8),e.k0s()(),e.j41(10,"td")(11,"p-button",9),e.bIt("click",function(){const C=e.eBV(t).$implicit,A=e.XpG(2);return e.Njj(A.showEditPackageTypeDialog(C))}),e.k0s(),e.j41(12,"p-button",10),e.bIt("click",function(){const C=e.eBV(t).$implicit,A=e.XpG(2);return e.Njj(A.removePackageType(C))}),e.k0s()()()}if(2&g){const t=n.$implicit,I=e.XpG(2);e.R7$(2),e.JRh(t.name),e.R7$(2),e.JRh(I.getMeasureUnitText(t.unitOfMeasure)),e.R7$(2),e.JRh(I.getQuantum(t)),e.R7$(3),e.Y8G("ngForOf",t.prices)}}function RA(g,n){if(1&g&&(e.j41(0,"p-table",3),e.DNE(1,wA,11,0,"ng-template",4)(2,PA,13,4,"ng-template",5),e.k0s()),2&g){const t=e.XpG();e.Y8G("value",t.data)("tableStyle",e.lJ4(6,DA))("paginator",!0)("rows",50)("rowsPerPageOptions",e.lJ4(7,GA))("totalRecords",t.totalRecords)}}function MA(g,n){if(1&g){const t=e.RV6();e.j41(0,"button",21),e.bIt("click",function(){e.eBV(t);const C=e.XpG(2);return e.Njj(C.addPackageType())}),e.EFF(1,"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"),e.k0s()}}function BA(g,n){if(1&g){const t=e.RV6();e.j41(0,"button",21),e.bIt("click",function(){e.eBV(t);const C=e.XpG(2);return e.Njj(C.updatePackageType())}),e.EFF(1,"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c"),e.k0s()}}function VA(g,n){if(1&g){const t=e.RV6();e.j41(0,"p-dialog",11),e.mxI("visibleChange",function(C){e.eBV(t);const A=e.XpG();return e.DH7(A.showDialog,C)||(A.showDialog=C),e.Njj(C)}),e.j41(1,"div",12)(2,"div",13)(3,"label",14),e.EFF(4,"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435"),e.k0s(),e.j41(5,"input",15),e.mxI("ngModelChange",function(C){e.eBV(t);const A=e.XpG();return e.DH7(A.newItem.name,C)||(A.newItem.name=C),e.Njj(C)}),e.k0s()(),e.j41(6,"div",13)(7,"label",16),e.EFF(8,"\u0422\u043e\u0447\u043d\u043e\u0441\u0442\u044c, \u0437\u043d\u0430\u043a\u043e\u0432 \u043f\u043e\u0441\u043b\u0435 \u0437\u0430\u043f\u044f\u0442\u043e\u0439"),e.k0s(),e.j41(9,"p-inputNumber",17),e.mxI("ngModelChange",function(C){e.eBV(t);const A=e.XpG();return e.DH7(A.newItem.decimalPlaces,C)||(A.newItem.decimalPlaces=C),e.Njj(C)}),e.k0s()(),e.j41(10,"div",13)(11,"label",18),e.EFF(12,"\u0415\u0434\u0438\u043d\u0438\u0446\u0430 \u0438\u0437\u043c\u0435\u0440\u0435\u043d\u0438\u044f"),e.k0s(),e.j41(13,"p-dropdown",19),e.mxI("ngModelChange",function(C){e.eBV(t);const A=e.XpG();return e.DH7(A.newItem.unitOfMeasure,C)||(A.newItem.unitOfMeasure=C),e.Njj(C)}),e.k0s()()(),e.DNE(14,MA,2,0,"button",20)(15,BA,2,0,"button",20),e.k0s()}if(2&g){const t=e.XpG();e.Aen(e.lJ4(17,FA)),e.Y8G("header",t.dialogTitle)("modal",!0),e.R50("visible",t.showDialog),e.Y8G("draggable",!1)("resizable",!1),e.R7$(5),e.R50("ngModel",t.newItem.name),e.R7$(4),e.R50("ngModel",t.newItem.decimalPlaces),e.Y8G("min",0)("max",5)("showButtons",!0),e.R7$(4),e.R50("ngModel",t.newItem.unitOfMeasure),e.Y8G("options",t.measureUnits)("autoDisplayFirst",!1),e.R7$(),e.Y8G("ngIf",t.isAdding),e.R7$(),e.Y8G("ngIf",!t.isAdding)}}const $A=[{path:"edit",component:xg},{path:"",component:Fe},{path:"product-tree",component:(()=>{class g extends D.x{constructor(t,I,C){super(C),this.messageService=t,this.categoryTreeService=I,this.filteredCategories=new T.t([]),this.selectedCategory=null,this.filterTextChanged=new T.t("")}onShow(t){t.filterValue=this.filterTextChanged.getValue()}ngOnInit(){this.titleService.setTitle("\u0414\u0435\u0440\u0435\u0432\u043e \u0442\u043e\u0432\u0430\u0440\u043e\u0432"),this.filterTextChanged.pipe((0,jg.B)(500),(0,Pg.F)()).pipe((0,S.n)(t=>this.categoryTreeService.filterCategories(new le.z.FilterCategoryModel({term:t,count:10})).pipe((0,d.W)(I=>(this.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0444\u0438\u043b\u044c\u0442\u0440\u0430 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0439",severity:"error",detail:I}),u.w))))).subscribe(t=>{const I=t.map(C=>this.mapCategory(C,null,null));this.filteredCategories.next(I)})}onFilterNodeSelect(t){const I=t.node.leaf?t.node.parent.data.iD:t.node.iD;this.loadChildCategories(I,C=>this.topCategories=C.map(A=>this.mapCategory(A,null,I)))}clearCategoriesFilter(t){t.filterValue="",this.filterCategories("")}loadChildCategories(t,I){this.loading=!0,this.categoryTreeService.getCategories(t).pipe((0,d.W)(C=>(this.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0434\u0435\u0440\u0435\u0432\u0430 \u0442\u0438\u043f\u043e\u0432 \u0442\u043e\u0432\u0430\u0440\u043e\u0432",severity:"error",detail:C}),this.loading=!1,u.w))).subscribe(C=>{I(C.sort((A,i)=>A.name.localeCompare(i.name))),this.loading=!1})}mapProductType(t){return{label:t.name,children:[],leaf:!0,key:t.iD.toString(),icon:"pi pi-list",hasChildren:!1,type:"productType",data:t}}mapCategory(t,I,C){const A={label:t.name,expandedIcon:"pi pi-folder-open",collapsedIcon:"pi pi-folder",leaf:!1,key:t.iD.toString(),icon:"pi pi-folder",type:"category",data:t,parent:I};if(C==t.iD){let i=A;for(;i;)i.expanded=!0,i=i.parent}return A.children=t.children?.sort((i,a)=>i.name.localeCompare(a.name)).map(i=>this.mapCategory(i,A,C))??[],A.children=A.children.concat(t.types.sort((i,a)=>i.name.localeCompare(a.name)).map(i=>this.mapProductType(i))),A}filterCategories(t){this.filterTextChanged.next(t)}importProductTypes(){this.categoryTreeService.importCategoryTree().pipe((0,d.W)(t=>(this.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0434\u0435\u0440\u0435\u0432\u0430 \u0442\u0438\u043f\u043e\u0432 \u0442\u043e\u0432\u0430\u0440\u043e\u0432",severity:"error",detail:t}),u.w))).subscribe(()=>{this.messageService.add({summary:"\u0423\u0441\u043f\u0435\u0445",severity:"success",detail:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0434\u0435\u0440\u0435\u0432\u0430 \u0442\u0438\u043f\u043e\u0432 \u0442\u043e\u0432\u0430\u0440\u043e\u0432 \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u0430"})})}updateCategoryAnalizability(t,I){this.categoryTreeService.setCategoryAnalyzability(t,I.checked).pipe((0,d.W)(C=>(this.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f \u0444\u043b\u0430\u0433\u0430 \u0430\u043d\u0430\u043b\u0438\u0437\u0430 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438",severity:"error",detail:C}),u.w))).subscribe(()=>{this.messageService.add({summary:"\u0423\u0441\u043f\u0435\u0445",severity:"success",detail:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0434\u0435\u0440\u0435\u0432\u0430 \u0442\u0438\u043f\u043e\u0432 \u0442\u043e\u0432\u0430\u0440\u043e\u0432 \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u0430"})})}updateTypeAnalizability(t,I){this.categoryTreeService.setProductTypeAnalyzability(t,I.checked).pipe((0,d.W)(C=>(this.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f \u0444\u043b\u0430\u0433\u0430 \u0430\u043d\u0430\u043b\u0438\u0437\u0430 \u0442\u0438\u043f\u0430 \u0442\u043e\u0432\u0430\u0440\u043e\u0432",severity:"error",detail:C}),u.w))).subscribe(()=>{this.messageService.add({summary:"\u0423\u0441\u043f\u0435\u0445",severity:"success",detail:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0434\u0435\u0440\u0435\u0432\u0430 \u0442\u0438\u043f\u043e\u0432 \u0442\u043e\u0432\u0430\u0440\u043e\u0432 \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u0430"})})}static{this.\u0275fac=function(I){return new(I||g)(e.rXU(p.bg),e.rXU(le.z.CategoryTreeClient),e.rXU(N.hE))}}static{this.\u0275cmp=e.VBU({type:g,selectors:[["app-product-tree"]],features:[e.Vt3],decls:10,vars:6,consts:[["treeSelect",""],["containerStyleClass","w-full","appendTo","body","placeholder","Select Item",1,"md:w-20rem","w-full",3,"onShow","onClear","onNodeSelect","onFilter","options","filter","filterInputAutoFocus"],["pButton","",3,"click"],["filterMode","strict","filterPlaceholder","\u0424\u0438\u043b\u044c\u0442\u0440\u043e\u0432\u0430\u0442\u044c",1,"w-full","md:w-30rem",3,"value"],["pTemplate","category"],["pTemplate","productType"],["pTemplate","empty"],[3,"ngModelChange","onChange","ngModel","binary"]],template:function(I,C){if(1&I){const A=e.RV6();e.nrm(0,"p-toast"),e.j41(1,"p-treeSelect",1,0),e.nI1(3,"async"),e.bIt("onShow",function(){e.eBV(A);const a=e.sdS(2);return e.Njj(C.onShow(a))})("onClear",function(){e.eBV(A);const a=e.sdS(2);return e.Njj(C.clearCategoriesFilter(a))})("onNodeSelect",function(a){return e.eBV(A),e.Njj(C.onFilterNodeSelect(a))})("onFilter",function(){e.eBV(A);const a=e.sdS(2);return e.Njj(C.filterCategories(a.filterValue))}),e.k0s(),e.j41(4,"button",2),e.bIt("click",function(){return e.eBV(A),e.Njj(C.importProductTypes())}),e.EFF(5,"\u0418\u043c\u043f\u043e\u0440\u0442 \u0442\u0438\u043f\u043e\u0432 \u0442\u043e\u0432\u0430\u0440\u043e\u0432"),e.k0s(),e.j41(6,"p-tree",3),e.DNE(7,SA,2,3,"ng-template",4)(8,EA,2,3,"ng-template",5)(9,NA,0,0,"ng-template",6),e.k0s()}2&I&&(e.R7$(),e.Y8G("options",e.bMT(3,4,C.filteredCategories))("filter",!0)("filterInputAutoFocus",!0),e.R7$(5),e.Y8G("value",C.topCategories))},dependencies:[h.BC,h.vS,p.Ei,E.y8,v._f,K,me.Sc,be,l.Jj]})}}return g})()},{path:"package-type/list",component:(()=>{class g{constructor(t,I){this.purchaseService=t,this.messageService=I,this.measureUnits=[{value:_.D.UnitOfMeasure.Piece,name:"\u0448\u0442"},{value:_.D.UnitOfMeasure.SquareMeter,name:"\u043c2"},{value:_.D.UnitOfMeasure.Meter,name:"\u043c"}]}getMeasureUnitText(t){return this.measureUnits.find(I=>I.value==t)?.name??t.toString()}get data(){return this.purchaseService.getPackageTypes()}getQuantum(t){return Math.pow(10,-t.decimalPlaces)}showAddPackageTypeDialog(){this.isAdding=!0,this.dialogTitle="\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0442\u0438\u043f\u0430 \u0443\u043f\u0430\u043a\u043e\u0432\u043a\u0438",this.newItem={decimalPlaces:0},this.showDialog=!0}showEditPackageTypeDialog(t){this.isAdding=!1,this.dialogTitle="\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0442\u0438\u043f\u0430 \u0443\u043f\u0430\u043a\u043e\u0432\u043a\u0438",this.newItem=t,this.showDialog=!0}removePackageType(t){this.purchaseService.removePackageType(t.iD).pipe((0,d.W)(I=>(this.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f \u0442\u0438\u043f\u0430 \u0443\u043f\u0430\u043a\u043e\u0432\u043a\u0438",severity:"error",detail:I}),u.w))).subscribe()}addPackageType(){this.purchaseService.addPackageType(this.newItem).pipe((0,d.W)(t=>(this.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u0442\u0438\u043f\u0430 \u0443\u043f\u0430\u043a\u043e\u0432\u043a\u0438",severity:"error",detail:t}),u.w))).subscribe(()=>{this.showDialog=!1})}updatePackageType(){this.purchaseService.updatePackageType(this.newItem).pipe((0,d.W)(t=>(this.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f \u0442\u0438\u043f\u0430 \u0443\u043f\u0430\u043a\u043e\u0432\u043a\u0438",severity:"error",detail:t}),u.w))).subscribe(()=>{this.showDialog=!1})}static{this.\u0275fac=function(I){return new(I||g)(e.rXU(w),e.rXU(p.bg))}}static{this.\u0275cmp=e.VBU({type:g,selectors:[["app-package-type-list"]],decls:7,vars:2,consts:[[3,"click"],["dataKey","iD",3,"value","tableStyle","paginator","rows","rowsPerPageOptions","totalRecords",4,"ngIf"],[3,"header","modal","style","visible","draggable","resizable","visibleChange",4,"ngIf"],["dataKey","iD",3,"value","tableStyle","paginator","rows","rowsPerPageOptions","totalRecords"],["pTemplate","header"],["pTemplate","body"],["pSortableColumn","unitOfMeasure"],["field","unitOfMeasure"],[4,"ngFor","ngForOf"],["type","button","pRipple","","icon","pi pi-pencil",3,"click"],["icon","pi pi-trash",3,"click"],[3,"visibleChange","header","modal","visible","draggable","resizable"],[1,"card"],[1,"flex-auto","m-3"],["for","name",1,"block","font-bold"],["pInputText","","inputId","name",3,"ngModelChange","ngModel"],["for","decimalPlaces",1,"mb-2","block","font-bold"],["inputId","decimalPlaces",3,"ngModelChange","ngModel","min","max","showButtons"],["for","unitOfMeasure",1,"mb-2","block","font-bold"],["appendTo","body","placeholder","\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0435\u0434\u0438\u043d\u0438\u0446\u0443 \u0438\u0437\u043c\u0435\u0440\u0435\u043d\u0438\u0439","inputId","unitOfMeasure","optionLabel","name","optionValue","value",3,"ngModelChange","ngModel","options","autoDisplayFirst"],["pButton","",3,"click",4,"ngIf"],["pButton","",3,"click"]],template:function(I,C){1&I&&(e.nrm(0,"p-toast"),e.j41(1,"h1"),e.EFF(2,"\u0423\u043f\u0430\u043a\u043e\u0432\u043a\u0430 \u0442\u043e\u0432\u0430\u0440\u043e\u0432"),e.k0s(),e.j41(3,"p-button",0),e.bIt("click",function(){return C.showAddPackageTypeDialog()}),e.EFF(4,"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"),e.k0s(),e.DNE(5,RA,3,8,"p-table",1)(6,VA,16,18,"p-dialog",2)),2&I&&(e.R7$(5),e.Y8G("ngIf",C.data),e.R7$(),e.Y8G("ngIf",C.newItem))},dependencies:[l.Sq,l.bT,h.me,h.BC,h.vS,f.XI,p.Ei,f.Tg,f.yc,E.y8,v._f,v.$n,X.S,O.YI,L.ms,U.l]})}}return g})()},{path:"summary",component:wg}];let YA=(()=>{class g{static{this.\u0275fac=function(I){return new(I||g)}}static{this.\u0275mod=e.$C({type:g})}static{this.\u0275inj=e.G2t({imports:[x.iI.forChild($A),x.iI]})}}return g})();var XA=o(491);let OA=(()=>{class g{static{this.\u0275fac=function(I){return new(I||g)}}static{this.\u0275mod=e.$C({type:g})}static{this.\u0275inj=e.G2t({imports:[l.MD]})}}return g})(),LA=(()=>{class g{static{this.\u0275fac=function(I){return new(I||g)}}static{this.\u0275mod=e.$C({type:g})}static{this.\u0275inj=e.G2t({providers:[_.D.PurchaseBatchClient,_.D.ProductClient,_.D.PackageTypeClient,_.D.SalesChannelClient,F.X.PurchaseBatchClient,F.X.PackageTypeClient,w],imports:[l.MD,h.YN,f.bG,E.MB,v.tm,E.MB,XA.D,Y.h6,_t,X.u,O.O3,L.kr,U.P,OA,ie.$$,YA,Q,me.q4,ae.rO,oe.$,xA]})}}return g})()}}]);