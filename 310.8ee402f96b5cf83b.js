(self.webpackChunkseller=self.webpackChunkseller||[]).push([[310],{701:ye=>{window,ye.exports=function(o){var v={};function n(a){if(v[a])return v[a].exports;var s=v[a]={i:a,l:!1,exports:{}};return o[a].call(s.exports,s,s.exports,n),s.l=!0,s.exports}return n.m=o,n.c=v,n.d=function(a,s,d){n.o(a,s)||Object.defineProperty(a,s,{enumerable:!0,get:d})},n.r=function(a){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},n.t=function(a,s){if(1&s&&(a=n(a)),8&s||4&s&&"object"==typeof a&&a&&a.__esModule)return a;var d=Object.create(null);if(n.r(d),Object.defineProperty(d,"default",{enumerable:!0,value:a}),2&s&&"string"!=typeof a)for(var f in a)n.d(d,f,function(x){return a[x]}.bind(null,f));return d},n.n=function(a){var s=a&&a.__esModule?function(){return a.default}:function(){return a};return n.d(s,"a",s),s},n.o=function(a,s){return Object.prototype.hasOwnProperty.call(a,s)},n.p="/",n(n.s=72)}([function(o,v){o.exports=function(n,a,s){return a in n?Object.defineProperty(n,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):n[a]=s,n},o.exports.__esModule=!0,o.exports.default=o.exports},function(o,v){o.exports=function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n},o.exports.__esModule=!0,o.exports.default=o.exports},function(o,v){function n(a){return o.exports=n=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},o.exports.__esModule=!0,o.exports.default=o.exports,n(a)}o.exports=n,o.exports.__esModule=!0,o.exports.default=o.exports},function(o,v){o.exports=function(n,a){if(!(n instanceof a))throw new TypeError("Cannot call a class as a function")},o.exports.__esModule=!0,o.exports.default=o.exports},function(o,v){function n(a,s){for(var d=0;d<s.length;d++){var f=s[d];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(a,f.key,f)}}o.exports=function(a,s,d){return s&&n(a.prototype,s),d&&n(a,d),Object.defineProperty(a,"prototype",{writable:!1}),a},o.exports.__esModule=!0,o.exports.default=o.exports},function(o,v,n){"use strict";n.d(v,"a",function(){return a}),n.d(v,"b",function(){return s}),n.d(v,"c",function(){return d}),n.d(v,"d",function(){return f});var a={};n.r(a),n.d(a,"EPSILON",function(){return x}),n.d(a,"ARRAY_TYPE",function(){return T}),n.d(a,"RANDOM",function(){return M}),n.d(a,"setMatrixArrayType",function(){return b}),n.d(a,"toRadian",function(){return l}),n.d(a,"equals",function(){return c});var s={};n.r(s),n.d(s,"create",function(){return e}),n.d(s,"clone",function(){return S}),n.d(s,"copy",function(){return w}),n.d(s,"identity",function(){return Z}),n.d(s,"fromValues",function(){return U}),n.d(s,"set",function(){return F}),n.d(s,"transpose",function(){return k}),n.d(s,"invert",function(){return J}),n.d(s,"adjoint",function(){return H}),n.d(s,"determinant",function(){return V}),n.d(s,"multiply",function(){return K}),n.d(s,"rotate",function(){return ne}),n.d(s,"scale",function(){return $}),n.d(s,"fromRotation",function(){return ee}),n.d(s,"fromScaling",function(){return N}),n.d(s,"str",function(){return ae}),n.d(s,"frob",function(){return oe}),n.d(s,"LDU",function(){return re}),n.d(s,"add",function(){return de}),n.d(s,"subtract",function(){return Y}),n.d(s,"exactEquals",function(){return Q}),n.d(s,"equals",function(){return te}),n.d(s,"multiplyScalar",function(){return he}),n.d(s,"multiplyScalarAndAdd",function(){return ce}),n.d(s,"mul",function(){return ve}),n.d(s,"sub",function(){return Ae});var d={};n.r(d),n.d(d,"create",function(){return Ie}),n.d(d,"clone",function(){return Re}),n.d(d,"fromValues",function(){return Ue}),n.d(d,"copy",function(){return ze}),n.d(d,"set",function(){return je}),n.d(d,"add",function(){return qe}),n.d(d,"subtract",function(){return Fe}),n.d(d,"multiply",function(){return He}),n.d(d,"divide",function(){return Ke}),n.d(d,"ceil",function(){return Ve}),n.d(d,"floor",function(){return kt}),n.d(d,"min",function(){return dt}),n.d(d,"max",function(){return ln}),n.d(d,"round",function(){return sn}),n.d(d,"scale",function(){return It}),n.d(d,"scaleAndAdd",function(){return cn}),n.d(d,"distance",function(){return Rt}),n.d(d,"squaredDistance",function(){return Pt}),n.d(d,"length",function(){return xt}),n.d(d,"squaredLength",function(){return Dt}),n.d(d,"negate",function(){return bt}),n.d(d,"inverse",function(){return zt}),n.d(d,"normalize",function(){return Lt}),n.d(d,"dot",function(){return Ut}),n.d(d,"cross",function(){return Tt}),n.d(d,"lerp",function(){return dn}),n.d(d,"random",function(){return pn}),n.d(d,"transformMat2",function(){return qt}),n.d(d,"transformMat2d",function(){return fn}),n.d(d,"transformMat3",function(){return Ft}),n.d(d,"transformMat4",function(){return Nt}),n.d(d,"rotate",function(){return Xe}),n.d(d,"angle",function(){return _n}),n.d(d,"zero",function(){return Bt}),n.d(d,"str",function(){return hn}),n.d(d,"exactEquals",function(){return gn}),n.d(d,"equals",function(){return Ot}),n.d(d,"len",function(){return jt}),n.d(d,"sub",function(){return mn}),n.d(d,"mul",function(){return Jt}),n.d(d,"div",function(){return Qt}),n.d(d,"dist",function(){return vn}),n.d(d,"sqrDist",function(){return Yt}),n.d(d,"sqrLen",function(){return yn}),n.d(d,"forEach",function(){return Gt});var f={};n.r(f),n.d(f,"create",function(){return it}),n.d(f,"clone",function(){return pt}),n.d(f,"length",function(){return Ct}),n.d(f,"fromValues",function(){return xn}),n.d(f,"copy",function(){return Ht}),n.d(f,"set",function(){return at}),n.d(f,"add",function(){return wt}),n.d(f,"subtract",function(){return et}),n.d(f,"multiply",function(){return Vt}),n.d(f,"divide",function(){return Wt}),n.d(f,"ceil",function(){return bn}),n.d(f,"floor",function(){return Tn}),n.d(f,"min",function(){return nt}),n.d(f,"max",function(){return St}),n.d(f,"round",function(){return $t}),n.d(f,"scale",function(){return On}),n.d(f,"scaleAndAdd",function(){return Cn}),n.d(f,"distance",function(){return Kt}),n.d(f,"squaredDistance",function(){return Xt}),n.d(f,"squaredLength",function(){return At}),n.d(f,"negate",function(){return wn}),n.d(f,"inverse",function(){return Sn}),n.d(f,"normalize",function(){return en}),n.d(f,"dot",function(){return ut}),n.d(f,"cross",function(){return lt}),n.d(f,"lerp",function(){return ft}),n.d(f,"hermite",function(){return tn}),n.d(f,"bezier",function(){return An}),n.d(f,"random",function(){return Ye}),n.d(f,"transformMat4",function(){return _t}),n.d(f,"transformMat3",function(){return nn}),n.d(f,"transformQuat",function(){return En}),n.d(f,"rotateX",function(){return Mn}),n.d(f,"rotateY",function(){return ht}),n.d(f,"rotateZ",function(){return rn}),n.d(f,"angle",function(){return Zn}),n.d(f,"zero",function(){return kn}),n.d(f,"str",function(){return In}),n.d(f,"exactEquals",function(){return Rn}),n.d(f,"equals",function(){return Pn}),n.d(f,"sub",function(){return on}),n.d(f,"mul",function(){return Dn}),n.d(f,"div",function(){return zn}),n.d(f,"dist",function(){return an}),n.d(f,"sqrDist",function(){return Ln}),n.d(f,"len",function(){return Et}),n.d(f,"sqrLen",function(){return Un}),n.d(f,"forEach",function(){return un});var x=1e-6,T=typeof Float32Array<"u"?Float32Array:Array,M=Math.random;function b(m){T=m}var u=Math.PI/180;function l(m){return m*u}function c(m,C){return Math.abs(m-C)<=x*Math.max(1,Math.abs(m),Math.abs(C))}function e(){var m=new T(4);return T!=Float32Array&&(m[1]=0,m[2]=0),m[0]=1,m[3]=1,m}function S(m){var C=new T(4);return C[0]=m[0],C[1]=m[1],C[2]=m[2],C[3]=m[3],C}function w(m,C){return m[0]=C[0],m[1]=C[1],m[2]=C[2],m[3]=C[3],m}function Z(m){return m[0]=1,m[1]=0,m[2]=0,m[3]=1,m}function U(m,C,D,G){var X=new T(4);return X[0]=m,X[1]=C,X[2]=D,X[3]=G,X}function F(m,C,D,G,X){return m[0]=C,m[1]=D,m[2]=G,m[3]=X,m}function k(m,C){if(m===C){var D=C[1];m[1]=C[2],m[2]=D}else m[0]=C[0],m[1]=C[2],m[2]=C[1],m[3]=C[3];return m}function J(m,C){var D=C[0],G=C[1],X=C[2],W=C[3],_e=D*W-X*G;return _e?(m[0]=W*(_e=1/_e),m[1]=-G*_e,m[2]=-X*_e,m[3]=D*_e,m):null}function H(m,C){var D=C[0];return m[0]=C[3],m[1]=-C[1],m[2]=-C[2],m[3]=D,m}function V(m){return m[0]*m[3]-m[2]*m[1]}function K(m,C,D){var G=C[0],X=C[1],W=C[2],_e=C[3],me=D[0],Se=D[1],Pe=D[2],Le=D[3];return m[0]=G*me+W*Se,m[1]=X*me+_e*Se,m[2]=G*Pe+W*Le,m[3]=X*Pe+_e*Le,m}function ne(m,C,D){var G=C[0],X=C[1],W=C[2],_e=C[3],me=Math.sin(D),Se=Math.cos(D);return m[0]=G*Se+W*me,m[1]=X*Se+_e*me,m[2]=G*-me+W*Se,m[3]=X*-me+_e*Se,m}function $(m,C,D){var X=C[1],W=C[2],_e=C[3],me=D[0],Se=D[1];return m[0]=C[0]*me,m[1]=X*me,m[2]=W*Se,m[3]=_e*Se,m}function ee(m,C){var D=Math.sin(C),G=Math.cos(C);return m[0]=G,m[1]=D,m[2]=-D,m[3]=G,m}function N(m,C){return m[0]=C[0],m[1]=0,m[2]=0,m[3]=C[1],m}function ae(m){return"mat2("+m[0]+", "+m[1]+", "+m[2]+", "+m[3]+")"}function oe(m){return Math.hypot(m[0],m[1],m[2],m[3])}function re(m,C,D,G){return m[2]=G[2]/G[0],D[0]=G[0],D[1]=G[1],D[3]=G[3]-m[2]*D[1],[m,C,D]}function de(m,C,D){return m[0]=C[0]+D[0],m[1]=C[1]+D[1],m[2]=C[2]+D[2],m[3]=C[3]+D[3],m}function Y(m,C,D){return m[0]=C[0]-D[0],m[1]=C[1]-D[1],m[2]=C[2]-D[2],m[3]=C[3]-D[3],m}function Q(m,C){return m[0]===C[0]&&m[1]===C[1]&&m[2]===C[2]&&m[3]===C[3]}function te(m,C){var D=m[0],G=m[1],X=m[2],W=m[3],_e=C[0],me=C[1],Se=C[2],Pe=C[3];return Math.abs(D-_e)<=x*Math.max(1,Math.abs(D),Math.abs(_e))&&Math.abs(G-me)<=x*Math.max(1,Math.abs(G),Math.abs(me))&&Math.abs(X-Se)<=x*Math.max(1,Math.abs(X),Math.abs(Se))&&Math.abs(W-Pe)<=x*Math.max(1,Math.abs(W),Math.abs(Pe))}function he(m,C,D){return m[0]=C[0]*D,m[1]=C[1]*D,m[2]=C[2]*D,m[3]=C[3]*D,m}function ce(m,C,D,G){return m[0]=C[0]+D[0]*G,m[1]=C[1]+D[1]*G,m[2]=C[2]+D[2]*G,m[3]=C[3]+D[3]*G,m}Math.hypot||(Math.hypot=function(){for(var m=0,C=arguments.length;C--;)m+=arguments[C]*arguments[C];return Math.sqrt(m)});var ve=K,Ae=Y;function Ie(){var m=new T(2);return T!=Float32Array&&(m[0]=0,m[1]=0),m}function Re(m){var C=new T(2);return C[0]=m[0],C[1]=m[1],C}function Ue(m,C){var D=new T(2);return D[0]=m,D[1]=C,D}function ze(m,C){return m[0]=C[0],m[1]=C[1],m}function je(m,C,D){return m[0]=C,m[1]=D,m}function qe(m,C,D){return m[0]=C[0]+D[0],m[1]=C[1]+D[1],m}function Fe(m,C,D){return m[0]=C[0]-D[0],m[1]=C[1]-D[1],m}function He(m,C,D){return m[0]=C[0]*D[0],m[1]=C[1]*D[1],m}function Ke(m,C,D){return m[0]=C[0]/D[0],m[1]=C[1]/D[1],m}function Ve(m,C){return m[0]=Math.ceil(C[0]),m[1]=Math.ceil(C[1]),m}function kt(m,C){return m[0]=Math.floor(C[0]),m[1]=Math.floor(C[1]),m}function dt(m,C,D){return m[0]=Math.min(C[0],D[0]),m[1]=Math.min(C[1],D[1]),m}function ln(m,C,D){return m[0]=Math.max(C[0],D[0]),m[1]=Math.max(C[1],D[1]),m}function sn(m,C){return m[0]=Math.round(C[0]),m[1]=Math.round(C[1]),m}function It(m,C,D){return m[0]=C[0]*D,m[1]=C[1]*D,m}function cn(m,C,D,G){return m[0]=C[0]+D[0]*G,m[1]=C[1]+D[1]*G,m}function Rt(m,C){return Math.hypot(C[0]-m[0],C[1]-m[1])}function Pt(m,C){var D=C[0]-m[0],G=C[1]-m[1];return D*D+G*G}function xt(m){return Math.hypot(m[0],m[1])}function Dt(m){var C=m[0],D=m[1];return C*C+D*D}function bt(m,C){return m[0]=-C[0],m[1]=-C[1],m}function zt(m,C){return m[0]=1/C[0],m[1]=1/C[1],m}function Lt(m,C){var D=C[0],G=C[1],X=D*D+G*G;return X>0&&(X=1/Math.sqrt(X)),m[0]=C[0]*X,m[1]=C[1]*X,m}function Ut(m,C){return m[0]*C[0]+m[1]*C[1]}function Tt(m,C,D){var G=C[0]*D[1]-C[1]*D[0];return m[0]=m[1]=0,m[2]=G,m}function dn(m,C,D,G){var X=C[0],W=C[1];return m[0]=X+G*(D[0]-X),m[1]=W+G*(D[1]-W),m}function pn(m,C){C=C||1;var D=2*M()*Math.PI;return m[0]=Math.cos(D)*C,m[1]=Math.sin(D)*C,m}function qt(m,C,D){var G=C[0],X=C[1];return m[0]=D[0]*G+D[2]*X,m[1]=D[1]*G+D[3]*X,m}function fn(m,C,D){var G=C[0],X=C[1];return m[0]=D[0]*G+D[2]*X+D[4],m[1]=D[1]*G+D[3]*X+D[5],m}function Ft(m,C,D){var G=C[0],X=C[1];return m[0]=D[0]*G+D[3]*X+D[6],m[1]=D[1]*G+D[4]*X+D[7],m}function Nt(m,C,D){var G=C[0],X=C[1];return m[0]=D[0]*G+D[4]*X+D[12],m[1]=D[1]*G+D[5]*X+D[13],m}function Xe(m,C,D,G){var X=C[0]-D[0],W=C[1]-D[1],_e=Math.sin(G),me=Math.cos(G);return m[0]=X*me-W*_e+D[0],m[1]=X*_e+W*me+D[1],m}function _n(m,C){var D=m[0],G=m[1],X=C[0],W=C[1],_e=Math.sqrt(D*D+G*G)*Math.sqrt(X*X+W*W);return Math.acos(Math.min(Math.max(_e&&(D*X+G*W)/_e,-1),1))}function Bt(m){return m[0]=0,m[1]=0,m}function hn(m){return"vec2("+m[0]+", "+m[1]+")"}function gn(m,C){return m[0]===C[0]&&m[1]===C[1]}function Ot(m,C){var D=m[0],G=m[1],X=C[0],W=C[1];return Math.abs(D-X)<=x*Math.max(1,Math.abs(D),Math.abs(X))&&Math.abs(G-W)<=x*Math.max(1,Math.abs(G),Math.abs(W))}var tt,jt=xt,mn=Fe,Jt=He,Qt=Ke,vn=Rt,Yt=Pt,yn=Dt,Gt=(tt=Ie(),function(m,C,D,G,X,W){var _e,me;for(C||(C=2),D||(D=0),me=G?Math.min(G*C+D,m.length):m.length,_e=D;_e<me;_e+=C)tt[0]=m[_e],tt[1]=m[_e+1],X(tt,tt,W),m[_e]=tt[0],m[_e+1]=tt[1];return m});function it(){var m=new T(3);return T!=Float32Array&&(m[0]=0,m[1]=0,m[2]=0),m}function pt(m){var C=new T(3);return C[0]=m[0],C[1]=m[1],C[2]=m[2],C}function Ct(m){return Math.hypot(m[0],m[1],m[2])}function xn(m,C,D){var G=new T(3);return G[0]=m,G[1]=C,G[2]=D,G}function Ht(m,C){return m[0]=C[0],m[1]=C[1],m[2]=C[2],m}function at(m,C,D,G){return m[0]=C,m[1]=D,m[2]=G,m}function wt(m,C,D){return m[0]=C[0]+D[0],m[1]=C[1]+D[1],m[2]=C[2]+D[2],m}function et(m,C,D){return m[0]=C[0]-D[0],m[1]=C[1]-D[1],m[2]=C[2]-D[2],m}function Vt(m,C,D){return m[0]=C[0]*D[0],m[1]=C[1]*D[1],m[2]=C[2]*D[2],m}function Wt(m,C,D){return m[0]=C[0]/D[0],m[1]=C[1]/D[1],m[2]=C[2]/D[2],m}function bn(m,C){return m[0]=Math.ceil(C[0]),m[1]=Math.ceil(C[1]),m[2]=Math.ceil(C[2]),m}function Tn(m,C){return m[0]=Math.floor(C[0]),m[1]=Math.floor(C[1]),m[2]=Math.floor(C[2]),m}function nt(m,C,D){return m[0]=Math.min(C[0],D[0]),m[1]=Math.min(C[1],D[1]),m[2]=Math.min(C[2],D[2]),m}function St(m,C,D){return m[0]=Math.max(C[0],D[0]),m[1]=Math.max(C[1],D[1]),m[2]=Math.max(C[2],D[2]),m}function $t(m,C){return m[0]=Math.round(C[0]),m[1]=Math.round(C[1]),m[2]=Math.round(C[2]),m}function On(m,C,D){return m[0]=C[0]*D,m[1]=C[1]*D,m[2]=C[2]*D,m}function Cn(m,C,D,G){return m[0]=C[0]+D[0]*G,m[1]=C[1]+D[1]*G,m[2]=C[2]+D[2]*G,m}function Kt(m,C){return Math.hypot(C[0]-m[0],C[1]-m[1],C[2]-m[2])}function Xt(m,C){var D=C[0]-m[0],G=C[1]-m[1],X=C[2]-m[2];return D*D+G*G+X*X}function At(m){var C=m[0],D=m[1],G=m[2];return C*C+D*D+G*G}function wn(m,C){return m[0]=-C[0],m[1]=-C[1],m[2]=-C[2],m}function Sn(m,C){return m[0]=1/C[0],m[1]=1/C[1],m[2]=1/C[2],m}function en(m,C){var D=C[0],G=C[1],X=C[2],W=D*D+G*G+X*X;return W>0&&(W=1/Math.sqrt(W)),m[0]=C[0]*W,m[1]=C[1]*W,m[2]=C[2]*W,m}function ut(m,C){return m[0]*C[0]+m[1]*C[1]+m[2]*C[2]}function lt(m,C,D){var G=C[0],X=C[1],W=C[2],_e=D[0],me=D[1],Se=D[2];return m[0]=X*Se-W*me,m[1]=W*_e-G*Se,m[2]=G*me-X*_e,m}function ft(m,C,D,G){var X=C[0],W=C[1],_e=C[2];return m[0]=X+G*(D[0]-X),m[1]=W+G*(D[1]-W),m[2]=_e+G*(D[2]-_e),m}function tn(m,C,D,G,X,W){var _e=W*W,me=_e*(2*W-3)+1,Se=_e*(W-2)+W,Pe=_e*(W-1),Le=_e*(3-2*W);return m[0]=C[0]*me+D[0]*Se+G[0]*Pe+X[0]*Le,m[1]=C[1]*me+D[1]*Se+G[1]*Pe+X[1]*Le,m[2]=C[2]*me+D[2]*Se+G[2]*Pe+X[2]*Le,m}function An(m,C,D,G,X,W){var _e=1-W,me=_e*_e,Se=W*W,Pe=me*_e,Le=3*W*me,We=3*Se*_e,$e=Se*W;return m[0]=C[0]*Pe+D[0]*Le+G[0]*We+X[0]*$e,m[1]=C[1]*Pe+D[1]*Le+G[1]*We+X[1]*$e,m[2]=C[2]*Pe+D[2]*Le+G[2]*We+X[2]*$e,m}function Ye(m,C){C=C||1;var D=2*M()*Math.PI,G=2*M()-1,X=Math.sqrt(1-G*G)*C;return m[0]=Math.cos(D)*X,m[1]=Math.sin(D)*X,m[2]=G*C,m}function _t(m,C,D){var G=C[0],X=C[1],W=C[2],_e=D[3]*G+D[7]*X+D[11]*W+D[15];return m[0]=(D[0]*G+D[4]*X+D[8]*W+D[12])/(_e=_e||1),m[1]=(D[1]*G+D[5]*X+D[9]*W+D[13])/_e,m[2]=(D[2]*G+D[6]*X+D[10]*W+D[14])/_e,m}function nn(m,C,D){var G=C[0],X=C[1],W=C[2];return m[0]=G*D[0]+X*D[3]+W*D[6],m[1]=G*D[1]+X*D[4]+W*D[7],m[2]=G*D[2]+X*D[5]+W*D[8],m}function En(m,C,D){var G=D[0],X=D[1],W=D[2],me=C[0],Se=C[1],Pe=C[2],Le=X*Pe-W*Se,We=W*me-G*Pe,$e=G*Se-X*me,rt=X*$e-W*We,gt=W*Le-G*$e,Mt=G*We-X*Le,A=2*D[3];return We*=A,$e*=A,gt*=2,Mt*=2,m[0]=me+(Le*=A)+(rt*=2),m[1]=Se+We+gt,m[2]=Pe+$e+Mt,m}function Mn(m,C,D,G){var X=[],W=[];return X[0]=C[0]-D[0],X[1]=C[1]-D[1],X[2]=C[2]-D[2],W[0]=X[0],W[1]=X[1]*Math.cos(G)-X[2]*Math.sin(G),W[2]=X[1]*Math.sin(G)+X[2]*Math.cos(G),m[0]=W[0]+D[0],m[1]=W[1]+D[1],m[2]=W[2]+D[2],m}function ht(m,C,D,G){var X=[],W=[];return X[0]=C[0]-D[0],X[1]=C[1]-D[1],X[2]=C[2]-D[2],W[0]=X[2]*Math.sin(G)+X[0]*Math.cos(G),W[1]=X[1],W[2]=X[2]*Math.cos(G)-X[0]*Math.sin(G),m[0]=W[0]+D[0],m[1]=W[1]+D[1],m[2]=W[2]+D[2],m}function rn(m,C,D,G){var X=[],W=[];return X[0]=C[0]-D[0],X[1]=C[1]-D[1],X[2]=C[2]-D[2],W[0]=X[0]*Math.cos(G)-X[1]*Math.sin(G),W[1]=X[0]*Math.sin(G)+X[1]*Math.cos(G),W[2]=X[2],m[0]=W[0]+D[0],m[1]=W[1]+D[1],m[2]=W[2]+D[2],m}function Zn(m,C){var D=m[0],G=m[1],X=m[2],W=C[0],_e=C[1],me=C[2],Se=Math.sqrt(D*D+G*G+X*X)*Math.sqrt(W*W+_e*_e+me*me),Pe=Se&&ut(m,C)/Se;return Math.acos(Math.min(Math.max(Pe,-1),1))}function kn(m){return m[0]=0,m[1]=0,m[2]=0,m}function In(m){return"vec3("+m[0]+", "+m[1]+", "+m[2]+")"}function Rn(m,C){return m[0]===C[0]&&m[1]===C[1]&&m[2]===C[2]}function Pn(m,C){var D=m[0],G=m[1],X=m[2],W=C[0],_e=C[1],me=C[2];return Math.abs(D-W)<=x*Math.max(1,Math.abs(D),Math.abs(W))&&Math.abs(G-_e)<=x*Math.max(1,Math.abs(G),Math.abs(_e))&&Math.abs(X-me)<=x*Math.max(1,Math.abs(X),Math.abs(me))}var m,on=et,Dn=Vt,zn=Wt,an=Kt,Ln=Xt,Et=Ct,Un=At,un=(m=it(),function(C,D,G,X,W,_e){var me,Se;for(D||(D=3),G||(G=0),Se=X?Math.min(X*D+G,C.length):C.length,me=G;me<Se;me+=D)m[0]=C[me],m[1]=C[me+1],m[2]=C[me+2],W(m,m,_e),C[me]=m[0],C[me+1]=m[1],C[me+2]=m[2];return C})},function(o,v,n){var a=n(17).default,s=n(1);o.exports=function(d,f){if(f&&("object"===a(f)||"function"==typeof f))return f;if(void 0!==f)throw new TypeError("Derived constructors may only return object or undefined");return s(d)},o.exports.__esModule=!0,o.exports.default=o.exports},function(o,v,n){var a=n(40);o.exports=function(s,d){if("function"!=typeof d&&null!==d)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(d&&d.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),Object.defineProperty(s,"prototype",{writable:!1}),d&&a(s,d)},o.exports.__esModule=!0,o.exports.default=o.exports},function(o,v,n){var a=n(139)();o.exports=a;try{regeneratorRuntime=a}catch{"object"==typeof globalThis?globalThis.regeneratorRuntime=a:Function("r","regeneratorRuntime = r")(a)}},function(o,v,n){"use strict";v.a={init:function(a,s){a.fill(s)},shuffle:function(a){for(var s=a.length-1;s>0;s--){var d=Math.floor(Math.random()*(s+1)),f=[a[d],a[s]];a[s]=f[0],a[d]=f[1]}return a},toPointList:function(a){var s=a.reduce(function(d,f){var x="[".concat(f.join(","),"]");return d.push(x),d},[]);return"[".concat(s.join(",\r\n"),"]")},threshold:function(a,s,d){return a.reduce(function(f,x){return d.apply(a,[x])>=s&&f.push(x),f},[])},maxIndex:function(a){for(var s=0,d=0;d<a.length;d++)a[d]>a[s]&&(s=d);return s},max:function(a){for(var s=0,d=0;d<a.length;d++)a[d]>s&&(s=a[d]);return s},sum:function(a){for(var s=a.length,d=0;s--;)d+=a[s];return d}}},function(o,v,n){"use strict";n.d(v,"h",function(){return x}),n.d(v,"i",function(){return M}),n.d(v,"b",function(){return b}),n.d(v,"j",function(){return u}),n.d(v,"e",function(){return l}),n.d(v,"c",function(){return c}),n.d(v,"f",function(){return e}),n.d(v,"g",function(){return S}),n.d(v,"a",function(){return Z}),n.d(v,"d",function(){return F});var a=n(5),s=n(9);a.a.setMatrixArrayType(Array);var d=function(k,J){var H=[],V={rad:0,vec:a.c.clone([0,0])},K={};function ne(ee){K[ee.id]=ee,H.push(ee)}function $(){var ee,N=0;for(ee=0;ee<H.length;ee++)N+=H[ee].rad;V.rad=N/H.length,V.vec=a.c.clone([Math.cos(V.rad),Math.sin(V.rad)])}return ne(k),$(),{add:function(ee){K[ee.id]||(ne(ee),$())},fits:function(ee){return Math.abs(a.c.dot(ee.point.vec,V.vec))>J},getPoints:function(){return H},getCenter:function(){return V}}},f=function(k,J,H){return{rad:k[H],point:k,id:J}};function x(k,J){return{x:k,y:J,toVec2:function(){return a.c.clone([this.x,this.y])},toVec3:function(){return a.d.clone([this.x,this.y,1])},round:function(){return this.x=this.x>0?Math.floor(this.x+.5):Math.floor(this.x-.5),this.y=this.y>0?Math.floor(this.y+.5):Math.floor(this.y-.5),this}}}function M(k,J){var H=function(V){var K,ne=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,$=8-ne;function ee(re,de){for(var Y=0,Q=re;Q<=de;Q++)Y+=K[Q];return Y}function N(re,de){for(var Y=0,Q=re;Q<=de;Q++)Y+=Q*K[Q];return Y}return function ae(){var re,de,Y,Q,te=[0],he=(1<<ne)-1;K=function T(k,J){J||(J=8);for(var H=k.data,V=H.length,K=8-J,ne=new Int32Array(1<<J);V--;)ne[H[V]>>K]++;return ne}(V,ne);for(var ce=1;ce<he;ce++)0==(Y=(re=ee(0,ce))*(de=ee(ce+1,he)))&&(Y=1),Q=N(0,ce)*de-N(ce+1,he)*re,te[ce]=Q*Q/Y;return s.a.maxIndex(te)}()<<$}(k);return function(V,K,ne){ne||(ne=V);for(var $=V.data,ee=$.length,N=ne.data;ee--;)N[ee]=$[ee]<K?1:0}(k,H,J),H}function b(k,J,H){var V,K,ne,$,ee=[];function N(ae){var oe=!1;for(K=0;K<ee.length;K++)(ne=ee[K]).fits(ae)&&(ne.add(ae),oe=!0);return oe}for(H||(H="rad"),V=0;V<k.length;V++)N($=f(k[V],V,H))||ee.push(d($,J));return ee}function u(k,J,H){var V,K,ne,$,ee=0,N=0,ae=[];for(V=0;V<J;V++)ae[V]={score:0,item:null};for(V=0;V<k.length;V++)if((K=H.apply(this,[k[V]]))>N)for((ne=ae[ee]).score=K,ne.item=k[V],N=Number.MAX_VALUE,$=0;$<J;$++)ae[$].score<N&&(N=ae[$].score,ee=$);return ae}function l(k,J,H){for(var V,K=0,ne=J.x,$=Math.floor(k.length/4),ee=J.x/2,N=0,ae=J.x;ne<$;){for(V=0;V<ee;V++)H[N]=(.299*k[4*K+0]+.587*k[4*K+1]+.114*k[4*K+2]+(.299*k[4*(K+1)+0]+.587*k[4*(K+1)+1]+.114*k[4*(K+1)+2])+(.299*k[4*ne+0]+.587*k[4*ne+1]+.114*k[4*ne+2])+(.299*k[4*(ne+1)+0]+.587*k[4*(ne+1)+1]+.114*k[4*(ne+1)+2]))/4,N++,K+=2,ne+=2;K+=ae,ne+=ae}}function c(k,J,H){var V=k.length/4|0;if(H&&!0===H.singleChannel)for(var K=0;K<V;K++)J[K]=k[4*K+0];else for(var ne=0;ne<V;ne++)J[ne]=.299*k[4*ne+0]+.587*k[4*ne+1]+.114*k[4*ne+2]}function e(k,J){for(var H=k.data,V=k.size.x,K=J.data,ne=0,$=V,ee=H.length,N=V/2,ae=0;$<ee;){for(var oe=0;oe<N;oe++)K[ae]=Math.floor((H[ne]+H[ne+1]+H[$]+H[$+1])/4),ae++,ne+=2,$+=2;ne+=V,$+=V}}function S(k){var J=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0],H=k[0],K=k[2],ne=K*k[1],$=ne*(1-Math.abs(H/60%2-1)),ee=K-ne,N=0,ae=0,oe=0;return H<60?(N=ne,ae=$):H<120?(N=$,ae=ne):H<180?(ae=ne,oe=$):H<240?(ae=$,oe=ne):H<300?(N=$,oe=ne):H<360&&(N=ne,oe=$),J[0]=255*(N+ee)|0,J[1]=255*(ae+ee)|0,J[2]=255*(oe+ee)|0,J}function w(k){for(var J=[],H=[],V=1;V<Math.sqrt(k)+1;V++)k%V==0&&(H.push(V),V!==k/V&&J.unshift(Math.floor(k/V)));return H.concat(J)}function Z(k,J){var H,V=w(J.x),K=w(J.y),ne=Math.max(J.x,J.y),$=function(Y,Q){for(var te=0,he=0,ce=[];te<Y.length&&he<Q.length;)Y[te]===Q[he]?(ce.push(Y[te]),te++,he++):Y[te]>Q[he]?he++:te++;return ce}(V,K),ee=[8,10,15,20,32,60,80],N={"x-small":5,small:4,medium:3,large:2,"x-large":1},ae=N[k]||N.medium,oe=ee[ae],re=Math.floor(ne/oe);function de(Y){for(var Q=0,te=Y[Math.floor(Y.length/2)];Q<Y.length-1&&Y[Q]<re;)Q++;return Q>0&&(te=Math.abs(Y[Q]-re)>Math.abs(Y[Q-1]-re)?Y[Q-1]:Y[Q]),re/te<ee[ae+1]/ee[ae]&&re/te>ee[ae-1]/ee[ae]?{x:te,y:te}:null}return(H=de($))||(H=de(w(ne)))||(H=de(w(re*oe))),H}a.a.setMatrixArrayType(Array);var U={top:function(k,J){return"%"===k.unit?Math.floor(J.height*(k.value/100)):null},right:function(k,J){return"%"===k.unit?Math.floor(J.width-J.width*(k.value/100)):null},bottom:function(k,J){return"%"===k.unit?Math.floor(J.height-J.height*(k.value/100)):null},left:function(k,J){return"%"===k.unit?Math.floor(J.width*(k.value/100)):null}};function F(k,J,H){var V={width:k,height:J},K=Object.keys(H).reduce(function(ne,$){var ae,ee=(ae=H[$],{value:parseFloat(ae),unit:(ae.indexOf("%"),"%")}),N=U[$](ee,V);return ne[$]=N,ne},{});return{sx:K.left,sy:K.top,sw:K.right-K.left,sh:K.bottom-K.top}}},function(o,v,n){"use strict";var a=n(61),s=n.n(a),d=n(3),f=n.n(d),x=n(4),T=n.n(x),M=n(0),b=n.n(M),u=n(5),l=n(9),c=n(10);function e(w){if(w<0)throw new Error("expected positive number, received ".concat(w))}u.a.setMatrixArrayType(Array);var S=function(){function w(Z,U){var F=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Uint8Array,k=arguments.length>3?arguments[3]:void 0;f()(this,w),b()(this,"data",void 0),b()(this,"size",void 0),b()(this,"indexMapping",void 0),U?this.data=U:(this.data=new F(Z.x*Z.y),k&&l.a.init(this.data,0)),this.size=Z}return T()(w,[{key:"inImageWithBorder",value:function(Z){var U=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e(U),Z.x>=0&&Z.y>=0&&Z.x<this.size.x+2*U&&Z.y<this.size.y+2*U}},{key:"subImageAsCopy",value:function(Z,U){e(U.x),e(U.y);for(var F=Z.size,k=F.x,J=F.y,H=0;H<k;H++)for(var V=0;V<J;V++)Z.data[V*k+H]=this.data[(U.y+V)*this.size.x+U.x+H];return Z}},{key:"get",value:function(Z,U){return this.data[U*this.size.x+Z]}},{key:"getSafe",value:function(Z,U){if(!this.indexMapping){this.indexMapping={x:[],y:[]};for(var F=0;F<this.size.x;F++)this.indexMapping.x[F]=F,this.indexMapping.x[F+this.size.x]=F;for(var k=0;k<this.size.y;k++)this.indexMapping.y[k]=k,this.indexMapping.y[k+this.size.y]=k}return this.data[this.indexMapping.y[U+this.size.y]*this.size.x+this.indexMapping.x[Z+this.size.x]]}},{key:"set",value:function(Z,U,F){return this.data[U*this.size.x+Z]=F,delete this.indexMapping,this}},{key:"zeroBorder",value:function(){for(var Z=this.size,U=Z.x,F=Z.y,k=0;k<U;k++)this.data[k]=this.data[(F-1)*U+k]=0;for(var J=1;J<F-1;J++)this.data[J*U]=this.data[J*U+(U-1)]=0;return delete this.indexMapping,this}},{key:"moments",value:function(Z){var U,F,k,J,H,V,K,ne,$,ee,N=this.data,ae=this.size.y,oe=this.size.x,re=[],de=[],Y=Math.PI,Q=Y/4;if(Z<=0)return de;for(H=0;H<Z;H++)re[H]={m00:0,m01:0,m10:0,m11:0,m02:0,m20:0,theta:0,rad:0};for(F=0;F<ae;F++)for(J=F*F,U=0;U<oe;U++)(k=N[F*oe+U])>0&&((V=re[k-1]).m00+=1,V.m01+=F,V.m10+=U,V.m11+=U*F,V.m02+=J,V.m20+=U*U);for(H=0;H<Z;H++)V=re[H],isNaN(V.m00)||0===V.m00||(ee=(V.m02/V.m00-($=V.m01/V.m00)*$-(V.m20/V.m00-(ne=V.m10/V.m00)*ne))/(2*(K=V.m11/V.m00-ne*$)),ee=.5*Math.atan(ee)+(K>=0?Q:-Q)+Y,V.theta=(180*ee/Y+90)%180-90,V.theta<0&&(V.theta+=180),V.rad=ee>Y?ee-Y:ee,V.vec=u.c.clone([Math.cos(ee),Math.sin(ee)]),de.push(V));return de}},{key:"getAsRGBA",value:function(){for(var Z=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,U=new Uint8ClampedArray(4*this.size.x*this.size.y),F=0;F<this.size.y;F++)for(var k=0;k<this.size.x;k++){var J=F*this.size.x+k,H=this.get(k,F)*Z;U[4*J+0]=H,U[4*J+1]=H,U[4*J+2]=H,U[4*J+3]=255}return U}},{key:"show",value:function(Z){var U=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;console.warn("* imagewrapper show getcontext 2d");var F=Z.getContext("2d");if(!F)throw new Error("Unable to get canvas context");var k=F.getImageData(0,0,Z.width,Z.height),J=this.getAsRGBA(U);Z.width=this.size.x,Z.height=this.size.y;var H=new ImageData(J,k.width,k.height);F.putImageData(H,0,0)}},{key:"overlay",value:function(Z,U,F){var k=U<0||U>360?360:U,J=[0,1,1],H=[0,0,0],V=[255,255,255],K=[0,0,0];console.warn("* imagewrapper overlay getcontext 2d");var ne=Z.getContext("2d");if(!ne)throw new Error("Unable to get canvas context");for(var $=ne.getImageData(F.x,F.y,this.size.x,this.size.y),ee=$.data,N=this.data.length;N--;){J[0]=this.data[N]*k;var ae=4*N,oe=J[0]<=0?V:J[0]>=360?K:Object(c.g)(J,H),re=s()(oe,3);ee[ae]=re[0],ee[ae+1]=re[1],ee[ae+2]=re[2],ee[ae+3]=255}ne.putImageData($,F.x,F.y)}}]),w}();v.a=S},function(o,v){function n(a,s,d,f,x,T,M){try{var b=a[T](M),u=b.value}catch(l){return void d(l)}b.done?s(u):Promise.resolve(u).then(f,x)}o.exports=function(a){return function(){var s=this,d=arguments;return new Promise(function(f,x){var T=a.apply(s,d);function M(u){n(T,f,x,M,b,"next",u)}function b(u){n(T,f,x,M,b,"throw",u)}M(void 0)})}},o.exports.__esModule=!0,o.exports.default=o.exports},function(o,v,n){var a=n(140);function s(){return typeof Reflect<"u"&&Reflect.get?(o.exports=s=Reflect.get.bind(),o.exports.__esModule=!0,o.exports.default=o.exports):(o.exports=s=function(d,f,x){var T=a(d,f);if(T){var M=Object.getOwnPropertyDescriptor(T,f);return M.get?M.get.call(arguments.length<3?d:x):M.value}},o.exports.__esModule=!0,o.exports.default=o.exports),s.apply(this,arguments)}o.exports=s,o.exports.__esModule=!0,o.exports.default=o.exports},function(o,v){o.exports=function(n){var a=typeof n;return null!=n&&("object"==a||"function"==a)}},function(o,v){o.exports=Array.isArray},function(o,v,n){"use strict";v.a={drawRect:function(a,s,d,f){d.strokeStyle=f.color,d.fillStyle=f.color,d.lineWidth=f.lineWidth||1,d.beginPath(),d.strokeRect(a.x,a.y,s.x,s.y)},drawPath:function(a,s,d,f){d.strokeStyle=f.color,d.fillStyle=f.color,d.lineWidth=f.lineWidth,d.beginPath(),d.moveTo(a[0][s.x],a[0][s.y]);for(var x=1;x<a.length;x++)d.lineTo(a[x][s.x],a[x][s.y]);d.closePath(),d.stroke()},drawImage:function(a,s,d){var f=d.getImageData(0,0,s.x,s.y),x=f.data,T=x.length,M=a.length;if(T/M!=4)return!1;for(;M--;){var b=a[M];x[--T]=255,x[--T]=b,x[--T]=b,x[--T]=b}return d.putImageData(f,0,0),!0}}},function(o,v){function n(a){return o.exports=n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(s){return typeof s}:function(s){return s&&"function"==typeof Symbol&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},o.exports.__esModule=!0,o.exports.default=o.exports,n(a)}o.exports=n,o.exports.__esModule=!0,o.exports.default=o.exports},function(o,v,n){var a=n(73),s=n(128)(function(d,f,x){a(d,f,x)});o.exports=s},function(o,v,n){var a=n(44),s="object"==typeof self&&self&&self.Object===Object&&self,d=a||s||Function("return this")();o.exports=d},function(o,v){o.exports=function(n){return null!=n&&"object"==typeof n}},function(o,v,n){"use strict";v.a={searchDirections:[[0,1],[1,1],[1,0],[1,-1],[0,-1],[-1,-1],[-1,0],[-1,1]],create:function(a,s){var d,f=a.data,x=s.data,T=this.searchDirections,M=a.size.x;function b(l,c,e,S){var w,Z,U;for(w=0;w<T.length;w++){if(f[d=(Z=l.cy+T[l.dir][0])*M+(U=l.cx+T[l.dir][1])]===c&&(0===x[d]||x[d]===e))return x[d]=e,l.cy=Z,l.cx=U,!0;0===x[d]&&(x[d]=S),l.dir=(l.dir+1)%8}return!1}function u(l,c,e){return{dir:e,x:l,y:c,next:null,prev:null}}return{trace:function(l,c,e,S){return b(l,c,e,S)},contourTracing:function(l,c,e,S,w){return function(Z,U,F,k,J){var H,V,K,ne=null,$={cx:U,cy:Z,dir:0};if(b($,k,F,J)){H=ne=u(U,Z,$.dir),K=$.dir,(V=u($.cx,$.cy,0)).prev=H,H.next=V,V.next=null,H=V;var ee=a.size.x*a.size.y,N=0;do{$.dir=($.dir+6)%8,b($,k,F,J),K!==$.dir?(H.dir=$.dir,(V=u($.cx,$.cy,0)).prev=H,H.next=V,V.next=null,H=V):(H.dir=K,H.x=$.cx,H.y=$.cy),K=$.dir}while(($.cx!==U||$.cy!==Z)&&++N<ee);ne.prev=H.prev,H.prev.next=ne}return ne}(l,c,e,S,w)}}}}},function(o,v,n){var a=n(27),s=n(86),d=n(87),f=a?a.toStringTag:void 0;o.exports=function(x){return null==x?void 0===x?"[object Undefined]":"[object Null]":f&&f in Object(x)?s(x):d(x)}},function(o,v,n){"use strict";(function(a){var s,d,f,x,T,M,b,u,l,c,e=n(5),S=n(11),w=n(10),Z=n(9),U=(n(16),n(64)),F=n(21),k=n(65);e.a.setMatrixArrayType(Array);var J,H,V={ctx:{binary:null},dom:{binary:null}},K={x:0,y:0};function ne(N){var ae,oe,re,de,Y,Q,te,he=l.size.x,ce=l.size.y,ve=-l.size.x,Ae=-l.size.y;for(ae=0,oe=0;oe<N.length;oe++)ae+=(de=N[oe]).rad;for((ae=(180*(ae/=N.length)/Math.PI+90)%180-90)<0&&(ae+=180),ae=(180-ae)*Math.PI/180,Y=e.b.copy(e.b.create(),[Math.cos(ae),Math.sin(ae),-Math.sin(ae),Math.cos(ae)]),oe=0;oe<N.length;oe++)for(de=N[oe],re=0;re<4;re++)e.c.transformMat2(de.box[re],de.box[re],Y);for(oe=0;oe<N.length;oe++)for(de=N[oe],re=0;re<4;re++)de.box[re][0]<he&&(he=de.box[re][0]),de.box[re][0]>ve&&(ve=de.box[re][0]),de.box[re][1]<ce&&(ce=de.box[re][1]),de.box[re][1]>Ae&&(Ae=de.box[re][1]);for(Q=[[he,ce],[ve,ce],[ve,Ae],[he,Ae]],te=s.halfSample?2:1,Y=e.b.invert(Y,Y),re=0;re<4;re++)e.c.transformMat2(Q[re],Q[re],Y);for(re=0;re<4;re++)e.c.scale(Q[re],Q[re],te);return Q}function $(N,ae){l.subImageAsCopy(x,Object(w.h)(N,ae)),H.skeletonize()}function ee(N,ae,oe,re){var de,Y,Q,te,he=[],ce=[],ve=Math.ceil(c.x/3);if(N.length>=2){for(de=0;de<N.length;de++)N[de].m00>ve&&he.push(N[de]);if(he.length>=2){for(Q=function(Re){var Ue=Object(w.b)(Re,.9),ze=Object(w.j)(Ue,1,function(He){return He.getPoints().length}),je=[],qe=[];if(1===ze.length){je=ze[0].item.getPoints();for(var Fe=0;Fe<je.length;Fe++)qe.push(je[Fe].point)}return qe}(he),Y=0,de=0;de<Q.length;de++){var Ae,Ie;Y+=null!==(Ae=null===(Ie=Q[de])||void 0===Ie?void 0:Ie.rad)&&void 0!==Ae?Ae:0}Q.length>1&&Q.length>=he.length/4*3&&Q.length>N.length/4&&(Y/=Q.length,te={index:ae[1]*K.x+ae[0],pos:{x:oe,y:re},box:[e.c.clone([oe,re]),e.c.clone([oe+x.size.x,re]),e.c.clone([oe+x.size.x,re+x.size.y]),e.c.clone([oe,re+x.size.y])],moments:Q,rad:Y,vec:e.c.clone([Math.cos(Y),Math.sin(Y)])},ce.push(te))}}return ce}v.a={init:function(N,ae){s=ae,J=N,function(){d=s.halfSample?new S.a({x:J.size.x/2|0,y:J.size.y/2|0}):J,c=Object(w.a)(s.patchSize,d.size),K.x=d.size.x/c.x|0,K.y=d.size.y/c.y|0,l=new S.a(d.size,void 0,Uint8Array,!1),T=new S.a(c,void 0,Array,!0);var oe=new ArrayBuffer(65536);x=new S.a(c,new Uint8Array(oe,0,c.x*c.y)),f=new S.a(c,new Uint8Array(oe,c.x*c.y*3,c.x*c.y),void 0,!0),H=Object(k.a)(typeof window<"u"?window:typeof self<"u"?self:a,{size:c.x},oe),u=new S.a({x:d.size.x/x.size.x|0,y:d.size.y/x.size.y|0},void 0,Array,!0),M=new S.a(u.size,void 0,void 0,!0),b=new S.a(u.size,void 0,Int32Array,!0)}(),function(){if(!s.useWorker&&typeof document<"u"){V.dom.binary=document.createElement("canvas"),V.dom.binary.className="binaryBuffer";var oe=!!s.willReadFrequently;console.warn("* initCanvas willReadFrequently",oe,s),V.ctx.binary=V.dom.binary.getContext("2d",{willReadFrequently:oe}),V.dom.binary.width=l.size.x,V.dom.binary.height=l.size.y}}()},locate:function(){s.halfSample&&Object(w.f)(J,d),Object(w.i)(d,l),l.zeroBorder();var N=function(){var re,de,Y,Q,te,he,ce=[];for(re=0;re<K.x;re++)for(de=0;de<K.y;de++)$(Y=x.size.x*re,Q=x.size.y*de),f.zeroBorder(),Z.a.init(T.data,0),he=U.a.create(f,T).rasterize(0),te=T.moments(he.count),ce=ce.concat(ee(te,[re,de],Y,Q));return ce}();if(N.length<K.x*K.y*.05)return null;var ae=function(re){var de,Y,Q=0,te=0;function he(){var ve;for(ve=0;ve<b.data.length;ve++)if(0===b.data[ve]&&1===M.data[ve])return ve;return b.data.length}function ce(ve){var Re,Ue,ze,je=ve%b.size.x,qe=ve/b.size.x|0;if(ve<b.data.length)for(Re=u.data[ve],b.data[ve]=Q,ze=0;ze<F.a.searchDirections.length;ze++)0!==M.data[Ue=(qe+F.a.searchDirections[ze][0])*b.size.x+(je+F.a.searchDirections[ze][1])]?0===b.data[Ue]&&Math.abs(e.c.dot(u.data[Ue].vec,Re.vec))>.95&&ce(Ue):b.data[Ue]=Number.MAX_VALUE}for(Z.a.init(M.data,0),Z.a.init(b.data,0),Z.a.init(u.data,null),de=0;de<re.length;de++)u.data[(Y=re[de]).index]=Y,M.data[Y.index]=1;for(M.zeroBorder();(te=he())<b.data.length;)Q++,ce(te);return Q}(N);if(ae<1)return null;var oe=function(re){var de,Y,Q=[];for(de=0;de<re;de++)Q.push(0);for(Y=b.data.length;Y--;)b.data[Y]>0&&Q[b.data[Y]-1]++;return(Q=Q.map(function(te,he){return{val:te,label:he+1}})).sort(function(te,he){return he.val-te.val}),Q.filter(function(te){return te.val>=5})}(ae);return 0===oe.length?null:function(re,de){var Y,Q,he,ce=[],ve=[];for(Y=0;Y<re.length;Y++){for(Q=b.data.length,ce.length=0;Q--;)b.data[Q]===re[Y].label&&ce.push(u.data[Q]);(he=ne(ce))&&ve.push(he)}return ve}(oe)},checkImageConstraints:function(N,ae){var oe,re,de=N.getWidth(),Y=N.getHeight(),Q=ae.halfSample?.5:1;N.getConfig().area&&(re=Object(w.d)(de,Y,N.getConfig().area),N.setTopRight({x:re.sx,y:re.sy}),N.setCanvasSize({x:de,y:Y}),de=re.sw,Y=re.sh);var te={x:Math.floor(de*Q),y:Math.floor(Y*Q)};if(oe=Object(w.a)(ae.patchSize,te),N.setWidth(Math.floor(Math.floor(te.x/oe.x)*(1/Q)*oe.x)),N.setHeight(Math.floor(Math.floor(te.y/oe.y)*(1/Q)*oe.y)),N.getWidth()%oe.x==0&&N.getHeight()%oe.y==0)return!0;throw new Error("Image dimensions do not comply with the current settings: Width (".concat(de," )and height (").concat(Y,") must a multiple of ").concat(oe.x))}}}).call(this,n(45))},function(o,v,n){var a=n(75),s=n(76),d=n(77),f=n(78),x=n(79);function T(M){var b=-1,u=null==M?0:M.length;for(this.clear();++b<u;){var l=M[b];this.set(l[0],l[1])}}T.prototype.clear=a,T.prototype.delete=s,T.prototype.get=d,T.prototype.has=f,T.prototype.set=x,o.exports=T},function(o,v,n){var a=n(26);o.exports=function(s,d){for(var f=s.length;f--;)if(a(s[f][0],d))return f;return-1}},function(o,v){o.exports=function(n,a){return n===a||n!=n&&a!=a}},function(o,v,n){var a=n(19).Symbol;o.exports=a},function(o,v,n){var a=n(34)(Object,"create");o.exports=a},function(o,v,n){var a=n(100);o.exports=function(s,d){var f=s.__data__;return a(d)?f["string"==typeof d?"string":"hash"]:f.map}},function(o,v,n){var a=n(115),s=n(20),d=Object.prototype,f=d.hasOwnProperty,x=d.propertyIsEnumerable,T=a(function(){return arguments}())?a:function(M){return s(M)&&f.call(M,"callee")&&!x.call(M,"callee")};o.exports=T},function(o,v){var n=/^(?:0|[1-9]\d*)$/;o.exports=function(a,s){var d=typeof a;return!!(s=s??9007199254740991)&&("number"==d||"symbol"!=d&&n.test(a))&&a>-1&&a%1==0&&a<s}},function(o,v,n){var a=n(15),s=n(147),d=n(148),f=n(151);o.exports=function(x,T){return a(x)?x:s(x,T)?[x]:d(f(x))}},function(o,v,n){var a=n(141),s=n(142),d=n(59),f=n(143);o.exports=function(x){return a(x)||s(x)||d(x)||f()},o.exports.__esModule=!0,o.exports.default=o.exports},function(o,v,n){var a=n(85),s=n(91);o.exports=function(d,f){var x=s(d,f);return a(x)?x:void 0}},function(o,v,n){var a=n(22),s=n(14);o.exports=function(d){if(!s(d))return!1;var f=a(d);return"[object Function]"==f||"[object GeneratorFunction]"==f||"[object AsyncFunction]"==f||"[object Proxy]"==f}},function(o,v,n){var a=n(48);o.exports=function(s,d,f){"__proto__"==d&&a?a(s,d,{configurable:!0,enumerable:!0,value:f,writable:!0}):s[d]=f}},function(o,v){o.exports=function(n){return n.webpackPolyfill||(n.deprecate=function(){},n.paths=[],n.children||(n.children=[]),Object.defineProperty(n,"loaded",{enumerable:!0,get:function(){return n.l}}),Object.defineProperty(n,"id",{enumerable:!0,get:function(){return n.i}}),n.webpackPolyfill=1),n}},function(o,v,n){var a=n(35),s=n(39);o.exports=function(d){return null!=d&&s(d.length)&&!a(d)}},function(o,v){o.exports=function(n){return"number"==typeof n&&n>-1&&n%1==0&&n<=9007199254740991}},function(o,v){function n(a,s){return o.exports=n=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(d,f){return d.__proto__=f,d},o.exports.__esModule=!0,o.exports.default=o.exports,n(a,s)}o.exports=n,o.exports.__esModule=!0,o.exports.default=o.exports},function(o,v,n){var a=n(22),s=n(20);o.exports=function(d){return"symbol"==typeof d||s(d)&&"[object Symbol]"==a(d)}},function(o,v,n){var a=n(41);o.exports=function(s){if("string"==typeof s||a(s))return s;var d=s+"";return"0"==d&&1/s==-1/0?"-0":d}},function(o,v,n){var a=n(34)(n(19),"Map");o.exports=a},function(o,v,n){(function(a){o.exports="object"==typeof a&&a&&a.Object===Object&&a}).call(this,n(45))},function(o,v){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch{"object"==typeof window&&(n=window)}o.exports=n},function(o,v,n){var a=n(92),s=n(99),d=n(101),f=n(102),x=n(103);function T(M){var b=-1,u=null==M?0:M.length;for(this.clear();++b<u;){var l=M[b];this.set(l[0],l[1])}}T.prototype.clear=a,T.prototype.delete=s,T.prototype.get=d,T.prototype.has=f,T.prototype.set=x,o.exports=T},function(o,v,n){var a=n(36),s=n(26);o.exports=function(d,f,x){(void 0!==x&&!s(d[f],x)||void 0===x&&!(f in d))&&a(d,f,x)}},function(o,v,n){var a=n(34),s=function(){try{var d=a(Object,"defineProperty");return d({},"",{}),d}catch{}}();o.exports=s},function(o,v,n){var a=n(114)(Object.getPrototypeOf,Object);o.exports=a},function(o,v){var n=Object.prototype;o.exports=function(a){var s=a&&a.constructor;return a===("function"==typeof s&&s.prototype||n)}},function(o,v,n){(function(a){var s=n(19),d=n(117),f=v&&!v.nodeType&&v,x=f&&"object"==typeof a&&a&&!a.nodeType&&a,T=x&&x.exports===f?s.Buffer:void 0;a.exports=(T?T.isBuffer:void 0)||d}).call(this,n(37)(o))},function(o,v,n){var a=n(119),s=n(120),d=n(121),f=d&&d.isTypedArray,x=f?s(f):a;o.exports=x},function(o,v){o.exports=function(n,a){if(("constructor"!==a||"function"!=typeof n[a])&&"__proto__"!=a)return n[a]}},function(o,v,n){var a=n(36),s=n(26),d=Object.prototype.hasOwnProperty;o.exports=function(f,x,T){var M=f[x];d.call(f,x)&&s(M,T)&&(void 0!==T||x in f)||a(f,x,T)}},function(o,v,n){var a=n(124),s=n(126),d=n(38);o.exports=function(f){return d(f)?a(f,!0):s(f)}},function(o,v){o.exports=function(n){return n}},function(o,v,n){var a=n(130),s=Math.max;o.exports=function(d,f,x){return f=s(void 0===f?d.length-1:f,0),function(){for(var T=arguments,M=-1,b=s(T.length-f,0),u=Array(b);++M<b;)u[M]=T[f+M];M=-1;for(var l=Array(f+1);++M<f;)l[M]=T[M];return l[f]=x(u),a(d,this,l)}}},function(o,v,n){var a=n(131),s=n(133)(a);o.exports=s},function(o,v,n){var a=n(60);o.exports=function(s,d){if(s){if("string"==typeof s)return a(s,d);var f=Object.prototype.toString.call(s).slice(8,-1);return"Object"===f&&s.constructor&&(f=s.constructor.name),"Map"===f||"Set"===f?Array.from(s):"Arguments"===f||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(f)?a(s,d):void 0}},o.exports.__esModule=!0,o.exports.default=o.exports},function(o,v){o.exports=function(n,a){(null==a||a>n.length)&&(a=n.length);for(var s=0,d=new Array(a);s<a;s++)d[s]=n[s];return d},o.exports.__esModule=!0,o.exports.default=o.exports},function(o,v,n){var a=n(136),s=n(137),d=n(59),f=n(138);o.exports=function(x,T){return a(x)||s(x,T)||d(x,T)||f()},o.exports.__esModule=!0,o.exports.default=o.exports},function(o,v,n){var a=n(144),s=n(158)(function(d,f){return null==d?{}:a(d,f)});o.exports=s},function(o,v,n){var a=n(2),s=n(40),d=n(163),f=n(164);function x(T){var M="function"==typeof Map?new Map:void 0;return o.exports=x=function(b){if(null===b||!d(b))return b;if("function"!=typeof b)throw new TypeError("Super expression must either be null or a function");if(void 0!==M){if(M.has(b))return M.get(b);M.set(b,u)}function u(){return f(b,arguments,a(this).constructor)}return u.prototype=Object.create(b.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),s(u,b)},o.exports.__esModule=!0,o.exports.default=o.exports,x(T)}o.exports=x,o.exports.__esModule=!0,o.exports.default=o.exports},function(o,v,n){"use strict";var a=n(21),s={createContour2D:function(){return{dir:null,index:null,firstVertex:null,insideContours:null,nextpeer:null,prevpeer:null}},CONTOUR_DIR:{CW_DIR:0,CCW_DIR:1,UNKNOWN_DIR:2},DIR:{OUTSIDE_EDGE:-32767,INSIDE_EDGE:-32766},create:function(d,f){var x=d.data,T=f.data,M=d.size.x,b=d.size.y,u=a.a.create(d,f);return{rasterize:function(l){var c,e,S,w,Z,U,F,k,J,H,V,K,ne=[],$=0;for(K=0;K<400;K++)ne[K]=0;for(ne[0]=x[0],J=null,U=1;U<b-1;U++)for(w=0,e=ne[0],Z=1;Z<M-1;Z++)if(0===T[V=U*M+Z])if((c=x[V])!==e){if(0===w)ne[S=$+1]=c,e=c,null!==(F=u.contourTracing(U,Z,S,c,s.DIR.OUTSIDE_EDGE))&&($++,w=S,(k=s.createContour2D()).dir=s.CONTOUR_DIR.CW_DIR,k.index=w,k.firstVertex=F,k.nextpeer=J,k.insideContours=null,null!==J&&(J.prevpeer=k),J=k);else if(null!==(F=u.contourTracing(U,Z,s.DIR.INSIDE_EDGE,c,w))){for((k=s.createContour2D()).firstVertex=F,k.insideContours=null,k.dir=0===l?s.CONTOUR_DIR.CCW_DIR:s.CONTOUR_DIR.CW_DIR,k.index=l,H=J;null!==H&&H.index!==w;)H=H.nextpeer;null!==H&&(k.nextpeer=H.insideContours,null!==H.insideContours&&(H.insideContours.prevpeer=k),H.insideContours=k)}}else T[V]=w;else T[V]===s.DIR.OUTSIDE_EDGE||T[V]===s.DIR.INSIDE_EDGE?(w=0,e=T[V]===s.DIR.INSIDE_EDGE?x[V]:ne[0]):e=ne[w=T[V]];for(H=J;null!==H;)H.index=l,H=H.nextpeer;return{cc:J,count:$}},debug:{drawContour:function(l,c){var e,S,w,Z=l.getContext("2d"),U=c;for(Z.strokeStyle="red",Z.fillStyle="red",Z.lineWidth=1,e=null!==U?U.insideContours:null;null!==U;){switch(null!==e?(S=e,e=e.nextpeer):(S=U,e=null!==(U=U.nextpeer)?U.insideContours:null),S.dir){case s.CONTOUR_DIR.CW_DIR:Z.strokeStyle="red";break;case s.CONTOUR_DIR.CCW_DIR:Z.strokeStyle="blue";break;case s.CONTOUR_DIR.UNKNOWN_DIR:Z.strokeStyle="green"}w=S.firstVertex,Z.beginPath(),Z.moveTo(w.x,w.y);do{Z.lineTo((w=w.next).x,w.y)}while(w!==S.firstVertex);Z.stroke()}}}}}};v.a=s},function(o,v,n){"use strict";
/* @preserve ASM BEGIN */
/* @preserve ASM END */v.a=function(a,s,d){var f=new a.Uint8Array(d),x=0|s.size,T=a.Math.imul;function M(U,F){U|=0,F|=0;var k=0,J=0,V=0,K=0,ne=0,$=0,ee=0;for(k=1;(0|k)<(x-1|0);k=k+1|0)for(ee=ee+x|0,J=1;(0|J)<(x-1|0);J=J+1|0)f[F+ee+J|0]=5==(0|(0|f[U+(V=ee-x|0)+(ne=J-1|0)|0])+(0|f[U+V+($=J+1|0)|0])+(0|f[U+ee+J|0])+(0|f[U+(K=ee+x|0)+ne|0])+(0|f[U+K+$|0]))?1:0}function b(U,F,k){U|=0,F|=0,k|=0;var J=0;for(J=0|T(x,x);(0|J)>0;)f[k+(J=J-1|0)|0]=(0|f[U+J|0])-(0|f[F+J|0])|0}function u(U,F,k){U|=0,F|=0,k|=0;var J=0;for(J=0|T(x,x);(0|J)>0;)f[k+(J=J-1|0)|0]=0|f[U+J|0]|f[F+J|0]|0}function l(U){U|=0;var F=0,k=0;for(k=0|T(x,x);(0|k)>0;)F=(0|F)+(0|f[U+(k=k-1|0)|0])|0;return 0|F}function e(U,F){U|=0,F|=0;var k=0,J=0,V=0,K=0,ne=0,$=0,ee=0;for(k=1;(0|k)<(x-1|0);k=k+1|0)for(ee=ee+x|0,J=1;(0|J)<(x-1|0);J=J+1|0)f[F+ee+J|0]=(0|(0|f[U+(V=ee-x|0)+(ne=J-1|0)|0])+(0|f[U+V+($=J+1|0)|0])+(0|f[U+ee+J|0])+(0|f[U+(K=ee+x|0)+ne|0])+(0|f[U+K+$|0]))>0?1:0}function S(U,F){U|=0,F|=0;var k=0;for(k=0|T(x,x);(0|k)>0;)f[F+(k=k-1|0)|0]=0|f[U+k|0]}return{skeletonize:function Z(){var F,k,J,V=0;(function c(U,F){U|=0,F|=0;var k=0;for(k=0|T(x,x);(0|k)>0;)f[U+(k=k-1|0)|0]=F})(J=(k=(F=0|T(x,x))+F|0)+F|0,0),function w(U){U|=0;var F=0,k=0;for(F=0;(0|F)<(x-1|0);F=F+1|0)f[U+F|0]=0,f[U+k|0]=0,f[U+(k=k+x-1|0)|0]=0,k=k+1|0;for(F=0;(0|F)<(0|x);F=F+1|0)f[U+k|0]=0,k=k+1|0}(0);do{M(0,F),e(F,k),b(0,k,k),u(J,k,J),S(F,0),V=0==(0|l(0))|0}while(!V)}}}},,,,,,,function(o,v,n){o.exports=n(166)},function(o,v,n){var a=n(74),s=n(47),d=n(104),f=n(106),x=n(14),T=n(55),M=n(53);o.exports=function b(u,l,c,e,S){u!==l&&d(l,function(w,Z){if(S||(S=new a),x(w))f(u,l,Z,c,b,e,S);else{var U=e?e(M(u,Z),w,Z+"",u,l,S):void 0;void 0===U&&(U=w),s(u,Z,U)}},T)}},function(o,v,n){var a=n(24),s=n(80),d=n(81),f=n(82),x=n(83),T=n(84);function M(b){var u=this.__data__=new a(b);this.size=u.size}M.prototype.clear=s,M.prototype.delete=d,M.prototype.get=f,M.prototype.has=x,M.prototype.set=T,o.exports=M},function(o,v){o.exports=function(){this.__data__=[],this.size=0}},function(o,v,n){var a=n(25),s=Array.prototype.splice;o.exports=function(d){var f=this.__data__,x=a(f,d);return!(x<0||(x==f.length-1?f.pop():s.call(f,x,1),--this.size,0))}},function(o,v,n){var a=n(25);o.exports=function(s){var d=this.__data__,f=a(d,s);return f<0?void 0:d[f][1]}},function(o,v,n){var a=n(25);o.exports=function(s){return a(this.__data__,s)>-1}},function(o,v,n){var a=n(25);o.exports=function(s,d){var f=this.__data__,x=a(f,s);return x<0?(++this.size,f.push([s,d])):f[x][1]=d,this}},function(o,v,n){var a=n(24);o.exports=function(){this.__data__=new a,this.size=0}},function(o,v){o.exports=function(n){var a=this.__data__,s=a.delete(n);return this.size=a.size,s}},function(o,v){o.exports=function(n){return this.__data__.get(n)}},function(o,v){o.exports=function(n){return this.__data__.has(n)}},function(o,v,n){var a=n(24),s=n(43),d=n(46);o.exports=function(f,x){var T=this.__data__;if(T instanceof a){var M=T.__data__;if(!s||M.length<199)return M.push([f,x]),this.size=++T.size,this;T=this.__data__=new d(M)}return T.set(f,x),this.size=T.size,this}},function(o,v,n){var a=n(35),s=n(88),d=n(14),f=n(90),x=/^\[object .+?Constructor\]$/,l=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");o.exports=function(c){return!(!d(c)||s(c))&&(a(c)?l:x).test(f(c))}},function(o,v,n){var a=n(27),s=Object.prototype,d=s.hasOwnProperty,f=s.toString,x=a?a.toStringTag:void 0;o.exports=function(T){var M=d.call(T,x),b=T[x];try{T[x]=void 0;var u=!0}catch{}var l=f.call(T);return u&&(M?T[x]=b:delete T[x]),l}},function(o,v){var n=Object.prototype.toString;o.exports=function(a){return n.call(a)}},function(o,v,n){var a,s=n(89),d=(a=/[^.]+$/.exec(s&&s.keys&&s.keys.IE_PROTO||""))?"Symbol(src)_1."+a:"";o.exports=function(f){return!!d&&d in f}},function(o,v,n){var a=n(19)["__core-js_shared__"];o.exports=a},function(o,v){var n=Function.prototype.toString;o.exports=function(a){if(null!=a){try{return n.call(a)}catch{}try{return a+""}catch{}}return""}},function(o,v){o.exports=function(n,a){return n?.[a]}},function(o,v,n){var a=n(93),s=n(24),d=n(43);o.exports=function(){this.size=0,this.__data__={hash:new a,map:new(d||s),string:new a}}},function(o,v,n){var a=n(94),s=n(95),d=n(96),f=n(97),x=n(98);function T(M){var b=-1,u=null==M?0:M.length;for(this.clear();++b<u;){var l=M[b];this.set(l[0],l[1])}}T.prototype.clear=a,T.prototype.delete=s,T.prototype.get=d,T.prototype.has=f,T.prototype.set=x,o.exports=T},function(o,v,n){var a=n(28);o.exports=function(){this.__data__=a?a(null):{},this.size=0}},function(o,v){o.exports=function(n){var a=this.has(n)&&delete this.__data__[n];return this.size-=a?1:0,a}},function(o,v,n){var a=n(28),s=Object.prototype.hasOwnProperty;o.exports=function(d){var f=this.__data__;if(a){var x=f[d];return"__lodash_hash_undefined__"===x?void 0:x}return s.call(f,d)?f[d]:void 0}},function(o,v,n){var a=n(28),s=Object.prototype.hasOwnProperty;o.exports=function(d){var f=this.__data__;return a?void 0!==f[d]:s.call(f,d)}},function(o,v,n){var a=n(28);o.exports=function(s,d){var f=this.__data__;return this.size+=this.has(s)?0:1,f[s]=a&&void 0===d?"__lodash_hash_undefined__":d,this}},function(o,v,n){var a=n(29);o.exports=function(s){var d=a(this,s).delete(s);return this.size-=d?1:0,d}},function(o,v){o.exports=function(n){var a=typeof n;return"string"==a||"number"==a||"symbol"==a||"boolean"==a?"__proto__"!==n:null===n}},function(o,v,n){var a=n(29);o.exports=function(s){return a(this,s).get(s)}},function(o,v,n){var a=n(29);o.exports=function(s){return a(this,s).has(s)}},function(o,v,n){var a=n(29);o.exports=function(s,d){var f=a(this,s),x=f.size;return f.set(s,d),this.size+=f.size==x?0:1,this}},function(o,v,n){var a=n(105)();o.exports=a},function(o,v){o.exports=function(n){return function(a,s,d){for(var f=-1,x=Object(a),T=d(a),M=T.length;M--;){var b=T[n?M:++f];if(!1===s(x[b],b,x))break}return a}}},function(o,v,n){var a=n(47),s=n(107),d=n(108),f=n(111),x=n(112),T=n(30),M=n(15),b=n(116),u=n(51),l=n(35),c=n(14),e=n(118),S=n(52),w=n(53),Z=n(122);o.exports=function(U,F,k,J,H,V,K){var ne=w(U,k),$=w(F,k),ee=K.get($);if(ee)a(U,k,ee);else{var N=V?V(ne,$,k+"",U,F,K):void 0,ae=void 0===N;if(ae){var oe=M($),re=!oe&&u($),de=!oe&&!re&&S($);N=$,oe||re||de?M(ne)?N=ne:b(ne)?N=f(ne):re?(ae=!1,N=s($,!0)):de?(ae=!1,N=d($,!0)):N=[]:e($)||T($)?(N=ne,T(ne)?N=Z(ne):c(ne)&&!l(ne)||(N=x($))):ae=!1}ae&&(K.set($,N),H(N,$,J,V,K),K.delete($)),a(U,k,N)}}},function(o,v,n){(function(a){var s=n(19),d=v&&!v.nodeType&&v,f=d&&"object"==typeof a&&a&&!a.nodeType&&a,x=f&&f.exports===d?s.Buffer:void 0,T=x?x.allocUnsafe:void 0;a.exports=function(M,b){if(b)return M.slice();var u=M.length,l=T?T(u):new M.constructor(u);return M.copy(l),l}}).call(this,n(37)(o))},function(o,v,n){var a=n(109);o.exports=function(s,d){var f=d?a(s.buffer):s.buffer;return new s.constructor(f,s.byteOffset,s.length)}},function(o,v,n){var a=n(110);o.exports=function(s){var d=new s.constructor(s.byteLength);return new a(d).set(new a(s)),d}},function(o,v,n){var a=n(19).Uint8Array;o.exports=a},function(o,v){o.exports=function(n,a){var s=-1,d=n.length;for(a||(a=Array(d));++s<d;)a[s]=n[s];return a}},function(o,v,n){var a=n(113),s=n(49),d=n(50);o.exports=function(f){return"function"!=typeof f.constructor||d(f)?{}:a(s(f))}},function(o,v,n){var a=n(14),s=Object.create,d=function(){function f(){}return function(x){if(!a(x))return{};if(s)return s(x);f.prototype=x;var T=new f;return f.prototype=void 0,T}}();o.exports=d},function(o,v){o.exports=function(n,a){return function(s){return n(a(s))}}},function(o,v,n){var a=n(22),s=n(20);o.exports=function(d){return s(d)&&"[object Arguments]"==a(d)}},function(o,v,n){var a=n(38),s=n(20);o.exports=function(d){return s(d)&&a(d)}},function(o,v){o.exports=function(){return!1}},function(o,v,n){var a=n(22),s=n(49),d=n(20),T=Function.prototype.toString,M=Object.prototype.hasOwnProperty,b=T.call(Object);o.exports=function(u){if(!d(u)||"[object Object]"!=a(u))return!1;var l=s(u);if(null===l)return!0;var c=M.call(l,"constructor")&&l.constructor;return"function"==typeof c&&c instanceof c&&T.call(c)==b}},function(o,v,n){var a=n(22),s=n(39),d=n(20),f={};f["[object Float32Array]"]=f["[object Float64Array]"]=f["[object Int8Array]"]=f["[object Int16Array]"]=f["[object Int32Array]"]=f["[object Uint8Array]"]=f["[object Uint8ClampedArray]"]=f["[object Uint16Array]"]=f["[object Uint32Array]"]=!0,f["[object Arguments]"]=f["[object Array]"]=f["[object ArrayBuffer]"]=f["[object Boolean]"]=f["[object DataView]"]=f["[object Date]"]=f["[object Error]"]=f["[object Function]"]=f["[object Map]"]=f["[object Number]"]=f["[object Object]"]=f["[object RegExp]"]=f["[object Set]"]=f["[object String]"]=f["[object WeakMap]"]=!1,o.exports=function(x){return d(x)&&s(x.length)&&!!f[a(x)]}},function(o,v){o.exports=function(n){return function(a){return n(a)}}},function(o,v,n){(function(a){var s=n(44),d=v&&!v.nodeType&&v,f=d&&"object"==typeof a&&a&&!a.nodeType&&a,x=f&&f.exports===d&&s.process,T=function(){try{return f&&f.require&&f.require("util").types||x&&x.binding&&x.binding("util")}catch{}}();a.exports=T}).call(this,n(37)(o))},function(o,v,n){var a=n(123),s=n(55);o.exports=function(d){return a(d,s(d))}},function(o,v,n){var a=n(54),s=n(36);o.exports=function(d,f,x,T){var M=!x;x||(x={});for(var b=-1,u=f.length;++b<u;){var l=f[b],c=T?T(x[l],d[l],l,x,d):void 0;void 0===c&&(c=d[l]),M?s(x,l,c):a(x,l,c)}return x}},function(o,v,n){var a=n(125),s=n(30),d=n(15),f=n(51),x=n(31),T=n(52),M=Object.prototype.hasOwnProperty;o.exports=function(b,u){var l=d(b),c=!l&&s(b),e=!l&&!c&&f(b),S=!l&&!c&&!e&&T(b),w=l||c||e||S,Z=w?a(b.length,String):[],U=Z.length;for(var F in b)!u&&!M.call(b,F)||w&&("length"==F||e&&("offset"==F||"parent"==F)||S&&("buffer"==F||"byteLength"==F||"byteOffset"==F)||x(F,U))||Z.push(F);return Z}},function(o,v){o.exports=function(n,a){for(var s=-1,d=Array(n);++s<n;)d[s]=a(s);return d}},function(o,v,n){var a=n(14),s=n(50),d=n(127),f=Object.prototype.hasOwnProperty;o.exports=function(x){if(!a(x))return d(x);var T=s(x),M=[];for(var b in x)("constructor"!=b||!T&&f.call(x,b))&&M.push(b);return M}},function(o,v){o.exports=function(n){var a=[];if(null!=n)for(var s in Object(n))a.push(s);return a}},function(o,v,n){var a=n(129),s=n(134);o.exports=function(d){return a(function(f,x){var T=-1,M=x.length,b=M>1?x[M-1]:void 0,u=M>2?x[2]:void 0;for(b=d.length>3&&"function"==typeof b?(M--,b):void 0,u&&s(x[0],x[1],u)&&(b=M<3?void 0:b,M=1),f=Object(f);++T<M;){var l=x[T];l&&d(f,l,T,b)}return f})}},function(o,v,n){var a=n(56),s=n(57),d=n(58);o.exports=function(f,x){return d(s(f,x,a),f+"")}},function(o,v){o.exports=function(n,a,s){switch(s.length){case 0:return n.call(a);case 1:return n.call(a,s[0]);case 2:return n.call(a,s[0],s[1]);case 3:return n.call(a,s[0],s[1],s[2])}return n.apply(a,s)}},function(o,v,n){var a=n(132),s=n(48),d=n(56);o.exports=s?function(x,T){return s(x,"toString",{configurable:!0,enumerable:!1,value:a(T),writable:!0})}:d},function(o,v){o.exports=function(n){return function(){return n}}},function(o,v){var n=Date.now;o.exports=function(a){var s=0,d=0;return function(){var f=n(),x=16-(f-d);if(d=f,x>0){if(++s>=800)return arguments[0]}else s=0;return a.apply(void 0,arguments)}}},function(o,v,n){var a=n(26),s=n(38),d=n(31),f=n(14);o.exports=function(x,T,M){if(!f(M))return!1;var b=typeof T;return!!("number"==b?s(M)&&d(T,M.length):"string"==b&&T in M)&&a(M[T],x)}},function(o,v){typeof window<"u"&&(window.requestAnimationFrame||(window.requestAnimationFrame=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(n){window.setTimeout(n,1e3/60)})),"function"!=typeof Math.imul&&(Math.imul=function(n,a){var s=65535&n,d=65535&a;return s*d+((n>>>16&65535)*d+s*(a>>>16&65535)<<16>>>0)|0}),"function"!=typeof Object.assign&&(Object.assign=function(n){"use strict";if(null===n)throw new TypeError("Cannot convert undefined or null to object");for(var a=Object(n),s=1;s<arguments.length;s++){var d=arguments[s];if(null!==d)for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(a[f]=d[f])}return a})},function(o,v){o.exports=function(n){if(Array.isArray(n))return n},o.exports.__esModule=!0,o.exports.default=o.exports},function(o,v){o.exports=function(n,a){var s=null==n?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(null!=s){var d,f,x=[],T=!0,M=!1;try{for(s=s.call(n);!(T=(d=s.next()).done)&&(x.push(d.value),!a||x.length!==a);T=!0);}catch(b){M=!0,f=b}finally{try{T||null==s.return||s.return()}finally{if(M)throw f}}return x}},o.exports.__esModule=!0,o.exports.default=o.exports},function(o,v){o.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},o.exports.__esModule=!0,o.exports.default=o.exports},function(o,v,n){var a=n(17).default;function s(){"use strict";
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */o.exports=s=function(){return d},o.exports.__esModule=!0,o.exports.default=o.exports;var d={},f=Object.prototype,x=f.hasOwnProperty,T=Object.defineProperty||function(Y,Q,te){Y[Q]=te.value},M="function"==typeof Symbol?Symbol:{},b=M.iterator||"@@iterator",u=M.asyncIterator||"@@asyncIterator",l=M.toStringTag||"@@toStringTag";function c(Y,Q,te){return Object.defineProperty(Y,Q,{value:te,enumerable:!0,configurable:!0,writable:!0}),Y[Q]}try{c({},"")}catch{c=function(Q,te,he){return Q[te]=he}}function e(Y,Q,te,he){var ve=Object.create((Q&&Q.prototype instanceof Z?Q:Z).prototype),Ae=new oe(he||[]);return T(ve,"_invoke",{value:$(Y,te,Ae)}),ve}function S(Y,Q,te){try{return{type:"normal",arg:Y.call(Q,te)}}catch(he){return{type:"throw",arg:he}}}d.wrap=e;var w={};function Z(){}function U(){}function F(){}var k={};c(k,b,function(){return this});var J=Object.getPrototypeOf,H=J&&J(J(re([])));H&&H!==f&&x.call(H,b)&&(k=H);var V=F.prototype=Z.prototype=Object.create(k);function K(Y){["next","throw","return"].forEach(function(Q){c(Y,Q,function(te){return this._invoke(Q,te)})})}function ne(Y,Q){var te;T(this,"_invoke",{value:function(he,ce){function ve(){return new Q(function(Ae,Ie){!function Re(Ue,ze,je,qe){var Fe=S(Y[Ue],Y,ze);if("throw"!==Fe.type){var He=Fe.arg,Ke=He.value;return Ke&&"object"==a(Ke)&&x.call(Ke,"__await")?Q.resolve(Ke.__await).then(function(Ve){Re("next",Ve,je,qe)},function(Ve){Re("throw",Ve,je,qe)}):Q.resolve(Ke).then(function(Ve){He.value=Ve,je(He)},function(Ve){return Re("throw",Ve,je,qe)})}qe(Fe.arg)}(he,ce,Ae,Ie)})}return te=te?te.then(ve,ve):ve()}})}function $(Y,Q,te){var he="suspendedStart";return function(ce,ve){if("executing"===he)throw new Error("Generator is already running");if("completed"===he){if("throw"===ce)throw ve;return{value:void 0,done:!0}}for(te.method=ce,te.arg=ve;;){var Ae=te.delegate;if(Ae){var Ie=ee(Ae,te);if(Ie){if(Ie===w)continue;return Ie}}if("next"===te.method)te.sent=te._sent=te.arg;else if("throw"===te.method){if("suspendedStart"===he)throw he="completed",te.arg;te.dispatchException(te.arg)}else"return"===te.method&&te.abrupt("return",te.arg);he="executing";var Re=S(Y,Q,te);if("normal"===Re.type){if(he=te.done?"completed":"suspendedYield",Re.arg===w)continue;return{value:Re.arg,done:te.done}}"throw"===Re.type&&(he="completed",te.method="throw",te.arg=Re.arg)}}}function ee(Y,Q){var te=Y.iterator[Q.method];if(void 0===te){if(Q.delegate=null,"throw"===Q.method){if(Y.iterator.return&&(Q.method="return",Q.arg=void 0,ee(Y,Q),"throw"===Q.method))return w;Q.method="throw",Q.arg=new TypeError("The iterator does not provide a 'throw' method")}return w}var he=S(te,Y.iterator,Q.arg);if("throw"===he.type)return Q.method="throw",Q.arg=he.arg,Q.delegate=null,w;var ce=he.arg;return ce?ce.done?(Q[Y.resultName]=ce.value,Q.next=Y.nextLoc,"return"!==Q.method&&(Q.method="next",Q.arg=void 0),Q.delegate=null,w):ce:(Q.method="throw",Q.arg=new TypeError("iterator result is not an object"),Q.delegate=null,w)}function N(Y){var Q={tryLoc:Y[0]};1 in Y&&(Q.catchLoc=Y[1]),2 in Y&&(Q.finallyLoc=Y[2],Q.afterLoc=Y[3]),this.tryEntries.push(Q)}function ae(Y){var Q=Y.completion||{};Q.type="normal",delete Q.arg,Y.completion=Q}function oe(Y){this.tryEntries=[{tryLoc:"root"}],Y.forEach(N,this),this.reset(!0)}function re(Y){if(Y){var Q=Y[b];if(Q)return Q.call(Y);if("function"==typeof Y.next)return Y;if(!isNaN(Y.length)){var te=-1,he=function ce(){for(;++te<Y.length;)if(x.call(Y,te))return ce.value=Y[te],ce.done=!1,ce;return ce.value=void 0,ce.done=!0,ce};return he.next=he}}return{next:de}}function de(){return{value:void 0,done:!0}}return U.prototype=F,T(V,"constructor",{value:F,configurable:!0}),T(F,"constructor",{value:U,configurable:!0}),U.displayName=c(F,l,"GeneratorFunction"),d.isGeneratorFunction=function(Y){var Q="function"==typeof Y&&Y.constructor;return!!Q&&(Q===U||"GeneratorFunction"===(Q.displayName||Q.name))},d.mark=function(Y){return Object.setPrototypeOf?Object.setPrototypeOf(Y,F):(Y.__proto__=F,c(Y,l,"GeneratorFunction")),Y.prototype=Object.create(V),Y},d.awrap=function(Y){return{__await:Y}},K(ne.prototype),c(ne.prototype,u,function(){return this}),d.AsyncIterator=ne,d.async=function(Y,Q,te,he,ce){void 0===ce&&(ce=Promise);var ve=new ne(e(Y,Q,te,he),ce);return d.isGeneratorFunction(Q)?ve:ve.next().then(function(Ae){return Ae.done?Ae.value:ve.next()})},K(V),c(V,l,"Generator"),c(V,b,function(){return this}),c(V,"toString",function(){return"[object Generator]"}),d.keys=function(Y){var Q=Object(Y),te=[];for(var he in Q)te.push(he);return te.reverse(),function ce(){for(;te.length;){var ve=te.pop();if(ve in Q)return ce.value=ve,ce.done=!1,ce}return ce.done=!0,ce}},d.values=re,oe.prototype={constructor:oe,reset:function(Y){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(ae),!Y)for(var Q in this)"t"===Q.charAt(0)&&x.call(this,Q)&&!isNaN(+Q.slice(1))&&(this[Q]=void 0)},stop:function(){this.done=!0;var Y=this.tryEntries[0].completion;if("throw"===Y.type)throw Y.arg;return this.rval},dispatchException:function(Y){if(this.done)throw Y;var Q=this;function te(Re,Ue){return ve.type="throw",ve.arg=Y,Q.next=Re,Ue&&(Q.method="next",Q.arg=void 0),!!Ue}for(var he=this.tryEntries.length-1;he>=0;--he){var ce=this.tryEntries[he],ve=ce.completion;if("root"===ce.tryLoc)return te("end");if(ce.tryLoc<=this.prev){var Ae=x.call(ce,"catchLoc"),Ie=x.call(ce,"finallyLoc");if(Ae&&Ie){if(this.prev<ce.catchLoc)return te(ce.catchLoc,!0);if(this.prev<ce.finallyLoc)return te(ce.finallyLoc)}else if(Ae){if(this.prev<ce.catchLoc)return te(ce.catchLoc,!0)}else{if(!Ie)throw new Error("try statement without catch or finally");if(this.prev<ce.finallyLoc)return te(ce.finallyLoc)}}}},abrupt:function(Y,Q){for(var te=this.tryEntries.length-1;te>=0;--te){var he=this.tryEntries[te];if(he.tryLoc<=this.prev&&x.call(he,"finallyLoc")&&this.prev<he.finallyLoc){var ce=he;break}}ce&&("break"===Y||"continue"===Y)&&ce.tryLoc<=Q&&Q<=ce.finallyLoc&&(ce=null);var ve=ce?ce.completion:{};return ve.type=Y,ve.arg=Q,ce?(this.method="next",this.next=ce.finallyLoc,w):this.complete(ve)},complete:function(Y,Q){if("throw"===Y.type)throw Y.arg;return"break"===Y.type||"continue"===Y.type?this.next=Y.arg:"return"===Y.type?(this.rval=this.arg=Y.arg,this.method="return",this.next="end"):"normal"===Y.type&&Q&&(this.next=Q),w},finish:function(Y){for(var Q=this.tryEntries.length-1;Q>=0;--Q){var te=this.tryEntries[Q];if(te.finallyLoc===Y)return this.complete(te.completion,te.afterLoc),ae(te),w}},catch:function(Y){for(var Q=this.tryEntries.length-1;Q>=0;--Q){var te=this.tryEntries[Q];if(te.tryLoc===Y){var he=te.completion;if("throw"===he.type){var ce=he.arg;ae(te)}return ce}}throw new Error("illegal catch attempt")},delegateYield:function(Y,Q,te){return this.delegate={iterator:re(Y),resultName:Q,nextLoc:te},"next"===this.method&&(this.arg=void 0),w}},d}o.exports=s,o.exports.__esModule=!0,o.exports.default=o.exports},function(o,v,n){var a=n(2);o.exports=function(s,d){for(;!Object.prototype.hasOwnProperty.call(s,d)&&null!==(s=a(s)););return s},o.exports.__esModule=!0,o.exports.default=o.exports},function(o,v,n){var a=n(60);o.exports=function(s){if(Array.isArray(s))return a(s)},o.exports.__esModule=!0,o.exports.default=o.exports},function(o,v){o.exports=function(n){if(typeof Symbol<"u"&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)},o.exports.__esModule=!0,o.exports.default=o.exports},function(o,v){o.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},o.exports.__esModule=!0,o.exports.default=o.exports},function(o,v,n){var a=n(145),s=n(155);o.exports=function(d,f){return a(d,f,function(x,T){return s(d,T)})}},function(o,v,n){var a=n(146),s=n(154),d=n(32);o.exports=function(f,x,T){for(var M=-1,b=x.length,u={};++M<b;){var l=x[M],c=a(f,l);T(c,l)&&s(u,d(l,f),c)}return u}},function(o,v,n){var a=n(32),s=n(42);o.exports=function(d,f){for(var x=0,T=(f=a(f,d)).length;null!=d&&x<T;)d=d[s(f[x++])];return x&&x==T?d:void 0}},function(o,v,n){var a=n(15),s=n(41),d=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,f=/^\w*$/;o.exports=function(x,T){if(a(x))return!1;var M=typeof x;return!("number"!=M&&"symbol"!=M&&"boolean"!=M&&null!=x&&!s(x))||f.test(x)||!d.test(x)||null!=T&&x in Object(T)}},function(o,v,n){var a=n(149),s=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,d=/\\(\\)?/g,f=a(function(x){var T=[];return 46===x.charCodeAt(0)&&T.push(""),x.replace(s,function(M,b,u,l){T.push(u?l.replace(d,"$1"):b||M)}),T});o.exports=f},function(o,v,n){var a=n(150);o.exports=function(s){var d=a(s,function(x){return 500===f.size&&f.clear(),x}),f=d.cache;return d}},function(o,v,n){var a=n(46);function s(d,f){if("function"!=typeof d||null!=f&&"function"!=typeof f)throw new TypeError("Expected a function");var x=function(){var T=arguments,M=f?f.apply(this,T):T[0],b=x.cache;if(b.has(M))return b.get(M);var u=d.apply(this,T);return x.cache=b.set(M,u)||b,u};return x.cache=new(s.Cache||a),x}s.Cache=a,o.exports=s},function(o,v,n){var a=n(152);o.exports=function(s){return null==s?"":a(s)}},function(o,v,n){var a=n(27),s=n(153),d=n(15),f=n(41),x=a?a.prototype:void 0,T=x?x.toString:void 0;o.exports=function M(b){if("string"==typeof b)return b;if(d(b))return s(b,M)+"";if(f(b))return T?T.call(b):"";var u=b+"";return"0"==u&&1/b==-1/0?"-0":u}},function(o,v){o.exports=function(n,a){for(var s=-1,d=null==n?0:n.length,f=Array(d);++s<d;)f[s]=a(n[s],s,n);return f}},function(o,v,n){var a=n(54),s=n(32),d=n(31),f=n(14),x=n(42);o.exports=function(T,M,b,u){if(!f(T))return T;for(var l=-1,c=(M=s(M,T)).length,e=c-1,S=T;null!=S&&++l<c;){var w=x(M[l]),Z=b;if("__proto__"===w||"constructor"===w||"prototype"===w)return T;if(l!=e){var U=S[w];void 0===(Z=u?u(U,w,S):void 0)&&(Z=f(U)?U:d(M[l+1])?[]:{})}a(S,w,Z),S=S[w]}return T}},function(o,v,n){var a=n(156),s=n(157);o.exports=function(d,f){return null!=d&&s(d,f,a)}},function(o,v){o.exports=function(n,a){return null!=n&&a in Object(n)}},function(o,v,n){var a=n(32),s=n(30),d=n(15),f=n(31),x=n(39),T=n(42);o.exports=function(M,b,u){for(var l=-1,c=(b=a(b,M)).length,e=!1;++l<c;){var S=T(b[l]);if(!(e=null!=M&&u(M,S)))break;M=M[S]}return e||++l!=c?e:!!(c=null==M?0:M.length)&&x(c)&&f(S,c)&&(d(M)||s(M))}},function(o,v,n){var a=n(159),s=n(57),d=n(58);o.exports=function(f){return d(s(f,void 0,a),f+"")}},function(o,v,n){var a=n(160);o.exports=function(s){return null!=s&&s.length?a(s,1):[]}},function(o,v,n){var a=n(161),s=n(162);o.exports=function d(f,x,T,M,b){var u=-1,l=f.length;for(T||(T=s),b||(b=[]);++u<l;){var c=f[u];x>0&&T(c)?x>1?d(c,x-1,T,M,b):a(b,c):M||(b[b.length]=c)}return b}},function(o,v){o.exports=function(n,a){for(var s=-1,d=a.length,f=n.length;++s<d;)n[f+s]=a[s];return n}},function(o,v,n){var a=n(27),s=n(30),d=n(15),f=a?a.isConcatSpreadable:void 0;o.exports=function(x){return d(x)||s(x)||!!(f&&x&&x[f])}},function(o,v){o.exports=function(n){return-1!==Function.toString.call(n).indexOf("[native code]")},o.exports.__esModule=!0,o.exports.default=o.exports},function(o,v,n){var a=n(40),s=n(165);function d(f,x,T){return s()?(o.exports=d=Reflect.construct.bind(),o.exports.__esModule=!0,o.exports.default=o.exports):(o.exports=d=function(M,b,u){var l=[null];l.push.apply(l,b);var c=new(Function.bind.apply(M,l));return u&&a(c,u.prototype),c},o.exports.__esModule=!0,o.exports.default=o.exports),d.apply(null,arguments)}o.exports=d,o.exports.__esModule=!0,o.exports.default=o.exports},function(o,v){o.exports=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}},o.exports.__esModule=!0,o.exports.default=o.exports},function(o,v,n){"use strict";n.r(v),n.d(v,"BarcodeDecoder",function(){return wt}),n.d(v,"Readers",function(){return a}),n.d(v,"CameraAccess",function(){return ft}),n.d(v,"ImageDebug",function(){return e.a}),n.d(v,"ImageWrapper",function(){return M.a}),n.d(v,"ResultCollector",function(){return tn});var a={};n.r(a),n.d(a,"BarcodeReader",function(){return oe}),n.d(a,"TwoOfFiveReader",function(){return he}),n.d(a,"NewCodabarReader",function(){return Re}),n.d(a,"Code128Reader",function(){return ze}),n.d(a,"Code32Reader",function(){return It}),n.d(a,"Code39Reader",function(){return dt}),n.d(a,"Code39VINReader",function(){return xt}),n.d(a,"Code93Reader",function(){return Lt}),n.d(a,"EAN2Reader",function(){return Bt}),n.d(a,"EAN5Reader",function(){return Ot}),n.d(a,"EAN8Reader",function(){return jt}),n.d(a,"EANReader",function(){return Xe}),n.d(a,"I2of5Reader",function(){return Jt}),n.d(a,"UPCEReader",function(){return Yt}),n.d(a,"UPCReader",function(){return Gt});var s,A,d=n(17),f=n.n(d),x=n(18),T=n.n(x),M=(n(135),n(11)),b=n(12),u=n.n(b),l=n(8),c=n.n(l),e=n(16),S=n(3),w=n.n(S),Z=n(4),U=n.n(Z),F=n(1),k=n.n(F),J=n(7),H=n.n(J),V=n(6),K=n.n(V),ne=n(2),$=n.n(ne),ee=n(0),N=n.n(ee),ae=n(9);(A=s||(s={}))[A.Forward=1]="Forward",A[A.Reverse=-1]="Reverse";var oe=function(){function A(L,O){w()(this,A),N()(this,"_row",[]),N()(this,"config",{}),N()(this,"supplements",[]),N()(this,"SINGLE_CODE_ERROR",0),N()(this,"FORMAT","unknown"),N()(this,"CONFIG_KEYS",{}),this._row=[],this.config=L||{},O&&(this.supplements=O)}return U()(A,[{key:"_nextUnset",value:function(L){for(var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;i<L.length;i++)if(!L[i])return i;return L.length}},{key:"_matchPattern",value:function(L,O){for(var z,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.SINGLE_CODE_ERROR||1,h=0,g=0,y=0,E=0,q=0,j=0;j<L.length;j++)y+=L[j],E+=O[j];if(y<E)return Number.MAX_VALUE;i*=z=y/E;for(var ie=0;ie<L.length;ie++){if(q=O[ie]*z,(g=Math.abs(L[ie]-q)/q)>i)return Number.MAX_VALUE;h+=g}return h/E}},{key:"_nextSet",value:function(L){for(var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;i<L.length;i++)if(L[i])return i;return L.length}},{key:"_correctBars",value:function(L,O,i){for(var h=i.length,g=0;h--;)(g=L[i[h]]*(1-(1-O)/2))>1&&(L[i[h]]=g)}},{key:"decodePattern",value:function(L){this._row=L;var O=this.decode();return null===O?(this._row.reverse(),(O=this.decode())&&(O.direction=s.Reverse,O.start=this._row.length-O.start,O.end=this._row.length-O.end)):O.direction=s.Forward,O&&(O.format=this.FORMAT),O}},{key:"_matchRange",value:function(L,O,i){var h;for(h=L=L<0?0:L;h<O;h++)if(this._row[h]!==i)return!1;return!0}},{key:"_fillCounters",value:function(){var L=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._nextUnset(this._row),O=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._row.length,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],h=[],g=0;h[g]=0;for(var y=L;y<O;y++)this._row[y]^(i?1:0)?h[g]++:(h[++g]=1,i=!i);return h}},{key:"_toCounters",value:function(L,O){var i=O.length,h=this._row.length,g=!this._row[L],y=0;ae.a.init(O,0);for(var E=L;E<h;E++)if(this._row[E]^(g?1:0))O[y]++;else{if(++y===i)break;O[y]=1,g=!g}return O}},{key:"decodeImage",value:function(L){return null}}],[{key:"Exception",get:function(){return{StartNotFoundException:"Start-Info was not found!",CodeNotFoundException:"Code could not be found!",PatternNotFoundException:"Pattern could not be found!"}}}]),A}();var de=[3,1,3,1,1,1],Y=[3,1,1,1,3],Q=[[1,1,3,3,1],[3,1,1,1,3],[1,3,1,1,3],[3,3,1,1,1],[1,1,3,1,3],[3,1,3,1,1],[1,3,3,1,1],[1,1,1,3,3],[3,1,1,3,1],[1,3,1,3,1]],te=de.reduce(function(A,L){return A+L},0),he=function(A){H()(O,A);var L=function re(A){var L=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var O,i=$()(A);if(L){var h=$()(this).constructor;O=Reflect.construct(i,arguments,h)}else O=i.apply(this,arguments);return K()(this,O)}}(O);function O(){var i;w()(this,O);for(var h=arguments.length,g=new Array(h),y=0;y<h;y++)g[y]=arguments[y];return i=L.call.apply(L,[this].concat(g)),N()(k()(i),"barSpaceRatio",[1,1]),N()(k()(i),"FORMAT","2of5"),N()(k()(i),"SINGLE_CODE_ERROR",.78),N()(k()(i),"AVG_CODE_ERROR",.3),i}return U()(O,[{key:"_findPattern",value:function(i,h){var g=arguments.length>2&&void 0!==arguments[2]&&arguments[2],y=arguments.length>3&&void 0!==arguments[3]&&arguments[3],E=[],z=0,R={error:Number.MAX_VALUE,code:-1,start:0,end:0},q=0,j=0,ie=this.AVG_CODE_ERROR;h||(h=this._nextSet(this._row));for(var pe=0;pe<i.length;pe++)E[pe]=0;for(var le=h;le<this._row.length;le++)if(this._row[le]^(g?1:0))E[z]++;else{if(z===E.length-1){q=0;for(var fe=0;fe<E.length;fe++)q+=E[fe];if((j=this._matchPattern(E,i))<ie)return R.error=j,R.start=le-q,R.end=le,R;if(!y)return null;for(var Te=0;Te<E.length-2;Te++)E[Te]=E[Te+2];E[E.length-2]=0,E[E.length-1]=0,z--}else z++;E[z]=1,g=!g}return null}},{key:"_findStart",value:function(){for(var i=null,h=this._nextSet(this._row),g=1,y=0;!i;){if(!(i=this._findPattern(de,h,!1,!0)))return null;if(g=Math.floor((i.end-i.start)/te),(y=i.start-5*g)>=0&&this._matchRange(y,i.start,0))return i;h=i.end,i=null}return i}},{key:"_verifyTrailingWhitespace",value:function(i){var h=i.end+(i.end-i.start)/2;return h<this._row.length&&this._matchRange(i.end,h,0)?i:null}},{key:"_findEnd",value:function(){this._row.reverse();var i=this._nextSet(this._row),h=this._findPattern(Y,i,!1,!0);if(this._row.reverse(),null===h)return null;var g=h.start;return h.start=this._row.length-h.end,h.end=this._row.length-g,null!==h?this._verifyTrailingWhitespace(h):null}},{key:"_verifyCounterLength",value:function(i){return i.length%10==0}},{key:"_decodeCode",value:function(i){for(var h=this.AVG_CODE_ERROR,g={error:Number.MAX_VALUE,code:-1,start:0,end:0},y=0;y<Q.length;y++){var E=this._matchPattern(i,Q[y]);E<g.error&&(g.code=y,g.error=E)}return g.error<h?g:null}},{key:"_decodePayload",value:function(i,h,g){for(var y=0,E=i.length,z=[0,0,0,0,0],R=null;y<E;){for(var q=0;q<5;q++)z[q]=i[y]*this.barSpaceRatio[0],y+=2;if(!(R=this._decodeCode(z)))return null;h.push("".concat(R.code)),g.push(R)}return R}},{key:"decode",value:function(i,h){var g=this._findStart();if(!g)return null;var y=this._findEnd();if(!y)return null;var E=this._fillCounters(g.end,y.start,!1);if(!this._verifyCounterLength(E))return null;var z=[];z.push(g);var R=[];return this._decodePayload(E,R,z)?R.length<5?null:(z.push(y),{code:R.join(""),start:g.start,end:y.end,startInfo:g,decodedCodes:z,format:this.FORMAT}):null}}]),O}(oe);var ve=[48,49,50,51,52,53,54,55,56,57,45,36,58,47,46,43,65,66,67,68],Ae=[3,6,9,96,18,66,33,36,48,72,12,24,69,81,84,21,26,41,11,14],Ie=[26,41,11,14],Re=function(A){H()(O,A);var L=function ce(A){var L=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var O,i=$()(A);if(L){var h=$()(this).constructor;O=Reflect.construct(i,arguments,h)}else O=i.apply(this,arguments);return K()(this,O)}}(O);function O(){var i;w()(this,O);for(var h=arguments.length,g=new Array(h),y=0;y<h;y++)g[y]=arguments[y];return i=L.call.apply(L,[this].concat(g)),N()(k()(i),"_counters",[]),N()(k()(i),"FORMAT","codabar"),i}return U()(O,[{key:"_computeAlternatingThreshold",value:function(i,h){for(var g=Number.MAX_VALUE,y=0,E=0,z=i;z<h;z+=2)(E=this._counters[z])>y&&(y=E),E<g&&(g=E);return(g+y)/2|0}},{key:"_toPattern",value:function(i){var h=i+7;if(h>this._counters.length)return-1;for(var g=this._computeAlternatingThreshold(i,h),y=this._computeAlternatingThreshold(i+1,h),E=64,R=0,q=0;q<7;q++)this._counters[i+q]>(1&q?y:g)&&(R|=E),E>>=1;return R}},{key:"_isStartEnd",value:function(i){for(var h=0;h<Ie.length;h++)if(Ie[h]===i)return!0;return!1}},{key:"_sumCounters",value:function(i,h){for(var g=0,y=i;y<h;y++)g+=this._counters[y];return g}},{key:"_findStart",value:function(){for(var i=this._nextUnset(this._row),h=1;h<this._counters.length;h++){var g=this._toPattern(h);if(-1!==g&&this._isStartEnd(g))return{start:i+=this._sumCounters(0,h),end:i+this._sumCounters(h,h+8),startCounter:h,endCounter:h+8}}return null}},{key:"_patternToChar",value:function(i){for(var h=0;h<Ae.length;h++)if(Ae[h]===i)return String.fromCharCode(ve[h]);return null}},{key:"_calculatePatternLength",value:function(i){for(var h=0,g=i;g<i+7;g++)h+=this._counters[g];return h}},{key:"_verifyWhitespace",value:function(i,h){return(i-1<=0||this._counters[i-1]>=this._calculatePatternLength(i)/2)&&(h+8>=this._counters.length||this._counters[h+7]>=this._calculatePatternLength(h)/2)}},{key:"_charToPattern",value:function(i){for(var h=i.charCodeAt(0),g=0;g<ve.length;g++)if(ve[g]===h)return Ae[g];return 0}},{key:"_thresholdResultPattern",value:function(i,h){for(var g,y={space:{narrow:{size:0,counts:0,min:0,max:Number.MAX_VALUE},wide:{size:0,counts:0,min:0,max:Number.MAX_VALUE}},bar:{narrow:{size:0,counts:0,min:0,max:Number.MAX_VALUE},wide:{size:0,counts:0,min:0,max:Number.MAX_VALUE}}},E=h,z=0;z<i.length;z++){g=this._charToPattern(i[z]);for(var R=6;R>=0;R--){var q=2==(1&R)?y.bar:y.space,j=1==(1&g)?q.wide:q.narrow;j.size+=this._counters[E+R],j.counts++,g>>=1}E+=8}return["space","bar"].forEach(function(ie){var pe=y[ie];pe.wide.min=Math.floor((pe.narrow.size/pe.narrow.counts+pe.wide.size/pe.wide.counts)/2),pe.narrow.max=Math.ceil(pe.wide.min),pe.wide.max=Math.ceil((2*pe.wide.size+1.5)/pe.wide.counts)}),y}},{key:"_validateResult",value:function(i,h){for(var g,y=this._thresholdResultPattern(i,h),E=h,z=0;z<i.length;z++){g=this._charToPattern(i[z]);for(var R=6;R>=0;R--){var q=1&R?y.space:y.bar,j=1==(1&g)?q.wide:q.narrow,ie=this._counters[E+R];if(ie<j.min||ie>j.max)return!1;g>>=1}E+=8}return!0}},{key:"decode",value:function(i,h){if(this._counters=this._fillCounters(),!(h=this._findStart()))return null;var g,y=h.startCounter,E=[];do{if((g=this._toPattern(y))<0)return null;var z=this._patternToChar(g);if(null===z)return null;if(E.push(z),y+=8,E.length>1&&this._isStartEnd(g))break}while(y<this._counters.length);if(E.length-2<4||!this._isStartEnd(g)||!this._verifyWhitespace(h.startCounter,y-8)||!this._validateResult(E,h.startCounter))return null;var R=h.start+this._sumCounters(h.startCounter,(y=y>this._counters.length?this._counters.length:y)-8);return{code:E.join(""),start:h.start,end:R,startInfo:h,decodedCodes:E,format:this.FORMAT}}}]),O}(oe);var ze=function(A){H()(O,A);var L=function Ue(A){var L=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var O,i=$()(A);if(L){var h=$()(this).constructor;O=Reflect.construct(i,arguments,h)}else O=i.apply(this,arguments);return K()(this,O)}}(O);function O(){var i;w()(this,O);for(var h=arguments.length,g=new Array(h),y=0;y<h;y++)g[y]=arguments[y];return i=L.call.apply(L,[this].concat(g)),N()(k()(i),"CODE_SHIFT",98),N()(k()(i),"CODE_C",99),N()(k()(i),"CODE_B",100),N()(k()(i),"CODE_A",101),N()(k()(i),"START_CODE_A",103),N()(k()(i),"START_CODE_B",104),N()(k()(i),"START_CODE_C",105),N()(k()(i),"STOP_CODE",106),N()(k()(i),"CODE_PATTERN",[[2,1,2,2,2,2],[2,2,2,1,2,2],[2,2,2,2,2,1],[1,2,1,2,2,3],[1,2,1,3,2,2],[1,3,1,2,2,2],[1,2,2,2,1,3],[1,2,2,3,1,2],[1,3,2,2,1,2],[2,2,1,2,1,3],[2,2,1,3,1,2],[2,3,1,2,1,2],[1,1,2,2,3,2],[1,2,2,1,3,2],[1,2,2,2,3,1],[1,1,3,2,2,2],[1,2,3,1,2,2],[1,2,3,2,2,1],[2,2,3,2,1,1],[2,2,1,1,3,2],[2,2,1,2,3,1],[2,1,3,2,1,2],[2,2,3,1,1,2],[3,1,2,1,3,1],[3,1,1,2,2,2],[3,2,1,1,2,2],[3,2,1,2,2,1],[3,1,2,2,1,2],[3,2,2,1,1,2],[3,2,2,2,1,1],[2,1,2,1,2,3],[2,1,2,3,2,1],[2,3,2,1,2,1],[1,1,1,3,2,3],[1,3,1,1,2,3],[1,3,1,3,2,1],[1,1,2,3,1,3],[1,3,2,1,1,3],[1,3,2,3,1,1],[2,1,1,3,1,3],[2,3,1,1,1,3],[2,3,1,3,1,1],[1,1,2,1,3,3],[1,1,2,3,3,1],[1,3,2,1,3,1],[1,1,3,1,2,3],[1,1,3,3,2,1],[1,3,3,1,2,1],[3,1,3,1,2,1],[2,1,1,3,3,1],[2,3,1,1,3,1],[2,1,3,1,1,3],[2,1,3,3,1,1],[2,1,3,1,3,1],[3,1,1,1,2,3],[3,1,1,3,2,1],[3,3,1,1,2,1],[3,1,2,1,1,3],[3,1,2,3,1,1],[3,3,2,1,1,1],[3,1,4,1,1,1],[2,2,1,4,1,1],[4,3,1,1,1,1],[1,1,1,2,2,4],[1,1,1,4,2,2],[1,2,1,1,2,4],[1,2,1,4,2,1],[1,4,1,1,2,2],[1,4,1,2,2,1],[1,1,2,2,1,4],[1,1,2,4,1,2],[1,2,2,1,1,4],[1,2,2,4,1,1],[1,4,2,1,1,2],[1,4,2,2,1,1],[2,4,1,2,1,1],[2,2,1,1,1,4],[4,1,3,1,1,1],[2,4,1,1,1,2],[1,3,4,1,1,1],[1,1,1,2,4,2],[1,2,1,1,4,2],[1,2,1,2,4,1],[1,1,4,2,1,2],[1,2,4,1,1,2],[1,2,4,2,1,1],[4,1,1,2,1,2],[4,2,1,1,1,2],[4,2,1,2,1,1],[2,1,2,1,4,1],[2,1,4,1,2,1],[4,1,2,1,2,1],[1,1,1,1,4,3],[1,1,1,3,4,1],[1,3,1,1,4,1],[1,1,4,1,1,3],[1,1,4,3,1,1],[4,1,1,1,1,3],[4,1,1,3,1,1],[1,1,3,1,4,1],[1,1,4,1,3,1],[3,1,1,1,4,1],[4,1,1,1,3,1],[2,1,1,4,1,2],[2,1,1,2,1,4],[2,1,1,2,3,2],[2,3,3,1,1,1,2]]),N()(k()(i),"SINGLE_CODE_ERROR",.64),N()(k()(i),"AVG_CODE_ERROR",.3),N()(k()(i),"FORMAT","code_128"),N()(k()(i),"MODULE_INDICES",{bar:[0,2,4],space:[1,3,5]}),i}return U()(O,[{key:"_decodeCode",value:function(i,h){for(var g={error:Number.MAX_VALUE,code:-1,start:i,end:i,correction:{bar:1,space:1}},y=[0,0,0,0,0,0],z=!this._row[i],R=0,q=i;q<this._row.length;q++)if(this._row[q]^(z?1:0))y[R]++;else{if(R===y.length-1){h&&this._correct(y,h);for(var j=0;j<this.CODE_PATTERN.length;j++){var ie=this._matchPattern(y,this.CODE_PATTERN[j]);ie<g.error&&(g.code=j,g.error=ie)}return g.end=q,-1===g.code||g.error>this.AVG_CODE_ERROR?null:(this.CODE_PATTERN[g.code]&&(g.correction.bar=this.calculateCorrection(this.CODE_PATTERN[g.code],y,this.MODULE_INDICES.bar),g.correction.space=this.calculateCorrection(this.CODE_PATTERN[g.code],y,this.MODULE_INDICES.space)),g)}y[++R]=1,z=!z}return null}},{key:"_correct",value:function(i,h){this._correctBars(i,h.bar,this.MODULE_INDICES.bar),this._correctBars(i,h.space,this.MODULE_INDICES.space)}},{key:"_findStart",value:function(){for(var i=[0,0,0,0,0,0],h=this._nextSet(this._row),g={error:Number.MAX_VALUE,code:-1,start:0,end:0,correction:{bar:1,space:1}},y=!1,E=0,z=h;z<this._row.length;z++)if(this._row[z]^(y?1:0))i[E]++;else{if(E===i.length-1){for(var R=i.reduce(function(pe,le){return pe+le},0),q=this.START_CODE_A;q<=this.START_CODE_C;q++){var j=this._matchPattern(i,this.CODE_PATTERN[q]);j<g.error&&(g.code=q,g.error=j)}if(g.error<this.AVG_CODE_ERROR)return g.start=z-R,g.end=z,g.correction.bar=this.calculateCorrection(this.CODE_PATTERN[g.code],i,this.MODULE_INDICES.bar),g.correction.space=this.calculateCorrection(this.CODE_PATTERN[g.code],i,this.MODULE_INDICES.space),g;for(var ie=0;ie<4;ie++)i[ie]=i[ie+2];i[4]=0,i[5]=0,E--}else E++;i[E]=1,y=!y}return null}},{key:"decode",value:function(i,h){var g=this,y=this._findStart();if(null===y)return null;var E={code:y.code,start:y.start,end:y.end,correction:{bar:y.correction.bar,space:y.correction.space}},z=[];z.push(E);for(var R=E.code,q=function(Oe){switch(Oe){case g.START_CODE_A:return g.CODE_A;case g.START_CODE_B:return g.CODE_B;case g.START_CODE_C:return g.CODE_C;default:return null}}(E.code),j=!1,ie=!1,pe=ie,le=!0,fe=0,Te=[],we=[];!j;){if(pe=ie,ie=!1,null!==(E=this._decodeCode(E.end,E.correction)))switch(E.code!==this.STOP_CODE&&(le=!0),E.code!==this.STOP_CODE&&(Te.push(E.code),R+=++fe*E.code),z.push(E),q){case this.CODE_A:if(E.code<64)we.push(String.fromCharCode(32+E.code));else if(E.code<96)we.push(String.fromCharCode(E.code-64));else switch(E.code!==this.STOP_CODE&&(le=!1),E.code){case this.CODE_SHIFT:ie=!0,q=this.CODE_B;break;case this.CODE_B:q=this.CODE_B;break;case this.CODE_C:q=this.CODE_C;break;case this.STOP_CODE:j=!0}break;case this.CODE_B:if(E.code<96)we.push(String.fromCharCode(32+E.code));else switch(E.code!==this.STOP_CODE&&(le=!1),E.code){case this.CODE_SHIFT:ie=!0,q=this.CODE_A;break;case this.CODE_A:q=this.CODE_A;break;case this.CODE_C:q=this.CODE_C;break;case this.STOP_CODE:j=!0}break;case this.CODE_C:if(E.code<100)we.push(E.code<10?"0"+E.code:E.code);else switch(E.code!==this.STOP_CODE&&(le=!1),E.code){case this.CODE_A:q=this.CODE_A;break;case this.CODE_B:q=this.CODE_B;break;case this.STOP_CODE:j=!0}}else j=!0;pe&&(q=q===this.CODE_A?this.CODE_B:this.CODE_A)}return null===E?null:(E.end=this._nextUnset(this._row,E.end),this._verifyTrailingWhitespace(E)?(R-=fe*Te[Te.length-1])%103!==Te[Te.length-1]?null:we.length?(le&&we.splice(we.length-1,1),{code:we.join(""),start:y.start,end:E.end,codeset:q,startInfo:y,decodedCodes:z,endInfo:E,format:this.FORMAT}):null:null)}},{key:"_verifyTrailingWhitespace",value:function(i){var h;return(h=i.end+(i.end-i.start)/2)<this._row.length&&this._matchRange(i.end,h,0)?i:null}},{key:"calculateCorrection",value:function(i,h,g){for(var y=g.length,E=0,z=0;y--;)z+=i[g[y]],E+=h[g[y]];return z/E}}]),O}(oe),je=n(13),qe=n.n(je),Fe=n(33),He=n.n(Fe);var Ve=new Uint16Array(He()("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. *$/+%").map(function(A){return A.charCodeAt(0)})),kt=new Uint16Array([52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,148,168,162,138,42]),dt=function(A){H()(O,A);var L=function Ke(A){var L=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var O,i=$()(A);if(L){var h=$()(this).constructor;O=Reflect.construct(i,arguments,h)}else O=i.apply(this,arguments);return K()(this,O)}}(O);function O(){var i;w()(this,O);for(var h=arguments.length,g=new Array(h),y=0;y<h;y++)g[y]=arguments[y];return i=L.call.apply(L,[this].concat(g)),N()(k()(i),"FORMAT","code_39"),i}return U()(O,[{key:"_findStart",value:function(){for(var i=this._nextSet(this._row),h=i,g=new Uint16Array([0,0,0,0,0,0,0,0,0]),y=0,E=!1,z=i;z<this._row.length;z++)if(this._row[z]^(E?1:0))g[y]++;else{if(y===g.length-1){if(148===this._toPattern(g)){var R=Math.floor(Math.max(0,h-(z-h)/4));if(this._matchRange(R,h,0))return{start:h,end:z}}h+=g[0]+g[1];for(var q=0;q<7;q++)g[q]=g[q+2];g[7]=0,g[8]=0,y--}else y++;g[y]=1,E=!E}return null}},{key:"_toPattern",value:function(i){for(var h=i.length,g=0,y=h,E=0;y>3;){g=this._findNextWidth(i,g),y=0;for(var z=0,R=0;R<h;R++)i[R]>g&&(z|=1<<h-1-R,y++,E+=i[R]);if(3===y){for(var q=0;q<h&&y>0;q++)if(i[q]>g&&(y--,2*i[q]>=E))return-1;return z}}return-1}},{key:"_findNextWidth",value:function(i,h){for(var g=Number.MAX_VALUE,y=0;y<i.length;y++)i[y]<g&&i[y]>h&&(g=i[y]);return g}},{key:"_patternToChar",value:function(i){for(var h=0;h<kt.length;h++)if(kt[h]===i)return String.fromCharCode(Ve[h]);return null}},{key:"_verifyTrailingWhitespace",value:function(i,h,g){var y=ae.a.sum(g);return 3*(h-i-y)>=y}},{key:"decode",value:function(){var i=new Uint16Array([0,0,0,0,0,0,0,0,0]),h=[],g=this._findStart();if(!g)return null;var y,E,z=this._nextSet(this._row,g.end);do{i=this._toCounters(z,i);var R=this._toPattern(i);if(R<0||null===(y=this._patternToChar(R)))return null;h.push(y),E=z,z+=ae.a.sum(i),z=this._nextSet(this._row,z)}while("*"!==y);return h.pop(),h.length&&this._verifyTrailingWhitespace(E,z,i)?{code:h.join(""),start:g.start,end:z,startInfo:g,decodedCodes:h,format:this.FORMAT}:null}}]),O}(oe);var sn=/[AEIO]/g,It=function(A){H()(O,A);var L=function ln(A){var L=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var O,i=$()(A);if(L){var h=$()(this).constructor;O=Reflect.construct(i,arguments,h)}else O=i.apply(this,arguments);return K()(this,O)}}(O);function O(){var i;w()(this,O);for(var h=arguments.length,g=new Array(h),y=0;y<h;y++)g[y]=arguments[y];return i=L.call.apply(L,[this].concat(g)),N()(k()(i),"FORMAT","code_32_reader"),i}return U()(O,[{key:"_decodeCode32",value:function(i){if(/[^0-9BCDFGHJKLMNPQRSTUVWXYZ]/.test(i))return null;for(var h=0,g=0;g<i.length;g++)h=32*h+"0123456789BCDFGHJKLMNPQRSTUVWXYZ".indexOf(i[g]);var y="".concat(h);return y.length<9&&(y=("000000000"+y).slice(-9)),"A"+y}},{key:"_checkChecksum",value:function(i){return!!i}},{key:"decode",value:function(){var i=qe()($()(O.prototype),"decode",this).call(this);if(!i)return null;var h=i.code;if(!h||(h=h.replace(sn,""),!this._checkChecksum(h)))return null;var g=this._decodeCode32(h);return g?(i.code=g,i):null}}]),O}(dt);var Rt=/[IOQ]/g,Pt=/[A-Z0-9]{17}/,xt=function(A){H()(O,A);var L=function cn(A){var L=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var O,i=$()(A);if(L){var h=$()(this).constructor;O=Reflect.construct(i,arguments,h)}else O=i.apply(this,arguments);return K()(this,O)}}(O);function O(){var i;w()(this,O);for(var h=arguments.length,g=new Array(h),y=0;y<h;y++)g[y]=arguments[y];return i=L.call.apply(L,[this].concat(g)),N()(k()(i),"FORMAT","code_39_vin"),i}return U()(O,[{key:"_checkChecksum",value:function(i){return!!i}},{key:"decode",value:function(){var i=qe()($()(O.prototype),"decode",this).call(this);if(!i)return null;var h=i.code;return h&&(h=h.replace(Rt,"")).match(Pt)&&this._checkChecksum(h)?(i.code=h,i):null}}]),O}(dt);var bt=new Uint16Array(He()("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*").map(function(A){return A.charCodeAt(0)})),zt=new Uint16Array([276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350]),Lt=function(A){H()(O,A);var L=function Dt(A){var L=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var O,i=$()(A);if(L){var h=$()(this).constructor;O=Reflect.construct(i,arguments,h)}else O=i.apply(this,arguments);return K()(this,O)}}(O);function O(){var i;w()(this,O);for(var h=arguments.length,g=new Array(h),y=0;y<h;y++)g[y]=arguments[y];return i=L.call.apply(L,[this].concat(g)),N()(k()(i),"FORMAT","code_93"),i}return U()(O,[{key:"_patternToChar",value:function(i){for(var h=0;h<zt.length;h++)if(zt[h]===i)return String.fromCharCode(bt[h]);return null}},{key:"_toPattern",value:function(i){for(var h=i.length,g=i.reduce(function(q,j){return q+j},0),y=0,E=0;E<h;E++){var z=Math.round(9*i[E]/g);if(z<1||z>4)return-1;if(1&E)y<<=z;else for(var R=0;R<z;R++)y=y<<1|1}return y}},{key:"_findStart",value:function(){for(var i=this._nextSet(this._row),h=i,g=new Uint16Array([0,0,0,0,0,0]),y=0,E=!1,z=i;z<this._row.length;z++)if(this._row[z]^(E?1:0))g[y]++;else{if(y===g.length-1){if(350===this._toPattern(g)){var R=Math.floor(Math.max(0,h-(z-h)/4));if(this._matchRange(R,h,0))return{start:h,end:z}}h+=g[0]+g[1];for(var q=0;q<4;q++)g[q]=g[q+2];g[4]=0,g[5]=0,y--}else y++;g[y]=1,E=!E}return null}},{key:"_verifyEnd",value:function(i,h){return!(i===h||!this._row[h])}},{key:"_decodeExtended",value:function(i){for(var h=i.length,g=[],y=0;y<h;y++){var E=i[y];if(E>="a"&&E<="d"){if(y>h-2)return null;var z=i[++y],R=z.charCodeAt(0),q=void 0;switch(E){case"a":if(!(z>="A"&&z<="Z"))return null;q=String.fromCharCode(R-64);break;case"b":if(z>="A"&&z<="E")q=String.fromCharCode(R-38);else if(z>="F"&&z<="J")q=String.fromCharCode(R-11);else if(z>="K"&&z<="O")q=String.fromCharCode(R+16);else if(z>="P"&&z<="S")q=String.fromCharCode(R+43);else{if(!(z>="T"&&z<="Z"))return null;q=String.fromCharCode(127)}break;case"c":if(z>="A"&&z<="O")q=String.fromCharCode(R-32);else{if("Z"!==z)return null;q=":"}break;case"d":if(!(z>="A"&&z<="Z"))return null;q=String.fromCharCode(R+32);break;default:return console.warn("* code_93_reader _decodeExtended hit default case, this may be an error",q),null}g.push(q)}else g.push(E)}return g}},{key:"_matchCheckChar",value:function(i,h,g){var y=i.slice(0,h),E=y.length,z=y.reduce(function(R,q,j){return R+((-1*j+(E-1))%g+1)*bt.indexOf(q.charCodeAt(0))},0);return bt[z%47]===i[h].charCodeAt(0)}},{key:"_verifyChecksums",value:function(i){return this._matchCheckChar(i,i.length-2,20)&&this._matchCheckChar(i,i.length-1,15)}},{key:"decode",value:function(i,h){if(!(h=this._findStart()))return null;var g,y,E=new Uint16Array([0,0,0,0,0,0]),z=[],R=this._nextSet(this._row,h.end);do{E=this._toCounters(R,E);var q=this._toPattern(E);if(q<0||null===(y=this._patternToChar(q)))return null;z.push(y),g=R,R+=ae.a.sum(E),R=this._nextSet(this._row,R)}while("*"!==y);return z.pop(),z.length&&this._verifyEnd(g,R)&&this._verifyChecksums(z)?(z=z.slice(0,z.length-2),null===(z=this._decodeExtended(z))?null:{code:z.join(""),start:h.start,end:R,startInfo:h,decodedCodes:z,format:this.FORMAT}):null}}]),O}(oe);function Ut(A,L){var O=Object.keys(A);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(A);L&&(i=i.filter(function(h){return Object.getOwnPropertyDescriptor(A,h).enumerable})),O.push.apply(O,i)}return O}function Tt(A){for(var L=1;L<arguments.length;L++){var O=null!=arguments[L]?arguments[L]:{};L%2?Ut(Object(O),!0).forEach(function(i){N()(A,i,O[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(A,Object.getOwnPropertyDescriptors(O)):Ut(Object(O)).forEach(function(i){Object.defineProperty(A,i,Object.getOwnPropertyDescriptor(O,i))})}return A}var pn=[1,1,1],qt=[1,1,1,1,1],fn=[1,1,2],Ft=[[3,2,1,1],[2,2,2,1],[2,1,2,2],[1,4,1,1],[1,1,3,2],[1,2,3,1],[1,1,1,4],[1,3,1,2],[1,2,1,3],[3,1,1,2],[1,1,2,3],[1,2,2,2],[2,2,1,2],[1,1,4,1],[2,3,1,1],[1,3,2,1],[4,1,1,1],[2,1,3,1],[3,1,2,1],[2,1,1,3]],Nt=[0,11,13,14,19,25,28,21,22,26],Xe=function(A){H()(O,A);var L=function dn(A){var L=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var O,i=$()(A);if(L){var h=$()(this).constructor;O=Reflect.construct(i,arguments,h)}else O=i.apply(this,arguments);return K()(this,O)}}(O);function O(i,h){var g;return w()(this,O),g=L.call(this,T()({supplements:[]},i),h),N()(k()(g),"FORMAT","ean_13"),N()(k()(g),"SINGLE_CODE_ERROR",.7),N()(k()(g),"STOP_PATTERN",[1,1,1]),g}return U()(O,[{key:"_findPattern",value:function(i,h,g,y){var E=new Array(i.length).fill(0),z={error:Number.MAX_VALUE,start:0,end:0},R=0;h||(h=this._nextSet(this._row));for(var q=!1,j=h;j<this._row.length;j++)if(this._row[j]^(g?1:0))E[R]+=1;else{if(R===E.length-1){var ie=this._matchPattern(E,i);if(ie<.48&&z.error&&ie<z.error)return q=!0,z.error=ie,z.start=j-E.reduce(function(le,fe){return le+fe},0),z.end=j,z;if(y){for(var pe=0;pe<E.length-2;pe++)E[pe]=E[pe+2];E[E.length-2]=0,E[E.length-1]=0,R--}}else R++;E[R]=1,g=!g}return q?z:null}},{key:"_decodeCode",value:function(i,h){var g=[0,0,0,0],E={error:Number.MAX_VALUE,code:-1,start:i,end:i},z=!this._row[i],R=0;h||(h=Ft.length);for(var q=i;q<this._row.length;q++)if(this._row[q]^(z?1:0))g[R]++;else{if(R===g.length-1){for(var j=0;j<h;j++){var ie=this._matchPattern(g,Ft[j]);E.end=q,ie<E.error&&(E.code=j,E.error=ie)}return E.error>.48?null:E}g[++R]=1,z=!z}return null}},{key:"_findStart",value:function(){for(var i=this._nextSet(this._row),h=null;!h;){if(!(h=this._findPattern(pn,i,!1,!0)))return null;var g=h.start-(h.end-h.start);if(g>=0&&this._matchRange(g,h.start,0))return h;i=h.end,h=null}return null}},{key:"_calculateFirstDigit",value:function(i){for(var h=0;h<Nt.length;h++)if(i===Nt[h])return h;return null}},{key:"_decodePayload",value:function(i,h,g){for(var y=Tt({},i),E=0,z=0;z<6;z++){if(!(y=this._decodeCode(y.end)))return null;y.code>=10?(y.code-=10,E|=1<<5-z):E|=0<<5-z,h.push(y.code),g.push(y)}var R=this._calculateFirstDigit(E);if(null===R)return null;h.unshift(R);var q=this._findPattern(qt,y.end,!0,!1);if(null===q||!q.end)return null;g.push(q);for(var j=0;j<6;j++){if(!(q=this._decodeCode(q.end,10)))return null;g.push(q),h.push(q.code)}return q}},{key:"_verifyTrailingWhitespace",value:function(i){var h=i.end+(i.end-i.start);return h<this._row.length&&this._matchRange(i.end,h,0)?i:null}},{key:"_findEnd",value:function(i,h){var g=this._findPattern(this.STOP_PATTERN,i,h,!1);return null!==g?this._verifyTrailingWhitespace(g):null}},{key:"_checksum",value:function(i){for(var h=0,g=i.length-2;g>=0;g-=2)h+=i[g];h*=3;for(var y=i.length-1;y>=0;y-=2)h+=i[y];return h%10==0}},{key:"_decodeExtensions",value:function(i){var h=this._nextSet(this._row,i),g=this._findPattern(fn,h,!1,!1);if(null===g)return null;for(var y=0;y<this.supplements.length;y++)try{var E=this.supplements[y].decode(this._row,g.end);if(null!==E)return{code:E.code,start:h,startInfo:g,end:E.end,decodedCodes:E.decodedCodes,format:this.supplements[y].FORMAT}}catch(z){console.error("* decodeExtensions error in ",this.supplements[y],": ",z)}return null}},{key:"decode",value:function(i,h){var g=new Array,y=new Array,E={},z=this._findStart();if(!z)return null;var R={start:z.start,end:z.end};if(y.push(R),!(R=this._decodePayload(R,g,y))||!(R=this._findEnd(R.end,!1))||(y.push(R),!this._checksum(g)))return null;if(this.supplements.length>0){var q=this._decodeExtensions(R.end);if(!q||!q.decodedCodes)return null;var j=q.decodedCodes[q.decodedCodes.length-1];if(!this._verifyTrailingWhitespace({start:j.start+((j.end-j.start)/2|0),end:j.end}))return null;E={supplement:q,code:g.join("")+q.code}}return Tt(Tt({code:g.join(""),start:z.start,end:R.end,startInfo:z,decodedCodes:y},E),{},{format:this.FORMAT})}}]),O}(oe);var Bt=function(A){H()(O,A);var L=function _n(A){var L=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var O,i=$()(A);if(L){var h=$()(this).constructor;O=Reflect.construct(i,arguments,h)}else O=i.apply(this,arguments);return K()(this,O)}}(O);function O(){var i;w()(this,O);for(var h=arguments.length,g=new Array(h),y=0;y<h;y++)g[y]=arguments[y];return i=L.call.apply(L,[this].concat(g)),N()(k()(i),"FORMAT","ean_2"),i}return U()(O,[{key:"decode",value:function(i,h){i&&(this._row=i);var g=0,y=h,E=this._row.length,z=[],R=[],q=null;if(void 0===y)return null;for(var j=0;j<2&&y<E;j++){if(!(q=this._decodeCode(y)))return null;R.push(q),z.push(q.code%10),q.code>=10&&(g|=1<<1-j),1!==j&&(y=this._nextSet(this._row,q.end),y=this._nextUnset(this._row,y))}if(2!==z.length||parseInt(z.join(""))%4!==g)return null;var ie=this._findStart();return{code:z.join(""),decodedCodes:R,end:q.end,format:this.FORMAT,startInfo:ie,start:ie.start}}}]),O}(Xe);var gn=[24,20,18,17,12,6,3,10,9,5],Ot=function(A){H()(O,A);var L=function hn(A){var L=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var O,i=$()(A);if(L){var h=$()(this).constructor;O=Reflect.construct(i,arguments,h)}else O=i.apply(this,arguments);return K()(this,O)}}(O);function O(){var i;w()(this,O);for(var h=arguments.length,g=new Array(h),y=0;y<h;y++)g[y]=arguments[y];return i=L.call.apply(L,[this].concat(g)),N()(k()(i),"FORMAT","ean_5"),i}return U()(O,[{key:"decode",value:function(i,h){if(void 0===h)return null;i&&(this._row=i);for(var g=0,y=h,E=this._row.length,z=null,R=[],q=[],j=0;j<5&&y<E;j++){if(!(z=this._decodeCode(y)))return null;q.push(z),R.push(z.code%10),z.code>=10&&(g|=1<<4-j),4!==j&&(y=this._nextSet(this._row,z.end),y=this._nextUnset(this._row,y))}if(5!==R.length||function(pe){for(var le=pe.length,fe=0,Te=le-2;Te>=0;Te-=2)fe+=pe[Te];fe*=3;for(var we=le-1;we>=0;we-=2)fe+=pe[we];return(fe*=3)%10}(R)!==function(pe){for(var le=0;le<10;le++)if(pe===gn[le])return le;return null}(g))return null;var ie=this._findStart();return{code:R.join(""),decodedCodes:q,end:z.end,format:this.FORMAT,startInfo:ie,start:ie.start}}}]),O}(Xe);var jt=function(A){H()(O,A);var L=function tt(A){var L=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var O,i=$()(A);if(L){var h=$()(this).constructor;O=Reflect.construct(i,arguments,h)}else O=i.apply(this,arguments);return K()(this,O)}}(O);function O(){var i;w()(this,O);for(var h=arguments.length,g=new Array(h),y=0;y<h;y++)g[y]=arguments[y];return i=L.call.apply(L,[this].concat(g)),N()(k()(i),"FORMAT","ean_8"),i}return U()(O,[{key:"_decodePayload",value:function(i,h,g){for(var y=i,E=0;E<4;E++){if(!(y=this._decodeCode(y.end,10)))return null;h.push(y.code),g.push(y)}if(null===(y=this._findPattern(qt,y.end,!0,!1)))return null;g.push(y);for(var z=0;z<4;z++){if(!(y=this._decodeCode(y.end,10)))return null;g.push(y),h.push(y.code)}return y}}]),O}(Xe);var Jt=function(A){H()(O,A);var L=function mn(A){var L=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var O,i=$()(A);if(L){var h=$()(this).constructor;O=Reflect.construct(i,arguments,h)}else O=i.apply(this,arguments);return K()(this,O)}}(O);function O(i){var h;return w()(this,O),h=L.call(this,T()({normalizeBarSpaceWidth:!1},i)),N()(k()(h),"barSpaceRatio",[1,1]),N()(k()(h),"SINGLE_CODE_ERROR",.78),N()(k()(h),"AVG_CODE_ERROR",.38),N()(k()(h),"START_PATTERN",[1,1,1,1]),N()(k()(h),"STOP_PATTERN",[1,1,3]),N()(k()(h),"CODE_PATTERN",[[1,1,3,3,1],[3,1,1,1,3],[1,3,1,1,3],[3,3,1,1,1],[1,1,3,1,3],[3,1,3,1,1],[1,3,3,1,1],[1,1,1,3,3],[3,1,1,3,1],[1,3,1,3,1]]),N()(k()(h),"MAX_CORRECTION_FACTOR",5),N()(k()(h),"FORMAT","i2of5"),i.normalizeBarSpaceWidth&&(h.SINGLE_CODE_ERROR=.38,h.AVG_CODE_ERROR=.09),h.config=i,K()(h,k()(h))}return U()(O,[{key:"_matchPattern",value:function(i,h){if(this.config.normalizeBarSpaceWidth){for(var g=[0,0],y=[0,0],E=[0,0],z=this.MAX_CORRECTION_FACTOR,R=1/z,q=0;q<i.length;q++)g[q%2]+=i[q],y[q%2]+=h[q];E[0]=y[0]/g[0],E[1]=y[1]/g[1],E[0]=Math.max(Math.min(E[0],z),R),E[1]=Math.max(Math.min(E[1],z),R),this.barSpaceRatio=E;for(var j=0;j<i.length;j++)i[j]*=this.barSpaceRatio[j%2]}return qe()($()(O.prototype),"_matchPattern",this).call(this,i,h)}},{key:"_findPattern",value:function(i,h){var g=arguments.length>2&&void 0!==arguments[2]&&arguments[2],y=arguments.length>3&&void 0!==arguments[3]&&arguments[3],E=new Array(i.length).fill(0),z=0,R={error:Number.MAX_VALUE,start:0,end:0},q=this.AVG_CODE_ERROR;g=g||!1,y=y||!1,h||(h=this._nextSet(this._row));for(var j=h;j<this._row.length;j++)if(this._row[j]^(g?1:0))E[z]++;else{if(z===E.length-1){var ie=E.reduce(function(fe,Te){return fe+Te},0),pe=this._matchPattern(E,i);if(pe<q)return R.error=pe,R.start=j-ie,R.end=j,R;if(!y)return null;for(var le=0;le<E.length-2;le++)E[le]=E[le+2];E[E.length-2]=0,E[E.length-1]=0,z--}else z++;E[z]=1,g=!g}return null}},{key:"_findStart",value:function(){for(var i=0,h=this._nextSet(this._row),g=null,y=1;!g;){if(!(g=this._findPattern(this.START_PATTERN,h,!1,!0)))return null;if(y=Math.floor((g.end-g.start)/4),(i=g.start-10*y)>=0&&this._matchRange(i,g.start,0))return g;h=g.end,g=null}return null}},{key:"_verifyTrailingWhitespace",value:function(i){var h=i.end+(i.end-i.start)/2;return h<this._row.length&&this._matchRange(i.end,h,0)?i:null}},{key:"_findEnd",value:function(){this._row.reverse();var i=this._findPattern(this.STOP_PATTERN);if(this._row.reverse(),null===i)return null;var h=i.start;return i.start=this._row.length-i.end,i.end=this._row.length-h,null!==i?this._verifyTrailingWhitespace(i):null}},{key:"_decodePair",value:function(i){for(var h=[],g=0;g<i.length;g++){var y=this._decodeCode(i[g]);if(!y)return null;h.push(y)}return h}},{key:"_decodeCode",value:function(i){for(var h=this.AVG_CODE_ERROR,g={error:Number.MAX_VALUE,code:-1,start:0,end:0},y=0;y<this.CODE_PATTERN.length;y++){var E=this._matchPattern(i,this.CODE_PATTERN[y]);E<g.error&&(g.code=y,g.error=E)}return g.error<h?g:null}},{key:"_decodePayload",value:function(i,h,g){for(var y=0,E=i.length,z=[[0,0,0,0,0],[0,0,0,0,0]],R=null;y<E;){for(var q=0;q<5;q++)z[0][q]=i[y]*this.barSpaceRatio[0],z[1][q]=i[y+1]*this.barSpaceRatio[1],y+=2;if(!(R=this._decodePair(z)))return null;for(var j=0;j<R.length;j++)h.push(R[j].code+""),g.push(R[j])}return R}},{key:"_verifyCounterLength",value:function(i){return i.length%10==0}},{key:"decode",value:function(i,h){var g=new Array,y=new Array,E=this._findStart();if(!E)return null;y.push(E);var z=this._findEnd();if(!z)return null;var R=this._fillCounters(E.end,z.start,!1);return this._verifyCounterLength(R)&&this._decodePayload(R,g,y)?g.length%2!=0||g.length<6?null:(y.push(z),{code:g.join(""),start:E.start,end:z.end,startInfo:E,decodedCodes:y,format:this.FORMAT}):null}}]),O}(oe);function Qt(A,L){var O=Object.keys(A);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(A);L&&(i=i.filter(function(h){return Object.getOwnPropertyDescriptor(A,h).enumerable})),O.push.apply(O,i)}return O}var Yt=function(A){H()(O,A);var L=function vn(A){var L=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var O,i=$()(A);if(L){var h=$()(this).constructor;O=Reflect.construct(i,arguments,h)}else O=i.apply(this,arguments);return K()(this,O)}}(O);function O(){var i;w()(this,O);for(var h=arguments.length,g=new Array(h),y=0;y<h;y++)g[y]=arguments[y];return i=L.call.apply(L,[this].concat(g)),N()(k()(i),"CODE_FREQUENCY",[[56,52,50,49,44,38,35,42,41,37],[7,11,13,14,19,25,28,21,22,26]]),N()(k()(i),"STOP_PATTERN",[1/6*7,1/6*7,1/6*7,1/6*7,1/6*7,1/6*7]),N()(k()(i),"FORMAT","upc_e"),i}return U()(O,[{key:"_decodePayload",value:function(i,h,g){for(var y=function(R){for(var q=1;q<arguments.length;q++){var j=null!=arguments[q]?arguments[q]:{};q%2?Qt(Object(j),!0).forEach(function(ie){N()(R,ie,j[ie])}):Object.getOwnPropertyDescriptors?Object.defineProperties(R,Object.getOwnPropertyDescriptors(j)):Qt(Object(j)).forEach(function(ie){Object.defineProperty(R,ie,Object.getOwnPropertyDescriptor(j,ie))})}return R}({},i),E=0,z=0;z<6;z++){if(!(y=this._decodeCode(y.end)))return null;y.code>=10&&(y.code=y.code-10,E|=1<<5-z),h.push(y.code),g.push(y)}return this._determineParity(E,h)?y:null}},{key:"_determineParity",value:function(i,h){for(var g=0;g<this.CODE_FREQUENCY.length;g++)for(var y=0;y<this.CODE_FREQUENCY[g].length;y++)if(i===this.CODE_FREQUENCY[g][y])return h.unshift(g),h.push(y),!0;return!1}},{key:"_convertToUPCA",value:function(i){var h=[i[0]],g=i[i.length-2];return(h=g<=2?h.concat(i.slice(1,3)).concat([g,0,0,0,0]).concat(i.slice(3,6)):3===g?h.concat(i.slice(1,4)).concat([0,0,0,0,0]).concat(i.slice(4,6)):4===g?h.concat(i.slice(1,5)).concat([0,0,0,0,0,i[5]]):h.concat(i.slice(1,6)).concat([0,0,0,0,g])).push(i[i.length-1]),h}},{key:"_checksum",value:function(i){return qe()($()(O.prototype),"_checksum",this).call(this,this._convertToUPCA(i))}},{key:"_findEnd",value:function(i,h){return qe()($()(O.prototype),"_findEnd",this).call(this,i,!0)}},{key:"_verifyTrailingWhitespace",value:function(i){var h=i.end+(i.end-i.start)/2;return h<this._row.length&&this._matchRange(i.end,h,0)?i:null}}]),O}(Xe);var Gt=function(A){H()(O,A);var L=function yn(A){var L=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var O,i=$()(A);if(L){var h=$()(this).constructor;O=Reflect.construct(i,arguments,h)}else O=i.apply(this,arguments);return K()(this,O)}}(O);function O(){var i;w()(this,O);for(var h=arguments.length,g=new Array(h),y=0;y<h;y++)g[y]=arguments[y];return i=L.call.apply(L,[this].concat(g)),N()(k()(i),"FORMAT","upc_a"),i}return U()(O,[{key:"decode",value:function(i,h){var g=Xe.prototype.decode.call(this);return g&&g.code&&13===g.code.length&&"0"===g.code.charAt(0)?(g.code=g.code.substring(1),g):null}}]),O}(Xe),it={},pt_UP=1,pt_DOWN=-1;it.getBarcodeLine=function(A,L,O){var i,h,g,y,E,z=0|L.x,R=0|L.y,q=0|O.x,j=0|O.y,ie=Math.abs(j-R)>Math.abs(q-z),pe=[],le=A.data,fe=A.size.x,Te=255,we=0;function Oe(st,qn){Te=(E=le[qn*fe+st])<Te?E:Te,we=E>we?E:we,pe.push(E)}ie&&(g=z,z=R,R=g,g=q,q=j,j=g),z>q&&(g=z,z=q,q=g,g=R,R=j,j=g);var Ee=q-z,ke=Math.abs(j-R);i=Ee/2|0,h=R;var Je=R<j?1:-1;for(y=z;y<q;y++)ie?Oe(h,y):Oe(y,h),(i-=ke)<0&&(h+=Je,i+=Ee);return{line:pe,min:Te,max:we}},it.toBinaryLine=function(A){var L,O,i,h,g,y,E=A.min,z=A.max,R=A.line,q=E+(z-E)/2,j=[],ie=(z-E)/12,pe=-ie;for(i=R[0]>q?pt_UP:pt_DOWN,j.push({pos:0,val:R[0]}),g=0;g<R.length-2;g++)i!==(h=(L=R[g+1]-R[g])+(O=R[g+2]-R[g+1])<pe&&R[g+1]<1.5*q?pt_DOWN:L+O>ie&&R[g+1]>.5*q?pt_UP:i)&&(j.push({pos:g,val:R[g]}),i=h);for(j.push({pos:R.length,val:R[R.length-1]}),y=j[0].pos;y<j[1].pos;y++)R[y]=R[y]>q?0:1;for(g=1;g<j.length-1;g++)for(ie=j[g+1].val>j[g].val?j[g].val+(j[g+1].val-j[g].val)/3*2|0:j[g+1].val+(j[g].val-j[g+1].val)/3|0,y=j[g].pos;y<j[g+1].pos;y++)R[y]=R[y]>ie?0:1;return{line:R,threshold:ie}},it.debug={printFrequency:function(A,L){var O,i=L.getContext("2d");for(L.width=A.length,L.height=256,i.beginPath(),i.strokeStyle="blue",O=0;O<A.length;O++)i.moveTo(O,255),i.lineTo(O,255-A[O]);i.stroke(),i.closePath()},printPattern:function(A,L){var O,i=L.getContext("2d");for(L.width=A.length,i.fillColor="black",O=0;O<A.length;O++)1===A[O]&&i.fillRect(O,0,1,100)}};var Ct=it;function xn(A,L){var O=typeof Symbol<"u"&&A[Symbol.iterator]||A["@@iterator"];if(!O){if(Array.isArray(A)||(O=function(z,R){if(z){if("string"==typeof z)return Ht(z,R);var q=Object.prototype.toString.call(z).slice(8,-1);if("Object"===q&&z.constructor&&(q=z.constructor.name),"Map"===q||"Set"===q)return Array.from(z);if("Arguments"===q||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(q))return Ht(z,R)}}(A))||L&&A&&"number"==typeof A.length){O&&(A=O);var i=0,h=function(){};return{s:h,n:function(){return i>=A.length?{done:!0}:{done:!1,value:A[i++]}},e:function(z){throw z},f:h}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var g,y=!0,E=!1;return{s:function(){O=O.call(A)},n:function(){var z=O.next();return y=z.done,z},e:function(z){E=!0,g=z},f:function(){try{y||null==O.return||O.return()}finally{if(E)throw g}}}}function Ht(A,L){(null==L||L>A.length)&&(L=A.length);for(var O=0,i=new Array(L);O<L;O++)i[O]=A[O];return i}var at={code_128_reader:ze,ean_reader:Xe,ean_5_reader:Ot,ean_2_reader:Bt,ean_8_reader:jt,code_39_reader:dt,code_39_vin_reader:xt,codabar_reader:Re,upc_reader:Gt,upc_e_reader:Yt,i2of5_reader:Jt,"2of5_reader":he,code_93_reader:Lt,code_32_reader:It},wt={registerReader:function(A,L){at[A]=L},create:function(A,L){var i=[];function h(){A.readers.forEach(function(R){var q,j={},ie=[];"object"===f()(R)?(q=R.format,j=R.config):"string"==typeof R&&(q=R),j.supplements&&(ie=j.supplements.map(function(le){return new at[le]}));try{var pe=new at[q](j,ie);i.push(pe)}catch(le){throw console.error("* Error constructing reader ",q,le),le}})}function g(R){var q,j=null,ie=Ct.getBarcodeLine(L,R[0],R[1]);for(Ct.toBinaryLine(ie),q=0;q<i.length&&null===j;q++)j=i[q].decodePattern(ie.line);return null===j?null:{codeResult:j,barcodeLine:ie}}function y(R){return E.apply(this,arguments)}function E(){return(E=u()(c.a.mark(function R(q){var j,ie,pe,le;return c.a.wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:j=null,ie=xn(i),fe.prev=2,ie.s();case 4:if((pe=ie.n()).done){fe.next=14;break}if(!(le=pe.value).decodeImage){fe.next=12;break}return fe.next=9,le.decodeImage(q);case 9:if(!(j=fe.sent)){fe.next=12;break}return fe.abrupt("break",14);case 12:fe.next=4;break;case 14:fe.next=19;break;case 16:fe.prev=16,fe.t0=fe.catch(2),ie.e(fe.t0);case 19:return fe.prev=19,ie.f(),fe.finish(19);case 22:return fe.abrupt("return",j);case 23:case"end":return fe.stop()}},R,null,[[2,16,19,22]])}))).apply(this,arguments)}function z(R){var q,j,le,ie=function(le){return Math.sqrt(Math.pow(Math.abs(le[1].y-le[0].y),2)+Math.pow(Math.abs(le[1].x-le[0].x),2))}(q=[{x:((le=R)[1][0]-le[0][0])/2+le[0][0],y:(le[1][1]-le[0][1])/2+le[0][1]},{x:(le[3][0]-le[2][0])/2+le[2][0],y:(le[3][1]-le[2][1])/2+le[2][1]}]),pe=Math.atan2(q[1].y-q[0].y,q[1].x-q[0].x);return null===(q=function(le,fe,Te){function we(Oe){var Ee=Oe*Math.sin(fe),ke=Oe*Math.cos(fe);le[0].y-=Ee,le[0].x-=ke,le[1].y+=Ee,le[1].x+=ke}for(we(Te);Te>1&&(!L.inImageWithBorder(le[0])||!L.inImageWithBorder(le[1]));)we(-(Te-=Math.ceil(Te/2)));return le}(q,pe,Math.floor(.1*ie)))?null:(null===(j=g(q))&&(j=function(le,fe,Te){var we,Oe,Ee,ke=Math.sqrt(Math.pow(le[1][0]-le[0][0],2)+Math.pow(le[1][1]-le[0][1],2)),Je=null,st=Math.sin(Te),qn=Math.cos(Te);for(we=1;we<16&&null===Je;we++)Ee={y:(Oe=ke/16*we*(we%2==0?-1:1))*st,x:Oe*qn},fe[0].y+=Ee.x,fe[0].x-=Ee.y,fe[1].y+=Ee.x,fe[1].x-=Ee.y,Je=g(fe);return Je}(R,q,pe)),null===j?null:{codeResult:j.codeResult,line:q,angle:pe,pattern:j.barcodeLine.line,threshold:j.barcodeLine.threshold})}return h(),{decodeFromBoundingBox:function(R){return z(R)},decodeFromBoundingBoxes:function(R){var q,j,ie=[],pe=A.multiple;for(q=0;q<R.length;q++){var le=R[q];if((j=z(le)||{}).box=le,pe)ie.push(j);else if(j.codeResult)return j}return{barcodes:ie}},decodeFromImage:function(R){return u()(c.a.mark(function q(){return c.a.wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:return ie.next=2,y(R);case 2:return ie.abrupt("return",ie.sent);case 4:case"end":return ie.stop()}},q)}))()},registerReader:function(R,q){if(at[R])throw new Error("cannot register existing reader",R);at[R]=q},setReaders:function(R){A.readers=R,i.length=0,h()}}}},et=function(){var A={};function L(h){return A[h]||(A[h]={subscribers:[]}),A[h]}function O(h,g){h.async?setTimeout(function(){h.callback(g)},4):h.callback(g)}function i(h,g,y){var E;if("function"==typeof g)E={callback:g,async:y};else if(!(E=g).callback)throw new Error("Callback was not specified on options");L(h).subscribers.push(E)}return{subscribe:function(h,g,y){return i(h,g,y)},publish:function(h,g){var y=L(h),E=y.subscribers;E.filter(function(z){return!!z.once}).forEach(function(z){O(z,g)}),y.subscribers=E.filter(function(z){return!z.once}),y.subscribers.forEach(function(z){O(z,g)})},once:function(h,g){i(h,{callback:g,async:arguments.length>2&&void 0!==arguments[2]&&arguments[2],once:!0})},unsubscribe:function(h,g){if(h){var y=L(h);y.subscribers=y&&g?y.subscribers.filter(function(E){return E.callback!==g}):[]}else A={}}}}(),Vt=n(62),Wt=n.n(Vt),bn=n(63);var nt,St=function(A){H()(O,A);var L=function Tn(A){var L=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var O,i=$()(A);if(L){var h=$()(this).constructor;O=Reflect.construct(i,arguments,h)}else O=i.apply(this,arguments);return K()(this,O)}}(O);function O(i,h){var g;return w()(this,O),g=L.call(this,i),N()(k()(g),"code",void 0),g.code=h,Object.setPrototypeOf(k()(g),O.prototype),g}return U()(O)}(n.n(bn)()(Error)),$t="This may mean that the user has declined camera access, or the browser does not support media APIs. If you are running in iOS, you must use Safari.";function On(){try{return navigator.mediaDevices.enumerateDevices()}catch{var A=new St("enumerateDevices is not defined. ".concat($t),-1);return Promise.reject(A)}}function Cn(A){try{return navigator.mediaDevices.getUserMedia(A)}catch{var L=new St("getUserMedia is not defined. ".concat($t),-1);return Promise.reject(L)}}function Kt(A){return new Promise(function(L,O){var i=10;!function h(){i>0?A.videoWidth>10&&A.videoHeight>10?L():window.setTimeout(h,500):O(new St("Unable to play video stream. Is webcam working?",-1)),i--}()})}function Xt(A,L){return At.apply(this,arguments)}function At(){return(At=u()(c.a.mark(function A(L,O){var i;return c.a.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,Cn(O);case 2:if(nt=i=h.sent,!L){h.next=11;break}return L.setAttribute("autoplay","true"),L.setAttribute("muted","true"),L.setAttribute("playsinline","true"),L.srcObject=i,L.addEventListener("loadedmetadata",function(){L.play().catch(function(g){console.warn("* Error while trying to play video stream:",g)})}),h.abrupt("return",Kt(L));case 11:return h.abrupt("return",Promise.resolve());case 12:case"end":return h.stop()}},A)}))).apply(this,arguments)}function Sn(){var L=function wn(A){var L=Wt()(A,["width","height","facingMode","aspectRatio","deviceId"]);return void 0!==A.minAspectRatio&&A.minAspectRatio>0&&(L.aspectRatio=A.minAspectRatio,console.log("WARNING: Constraint 'minAspectRatio' is deprecated; Use 'aspectRatio' instead")),void 0!==A.facing&&(L.facingMode=A.facing,console.log("WARNING: Constraint 'facing' is deprecated. Use 'facingMode' instead'")),L}(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{});return L&&L.deviceId&&L.facingMode&&delete L.facingMode,Promise.resolve({audio:!1,video:L})}function en(){return(en=u()(c.a.mark(function A(){return c.a.wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.next=2,On();case 2:return O.abrupt("return",O.sent.filter(function(i){return"videoinput"===i.kind}));case 4:case"end":return O.stop()}},A)}))).apply(this,arguments)}function ut(){if(!nt)return null;var A=nt.getVideoTracks();return A&&null!=A&&A.length?A[0]:null}var lt={requestedVideoElement:null,request:function(A,L){return u()(c.a.mark(function O(){return c.a.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return lt.requestedVideoElement=A,h.next=3,Sn(L);case 3:return h.abrupt("return",Xt(A,h.sent));case 5:case"end":return h.stop()}},O)}))()},release:function(){var A=nt&&nt.getVideoTracks();return null!==lt.requestedVideoElement&&lt.requestedVideoElement.pause(),new Promise(function(L){setTimeout(function(){A&&A.length&&A.forEach(function(O){return O.stop()}),nt=null,lt.requestedVideoElement=null,L()},0)})},enumerateVideoDevices:function(){return en.apply(this,arguments)},getActiveStreamLabel:function(){var A=ut();return A?A.label:""},getActiveTrack:ut,disableTorch:function(){return u()(c.a.mark(function A(){var L;return c.a.wrap(function(O){for(;;)switch(O.prev=O.next){case 0:if(!(L=ut())){O.next=11;break}return O.prev=2,O.next=5,L.applyConstraints({advanced:[{torch:!1}]});case 5:O.next=11;break;case 7:throw O.prev=7,O.t0=O.catch(2),O.t0 instanceof OverconstrainedError&&console.warn("quagga2/CameraAccess: Torch not supported on this device"),O.t0;case 11:case"end":return O.stop()}},A,null,[[2,7]])}))()},enableTorch:function(){return u()(c.a.mark(function A(){var L;return c.a.wrap(function(O){for(;;)switch(O.prev=O.next){case 0:if(!(L=ut())){O.next=11;break}return O.prev=2,O.next=5,L.applyConstraints({advanced:[{torch:!0}]});case 5:O.next=11;break;case 7:throw O.prev=7,O.t0=O.catch(2),O.t0 instanceof OverconstrainedError&&console.warn("quagga2/CameraAccess: Torch not supported on this device"),O.t0;case 11:case"end":return O.stop()}},A,null,[[2,7]])}))()}},ft=lt,tn={create:function(A){var L,O=document.createElement("canvas"),i=O.getContext("2d",{willReadFrequently:!!A.willReadFrequently}),h=[],g=null!==(L=A.capacity)&&void 0!==L?L:20,y=!0===A.capture;return{addResult:function(z,R,q){var j={};(function E(z){return!!g&&z&&(R=z,!((q=A.blacklist)&&q.some(function(j){return Object.keys(j).every(function(ie){return j[ie]===R[ie]})})))&&function(R,q){return"function"!=typeof q||q(R)}(z,A.filter);var R,q})(q)&&(g--,j.codeResult=q,y&&(O.width=R.x,O.height=R.y,e.a.drawImage(z,R,i),j.frame=O.toDataURL()),h.push(j))},getResults:function(){return h}}}},An={inputStream:{name:"Live",type:"LiveStream",constraints:{width:640,height:480,facingMode:"environment"},area:{top:"0%",right:"0%",left:"0%",bottom:"0%"},singleChannel:!1},locate:!0,numOfWorkers:4,decoder:{readers:["code_128_reader"]},locator:{halfSample:!0,patchSize:"medium"}},Ye=n(5),_t=n(10),nn=Math.PI/180,En={create:function(A,L){var O,i={},h=A.getConfig(),g=(Object(_t.h)(A.getRealWidth(),A.getRealHeight()),A.getCanvasSize()),y=Object(_t.h)(A.getWidth(),A.getHeight()),E=A.getTopRight(),z=E.x,R=E.y,q=null,j=null,ie=h.willReadFrequently;return(O=L||document.createElement("canvas")).width=g.x,O.height=g.y,console.warn("*** frame_grabber_browser: willReadFrequently=",ie,"canvas=",O),q=O.getContext("2d",{willReadFrequently:!!ie}),j=new Uint8Array(y.x*y.y),i.attachData=function(pe){j=pe},i.getData=function(){return j},i.grab=function(){var pe,Oe,Ee,le=h.halfSample,fe=A.getFrame(),Te=fe,we=0;if(Te){if((Oe=O).width!==(Ee=g).x&&(Oe.width=Ee.x),Oe.height!==Ee.y&&(Oe.height=Ee.y),"ImageStream"===h.type&&(Te=fe.img,fe.tags&&fe.tags.orientation))switch(fe.tags.orientation){case 6:we=90*nn;break;case 8:we=-90*nn}return 0!==we?(q.translate(g.x/2,g.y/2),q.rotate(we),q.drawImage(Te,-g.y/2,-g.x/2,g.y,g.x),q.rotate(-we),q.translate(-g.x/2,-g.y/2)):q.drawImage(Te,0,0,g.x,g.y),pe=q.getImageData(z,R,y.x,y.y).data,le?Object(_t.e)(pe,y,j):Object(_t.c)(pe,j,h),!0}return!1},i.getSize=function(){return y},i}},Mn=En,ht={274:"orientation"},rn=Object.keys(ht).map(function(A){return ht[A]});function Zn(A){return new Promise(function(L){var O=new FileReader;O.onload=function(i){return L(i.target.result)},O.readAsArrayBuffer(A)})}function Rn(A,L,O){if("Exif"!==function(y,E,z){for(var R="",q=E;q<E+4;q++)R+=String.fromCharCode(y.getUint8(q));return R}(A,L))return!1;var i,h=L+6;if(18761===A.getUint16(h))i=!1;else{if(19789!==A.getUint16(h))return!1;i=!0}if(42!==A.getUint16(h+2,!i))return!1;var g=A.getUint32(h+4,!i);return!(g<8)&&function(y,E,z,R,q){for(var j=y.getUint16(z,!q),ie={},pe=0;pe<j;pe++){var le=z+12*pe+2,fe=R[y.getUint16(le,!q)];fe&&(ie[fe]=Pn(y,le,0,0,q))}return ie}(A,0,h+g,O,i)}function Pn(A,L,O,i,h){var g=A.getUint16(L+2,!h),y=A.getUint32(L+4,!h);return 3===g&&1===y?A.getUint16(L+8,!h):null}var on={};function Dn(A,L){A.onload=function(){L.loaded(this)}}on.load=function(A,L,O,i,h){var g,y,E,z=new Array(i),R=new Array(z.length);if(!1===h)z[0]=A;else for(g=0;g<z.length;g++)E=O+g,z[g]="".concat(A,"image-").concat("00".concat(E).slice(-3),".jpg");for(R.notLoaded=[],R.addImage=function(q){R.notLoaded.push(q)},R.loaded=function(q){for(var j=R.notLoaded,ie=0;ie<j.length;ie++)if(j[ie]===q){j.splice(ie,1);for(var pe=0;pe<z.length;pe++){var le=z[pe].substr(z[pe].lastIndexOf("/"));if(-1!==q.src.lastIndexOf(le)){R[pe]={img:q};break}}break}0===j.length&&(!1===h?function(fe){var Te=arguments.length>1&&void 0!==arguments[1]?arguments[1]:rn;return/^blob:/i.test(fe)?function kn(A){return new Promise(function(L,O){var i=new XMLHttpRequest;i.open("GET",A,!0),i.responseType="blob",i.onreadystatechange=function(){i.readyState!==XMLHttpRequest.DONE||200!==i.status&&0!==i.status||L(this.response)},i.onerror=O,i.send()})}(fe).then(Zn).then(function(we){return function In(A){var L=arguments.length>1&&void 0!==arguments[1]?arguments[1]:rn,O=new DataView(A),i=A.byteLength,h=L.reduce(function(y,E){var z=Object.keys(ht).filter(function(R){return ht[R]===E})[0];return z&&(y[z]=E),y},{}),g=2;if(255!==O.getUint8(0)||216!==O.getUint8(1))return!1;for(;g<i;){if(255!==O.getUint8(g))return!1;if(225===O.getUint8(g+1))return Rn(O,g+4,h);g+=2+O.getUint16(g+2)}return!1}(we,Te)}):Promise.resolve(null)}(A,["orientation"]).then(function(fe){R[0].tags=fe,L(R)}).catch(function(fe){console.log(fe),L(R)}):L(R))},g=0;g<z.length;g++)y=new Image,R.addImage(y),Dn(y,R),y.src=z[g]};var zn=on,an={createVideoStream:function(A){console.warn("**** InputStreamBrowser createVideoStream");var L,O,i=null,h=["canrecord","ended"],g={},y={x:0,y:0,type:"Point"},E={x:0,y:0,type:"XYSize"},z={getRealWidth:function(){return A.videoWidth},getRealHeight:function(){return A.videoHeight},getWidth:function(){return L},getHeight:function(){return O},setWidth:function(R){L=R},setHeight:function(R){O=R},setInputStream:function(R){i=R,this.setAttribute("src",void 0!==R.src?R.src:"")},ended:function(){return A.ended},getConfig:function(){return i},setAttribute:function(R,q){A&&A.setAttribute(R,q)},pause:function(){A.pause()},play:function(){A.play()},setCurrentTime:function(R){var q;"LiveStream"!==(null===(q=i)||void 0===q?void 0:q.type)&&this.setAttribute("currentTime",R.toString())},addEventListener:function(R,q,j){-1!==h.indexOf(R)?(g[R]||(g[R]=[]),g[R].push(q)):A.addEventListener(R,q,j)},clearEventHandlers:function(){h.forEach(function(R){var q=g[R];q&&q.length>0&&q.forEach(function(j){A.removeEventListener(R,j)})})},trigger:function(R,q){var j,ie,pe,le,fe,Te=g[R];if("canrecord"===R&&(le=A.videoWidth,fe=A.videoHeight,L=null!==(ie=i)&&void 0!==ie&&ie.size?le/fe>1?i.size:Math.floor(le/fe*i.size):le,O=null!==(pe=i)&&void 0!==pe&&pe.size?le/fe>1?Math.floor(fe/le*i.size):i.size:fe,E.x=L,E.y=O),Te&&Te.length>0)for(j=0;j<Te.length;j++)Te[j].apply(z,q)},setTopRight:function(R){y.x=R.x,y.y=R.y},getTopRight:function(){return y},setCanvasSize:function(R){E.x=R.x,E.y=R.y},getCanvasSize:function(){return E},getFrame:function(){return A}};return z},createLiveStream:function(A){console.warn("**** InputStreamBrowser createLiveStream"),A&&A.setAttribute("autoplay","true");var L=an.createVideoStream(A);return L.ended=function(){return!1},L},createImageStream:function(){var A,L,O=null,i=0,h=0,g=0,y=!0,E=!1,z=null,R=0,q=null,j=!1,ie=["canrecord","ended"],pe={},le={x:0,y:0,type:"Point"},fe={x:0,y:0,type:"XYSize"};function Te(Oe,Ee){var ke,Je=pe[Oe];if(Je&&Je.length>0)for(ke=0;ke<Je.length;ke++)Je[ke].apply(we,Ee)}var we={trigger:Te,getWidth:function(){return A},getHeight:function(){return L},setWidth:function(Oe){A=Oe},setHeight:function(Oe){L=Oe},getRealWidth:function(){return i},getRealHeight:function(){return h},setInputStream:function(Oe){var Ee;!1===Oe.sequence?(q=Oe.src,R=1):(q=Oe.src,R=Oe.length),E=!1,zn.load(q,function(ke){var Je,st;if(z=ke,ke[0].tags&&ke[0].tags.orientation)switch(ke[0].tags.orientation){case 6:case 8:i=ke[0].img.height,h=ke[0].img.width;break;default:i=ke[0].img.width,h=ke[0].img.height}else i=ke[0].img.width,h=ke[0].img.height;A=null!==(Je=O)&&void 0!==Je&&Je.size?i/h>1?O.size:Math.floor(i/h*O.size):i,L=null!==(st=O)&&void 0!==st&&st.size?i/h>1?Math.floor(h/i*O.size):O.size:h,fe.x=A,fe.y=L,E=!0,g=0,setTimeout(function(){Te("canrecord",[])},0)},1,R,null===(Ee=O=Oe)||void 0===Ee?void 0:Ee.sequence)},ended:function(){return j},setAttribute:function(){},getConfig:function(){return O},pause:function(){y=!0},play:function(){y=!1},setCurrentTime:function(Oe){g=Oe},addEventListener:function(Oe,Ee){-1!==ie.indexOf(Oe)&&(pe[Oe]||(pe[Oe]=[]),pe[Oe].push(Ee))},clearEventHandlers:function(){Object.keys(pe).forEach(function(Oe){return delete pe[Oe]})},setTopRight:function(Oe){le.x=Oe.x,le.y=Oe.y},getTopRight:function(){return le},setCanvasSize:function(Oe){fe.x=Oe.x,fe.y=Oe.y},getCanvasSize:function(){return fe},getFrame:function(){var Oe,Ee;return E?(y||(Oe=null===(Ee=z)||void 0===Ee?void 0:Ee[g],g<R-1?g++:setTimeout(function(){j=!0,Te("ended",[])},0)),Oe):null}};return we}},Ln=an,Et=n(23),Un=U()(function A(){w()(this,A),N()(this,"config",void 0),N()(this,"inputStream",void 0),N()(this,"framegrabber",void 0),N()(this,"inputImageWrapper",void 0),N()(this,"stopped",!1),N()(this,"boxSize",void 0),N()(this,"resultCollector",void 0),N()(this,"decoder",void 0),N()(this,"workerPool",[]),N()(this,"onUIThread",!0),N()(this,"canvasContainer",new m)}),un=U()(function A(){w()(this,A),N()(this,"image",void 0),N()(this,"overlay",void 0)}),m=U()(function A(){w()(this,A),N()(this,"ctx",void 0),N()(this,"dom",void 0),this.ctx=new un,this.dom=new un});function C(A){return typeof document>"u"?null:A instanceof HTMLElement&&A.nodeName&&1===A.nodeType?A:document.querySelector("string"==typeof A?A:"#interactive.viewport")}function D(A,L,O){var y,E,i=(y=L,(E=document.querySelector(A))||((E=document.createElement("canvas")).className=y),E);console.warn("* initCanvas getCanvasAndContext");var h=i.getContext("2d",{willReadFrequently:O.willReadFrequently});return{canvas:i,context:h}}function X(A,L){var O=Object.keys(A);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(A);L&&(i=i.filter(function(h){return Object.getOwnPropertyDescriptor(A,h).enumerable})),O.push.apply(O,i)}return O}function W(A){for(var L=1;L<arguments.length;L++){var O=null!=arguments[L]?arguments[L]:{};L%2?X(Object(O),!0).forEach(function(i){N()(A,i,O[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(A,Object.getOwnPropertyDescriptors(O)):X(Object(O)).forEach(function(i){Object.defineProperty(A,i,Object.getOwnPropertyDescriptor(O,i))})}return A}Ye.a.setMatrixArrayType(Array);var _e=[];function me(A){return W(W({},A),{},{inputStream:W(W({},A.inputStream),{},{target:null})})}function Se(A){if(A){var L=A().default;if(!L)return void self.postMessage({event:"error",message:"Quagga could not be created"})}var O;function i(g){self.postMessage({event:"processed",imageData:O.data,result:g},[O.data.buffer])}function h(){self.postMessage({event:"initialized",imageData:O.data},[O.data.buffer])}self.onmessage=function(g){if("init"===g.data.cmd){var y=g.data.config;y.numOfWorkers=0,O=new L.ImageWrapper({x:g.data.size.x,y:g.data.size.y},new Uint8Array(g.data.imageData)),L.init(y,h,O),L.onProcessed(i)}else"process"===g.data.cmd?(O.data=new Uint8Array(g.data.imageData),L.start()):"setReaders"===g.data.cmd?L.setReaders(g.data.readers):"registerReader"===g.data.cmd&&L.registerReader(g.data.name,g.data.reader)}}function Pe(A,L,O){var i,h,g=(typeof __factorySource__<"u"&&(h=__factorySource__),i=new Blob(["("+Se.toString()+")("+h+");"],{type:"text/javascript"}),window.URL.createObjectURL(i)),y={worker:new Worker(g),imageData:new Uint8Array(L.getWidth()*L.getHeight()),busy:!0};y.worker.onmessage=function(E){"initialized"===E.data.event?(URL.revokeObjectURL(g),y.busy=!1,y.imageData=new Uint8Array(E.data.imageData),O(y)):"processed"===E.data.event&&(y.imageData=new Uint8Array(E.data.imageData),y.busy=!1)},y.worker.postMessage({cmd:"init",size:{x:L.getWidth(),y:L.getHeight()},imageData:y.imageData,config:me(A)},[y.imageData.buffer])}function Le(A,L,O,i){var h=A-_e.length;if(0===h&&i)i();else if(h<0)_e.slice(h).forEach(function(E){E.worker.terminate()}),_e=_e.slice(0,h),i&&i();else{var g=function(E){_e.push(E),_e.length>=A&&i&&i()};if(L)for(var y=0;y<h;y++)Pe(L,O,g)}}function We(A,L,O){for(var i=A.length;i--;)A[i][0]+=L,A[i][1]+=O}Ye.a.setMatrixArrayType(Array);var $e=function(){function A(){var i=this;w()(this,A),N()(this,"context",new Un),N()(this,"canRecord",function(h){var g;i.context.config&&(Et.a.checkImageConstraints(i.context.inputStream,null===(g=i.context.config)||void 0===g?void 0:g.locator),i.initCanvas(),i.context.framegrabber=Mn.create(i.context.inputStream,i.context.canvasContainer.dom.image),void 0===i.context.config.numOfWorkers&&(i.context.config.numOfWorkers=0),Le(i.context.config.numOfWorkers,i.context.config,i.context.inputStream,function(){var y;0===(null===(y=i.context.config)||void 0===y?void 0:y.numOfWorkers)&&i.initializeData(),i.ready(h)}))}),N()(this,"update",function(){if(i.context.onUIThread){var h,g=(E=i.context.framegrabber,_e.length?!!(z=_e.filter(function(R){return!R.busy})[0])&&(E.attachData(z.imageData),E.grab()&&(z.busy=!0,z.worker.postMessage({cmd:"process",imageData:z.imageData},[z.imageData.buffer])),!0):null);g||(i.context.framegrabber.attachData(null===(h=i.context.inputImageWrapper)||void 0===h?void 0:h.data),i.context.framegrabber.grab()&&(g||i.locateAndDecode()))}else{var y;i.context.framegrabber.attachData(null===(y=i.context.inputImageWrapper)||void 0===y?void 0:y.data),i.context.framegrabber.grab(),i.locateAndDecode()}var E,z})}var L,O;return U()(A,[{key:"initBuffers",value:function(i){if(this.context.config){var h=(E=this.context.inputStream,R=this.context.config.locator,q=i||new M.a({x:E.getWidth(),y:E.getHeight(),type:"XYSize"}),j=[Ye.c.clone([0,0]),Ye.c.clone([0,q.size.y]),Ye.c.clone([q.size.x,q.size.y]),Ye.c.clone([q.size.x,0])],Et.a.init(q,R),{inputImageWrapper:q,boxSize:j}),y=h.boxSize;this.context.inputImageWrapper=h.inputImageWrapper,this.context.boxSize=y}var E,R,q,j}},{key:"initializeData",value:function(i){this.context.config&&(this.initBuffers(i),this.context.decoder=wt.create(this.context.config.decoder,this.context.inputImageWrapper))}},{key:"getViewPort",value:function(){return this.context.config&&this.context.config.inputStream?C(this.context.config.inputStream.target):null}},{key:"ready",value:function(i){this.context.inputStream.play(),i()}},{key:"initCanvas",value:function(){var i=function G(A){var L,O,i,h,g,y,E=C(null==A||null===(L=A.config)||void 0===L||null===(O=L.inputStream)||void 0===O?void 0:O.target),z=null==A||null===(i=A.config)||void 0===i||null===(h=i.inputStream)||void 0===h?void 0:h.type;if(!z)return null;var R=function(j,ie){var pe=ie.willReadFrequently;if(typeof document<"u"){var le=D("canvas.imgBuffer","imgBuffer",{willReadFrequently:pe}),fe=D("canvas.drawingBuffer","drawingBuffer",{willReadFrequently:pe});return le.canvas.width=fe.canvas.width=j.x,le.canvas.height=fe.canvas.height=j.y,{dom:{image:le.canvas,overlay:fe.canvas},ctx:{image:le.context,overlay:fe.context}}}return null}(A.inputStream.getCanvasSize(),{willReadFrequently:!(null==A||null===(g=A.config)||void 0===g||null===(y=g.inputStream)||void 0===y||!y.willReadFrequently)});if(!R)return{dom:{image:null,overlay:null},ctx:{image:null,overlay:null}};var q=R.dom;return typeof document<"u"&&E&&("ImageStream"!==z||E.contains(q.image)||E.appendChild(q.image),E.contains(q.overlay)||E.appendChild(q.overlay)),R}(this.context);if(i){var h=i.ctx,g=i.dom;this.context.canvasContainer.dom.image=g.image,this.context.canvasContainer.dom.overlay=g.overlay,this.context.canvasContainer.ctx.image=h.image,this.context.canvasContainer.ctx.overlay=h.overlay}}},{key:"initInputStream",value:function(i){if(this.context.config&&this.context.config.inputStream){var h=this.context.config.inputStream,g=h.type,y=h.constraints,E=function(){var q=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"LiveStream",j=arguments.length>1?arguments[1]:void 0,ie=arguments.length>2?arguments[2]:void 0;switch(q){case"VideoStream":var pe=document.createElement("video");return{video:pe,inputStream:ie.createVideoStream(pe)};case"ImageStream":return{inputStream:ie.createImageStream()};case"LiveStream":var le=null;return j&&((le=j.querySelector("video"))||(le=document.createElement("video"),j.appendChild(le))),{video:le,inputStream:ie.createLiveStream(le)};default:return console.error("* setupInputStream invalid type ".concat(q)),{video:null,inputStream:null}}}(g,this.getViewPort(),Ln),z=E.video,R=E.inputStream;"LiveStream"===g&&z&&ft.request(z,y).then(function(){return R.trigger("canrecord")}).catch(function(q){return i(q)}),R&&(R.setAttribute("preload","auto"),R.setInputStream(this.context.config.inputStream),R.addEventListener("canrecord",this.canRecord.bind(void 0,i))),this.context.inputStream=R}}},{key:"getBoundingBoxes",value:function(){var i;return null!==(i=this.context.config)&&void 0!==i&&i.locate?Et.a.locate():[[Ye.c.clone(this.context.boxSize[0]),Ye.c.clone(this.context.boxSize[1]),Ye.c.clone(this.context.boxSize[2]),Ye.c.clone(this.context.boxSize[3])]]}},{key:"transformResult",value:function(i){var R,q,j,h=this,g=this.context.inputStream.getTopRight(),y=g.x,E=g.y;if((0!==y||0!==E)&&(i.barcodes&&i.barcodes.forEach(function(R){return h.transformResult(R)}),i.line&&2===i.line.length&&(j=E,(R=i.line)[0].x+=q=y,R[0].y+=j,R[1].x+=q,R[1].y+=j),i.box&&We(i.box,y,E),i.boxes&&i.boxes.length>0))for(var z=0;z<i.boxes.length;z++)We(i.boxes[z],y,E)}},{key:"addResult",value:function(i,h){var g=this;h&&this.context.resultCollector&&(i.barcodes?i.barcodes.filter(function(y){return y.codeResult}).forEach(function(y){return g.addResult(y,h)}):i.codeResult&&this.context.resultCollector.addResult(h,this.context.inputStream.getCanvasSize(),i.codeResult))}},{key:"hasCodeResult",value:function(i){return!(!i||!(i.barcodes?i.barcodes.some(function(h){return h.codeResult}):i.codeResult))}},{key:"publishResult",value:function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,h=arguments.length>1?arguments[1]:void 0,g=i;i&&this.context.onUIThread&&(this.transformResult(i),this.addResult(i,h),g=i.barcodes||i),et.publish("processed",g),this.hasCodeResult(i)&&et.publish("detected",g)}},{key:"locateAndDecode",value:(O=u()(c.a.mark(function i(){var h,g,y,E,z;return c.a.wrap(function(R){for(;;)switch(R.prev=R.next){case 0:if(!(h=this.getBoundingBoxes())){R.next=12;break}return R.next=4,this.context.decoder.decodeFromBoundingBoxes(h);case 4:if(R.t0=R.sent,R.t0){R.next=7;break}R.t0={};case 7:(y=R.t0).boxes=h,this.publishResult(y,null===(g=this.context.inputImageWrapper)||void 0===g?void 0:g.data),R.next=16;break;case 12:return R.next=14,this.context.decoder.decodeFromImage(this.context.inputImageWrapper);case 14:(E=R.sent)?this.publishResult(E,null===(z=this.context.inputImageWrapper)||void 0===z?void 0:z.data):this.publishResult();case 16:case"end":return R.stop()}},i,this)})),function(){return O.apply(this,arguments)})},{key:"startContinuousUpdate",value:function(){var i,h=this,g=null,y=1e3/((null===(i=this.context.config)||void 0===i?void 0:i.frequency)||60);this.context.stopped=!1;var E=this.context;!function z(R){g=g||R,E.stopped||(R>=g&&(g+=y,h.update()),window.requestAnimationFrame(z))}(performance.now())}},{key:"start",value:function(){var i,h;this.context.onUIThread&&"LiveStream"===(null===(i=this.context.config)||void 0===i||null===(h=i.inputStream)||void 0===h?void 0:h.type)?this.startContinuousUpdate():this.update()}},{key:"stop",value:(L=u()(c.a.mark(function i(){var h;return c.a.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(this.context.stopped=!0,Le(0),null===(h=this.context.config)||void 0===h||!h.inputStream||"LiveStream"!==this.context.config.inputStream.type){g.next=6;break}return g.next=5,ft.release();case 5:this.context.inputStream.clearEventHandlers();case 6:case"end":return g.stop()}},i,this)})),function(){return L.apply(this,arguments)})},{key:"setReaders",value:function(i){var h;this.context.decoder&&this.context.decoder.setReaders(i),h=i,_e.forEach(function(g){return g.worker.postMessage({cmd:"setReaders",readers:h})})}},{key:"registerReader",value:function(i,h){var g,y;wt.registerReader(i,h),this.context.decoder&&this.context.decoder.registerReader(i,h),g=i,y=h,_e.forEach(function(E){return E.worker.postMessage({cmd:"registerReader",name:g,reader:y})})}}]),A}(),rt=new $e,gt=rt.context,Mt={init:function(A,L,O){var i,h=arguments.length>3&&void 0!==arguments[3]?arguments[3]:rt;return L||(i=new Promise(function(g,y){L=function(E){E?y(E):g()}})),h.context.config=T()({},An,A),h.context.config.numOfWorkers>0&&(h.context.config.numOfWorkers=0),O?(h.context.onUIThread=!1,h.initializeData(O),L&&L()):h.initInputStream(L),i},start:function(){return rt.start()},stop:function(){return rt.stop()},pause:function(){gt.stopped=!0},onDetected:function(A){A&&("function"==typeof A||"object"===f()(A)&&A.callback)?et.subscribe("detected",A):console.trace("* warning: Quagga.onDetected called with invalid callback, ignoring")},offDetected:function(A){et.unsubscribe("detected",A)},onProcessed:function(A){A&&("function"==typeof A||"object"===f()(A)&&A.callback)?et.subscribe("processed",A):console.trace("* warning: Quagga.onProcessed called with invalid callback, ignoring")},offProcessed:function(A){et.unsubscribe("processed",A)},setReaders:function(A){A?rt.setReaders(A):console.trace("* warning: Quagga.setReaders called with no readers, ignoring")},registerReader:function(A,L){A?L?rt.registerReader(A,L):console.trace("* warning: Quagga.registerReader called with no reader, ignoring"):console.trace("* warning: Quagga.registerReader called with no name, ignoring")},registerResultCollector:function(A){A&&"function"==typeof A.addResult&&(gt.resultCollector=A)},get canvas(){return gt.canvasContainer},decodeSingle:function(A,L){var O=this,i=new $e;return(A=T()({inputStream:{type:"ImageStream",sequence:!1,size:800,src:A.src},numOfWorkers:1,locator:{halfSample:!1}},A)).numOfWorkers>0&&(A.numOfWorkers=0),A.numOfWorkers>0&&(typeof Blob>"u"||typeof Worker>"u")&&(console.warn("* no Worker and/or Blob support - forcing numOfWorkers to 0"),A.numOfWorkers=0),new Promise(function(h,g){try{O.init(A,function(){et.once("processed",function(y){i.stop(),L&&L.call(null,y),h(y)},!0),i.start()},null,i)}catch(y){g(y)}})},get default(){return Mt},Readers:a,CameraAccess:ft,ImageDebug:e.a,ImageWrapper:M.a,ResultCollector:tn};v.default=Mt}]).default},2310:(ye,o,v)=>{"use strict";v.r(o),v.d(o,{OzonModule:()=>Fi});var n=v(6814),a=v(6697),s=v(5861),d=v(5619),f=v(6306),x=v(6232),T=v(2181),M=v(9773),b=v(9397),u=v(4664),l=v(7494),c=v(4963),e=v(2029),S=v(7958),w=v(5219),Z=v(7700),U=v(723),F=v(6593),k=v(2966),J=v(707),H=v(6760),V=v(4532),K=v(6223),ne=v(2076),$=v(5807),ee=v(4480),N=v(6489),ae=v(3259),oe=v(2332),re=v(2591),de=v(2324),Y=v(8468),Q=v(7778),te=v(6005);function he(r,P){1&r&&e._UZ(0,"CheckIcon",7),2&r&&e.Q6J("styleClass","p-checkbox-icon")}function ce(r,P){}function ve(r,P){1&r&&e.YNc(0,ce,0,0,"ng-template")}function Ae(r,P){if(1&r&&(e.TgZ(0,"span",8),e.YNc(1,ve,1,0,null,9),e.qZA()),2&r){const t=e.oxw(2);e.xp6(1),e.Q6J("ngTemplateOutlet",t.checkIconTemplate)}}function Ie(r,P){if(1&r&&(e.ynx(0),e.YNc(1,he,1,1,"CheckIcon",5),e.YNc(2,Ae,2,1,"span",6),e.BQk()),2&r){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!t.checkIconTemplate),e.xp6(1),e.Q6J("ngIf",t.checkIconTemplate)}}function Re(r,P){if(1&r&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.Oqu(t.label)}}function Ue(r,P){1&r&&e.GkF(0)}const ze=function(r){return{height:r}},je=function(r,P){return{"p-highlight":r,"p-disabled":P}},qe=function(r){return{"p-highlight":r}},Fe=function(r){return{$implicit:r}},He=["container"],Ke=["overlay"],Ve=["filterInput"],kt=["in"],dt=["items"],ln=["scroller"];function sn(r,P){if(1&r&&(e.ynx(0),e._uU(1),e.BQk()),2&r){const t=e.oxw(2);e.xp6(1),e.Oqu(t.valuesAsString||"empty")}}function It(r,P){if(1&r){const t=e.EpF();e.TgZ(0,"TimesCircleIcon",20),e.NdJ("click",function(){e.CHM(t);const _=e.oxw(2).$implicit,I=e.oxw(3);return e.KtG(I.removeChip(_,I.event))}),e.qZA()}2&r&&e.Q6J("styleClass","p-multiselect-token-icon")}function cn(r,P){1&r&&e.GkF(0)}function Rt(r,P){if(1&r){const t=e.EpF();e.TgZ(0,"span",21),e.NdJ("click",function(){e.CHM(t);const _=e.oxw(2).$implicit,I=e.oxw(3);return e.KtG(I.removeChip(_,I.event))}),e.YNc(1,cn,1,0,"ng-container",22),e.qZA()}if(2&r){const t=e.oxw(5);e.xp6(1),e.Q6J("ngTemplateOutlet",t.removeTokenIconTemplate)}}function Pt(r,P){if(1&r&&(e.ynx(0),e.YNc(1,It,1,1,"TimesCircleIcon",18),e.YNc(2,Rt,2,1,"span",19),e.BQk()),2&r){const t=e.oxw(4);e.xp6(1),e.Q6J("ngIf",!t.removeTokenIconTemplate),e.xp6(1),e.Q6J("ngIf",t.removeTokenIconTemplate)}}function xt(r,P){if(1&r&&(e.TgZ(0,"div",15,16)(2,"span",17),e._uU(3),e.qZA(),e.YNc(4,Pt,3,2,"ng-container",7),e.qZA()),2&r){const t=P.$implicit,p=e.oxw(3);e.xp6(3),e.Oqu(p.findLabelByValue(t)),e.xp6(1),e.Q6J("ngIf",!p.disabled)}}function Dt(r,P){if(1&r&&(e.ynx(0),e._uU(1),e.BQk()),2&r){const t=e.oxw(3);e.xp6(1),e.Oqu(t.placeholder||t.defaultLabel||"empty")}}function bt(r,P){if(1&r&&(e.ynx(0),e.YNc(1,xt,5,2,"div",14),e.YNc(2,Dt,2,1,"ng-container",7),e.BQk()),2&r){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.value),e.xp6(1),e.Q6J("ngIf",!t.value||0===t.value.length)}}function zt(r,P){if(1&r&&(e.ynx(0),e.YNc(1,sn,2,1,"ng-container",7),e.YNc(2,bt,3,2,"ng-container",7),e.BQk()),2&r){const t=e.oxw();e.xp6(1),e.Q6J("ngIf","comma"===t.display),e.xp6(1),e.Q6J("ngIf","chip"===t.display)}}function Lt(r,P){1&r&&e.GkF(0)}function Ut(r,P){if(1&r){const t=e.EpF();e.TgZ(0,"TimesIcon",20),e.NdJ("click",function(_){e.CHM(t);const I=e.oxw(2);return e.KtG(I.clear(_))}),e.qZA()}2&r&&e.Q6J("styleClass","p-multiselect-clear-icon")}function Tt(r,P){}function dn(r,P){1&r&&e.YNc(0,Tt,0,0,"ng-template")}function pn(r,P){if(1&r){const t=e.EpF();e.TgZ(0,"span",24),e.NdJ("click",function(_){e.CHM(t);const I=e.oxw(2);return e.KtG(I.clear(_))}),e.YNc(1,dn,1,0,null,22),e.qZA()}if(2&r){const t=e.oxw(2);e.xp6(1),e.Q6J("ngTemplateOutlet",t.clearIconTemplate)}}function qt(r,P){if(1&r&&(e.ynx(0),e.YNc(1,Ut,1,1,"TimesIcon",18),e.YNc(2,pn,2,1,"span",23),e.BQk()),2&r){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!t.clearIconTemplate),e.xp6(1),e.Q6J("ngIf",t.clearIconTemplate)}}function fn(r,P){if(1&r&&e._UZ(0,"span",27),2&r){const t=e.oxw(2);e.Q6J("ngClass",t.dropdownIcon)}}function Ft(r,P){1&r&&e._UZ(0,"ChevronDownIcon",28),2&r&&e.Q6J("styleClass","p-multiselect-trigger-icon")}function Nt(r,P){if(1&r&&(e.ynx(0),e.YNc(1,fn,1,1,"span",25),e.YNc(2,Ft,1,1,"ChevronDownIcon",26),e.BQk()),2&r){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.dropdownIcon),e.xp6(1),e.Q6J("ngIf",!t.dropdownIcon)}}function Xe(r,P){}function _n(r,P){1&r&&e.YNc(0,Xe,0,0,"ng-template")}function Bt(r,P){if(1&r&&(e.TgZ(0,"span",29),e.YNc(1,_n,1,0,null,22),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.Q6J("ngTemplateOutlet",t.dropdownIconTemplate)}}function hn(r,P){1&r&&e.GkF(0)}function gn(r,P){1&r&&e.GkF(0)}const Ot=function(r){return{options:r}};function tt(r,P){if(1&r&&(e.ynx(0),e.YNc(1,gn,1,0,"ng-container",8),e.BQk()),2&r){const t=e.oxw(3);e.xp6(1),e.Q6J("ngTemplateOutlet",t.filterTemplate)("ngTemplateOutletContext",e.VKq(2,Ot,t.filterOptions))}}function jt(r,P){1&r&&e._UZ(0,"CheckIcon",28),2&r&&e.Q6J("styleClass","p-checkbox-icon")}function mn(r,P){}function Jt(r,P){1&r&&e.YNc(0,mn,0,0,"ng-template")}function Qt(r,P){if(1&r&&(e.TgZ(0,"span",47),e.YNc(1,Jt,1,0,null,22),e.qZA()),2&r){const t=e.oxw(6);e.xp6(1),e.Q6J("ngTemplateOutlet",t.checkIconTemplate)}}function vn(r,P){if(1&r&&(e.ynx(0),e.YNc(1,jt,1,1,"CheckIcon",26),e.YNc(2,Qt,2,1,"span",46),e.BQk()),2&r){const t=e.oxw(5);e.xp6(1),e.Q6J("ngIf",!t.checkIconTemplate),e.xp6(1),e.Q6J("ngIf",t.checkIconTemplate)}}const Yt=function(r){return{"p-checkbox-disabled":r}},yn=function(r,P,t){return{"p-highlight":r,"p-focus":P,"p-disabled":t}};function Gt(r,P){if(1&r){const t=e.EpF();e.TgZ(0,"div",43)(1,"div",2)(2,"input",44),e.NdJ("focus",function(){e.CHM(t);const _=e.oxw(4);return e.KtG(_.onHeaderCheckboxFocus())})("blur",function(){e.CHM(t);const _=e.oxw(4);return e.KtG(_.onHeaderCheckboxBlur())})("keydown.space",function(_){e.CHM(t);const I=e.oxw(4);return e.KtG(I.toggleAll(_))}),e.qZA()(),e.TgZ(3,"div",45),e.NdJ("click",function(_){e.CHM(t);const I=e.oxw(4);return e.KtG(I.toggleAll(_))}),e.YNc(4,vn,3,2,"ng-container",7),e.qZA()()}if(2&r){const t=e.oxw(4);e.Q6J("ngClass",e.VKq(6,Yt,t.disabled||t.toggleAllDisabled)),e.xp6(2),e.Q6J("checked",t.allChecked)("disabled",t.disabled||t.toggleAllDisabled),e.xp6(1),e.Q6J("ngClass",e.kEZ(8,yn,t.allChecked,t.headerCheckboxFocus,t.disabled||t.toggleAllDisabled)),e.uIk("aria-checked",t.allChecked),e.xp6(1),e.Q6J("ngIf",t.allChecked)}}function it(r,P){1&r&&e._UZ(0,"SearchIcon",28),2&r&&e.Q6J("styleClass","p-multiselect-filter-icon")}function pt(r,P){}function Ct(r,P){1&r&&e.YNc(0,pt,0,0,"ng-template")}function xn(r,P){if(1&r&&(e.TgZ(0,"span",52),e.YNc(1,Ct,1,0,null,22),e.qZA()),2&r){const t=e.oxw(5);e.xp6(1),e.Q6J("ngTemplateOutlet",t.filterIconTemplate)}}function Ht(r,P){if(1&r){const t=e.EpF();e.TgZ(0,"div",48)(1,"input",49,50),e.NdJ("input",function(_){e.CHM(t);const I=e.oxw(4);return e.KtG(I.onFilterInputChange(_))}),e.qZA(),e.YNc(3,it,1,1,"SearchIcon",26),e.YNc(4,xn,2,1,"span",51),e.qZA()}if(2&r){const t=e.oxw(4);e.xp6(1),e.Q6J("value",t.filterValue||"")("disabled",t.disabled),e.uIk("autocomplete",t.autocomplete)("placeholder",t.filterPlaceHolder)("aria-label",t.ariaFilterLabel),e.xp6(2),e.Q6J("ngIf",!t.filterIconTemplate),e.xp6(1),e.Q6J("ngIf",t.filterIconTemplate)}}function at(r,P){1&r&&e._UZ(0,"TimesIcon",28),2&r&&e.Q6J("styleClass","p-multiselect-close-icon")}function wt(r,P){}function et(r,P){1&r&&e.YNc(0,wt,0,0,"ng-template")}function Vt(r,P){if(1&r&&(e.TgZ(0,"span",53),e.YNc(1,et,1,0,null,22),e.qZA()),2&r){const t=e.oxw(4);e.xp6(1),e.Q6J("ngTemplateOutlet",t.closeIconTemplate)}}function Wt(r,P){if(1&r){const t=e.EpF();e.YNc(0,Gt,5,12,"div",39),e.YNc(1,Ht,5,7,"div",40),e.TgZ(2,"button",41),e.NdJ("click",function(_){e.CHM(t);const I=e.oxw(3);return e.KtG(I.close(_))}),e.YNc(3,at,1,1,"TimesIcon",26),e.YNc(4,Vt,2,1,"span",42),e.qZA()}if(2&r){const t=e.oxw(3);e.Q6J("ngIf",t.showToggleAll&&!t.selectionLimit),e.xp6(1),e.Q6J("ngIf",t.filter),e.xp6(2),e.Q6J("ngIf",!t.closeIconTemplate),e.xp6(1),e.Q6J("ngIf",t.closeIconTemplate)}}function bn(r,P){if(1&r&&(e.TgZ(0,"div",36),e.Hsn(1),e.YNc(2,hn,1,0,"ng-container",22),e.YNc(3,tt,2,4,"ng-container",37),e.YNc(4,Wt,5,4,"ng-template",null,38,e.W1O),e.qZA()),2&r){const t=e.MAs(5),p=e.oxw(2);e.xp6(2),e.Q6J("ngTemplateOutlet",p.headerTemplate),e.xp6(1),e.Q6J("ngIf",p.filterTemplate)("ngIfElse",t)}}function Tn(r,P){1&r&&e.GkF(0)}const nt=function(r,P){return{$implicit:r,options:P}};function St(r,P){if(1&r&&e.YNc(0,Tn,1,0,"ng-container",8),2&r){const t=P.$implicit,p=P.options;e.oxw(2);const _=e.MAs(6);e.Q6J("ngTemplateOutlet",_)("ngTemplateOutletContext",e.WLB(2,nt,t,p))}}function $t(r,P){1&r&&e.GkF(0)}function On(r,P){if(1&r&&e.YNc(0,$t,1,0,"ng-container",8),2&r){const t=P.options,p=e.oxw(4);e.Q6J("ngTemplateOutlet",p.loaderTemplate)("ngTemplateOutletContext",e.VKq(2,Ot,t))}}function Cn(r,P){1&r&&(e.ynx(0),e.YNc(1,On,1,4,"ng-template",56),e.BQk())}function Kt(r,P){if(1&r){const t=e.EpF();e.TgZ(0,"p-scroller",54,55),e.NdJ("onLazyLoad",function(_){e.CHM(t);const I=e.oxw(2);return e.KtG(I.onLazyLoad.emit(_))}),e.YNc(2,St,1,5,"ng-template",13),e.YNc(3,Cn,2,0,"ng-container",7),e.qZA()}if(2&r){const t=e.oxw(2);e.Akn(e.VKq(9,ze,t.scrollHeight)),e.Q6J("items",t.optionsToRender)("itemSize",t.virtualScrollItemSize||t._itemSize)("autoSize",!0)("tabindex",-1)("lazy",t.lazy)("options",t.virtualScrollOptions),e.xp6(3),e.Q6J("ngIf",t.loaderTemplate)}}function Xt(r,P){1&r&&e.GkF(0)}const At=function(){return{}};function wn(r,P){if(1&r&&(e.ynx(0),e.YNc(1,Xt,1,0,"ng-container",8),e.BQk()),2&r){e.oxw();const t=e.MAs(6),p=e.oxw();e.xp6(1),e.Q6J("ngTemplateOutlet",t)("ngTemplateOutletContext",e.WLB(3,nt,p.optionsToRender,e.DdM(2,At)))}}function Sn(r,P){if(1&r&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&r){const t=e.oxw().$implicit,p=e.oxw(4);e.xp6(1),e.Oqu(p.getOptionGroupLabel(t)||"empty")}}function en(r,P){1&r&&e.GkF(0)}function ut(r,P){1&r&&e.GkF(0)}function lt(r,P){if(1&r&&(e.TgZ(0,"li",62),e.YNc(1,Sn,2,1,"span",7),e.YNc(2,en,1,0,"ng-container",8),e.qZA(),e.YNc(3,ut,1,0,"ng-container",8)),2&r){const t=P.$implicit,p=e.oxw(2).options,_=e.MAs(5),I=e.oxw(2);e.Q6J("ngStyle",e.VKq(6,ze,p.itemSize+"px")),e.xp6(1),e.Q6J("ngIf",!I.groupTemplate),e.xp6(1),e.Q6J("ngTemplateOutlet",I.groupTemplate)("ngTemplateOutletContext",e.VKq(8,Fe,t)),e.xp6(1),e.Q6J("ngTemplateOutlet",_)("ngTemplateOutletContext",e.VKq(10,Fe,I.getOptionGroupChildren(t)))}}function ft(r,P){if(1&r&&(e.ynx(0),e.YNc(1,lt,4,12,"ng-template",61),e.BQk()),2&r){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",t)}}function tn(r,P){1&r&&e.GkF(0)}function An(r,P){if(1&r&&(e.ynx(0),e.YNc(1,tn,1,0,"ng-container",8),e.BQk()),2&r){const t=e.oxw().$implicit,p=e.MAs(5);e.xp6(1),e.Q6J("ngTemplateOutlet",p)("ngTemplateOutletContext",e.VKq(2,Fe,t))}}function Ye(r,P){if(1&r){const t=e.EpF();e.TgZ(0,"p-multiSelectItem",63),e.NdJ("onClick",function(_){e.CHM(t);const I=e.oxw(4);return e.KtG(I.onOptionClick(_))})("onKeydown",function(_){e.CHM(t);const I=e.oxw(4);return e.KtG(I.onOptionKeydown(_))}),e.qZA()}if(2&r){const t=P.$implicit,p=e.oxw(2).options,_=e.oxw(2);e.Q6J("option",t)("selected",_.isSelected(t))("label",_.getOptionLabel(t))("disabled",_.isOptionDisabled(t))("template",_.itemTemplate)("checkIconTemplate",_.checkIconTemplate)("itemSize",p.itemSize)}}function _t(r,P){1&r&&e.YNc(0,Ye,1,7,"ng-template",61),2&r&&e.Q6J("ngForOf",P.$implicit)}function nn(r,P){if(1&r&&(e.ynx(0),e._uU(1),e.BQk()),2&r){const t=e.oxw(4);e.xp6(1),e.hij(" ",t.emptyFilterMessageLabel," ")}}function En(r,P){1&r&&e.GkF(0,null,65)}function Mn(r,P){if(1&r&&(e.TgZ(0,"li",64),e.YNc(1,nn,2,1,"ng-container",37),e.YNc(2,En,2,0,"ng-container",22),e.qZA()),2&r){const t=e.oxw().options,p=e.oxw(2);e.Q6J("ngStyle",e.VKq(4,ze,t.itemSize+"px")),e.xp6(1),e.Q6J("ngIf",!p.emptyFilterTemplate&&!p.emptyTemplate)("ngIfElse",p.emptyFilter),e.xp6(1),e.Q6J("ngTemplateOutlet",p.emptyFilterTemplate||p.emptyTemplate)}}function ht(r,P){if(1&r&&(e.ynx(0),e._uU(1),e.BQk()),2&r){const t=e.oxw(4);e.xp6(1),e.hij(" ",t.emptyMessageLabel," ")}}function rn(r,P){1&r&&e.GkF(0,null,66)}function Zn(r,P){if(1&r&&(e.TgZ(0,"li",64),e.YNc(1,ht,2,1,"ng-container",37),e.YNc(2,rn,2,0,"ng-container",22),e.qZA()),2&r){const t=e.oxw().options,p=e.oxw(2);e.Q6J("ngStyle",e.VKq(4,ze,t.itemSize+"px")),e.xp6(1),e.Q6J("ngIf",!p.emptyTemplate)("ngIfElse",p.empty),e.xp6(1),e.Q6J("ngTemplateOutlet",p.emptyTemplate)}}function kn(r,P){if(1&r&&(e.TgZ(0,"ul",57,58),e.YNc(2,ft,2,1,"ng-container",7),e.YNc(3,An,2,4,"ng-container",7),e.YNc(4,_t,1,1,"ng-template",null,59,e.W1O),e.YNc(6,Mn,3,6,"li",60),e.YNc(7,Zn,3,6,"li",60),e.qZA()),2&r){const t=P.options,p=e.oxw(2);e.Akn(t.contentStyle),e.Q6J("ngClass",t.contentStyleClass),e.xp6(2),e.Q6J("ngIf",p.group),e.xp6(1),e.Q6J("ngIf",!p.group),e.xp6(3),e.Q6J("ngIf",p.hasFilter()&&p.isEmpty()),e.xp6(1),e.Q6J("ngIf",!p.hasFilter()&&p.isEmpty())}}function In(r,P){1&r&&e.GkF(0)}function Rn(r,P){if(1&r&&(e.TgZ(0,"div",67),e.Hsn(1,1),e.YNc(2,In,1,0,"ng-container",22),e.qZA()),2&r){const t=e.oxw(2);e.xp6(2),e.Q6J("ngTemplateOutlet",t.footerTemplate)}}const Pn=function(){return["p-multiselect-panel p-component"]};function on(r,P){if(1&r){const t=e.EpF();e.TgZ(0,"div",30),e.NdJ("keydown",function(_){e.CHM(t);const I=e.oxw();return e.KtG(I.onKeydown(_))}),e.YNc(1,bn,6,3,"div",31),e.TgZ(2,"div",32),e.YNc(3,Kt,4,11,"p-scroller",33),e.YNc(4,wn,2,6,"ng-container",7),e.YNc(5,kn,8,7,"ng-template",null,34,e.W1O),e.qZA(),e.YNc(7,Rn,3,1,"div",35),e.qZA()}if(2&r){const t=e.oxw();e.Tol(t.panelStyleClass),e.Q6J("ngClass",e.DdM(10,Pn))("ngStyle",t.panelStyle),e.xp6(1),e.Q6J("ngIf",t.showHeader),e.xp6(1),e.Udp("max-height",t.virtualScroll?"auto":t.scrollHeight||"auto"),e.xp6(1),e.Q6J("ngIf",t.virtualScroll),e.xp6(1),e.Q6J("ngIf",!t.virtualScroll),e.xp6(3),e.Q6J("ngIf",t.footerFacet||t.footerTemplate)}}const Dn=[[["p-header"]],[["p-footer"]]],zn=function(r,P,t,p){return{"p-multiselect p-component":!0,"p-multiselect-open":r,"p-multiselect-chip":P,"p-focus":t,"p-disabled":p}},an=function(r,P){return{"p-placeholder":r,"p-multiselect-label-empty":P}},Ln=function(r,P){return{$implicit:r,removeChip:P}},Et=function(){return{"p-multiselect-trigger":!0}},Un=["p-header","p-footer"],un={provide:K.JU,useExisting:(0,e.Gpc)(()=>C),multi:!0};let m=(()=>{class r{option;selected;label;disabled;itemSize;template;checkIconTemplate;onClick=new e.vpe;onKeydown=new e.vpe;onOptionClick(t){this.onClick.emit({originalEvent:t,option:this.option,selected:this.selected})}onOptionKeydown(t){this.onKeydown.emit({originalEvent:t,option:this.option})}static \u0275fac=function(p){return new(p||r)};static \u0275cmp=e.Xpm({type:r,selectors:[["p-multiSelectItem"]],hostAttrs:[1,"p-element"],inputs:{option:"option",selected:"selected",label:"label",disabled:"disabled",itemSize:"itemSize",template:"template",checkIconTemplate:"checkIconTemplate"},outputs:{onClick:"onClick",onKeydown:"onKeydown"},decls:6,vars:18,consts:[["pRipple","",1,"p-multiselect-item",3,"ngStyle","ngClass","click","keydown"],[1,"p-checkbox","p-component"],[1,"p-checkbox-box",3,"ngClass"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"styleClass",4,"ngIf"],["class","p-checkbox-icon",4,"ngIf"],[3,"styleClass"],[1,"p-checkbox-icon"],[4,"ngTemplateOutlet"]],template:function(p,_){1&p&&(e.TgZ(0,"li",0),e.NdJ("click",function(B){return _.onOptionClick(B)})("keydown",function(B){return _.onOptionKeydown(B)}),e.TgZ(1,"div",1)(2,"div",2),e.YNc(3,Ie,3,2,"ng-container",3),e.qZA()(),e.YNc(4,Re,2,1,"span",3),e.YNc(5,Ue,1,0,"ng-container",4),e.qZA()),2&p&&(e.Q6J("ngStyle",e.VKq(9,ze,_.itemSize+"px"))("ngClass",e.WLB(11,je,_.selected,_.disabled)),e.uIk("aria-label",_.label)("tabindex",_.disabled?null:"0"),e.xp6(2),e.Q6J("ngClass",e.VKq(14,qe,_.selected)),e.xp6(1),e.Q6J("ngIf",_.selected),e.xp6(1),e.Q6J("ngIf",!_.template),e.xp6(1),e.Q6J("ngTemplateOutlet",_.template)("ngTemplateOutletContext",e.VKq(16,Fe,_.option)))},dependencies:function(){return[n.mk,n.O5,n.tP,n.PC,ee.H,re.n]},encapsulation:2})}return r})(),C=(()=>{class r{el;renderer;cd;zone;filterService;config;overlayService;style;styleClass;panelStyle;panelStyleClass;inputId;disabled;readonly;group;filter=!0;filterPlaceHolder;filterLocale;overlayVisible;tabindex;appendTo;dataKey;name;label;ariaLabelledBy;displaySelectedLabel=!0;maxSelectedLabels=3;selectedItemsLabel="ellipsis";showToggleAll=!0;emptyFilterMessage="";emptyMessage="";resetFilterOnHide=!1;dropdownIcon;optionLabel;optionValue;optionDisabled;optionGroupLabel;optionGroupChildren="items";showHeader=!0;filterBy;scrollHeight="200px";lazy=!1;virtualScroll;virtualScrollItemSize;virtualScrollOptions;overlayOptions;ariaFilterLabel;filterMatchMode="contains";tooltip="";tooltipPosition="right";tooltipPositionStyle="absolute";tooltipStyleClass;autofocusFilter=!0;display="comma";autocomplete="on";showClear=!1;get autoZIndex(){return this._autoZIndex}set autoZIndex(t){this._autoZIndex=t,console.warn("The autoZIndex property is deprecated since v14.2.0, use overlayOptions property instead.")}get baseZIndex(){return this._baseZIndex}set baseZIndex(t){this._baseZIndex=t,console.warn("The baseZIndex property is deprecated since v14.2.0, use overlayOptions property instead.")}get showTransitionOptions(){return this._showTransitionOptions}set showTransitionOptions(t){this._showTransitionOptions=t,console.warn("The showTransitionOptions property is deprecated since v14.2.0, use overlayOptions property instead.")}get hideTransitionOptions(){return this._hideTransitionOptions}set hideTransitionOptions(t){this._hideTransitionOptions=t,console.warn("The hideTransitionOptions property is deprecated since v14.2.0, use overlayOptions property instead.")}set defaultLabel(t){this._defaultLabel=t,this.updateLabel()}get defaultLabel(){return this._defaultLabel}set placeholder(t){this._placeholder=t,this.updateLabel()}get placeholder(){return this._placeholder}get options(){return this._options}set options(t){this._options=t,this.updateLabel()}get filterValue(){return this._filterValue}set filterValue(t){this._filterValue=t,this.activateFilter()}get itemSize(){return this._itemSize}set itemSize(t){this._itemSize=t,console.warn("The itemSize property is deprecated, use virtualScrollItemSize property instead.")}get selectionLimit(){return this._selectionLimit}set selectionLimit(t){this._selectionLimit=t,this.checkSelectionLimit()}containerViewChild;overlayViewChild;filterInputChild;accessibleViewChild;itemsViewChild;scroller;footerFacet;headerFacet;templates;onChange=new e.vpe;onFilter=new e.vpe;onFocus=new e.vpe;onBlur=new e.vpe;onClick=new e.vpe;onClear=new e.vpe;onPanelShow=new e.vpe;onPanelHide=new e.vpe;onLazyLoad=new e.vpe;onRemove=new e.vpe;_autoZIndex;_baseZIndex;_showTransitionOptions;_hideTransitionOptions;_defaultLabel;_placeholder;_itemSize;_selectionLimit;value;_filteredOptions;onModelChange=()=>{};onModelTouched=()=>{};valuesAsString;focus;filled;_filterValue;filtered;itemTemplate;groupTemplate;loaderTemplate;headerTemplate;filterTemplate;footerTemplate;emptyFilterTemplate;emptyTemplate;selectedItemsTemplate;checkIconTemplate;filterIconTemplate;removeTokenIconTemplate;closeIconTemplate;clearIconTemplate;dropdownIconTemplate;headerCheckboxFocus;filterOptions;_options;maxSelectionLimitReached;preventModelTouched;preventDocumentDefault;constructor(t,p,_,I,B,ue,se){this.el=t,this.renderer=p,this.cd=_,this.zone=I,this.filterService=B,this.config=ue,this.overlayService=se}ngOnInit(){this.updateLabel(),this.filterBy&&(this.filterOptions={filter:t=>this.onFilterInputChange(t),reset:()=>this.resetFilter()})}ngAfterContentInit(){this.templates.forEach(t=>{switch(t.getType()){case"item":default:this.itemTemplate=t.template;break;case"group":this.groupTemplate=t.template;break;case"selectedItems":this.selectedItemsTemplate=t.template;break;case"header":this.headerTemplate=t.template;break;case"filter":this.filterTemplate=t.template;break;case"emptyfilter":this.emptyFilterTemplate=t.template;break;case"empty":this.emptyTemplate=t.template;break;case"footer":this.footerTemplate=t.template;break;case"loader":this.loaderTemplate=t.template;break;case"checkicon":this.checkIconTemplate=t.template;break;case"filtericon":this.filterIconTemplate=t.template;break;case"removetokenicon":this.removeTokenIconTemplate=t.template;break;case"closeicon":this.closeIconTemplate=t.template;break;case"clearicon":this.clearIconTemplate=t.template;break;case"dropdownicon":this.dropdownIconTemplate=t.template}})}ngAfterViewInit(){this.overlayVisible&&this.show()}ngAfterViewChecked(){this.filtered&&(this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.overlayViewChild?.alignOverlay()},1)}),this.filtered=!1)}getOptionLabel(t){return this.optionLabel?oe.gb.resolveFieldData(t,this.optionLabel):t&&null!=t.label?t.label:t}getOptionValue(t){return this.optionValue?oe.gb.resolveFieldData(t,this.optionValue):!this.optionLabel&&t&&void 0!==t.value?t.value:t}getOptionGroupLabel(t){return this.optionGroupLabel?oe.gb.resolveFieldData(t,this.optionGroupLabel):t&&null!=t.label?t.label:t}getOptionGroupChildren(t){return this.optionGroupChildren?oe.gb.resolveFieldData(t,this.optionGroupChildren):t.items}isOptionDisabled(t){return(this.optionDisabled?oe.gb.resolveFieldData(t,this.optionDisabled):!(!t||void 0===t.disabled)&&t.disabled)||this.maxSelectionLimitReached&&!this.isSelected(t)}writeValue(t){this.value=t,this.updateLabel(),this.updateFilledState(),this.checkSelectionLimit(),this.cd.markForCheck()}checkSelectionLimit(){this.maxSelectionLimitReached=!(!this.selectionLimit||!this.value||this.value.length!==this.selectionLimit)}updateFilledState(){this.filled=this.value&&this.value.length>0}registerOnChange(t){this.onModelChange=t}registerOnTouched(t){this.onModelTouched=t}setDisabledState(t){this.disabled=t,this.cd.markForCheck()}onOptionClick(t){let p=t.option;if(this.isOptionDisabled(p))return;let _=this.getOptionValue(p),I=this.findSelectionIndex(_);-1!=I?(this.value=this.value.filter((B,ue)=>ue!=I),this.onRemove.emit({newValue:this.value,removed:_}),this.selectionLimit&&(this.maxSelectionLimitReached=!1)):((!this.selectionLimit||!this.value||this.value.length<this.selectionLimit)&&(this.value=[...this.value||[],_]),this.checkSelectionLimit()),this.onModelChange(this.value),this.onChange.emit({originalEvent:t.originalEvent,value:this.value,itemValue:_}),this.updateLabel(),this.updateFilledState()}isSelected(t){return-1!=this.findSelectionIndex(this.getOptionValue(t))}findSelectionIndex(t){let p=-1;if(this.value)for(let _=0;_<this.value.length;_++)if(oe.gb.equals(this.value[_],t,this.dataKey)){p=_;break}return p}get toggleAllDisabled(){let t=this.optionsToRender;if(!t||0===t.length)return!0;for(let p of t)if(!this.isOptionDisabled(p))return!1;return!0}toggleAll(t){this.disabled||this.toggleAllDisabled||this.readonly||(this.allChecked?this.uncheckAll():this.checkAll(),this.onModelChange(this.value),this.onChange.emit({originalEvent:t,value:this.value}),this.updateFilledState(),this.updateLabel(),t.preventDefault(),t.stopPropagation())}checkAll(){let p=[];this.optionsToRender.forEach(_=>{if(this.group){let I=this.getOptionGroupChildren(_);I&&I.forEach(B=>{let ue=this.isOptionDisabled(B);(!ue||ue&&this.isSelected(B))&&p.push(this.getOptionValue(B))})}else{let I=this.isOptionDisabled(_);(!I||I&&this.isSelected(_))&&p.push(this.getOptionValue(_))}}),this.value=p}uncheckAll(){let p=[];this.optionsToRender.forEach(_=>{this.group?_.items&&_.items.forEach(I=>{this.isOptionDisabled(I)&&this.isSelected(I)&&p.push(this.getOptionValue(I))}):this.isOptionDisabled(_)&&this.isSelected(_)&&p.push(this.getOptionValue(_))}),this.value=p}show(){this.overlayVisible||(this.overlayVisible=!0,this.preventDocumentDefault=!0,this.cd.markForCheck())}onOverlayAnimationStart(t){switch(t.toState){case"visible":this.virtualScroll&&this.scroller?.setContentEl(this.itemsViewChild?.nativeElement),this.filterInputChild&&this.filterInputChild.nativeElement&&(this.preventModelTouched=!0,this.autofocusFilter&&this.filterInputChild.nativeElement.focus()),this.onPanelShow.emit();break;case"void":this.onModelTouched()}}hide(){this.overlayVisible=!1,this.resetFilterOnHide&&this.resetFilter(),this.onPanelHide.emit(),this.cd.markForCheck()}resetFilter(){this.filterInputChild&&this.filterInputChild.nativeElement&&(this.filterInputChild.nativeElement.value=""),this._filterValue=null,this._filteredOptions=null}close(t){this.hide(),t.preventDefault(),t.stopPropagation()}clear(t){this.value=null,this.updateLabel(),this.updateFilledState(),this.checkSelectionLimit(),this.onClear.emit(),this.onModelChange(this.value),t.stopPropagation()}onMouseclick(t,p){this.disabled||this.readonly||t.target.isSameNode(this.accessibleViewChild?.nativeElement)||(this.onClick.emit(t),!this.overlayViewChild?.el?.nativeElement?.contains(t.target)&&!ne.p.hasClass(t.target,"p-multiselect-token-icon")&&(this.overlayVisible?this.hide():this.show(),p.focus()))}removeChip(t,p){this.value=this.value.filter(_=>!oe.gb.equals(_,t,this.dataKey)),this.onModelChange(this.value),this.checkSelectionLimit(),this.onChange.emit({originalEvent:p,value:this.value,itemValue:t}),this.updateLabel(),this.updateFilledState()}onInputFocus(t){this.focus=!0,this.onFocus.emit({originalEvent:t})}onInputBlur(t){this.focus=!1,this.onBlur.emit({originalEvent:t}),this.preventModelTouched||this.onModelTouched(),this.preventModelTouched=!1}onOptionKeydown(t){if(!this.readonly)switch(t.originalEvent.which){case 40:var p=this.findNextItem(t.originalEvent.target.parentElement);p&&p.focus(),t.originalEvent.preventDefault();break;case 38:var _=this.findPrevItem(t.originalEvent.target.parentElement);_&&_.focus(),t.originalEvent.preventDefault();break;case 13:this.onOptionClick(t),t.originalEvent.preventDefault();break;case 27:case 9:this.hide()}}findNextItem(t){let p=t.nextElementSibling;return p?ne.p.hasClass(p.children[0],"p-disabled")||ne.p.isHidden(p.children[0])||ne.p.hasClass(p,"p-multiselect-item-group")?this.findNextItem(p):p.children[0]:null}findPrevItem(t){let p=t.previousElementSibling;return p?ne.p.hasClass(p.children[0],"p-disabled")||ne.p.isHidden(p.children[0])||ne.p.hasClass(p,"p-multiselect-item-group")?this.findPrevItem(p):p.children[0]:null}onKeydown(t){switch(t.which){case 40:!this.overlayVisible&&t.altKey&&(this.show(),t.preventDefault());break;case 32:this.overlayVisible||(this.show(),t.preventDefault());break;case 27:this.hide()}}updateLabel(){if(this.value&&this.options&&this.value.length&&this.displaySelectedLabel){let t="";for(let p=0;p<this.value.length;p++){let _=this.findLabelByValue(this.value[p]);_&&(t.length>0&&(t+=", "),t+=_)}if(this.value.length<=this.maxSelectedLabels||"ellipsis"===this.selectedItemsLabel)this.valuesAsString=t;else{let p=/{(.*?)}/;this.valuesAsString=p.test(this.selectedItemsLabel)?this.selectedItemsLabel.replace(this.selectedItemsLabel.match(p)[0],this.value.length+""):this.selectedItemsLabel}}else this.valuesAsString=this.placeholder||this.defaultLabel}findLabelByValue(t){if(this.group){let p=null;for(let _=0;_<this.options.length;_++){let I=this.getOptionGroupChildren(this.options[_]);if(I&&(p=this.searchLabelByValue(t,I),p))break}return p}return this.searchLabelByValue(t,this.options)}searchLabelByValue(t,p){let _=null;for(let I=0;I<p.length;I++){let B=p[I],ue=this.getOptionValue(B);if(null==t&&null==ue||oe.gb.equals(t,ue,this.dataKey)){_=this.getOptionLabel(B);break}}return _}get allChecked(){let t=this.optionsToRender;if(!t||0===t.length)return!1;{let p=0,_=0,I=0,B=this.group?0:this.optionsToRender.length;for(let ue of t)if(this.group)for(let se of this.getOptionGroupChildren(ue)){let ge=this.isOptionDisabled(se),xe=this.isSelected(se);if(ge)xe?p++:_++;else{if(!xe)return!1;I++}B++}else{let se=this.isOptionDisabled(ue),ge=this.isSelected(ue);if(se)ge?p++:_++;else{if(!ge)return!1;I++}}return B===p||B===I||I&&B===I+_+p}}get optionsToRender(){return this._filteredOptions||this.options}get emptyMessageLabel(){return this.emptyMessage||this.config.getTranslation(w.ws.EMPTY_MESSAGE)}get emptyFilterMessageLabel(){return this.emptyFilterMessage||this.config.getTranslation(w.ws.EMPTY_FILTER_MESSAGE)}hasFilter(){return this._filterValue&&this._filterValue.trim().length>0}isEmpty(){return!this.optionsToRender||this.optionsToRender&&0===this.optionsToRender.length}onFilterInputChange(t){this._filterValue=t.target.value,this.activateFilter(),this.filtered=!0,this.onFilter.emit({originalEvent:t,filter:this._filterValue}),this.cd.detectChanges()}activateFilter(){if(this.hasFilter()&&this._options){let t=(this.filterBy||this.optionLabel||"label").split(",");if(this.group){let p=[];for(let _ of this.options){let I=this.filterService.filter(this.getOptionGroupChildren(_),t,this.filterValue,this.filterMatchMode,this.filterLocale);I&&I.length&&p.push({..._,[this.optionGroupChildren]:I})}this._filteredOptions=p}else this._filteredOptions=this.filterService.filter(this.options,t,this._filterValue,this.filterMatchMode,this.filterLocale)}else this._filteredOptions=null}onHeaderCheckboxFocus(){this.headerCheckboxFocus=!0}onHeaderCheckboxBlur(){this.headerCheckboxFocus=!1}static \u0275fac=function(p){return new(p||r)(e.Y36(e.SBq),e.Y36(e.Qsj),e.Y36(e.sBO),e.Y36(e.R0b),e.Y36(w.iZ),e.Y36(w.b4),e.Y36(w.F0))};static \u0275cmp=e.Xpm({type:r,selectors:[["p-multiSelect"]],contentQueries:function(p,_,I){if(1&p&&(e.Suo(I,w.$_,5),e.Suo(I,w.h4,5),e.Suo(I,w.jx,4)),2&p){let B;e.iGM(B=e.CRH())&&(_.footerFacet=B.first),e.iGM(B=e.CRH())&&(_.headerFacet=B.first),e.iGM(B=e.CRH())&&(_.templates=B)}},viewQuery:function(p,_){if(1&p&&(e.Gf(He,5),e.Gf(Ke,5),e.Gf(Ve,5),e.Gf(kt,5),e.Gf(dt,5),e.Gf(ln,5)),2&p){let I;e.iGM(I=e.CRH())&&(_.containerViewChild=I.first),e.iGM(I=e.CRH())&&(_.overlayViewChild=I.first),e.iGM(I=e.CRH())&&(_.filterInputChild=I.first),e.iGM(I=e.CRH())&&(_.accessibleViewChild=I.first),e.iGM(I=e.CRH())&&(_.itemsViewChild=I.first),e.iGM(I=e.CRH())&&(_.scroller=I.first)}},hostAttrs:[1,"p-element","p-inputwrapper"],hostVars:6,hostBindings:function(p,_){2&p&&e.ekj("p-inputwrapper-filled",_.filled)("p-inputwrapper-focus",_.focus||_.overlayVisible)("p-multiselect-clearable",_.showClear&&!_.disabled)},inputs:{style:"style",styleClass:"styleClass",panelStyle:"panelStyle",panelStyleClass:"panelStyleClass",inputId:"inputId",disabled:"disabled",readonly:"readonly",group:"group",filter:"filter",filterPlaceHolder:"filterPlaceHolder",filterLocale:"filterLocale",overlayVisible:"overlayVisible",tabindex:"tabindex",appendTo:"appendTo",dataKey:"dataKey",name:"name",label:"label",ariaLabelledBy:"ariaLabelledBy",displaySelectedLabel:"displaySelectedLabel",maxSelectedLabels:"maxSelectedLabels",selectedItemsLabel:"selectedItemsLabel",showToggleAll:"showToggleAll",emptyFilterMessage:"emptyFilterMessage",emptyMessage:"emptyMessage",resetFilterOnHide:"resetFilterOnHide",dropdownIcon:"dropdownIcon",optionLabel:"optionLabel",optionValue:"optionValue",optionDisabled:"optionDisabled",optionGroupLabel:"optionGroupLabel",optionGroupChildren:"optionGroupChildren",showHeader:"showHeader",filterBy:"filterBy",scrollHeight:"scrollHeight",lazy:"lazy",virtualScroll:"virtualScroll",virtualScrollItemSize:"virtualScrollItemSize",virtualScrollOptions:"virtualScrollOptions",overlayOptions:"overlayOptions",ariaFilterLabel:"ariaFilterLabel",filterMatchMode:"filterMatchMode",tooltip:"tooltip",tooltipPosition:"tooltipPosition",tooltipPositionStyle:"tooltipPositionStyle",tooltipStyleClass:"tooltipStyleClass",autofocusFilter:"autofocusFilter",display:"display",autocomplete:"autocomplete",showClear:"showClear",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",defaultLabel:"defaultLabel",placeholder:"placeholder",options:"options",filterValue:"filterValue",itemSize:"itemSize",selectionLimit:"selectionLimit"},outputs:{onChange:"onChange",onFilter:"onFilter",onFocus:"onFocus",onBlur:"onBlur",onClick:"onClick",onClear:"onClear",onPanelShow:"onPanelShow",onPanelHide:"onPanelHide",onLazyLoad:"onLazyLoad",onRemove:"onRemove"},features:[e._Bn([un])],ngContentSelectors:Un,decls:16,vars:43,consts:[[3,"ngClass","ngStyle","click"],["container",""],[1,"p-hidden-accessible"],["type","text","readonly","readonly","aria-haspopup","listbox","role","listbox",3,"disabled","focus","blur","keydown"],["in",""],[1,"p-multiselect-label-container",3,"pTooltip","tooltipPosition","positionStyle","tooltipStyleClass"],[1,"p-multiselect-label",3,"ngClass"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"ngClass"],["class","p-multiselect-trigger-icon",4,"ngIf"],[3,"visible","options","target","appendTo","autoZIndex","baseZIndex","showTransitionOptions","hideTransitionOptions","visibleChange","onAnimationStart","onHide"],["overlay",""],["pTemplate","content"],["class","p-multiselect-token",4,"ngFor","ngForOf"],[1,"p-multiselect-token"],["token",""],[1,"p-multiselect-token-label"],[3,"styleClass","click",4,"ngIf"],["class","p-multiselect-token-icon",3,"click",4,"ngIf"],[3,"styleClass","click"],[1,"p-multiselect-token-icon",3,"click"],[4,"ngTemplateOutlet"],["class","p-multiselect-clear-icon",3,"click",4,"ngIf"],[1,"p-multiselect-clear-icon",3,"click"],["class","p-multiselect-trigger-icon",3,"ngClass",4,"ngIf"],[3,"styleClass",4,"ngIf"],[1,"p-multiselect-trigger-icon",3,"ngClass"],[3,"styleClass"],[1,"p-multiselect-trigger-icon"],[3,"ngClass","ngStyle","keydown"],["class","p-multiselect-header",4,"ngIf"],[1,"p-multiselect-items-wrapper"],[3,"items","style","itemSize","autoSize","tabindex","lazy","options","onLazyLoad",4,"ngIf"],["buildInItems",""],["class","p-multiselect-footer",4,"ngIf"],[1,"p-multiselect-header"],[4,"ngIf","ngIfElse"],["builtInFilterElement",""],["class","p-checkbox p-component",3,"ngClass",4,"ngIf"],["class","p-multiselect-filter-container",4,"ngIf"],["type","button","pRipple","",1,"p-multiselect-close","p-link","p-button-icon-only",3,"click"],["class","p-multiselect-close-icon",4,"ngIf"],[1,"p-checkbox","p-component",3,"ngClass"],["type","checkbox","readonly","readonly",3,"checked","disabled","focus","blur","keydown.space"],["role","checkbox",1,"p-checkbox-box",3,"ngClass","click"],["class","p-checkbox-icon",4,"ngIf"],[1,"p-checkbox-icon"],[1,"p-multiselect-filter-container"],["type","text","role","textbox",1,"p-multiselect-filter","p-inputtext","p-component",3,"value","disabled","input"],["filterInput",""],["class","p-multiselect-filter-icon",4,"ngIf"],[1,"p-multiselect-filter-icon"],[1,"p-multiselect-close-icon"],[3,"items","itemSize","autoSize","tabindex","lazy","options","onLazyLoad"],["scroller",""],["pTemplate","loader"],["role","listbox","aria-multiselectable","true",1,"p-multiselect-items","p-component",3,"ngClass"],["items",""],["itemslist",""],["class","p-multiselect-empty-message",3,"ngStyle",4,"ngIf"],["ngFor","",3,"ngForOf"],[1,"p-multiselect-item-group",3,"ngStyle"],[3,"option","selected","label","disabled","template","checkIconTemplate","itemSize","onClick","onKeydown"],[1,"p-multiselect-empty-message",3,"ngStyle"],["emptyFilter",""],["empty",""],[1,"p-multiselect-footer"]],template:function(p,_){if(1&p){const I=e.EpF();e.F$t(Dn),e.TgZ(0,"div",0,1),e.NdJ("click",function(ue){e.CHM(I);const se=e.MAs(4);return e.KtG(_.onMouseclick(ue,se))}),e.TgZ(2,"div",2)(3,"input",3,4),e.NdJ("focus",function(ue){return _.onInputFocus(ue)})("blur",function(ue){return _.onInputBlur(ue)})("keydown",function(ue){return _.onKeydown(ue)}),e.qZA()(),e.TgZ(5,"div",5)(6,"div",6),e.YNc(7,zt,3,2,"ng-container",7),e.YNc(8,Lt,1,0,"ng-container",8),e.qZA(),e.YNc(9,qt,3,2,"ng-container",7),e.qZA(),e.TgZ(10,"div",9),e.YNc(11,Nt,3,2,"ng-container",7),e.YNc(12,Bt,2,1,"span",10),e.qZA(),e.TgZ(13,"p-overlay",11,12),e.NdJ("visibleChange",function(ue){return _.overlayVisible=ue})("onAnimationStart",function(ue){return _.onOverlayAnimationStart(ue)})("onHide",function(){return _.hide()}),e.YNc(15,on,8,11,"ng-template",13),e.qZA()()}2&p&&(e.Tol(_.styleClass),e.Q6J("ngClass",e.l5B(31,zn,_.overlayVisible,"chip"===_.display,_.focus,_.disabled))("ngStyle",_.style),e.xp6(3),e.Q6J("disabled",_.disabled),e.uIk("label",_.label)("id",_.inputId)("name",_.name)("tabindex",_.tabindex)("aria-expanded",_.overlayVisible)("aria-labelledby",_.ariaLabelledBy),e.xp6(2),e.Q6J("pTooltip",_.tooltip)("tooltipPosition",_.tooltipPosition)("positionStyle",_.tooltipPositionStyle)("tooltipStyleClass",_.tooltipStyleClass),e.xp6(1),e.Q6J("ngClass",e.WLB(36,an,_.valuesAsString===(_.defaultLabel||_.placeholder),!(null!=_.valuesAsString&&0!==_.valuesAsString.length||null!=_.placeholder&&0!==_.placeholder.length))),e.xp6(1),e.Q6J("ngIf",!_.selectedItemsTemplate),e.xp6(1),e.Q6J("ngTemplateOutlet",_.selectedItemsTemplate)("ngTemplateOutletContext",e.WLB(39,Ln,_.value,_.removeChip.bind(_))),e.xp6(1),e.Q6J("ngIf",null!=_.value&&_.filled&&!_.disabled&&_.showClear),e.xp6(1),e.Q6J("ngClass",e.DdM(42,Et)),e.xp6(1),e.Q6J("ngIf",!_.dropdownIconTemplate),e.xp6(1),e.Q6J("ngIf",_.dropdownIconTemplate),e.xp6(1),e.Q6J("visible",_.overlayVisible)("options",_.overlayOptions)("target","@parent")("appendTo",_.appendTo)("autoZIndex",_.autoZIndex)("baseZIndex",_.baseZIndex)("showTransitionOptions",_.showTransitionOptions)("hideTransitionOptions",_.hideTransitionOptions))},dependencies:function(){return[n.mk,n.sg,n.O5,n.tP,n.PC,$.aV,w.jx,ae.u,ee.H,N.T,re.n,de.W,Y.x,Q.q,te.v,m]},styles:["@layer primeng{.p-multiselect{display:inline-flex;cursor:pointer;position:relative;-webkit-user-select:none;user-select:none}.p-multiselect-trigger{display:flex;align-items:center;justify-content:center;flex-shrink:0}.p-multiselect-label-container{overflow:hidden;flex:1 1 auto;cursor:pointer}.p-multiselect-label{display:block;white-space:nowrap;cursor:pointer;overflow:hidden;text-overflow:ellipsis}.p-multiselect-label-empty{overflow:hidden;visibility:hidden}.p-multiselect-token{cursor:default;display:inline-flex;align-items:center;flex:0 0 auto}.p-multiselect-token-icon{cursor:pointer}.p-multiselect-items-wrapper{overflow:auto}.p-multiselect-items{margin:0;padding:0;list-style-type:none}.p-multiselect-item{cursor:pointer;display:flex;align-items:center;font-weight:400;white-space:nowrap;position:relative;overflow:hidden}.p-multiselect-header{display:flex;align-items:center;justify-content:space-between}.p-multiselect-filter-container{position:relative;flex:1 1 auto}.p-multiselect-filter-icon{position:absolute;top:50%;margin-top:-.5rem}.p-multiselect-filter-container .p-inputtext{width:100%}.p-multiselect-close{display:flex;align-items:center;justify-content:center;flex-shrink:0;overflow:hidden;position:relative}.p-fluid .p-multiselect{display:flex}.p-multiselect-clear-icon{position:absolute;top:50%;margin-top:-.5rem;cursor:pointer}.p-multiselect-clearable{position:relative}}\n"],encapsulation:2,changeDetection:0})}return r})(),D=(()=>{class r{static \u0275fac=function(p){return new(p||r)};static \u0275mod=e.oAB({type:r});static \u0275inj=e.cJS({imports:[n.ez,$.U8,w.m8,ae.z,ee.T,N.v,re.n,de.W,Y.x,Q.q,te.v,re.n,$.U8,w.m8,N.v]})}return r})();var G=v(2328),X=v(6128),W=v(9151),_e=v(6263),me=v(4104);function Se(r,P){if(1&r){const t=e.EpF();e.TgZ(0,"div",6)(1,"p-calendar",7),e.NdJ("ngModelChange",function(_){e.CHM(t);const I=e.oxw();return e.KtG(I.filterModel.dateRange=_)}),e.qZA(),e.TgZ(2,"p-button",8),e.NdJ("click",function(){e.CHM(t);const _=e.oxw();return e.KtG(_.findOrders())}),e.qZA()()}if(2&r){const t=e.oxw();e.xp6(1),e.Q6J("ngModel",t.filterModel.dateRange)("showClear",!0)("selectOtherMonths",!0)("readonlyInput",!0)}}function Pe(r,P){if(1&r){const t=e.EpF();e.TgZ(0,"p-button",9),e.NdJ("click",function(){e.CHM(t);const _=e.oxw();return e.KtG(_.importOrders())}),e.qZA()}if(2&r){const t=e.oxw();e.Q6J("icon",t.isLoading?"pi pi-download":"")}}function Le(r,P){if(1&r&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"number"),e.qZA()),2&r){const t=e.oxw().ngIf;e.xp6(1),e.hij("~",e.xi3(2,1,t.expectedPayout,"1.2-2"),"\u20bd")}}function We(r,P){1&r&&(e.TgZ(0,"span"),e._uU(1,"-"),e.qZA())}function $e(r,P){1&r&&(e.TgZ(0,"div",33)(1,"span",34),e._uU(2,"\u0410\u0440\u0442\u0438\u043a\u0443\u043b\u044b"),e.qZA()())}function rt(r,P){if(1&r&&(e.TgZ(0,"div",38),e._UZ(1,"img",39),e.TgZ(2,"div"),e._uU(3),e.qZA()()),2&r){const t=P.$implicit;e.xp6(1),e.s9C("src",t.image,e.LSH),e.xp6(2),e.Oqu(t.id)}}function gt(r,P){if(1&r&&(e.ynx(0),e._uU(1),e.BQk()),2&r){const t=P.$implicit;e.xp6(1),e.hij(" ",t,", ")}}function Mt(r,P){1&r&&e.YNc(0,gt,2,1,"ng-container",40),2&r&&e.Q6J("ngForOf",P.$implicit)}function A(r,P){if(1&r){const t=e.EpF();e.TgZ(0,"p-multiSelect",35),e.NdJ("onChange",function(_){const B=e.CHM(t).filterCallback;return e.KtG(B(_.value))}),e.YNc(1,rt,4,2,"ng-template",36),e.YNc(2,Mt,1,1,"ng-template",37),e.qZA()}if(2&r){const t=P.$implicit,p=e.oxw(4);e.Q6J("ngModel",t)("filter",!1)("options",p.productPackageIDs)}}function L(r,P){1&r&&(e.TgZ(0,"div",33)(1,"span",34),e._uU(2,"\u0421\u0442\u0430\u0442\u0443\u0441\u044b"),e.qZA()())}function O(r,P){if(1&r){const t=e.EpF();e.TgZ(0,"p-multiSelect",41),e.NdJ("onChange",function(_){const B=e.CHM(t).filterCallback;return e.KtG(B(_.value))}),e.qZA()}if(2&r){const t=P.$implicit,p=e.oxw(4);e.Q6J("ngModel",t)("filter",!1)("options",p.orderStatuses)}}function i(r,P){1&r&&(e.TgZ(0,"div",33)(1,"span",34),e._uU(2,"\u0421\u043a\u043b\u0430\u0434\u044b"),e.qZA()())}function h(r,P){if(1&r){const t=e.EpF();e.TgZ(0,"p-multiSelect",42),e.NdJ("onChange",function(_){const B=e.CHM(t).filterCallback;return e.KtG(B(_.value))}),e.qZA()}if(2&r){const t=P.$implicit,p=e.oxw(4);e.Q6J("ngModel",t)("filter",!1)("options",p.warehouses)}}function g(r,P){1&r&&(e.TgZ(0,"tr"),e._UZ(1,"th",24),e.TgZ(2,"th",25),e._uU(3," \u0417\u0430\u043a\u0430\u0437 "),e._UZ(4,"p-sortIcon",26),e.TgZ(5,"p-columnFilter",27),e.YNc(6,$e,3,0,"ng-template",20),e.YNc(7,A,3,3,"ng-template",28),e.qZA()(),e.TgZ(8,"th",29),e._uU(9,"\u0421\u0443\u043c\u043c\u0430 "),e._UZ(10,"p-sortIcon",30),e.qZA(),e.TgZ(11,"th"),e._uU(12," \u0421\u0442\u0430\u0442\u0443\u0441 "),e.TgZ(13,"p-columnFilter",31),e.YNc(14,L,3,0,"ng-template",20),e.YNc(15,O,1,3,"ng-template",28),e.qZA(),e._uU(16," / \u0421\u043a\u043b\u0430\u0434 "),e.TgZ(17,"p-columnFilter",32),e.YNc(18,i,3,0,"ng-template",20),e.YNc(19,h,1,3,"ng-template",28),e.qZA()()()),2&r&&(e.xp6(5),e.Q6J("showMatchModes",!1)("showOperator",!1)("showAddButton",!1),e.xp6(8),e.Q6J("showMatchModes",!1)("showOperator",!1)("showAddButton",!1),e.xp6(4),e.Q6J("showMatchModes",!1)("showOperator",!1)("showAddButton",!1))}function y(r,P){if(1&r&&(e.TgZ(0,"div"),e._UZ(1,"img",50),e.qZA()),2&r){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("src",t.primaryImage,e.LSH)}}function E(r,P){if(1&r&&(e.ynx(0),e._uU(1),e.BQk()),2&r){const t=e.oxw().$implicit;e.xp6(1),e.hij(" - ",t.price*t.quantity,"\u20bd")}}function z(r,P){if(1&r&&(e.ynx(0),e._UZ(1,"div",47),e.YNc(2,y,2,1,"div",17),e.TgZ(3,"span",48)(4,"a",49),e._uU(5),e.qZA(),e._uU(6),e.TgZ(7,"b"),e._uU(8),e.YNc(9,E,2,1,"ng-container",17),e.qZA()(),e.BQk()),2&r){const t=P.$implicit;e.xp6(2),e.Q6J("ngIf",t.primaryImage),e.xp6(1),e.Q6J("title",t.name),e.xp6(1),e.s9C("href",t.link,e.LSH),e.xp6(1),e.Oqu(t.productPackageID),e.xp6(1),e.hij(" x ",t.price,"\u20bd x "),e.xp6(2),e.hij("",t.quantity,"\u0448\u0442"),e.xp6(1),e.Q6J("ngIf",1!=t.quantity)}}function R(r,P){if(1&r&&(e.ynx(0),e.TgZ(1,"p-tag",53),e._uU(2),e.qZA(),e._uU(3," - "),e.TgZ(4,"p-tag",54),e._uU(5),e.qZA(),e.BQk()),2&r){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.key.clusterFrom),e.xp6(3),e.Oqu(t.key.clusterTo)}}function q(r,P){if(1&r&&(e.TgZ(0,"p-tag",55),e._uU(1),e.qZA()),2&r){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.key.clusterFrom," ")}}function j(r,P){if(1&r&&(e.TgZ(0,"div"),e._UZ(1,"p-tag",51),e._uU(2," x"),e.TgZ(3,"b"),e._uU(4),e.qZA(),e._uU(5),e.YNc(6,R,6,2,"ng-container",17),e.YNc(7,q,2,1,"p-tag",52),e.qZA()),2&r){const t=P.$implicit;e.xp6(1),e.Q6J("severity",t.key.statusTag)("icon","pi "+t.key.statusIcon),e.xp6(3),e.Oqu(t.value),e.xp6(1),e.hij(" ",t.key.warehouse," "),e.xp6(1),e.Q6J("ngIf",t.key.clusterFrom!=t.key.clusterTo),e.xp6(1),e.Q6J("ngIf",t.key.clusterFrom==t.key.clusterTo)}}function ie(r,P){if(1&r&&(e.TgZ(0,"tr")(1,"td"),e._UZ(2,"i",43),e.qZA(),e.TgZ(3,"td")(4,"div")(5,"span",44),e._uU(6,"\u0422\u043e\u0432\u0430\u0440"),e.qZA(),e.TgZ(7,"div",45),e._uU(8),e.ALo(9,"date"),e.qZA(),e.TgZ(10,"div"),e.YNc(11,z,10,7,"ng-container",40),e.qZA()()(),e.TgZ(12,"td")(13,"div")(14,"span",46),e._uU(15,"\u0421\u0443\u043c\u043c\u0430"),e.qZA(),e.TgZ(16,"div"),e._uU(17),e.ALo(18,"number"),e.qZA()()(),e.TgZ(19,"td")(20,"div")(21,"span",46),e._uU(22,"\u041d\u0430\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435"),e.qZA(),e.YNc(23,j,8,6,"div",40),e.qZA()()()),2&r){const t=P.$implicit,p=e.oxw(3);e.xp6(2),e.Gre("pi ",p.getOrderTypeIcon(t.type),""),e.Q6J("pRowToggler",t),e.xp6(6),e.Oqu(e.xi3(9,8,t.date,"y-MM-dd HH:mm")),e.xp6(3),e.Q6J("ngForOf",t.products),e.xp6(6),e.hij(" ",e.xi3(18,11,t.sum,"1.2-2"),"\u20bd "),e.xp6(6),e.Q6J("ngForOf",t.directions)}}function pe(r,P){1&r&&(e.TgZ(0,"tr")(1,"th"),e._uU(2,"\u0410\u0440\u0442\u0438\u043a\u0443\u043b"),e.qZA(),e.TgZ(3,"th"),e._uU(4,"\u0426\u0435\u043d\u0430"),e.qZA(),e.TgZ(5,"th"),e._uU(6,"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e"),e.qZA(),e.TgZ(7,"th"),e._uU(8,"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435"),e.qZA()())}function le(r,P){if(1&r&&(e.TgZ(0,"tr")(1,"td")(2,"div")(3,"span",44),e._uU(4,"\u0410\u0440\u0442\u0438\u043a\u0443\u043b"),e.qZA(),e.TgZ(5,"div"),e._uU(6),e.qZA()()(),e.TgZ(7,"td")(8,"div")(9,"span",44),e._uU(10,"\u0426\u0435\u043d\u0430"),e.qZA(),e.TgZ(11,"div"),e._uU(12),e.ALo(13,"number"),e.qZA()()(),e.TgZ(14,"td")(15,"div")(16,"span",44),e._uU(17,"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e"),e.qZA(),e.TgZ(18,"div"),e._uU(19),e.qZA()()(),e.TgZ(20,"td")(21,"div")(22,"span",44),e._uU(23,"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435"),e.qZA(),e.TgZ(24,"div"),e._uU(25),e.qZA()()()()),2&r){const t=P.$implicit;e.xp6(6),e.hij(" ",t.product.productPackageID," "),e.xp6(6),e.hij(" ",e.xi3(13,4,t.price,"1.2-2"),"\u20bd "),e.xp6(7),e.hij(" ",t.quantity," "),e.xp6(6),e.hij(" ",t.product.name," ")}}function fe(r,P){1&r&&(e.TgZ(0,"tr")(1,"th"),e._uU(2,"ID"),e.qZA(),e.TgZ(3,"th"),e._uU(4,"\u0414\u0430\u0442\u0430"),e.qZA(),e.TgZ(5,"th"),e._uU(6,"\u0421\u0443\u043c\u043c\u0430"),e.qZA(),e.TgZ(7,"th"),e._uU(8,"\u041a\u043e\u043c\u0438\u0441\u0441\u0438\u044f"),e.qZA(),e.TgZ(9,"th"),e._uU(10,"\u0422\u0438\u043f \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438"),e.qZA(),e.TgZ(11,"th"),e._uU(12,"\u0422\u0438\u043f \u043d\u0430\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u044f"),e.qZA()())}function Te(r,P){if(1&r&&(e.TgZ(0,"tr")(1,"td")(2,"div")(3,"span",44),e._uU(4,"ID"),e.qZA(),e.TgZ(5,"div")(6,"a",58),e.ALo(7,"date"),e._uU(8),e.qZA()()()(),e.TgZ(9,"td")(10,"div")(11,"span",44),e._uU(12,"\u0414\u0430\u0442\u0430"),e.qZA(),e.TgZ(13,"div"),e._uU(14),e.ALo(15,"date"),e.qZA()()(),e.TgZ(16,"td")(17,"div")(18,"span",44),e._uU(19,"\u0421\u0443\u043c\u043c\u0430"),e.qZA(),e.TgZ(20,"div"),e._uU(21),e.ALo(22,"number"),e.qZA()()(),e.TgZ(23,"td")(24,"div")(25,"span",44),e._uU(26,"\u041a\u043e\u043c\u0438\u0441\u0441\u0438\u044f"),e.qZA(),e.TgZ(27,"div"),e._uU(28),e.ALo(29,"number"),e.qZA()()(),e.TgZ(30,"td")(31,"div")(32,"span",44),e._uU(33,"\u0422\u0438\u043f \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438"),e.qZA(),e.TgZ(34,"div"),e._uU(35),e.qZA()()(),e.TgZ(36,"td")(37,"div")(38,"span",44),e._uU(39,"\u0422\u0438\u043f \u043d\u0430\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u044f"),e.qZA(),e.TgZ(40,"div"),e._uU(41),e.qZA()()()()),2&r){const t=P.$implicit,p=e.oxw(7);e.xp6(6),e.hYB("href","https://seller.ozon.ru/app/finances/financial-statement/",t.iD,"?date=",e.xi3(7,8,t.date,"y-MM-dd HH:mm"),"",e.LSH),e.xp6(2),e.Oqu(t.iD),e.xp6(6),e.hij(" ",e.xi3(15,11,t.date,"y-MM-dd HH:mm")," "),e.xp6(7),e.hij(" ",e.xi3(22,14,t.amount,"1.2-2"),"\u20bd "),e.xp6(7),e.hij(" ",e.xi3(29,17,t.saleCommission,"1.2-2"),"\u20bd "),e.xp6(7),e.hij(" ",p.getOperationTypeText(t.operationType)," "),e.xp6(6),e.hij(" ",p.getTransactionTypeText(t.accrualType)," ")}}const we=function(){return{"min-width":"50rem"}};function Oe(r,P){if(1&r&&(e.ynx(0),e.TgZ(1,"tr")(2,"td",56)(3,"h5")(4,"a",58),e._uU(5),e.qZA()()()(),e.TgZ(6,"tr")(7,"td",56)(8,"p-table",60),e.YNc(9,fe,13,0,"ng-template",20),e.YNc(10,Te,42,20,"ng-template",21),e.qZA()()(),e.BQk()),2&r){const t=e.oxw().$implicit;e.xp6(4),e.MGl("href","https://seller.ozon.ru/app/finances/transactions-order?page=1&pageSize=50&search=",t.postingNumber,"",e.LSH),e.xp6(1),e.hij("\u041e\u043f\u0435\u0440\u0430\u0446\u0438\u0438 \u043f\u043e \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044e \u2116",t.postingNumber,""),e.xp6(3),e.Q6J("value",t.operations)("breakpoint","960px")("tableStyle",e.DdM(5,we))}}function Ee(r,P){if(1&r&&(e.ynx(0),e.TgZ(1,"tr")(2,"td",57)(3,"a",58),e._uU(4),e.qZA(),e._UZ(5,"p-tag",59),e.qZA()(),e.TgZ(6,"tr")(7,"td",56)(8,"p-table",60),e.YNc(9,pe,9,0,"ng-template",20),e.YNc(10,le,26,7,"ng-template",21),e.qZA()()(),e.YNc(11,Oe,11,6,"ng-container",17),e.BQk()),2&r){const t=P.$implicit;e.xp6(3),e.MGl("href","https://seller.ozon.ru/app/postings/fbo/",t.postingNumber,"",e.LSH),e.xp6(1),e.hij("\u041e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u2116",t.postingNumber,""),e.xp6(1),e.Q6J("value",t.statusText)("severity",t.statusTag),e.xp6(3),e.Q6J("value",t.orderItems)("breakpoint","960px")("tableStyle",e.DdM(8,we)),e.xp6(3),e.Q6J("ngIf",null==t.operations?null:t.operations.length)}}function ke(r,P){if(1&r&&(e.ynx(0),e.TgZ(1,"tr")(2,"td",56)(3,"h5"),e._uU(4,"\u0421\u043e\u0441\u0442\u0430\u0432 \u0437\u0430\u043a\u0430\u0437\u0430"),e.qZA()()(),e.YNc(5,Ee,12,9,"ng-container",40),e.BQk()),2&r){const t=e.oxw().$implicit;e.xp6(5),e.Q6J("ngForOf",t.postings)}}function Je(r,P){1&r&&(e.TgZ(0,"tr")(1,"th"),e._uU(2,"ID"),e.qZA(),e.TgZ(3,"th"),e._uU(4,"\u0414\u0430\u0442\u0430"),e.qZA(),e.TgZ(5,"th"),e._uU(6,"\u0421\u0443\u043c\u043c\u0430"),e.qZA(),e.TgZ(7,"th"),e._uU(8,"\u041a\u043e\u043c\u0438\u0441\u0441\u0438\u044f"),e.qZA(),e.TgZ(9,"th"),e._uU(10,"\u0422\u0438\u043f \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438"),e.qZA(),e.TgZ(11,"th"),e._uU(12,"\u0422\u0438\u043f \u043d\u0430\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u044f"),e.qZA()())}function st(r,P){if(1&r&&(e.TgZ(0,"tr")(1,"td")(2,"div")(3,"span",44),e._uU(4,"ID"),e.qZA(),e.TgZ(5,"div")(6,"a",58),e.ALo(7,"date"),e._uU(8),e.qZA()()()(),e.TgZ(9,"td")(10,"div")(11,"span",44),e._uU(12,"\u0414\u0430\u0442\u0430"),e.qZA(),e.TgZ(13,"div"),e._uU(14),e.ALo(15,"date"),e.qZA()()(),e.TgZ(16,"td")(17,"div")(18,"span",44),e._uU(19,"\u0421\u0443\u043c\u043c\u0430"),e.qZA(),e.TgZ(20,"div"),e._uU(21),e.ALo(22,"number"),e.qZA()()(),e.TgZ(23,"td")(24,"div")(25,"span",44),e._uU(26,"\u041a\u043e\u043c\u0438\u0441\u0441\u0438\u044f"),e.qZA(),e.TgZ(27,"div"),e._uU(28),e.ALo(29,"number"),e.qZA()()(),e.TgZ(30,"td")(31,"div")(32,"span",44),e._uU(33,"\u0422\u0438\u043f \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438"),e.qZA(),e.TgZ(34,"div"),e._uU(35),e.qZA()()(),e.TgZ(36,"td")(37,"div")(38,"span",44),e._uU(39,"\u0422\u0438\u043f \u043d\u0430\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u044f"),e.qZA(),e.TgZ(40,"div"),e._uU(41),e.qZA()()()()),2&r){const t=P.$implicit,p=e.oxw(5);e.xp6(6),e.hYB("href","https://seller.ozon.ru/app/finances/financial-statement/",t.iD,"?date=",e.xi3(7,8,t.date,"y-MM-dd HH:mm"),"",e.LSH),e.xp6(2),e.Oqu(t.iD),e.xp6(6),e.hij(" ",e.xi3(15,11,t.date,"y-MM-dd HH:mm")," "),e.xp6(7),e.hij(" ",e.xi3(22,14,t.amount,"1.2-2"),"\u20bd "),e.xp6(7),e.hij(" ",e.xi3(29,17,t.saleCommission,"1.2-2"),"\u20bd "),e.xp6(7),e.hij(" ",p.getOperationTypeText(t.operationType)," "),e.xp6(6),e.hij(" ",p.getTransactionTypeText(t.accrualType)," ")}}function qn(r,P){if(1&r&&(e.ynx(0),e.TgZ(1,"tr")(2,"td",56)(3,"h5")(4,"a",58),e._uU(5),e.qZA()()()(),e.TgZ(6,"tr")(7,"td",56)(8,"p-table",61),e.YNc(9,Je,13,0,"ng-template",20),e.YNc(10,st,42,20,"ng-template",21),e.qZA()()(),e.BQk()),2&r){const t=e.oxw().$implicit;e.xp6(4),e.MGl("href","https://seller.ozon.ru/app/finances/transactions-order?page=1&pageSize=50&search=",t.ozonOrderNumber,"",e.LSH),e.xp6(1),e.hij("\u041e\u043f\u0435\u0440\u0430\u0446\u0438\u0438 \u043f\u043e \u0437\u0430\u043a\u0430\u0437\u0443 \u2116",t.ozonOrderNumber,""),e.xp6(3),e.Q6J("value",t.orderOperations)("breakpoint","960px")("tableStyle",e.DdM(5,we))}}function $n(r,P){if(1&r&&(e.YNc(0,ke,6,1,"ng-container",17),e.YNc(1,qn,11,6,"ng-container",17)),2&r){const t=P.$implicit;e.Q6J("ngIf",null==t.postings?null:t.postings.length),e.xp6(1),e.Q6J("ngIf",null==t.orderOperations?null:t.orderOperations.length)}}function Kn(r,P){if(1&r&&(e.TgZ(0,"tr")(1,"th",56)(2,"table",62)(3,"tr"),e._UZ(4,"th"),e.TgZ(5,"th"),e._uU(6,"\u0417\u0430\u043a\u0430\u0437\u043e\u0432"),e.qZA(),e.TgZ(7,"th"),e._uU(8,"\u0422\u043e\u0432\u0430\u0440\u043e\u0432"),e.qZA(),e.TgZ(9,"th"),e._uU(10,"\u041e\u0442\u043c\u0435\u043d"),e.qZA(),e.TgZ(11,"th"),e._uU(12,"\u0421\u0443\u043c\u043c\u0430"),e.qZA()(),e.TgZ(13,"tr")(14,"th"),e._uU(15,"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430"),e.qZA(),e.TgZ(16,"td"),e._uU(17),e.qZA(),e.TgZ(18,"td"),e._uU(19),e.qZA(),e.TgZ(20,"td"),e._uU(21),e.qZA(),e.TgZ(22,"td"),e._uU(23),e.ALo(24,"number"),e.qZA()(),e.TgZ(25,"tr")(26,"th"),e._uU(27,"\u0412\u0441\u0435\u0433\u043e"),e.qZA(),e.TgZ(28,"td"),e._uU(29),e.qZA(),e.TgZ(30,"td"),e._uU(31),e.qZA(),e.TgZ(32,"td"),e._uU(33),e.qZA(),e.TgZ(34,"td"),e._uU(35),e.ALo(36,"number"),e.qZA()()()()()),2&r){const t=e.oxw(4);e.xp6(17),e.Oqu(t.pageOrderCount),e.xp6(2),e.Oqu(t.pageItemCount),e.xp6(2),e.Oqu(t.pageCanceledItemCount),e.xp6(2),e.hij("",e.xi3(24,8,t.pageOrderSum,"1.2-2"),"\u20bd"),e.xp6(6),e.Oqu(t.totalOrderCount),e.xp6(2),e.Oqu(t.totalItemCount),e.xp6(2),e.Oqu(t.totalCanceledItemCount),e.xp6(2),e.hij("",e.xi3(36,11,t.totalOrderSum,"1.2-2"),"\u20bd")}}function Xn(r,P){if(1&r&&e.YNc(0,Kn,37,14,"tr",17),2&r){const t=e.oxw(3);e.Q6J("ngIf",t.pageOrderCount)}}const er=function(){return[30,50,100]},tr=function(){return{}};function nr(r,P){if(1&r){const t=e.EpF();e.TgZ(0,"p-table",19),e.NdJ("onPage",function(_){e.CHM(t);const I=e.oxw(2);return e.KtG(I.pageChange(_))})("onFilter",function(_){e.CHM(t);const I=e.oxw(2);return e.KtG(I.onFilter(_))}),e.YNc(1,g,20,9,"ng-template",20),e.YNc(2,ie,24,14,"ng-template",21),e.YNc(3,$n,2,2,"ng-template",22),e.YNc(4,Xn,1,1,"ng-template",23),e.qZA()}if(2&r){const t=e.oxw(2);e.Q6J("value",t.data)("loading",t.loading)("paginator",!0)("showCurrentPageReport",!1)("rows",t.filterModel.rows)("rowsPerPageOptions",e.DdM(7,er))("tableStyle",e.DdM(8,tr))}}function rr(r,P){if(1&r&&(e.TgZ(0,"div",10)(1,"div",11)(2,"div",12)(3,"div",13)(4,"div",14)(5,"div",15),e._uU(6,"\u0417\u0430\u043a\u0430\u0437\u044b"),e.qZA(),e.TgZ(7,"div")(8,"div",16)(9,"span"),e._uU(10,"\u0417\u0430\u043a\u0430\u0437\u043e\u0432"),e.qZA(),e.TgZ(11,"span"),e._uU(12),e.qZA()()(),e.TgZ(13,"div",16)(14,"span"),e._uU(15,"\u0422\u043e\u0432\u0430\u0440\u043e\u0432"),e.qZA(),e.TgZ(16,"span"),e._uU(17),e.qZA()(),e.TgZ(18,"div")(19,"div",16)(20,"span"),e._uU(21,"\u041a \u0432\u044b\u043f\u043b\u0430\u0442\u0435"),e.qZA(),e.YNc(22,Le,3,4,"span",17),e.YNc(23,We,2,0,"span",17),e.qZA()(),e.TgZ(24,"div")(25,"div",16)(26,"span"),e._uU(27,"\u0421\u0443\u043c\u043c\u0430"),e.qZA(),e.TgZ(28,"span"),e._uU(29),e.ALo(30,"number"),e.qZA()()()()()(),e.TgZ(31,"div",12)(32,"div",13)(33,"div",14)(34,"div",15),e._uU(35,"\u0412\u043e\u0437\u0432\u0440\u0430\u0442\u044b"),e.qZA(),e.TgZ(36,"div",16)(37,"span"),e._uU(38,"\u0422\u043e\u0432\u0430\u0440\u043e\u0432 \u043e\u0442\u043c\u0435\u043d\u0435\u043d\u043e"),e.qZA(),e.TgZ(39,"span"),e._uU(40),e.qZA()(),e.TgZ(41,"div",16)(42,"span"),e._uU(43,"\u0422\u043e\u0432\u0430\u0440\u043e\u0432 \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0435\u043d\u043e"),e.qZA(),e.TgZ(44,"span"),e._uU(45),e.qZA()(),e.TgZ(46,"div",16)(47,"span"),e._uU(48,"\u0421\u0443\u043c\u043c\u0430"),e.qZA(),e.TgZ(49,"span"),e._uU(50),e.ALo(51,"number"),e.qZA()(),e.TgZ(52,"div",16)(53,"span"),e._uU(54,"% \u0432\u043e\u0437\u0432\u0440\u0430\u0442\u043e\u0432"),e.qZA(),e.TgZ(55,"span"),e._uU(56),e.ALo(57,"number"),e.qZA()()()()(),e.TgZ(58,"div",12)(59,"div",13)(60,"div",14)(61,"div",15),e._uU(62,"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043d\u044b\u0435 \u0437\u0430\u043a\u0430\u0437\u044b"),e.qZA(),e.TgZ(63,"div")(64,"div",16)(65,"span"),e._uU(66,"\u0417\u0430\u043a\u0430\u0437\u043e\u0432"),e.qZA(),e.TgZ(67,"span"),e._uU(68),e.qZA()()(),e.TgZ(69,"div",16)(70,"span"),e._uU(71,"\u0422\u043e\u0432\u0430\u0440\u043e\u0432"),e.qZA(),e.TgZ(72,"span"),e._uU(73),e.qZA()(),e.TgZ(74,"div")(75,"div",16)(76,"span"),e._uU(77,"\u041a \u0432\u044b\u043f\u043b\u0430\u0442\u0435"),e.qZA(),e.TgZ(78,"span"),e._uU(79),e.ALo(80,"number"),e.qZA()()(),e.TgZ(81,"div")(82,"div",16)(83,"span"),e._uU(84,"\u0421\u0443\u043c\u043c\u0430 \u043f\u0440\u043e\u0434\u0430\u0436"),e.qZA(),e.TgZ(85,"span"),e._uU(86),e.ALo(87,"number"),e.qZA()()()()()()(),e.YNc(88,nr,5,9,"p-table",18),e.qZA()),2&r){const t=P.ngIf,p=e.oxw();e.xp6(12),e.Oqu(t.totalOrderCount),e.xp6(5),e.Oqu(t.totalProductCount),e.xp6(5),e.Q6J("ngIf",t.expectedPayout),e.xp6(1),e.Q6J("ngIf",!t.expectedPayout),e.xp6(6),e.hij("",e.xi3(30,14,t.totalSum,"1.2-2"),"\u20bd"),e.xp6(11),e.Oqu(t.cancelledProductCount),e.xp6(5),e.Oqu(t.returnedProductCount),e.xp6(5),e.hij("",e.xi3(51,17,t.returnSum,"1.2-2"),"\u20bd"),e.xp6(6),e.hij("",e.xi3(57,20,100*t.returnProductCountPercentage,"1.1-1"),"%"),e.xp6(12),e.Oqu(t.finalizedOrderCount),e.xp6(5),e.Oqu(t.finalizedProductCount),e.xp6(6),e.hij("",e.xi3(80,23,t.finalizedSum,"1.2-2"),"\u20bd"),e.xp6(7),e.hij("",e.xi3(87,26,t.finalizedSalesSum,"1.2-2"),"\u20bd"),e.xp6(2),e.Q6J("ngIf",p.data)}}var De=function(r){return r[r.ThisDay=0]="ThisDay",r[r.PreviousDay=1]="PreviousDay",r[r.Day=2]="Day",r[r.ThisWeek=3]="ThisWeek",r[r.PreviousWeek=4]="PreviousWeek",r[r.Week=5]="Week",r[r.ThisMonth=6]="ThisMonth",r[r.PreviousMonth=7]="PreviousMonth",r[r.Month=8]="Month",r[r.Custom=9]="Custom",r}(De||{});let or=(()=>{class r extends l.V{constructor(t,p,_,I,B,ue,se,ge,xe){super(ge),this.ozonSalesOrderClient=t,this.ozonPostingCommandClient=p,this.ozonOperationCommandClient=_,this.ozonOperationClient=I,this.messageService=B,this.ozonWarehouseService=ue,this.timeService=se,this.dbService=xe,this.pageOrderSum=0,this.pageOrderCount=0,this.pageItemCount=0,this.totalOrderSum=0,this.totalOrderCount=0,this.totalItemCount=0,this.dateRangeTypes=De,this.loading=!1,this.productPackageIDs=[],this.warehouses=[],this.isLoading=!1,this.findOrdersSubject=new d.X(null),this.dateRangeOptions=[{name:"\u0421\u0435\u0433\u043e\u0434\u043d\u044f",value:De.ThisDay},{name:"\u0412\u0447\u0435\u0440\u0430",value:De.PreviousDay},{name:"\u0421\u0443\u0442\u043a\u0438",value:De.Day},{name:"\u042d\u0442\u0430 \u043d\u0435\u0434\u0435\u043b\u044f",value:De.ThisWeek},{name:"\u041f\u0440\u0435\u0434\u044b\u0434\u0443\u0449\u0430\u044f \u043d\u0435\u0434\u0435\u043b\u044f",value:De.PreviousWeek},{name:"\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u044f\u044f \u043d\u0435\u0434\u0435\u043b\u044f",value:De.Week},{name:"\u042d\u0442\u043e\u0442 \u043c\u0435\u0441\u044f\u0446",value:De.ThisMonth},{name:"\u041f\u0440\u0435\u0434\u044b\u0434\u0443\u0449\u0438\u0439 \u043c\u0435\u0441\u044f\u0446",value:De.PreviousMonth},{name:"\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0439 \u043c\u0435\u0441\u044f\u0446",value:De.Month},{name:"\u0417\u0430 \u043f\u0435\u0440\u0438\u043e\u0434",value:De.Custom}],this.filterModel={dateRangeType:De.ThisDay,rows:50},this.orderStatuses=[{status:c.f.PostingStatus.AwaitingPackaging,text:"\u041e\u0436\u0438\u0434\u0430\u0435\u0442 \u0443\u043f\u0430\u043a\u043e\u0432\u043a\u0438"},{status:c.f.PostingStatus.AwaitingDeliver,text:"\u041e\u0436\u0438\u0434\u0430\u0435\u0442 \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0438"},{status:c.f.PostingStatus.Delivering,text:"\u0414\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442\u0441\u044f"},{status:c.f.PostingStatus.Delivered,text:"\u0414\u043e\u0441\u0442\u0430\u0432\u043b\u0435\u043d"},{status:c.f.PostingStatus.Cancelled,text:"\u041e\u0442\u043c\u0435\u043d\u0451\u043d"},{status:c.f.PostingStatus.AwaitingRegistration,text:"\u041e\u0436\u0438\u0434\u0430\u0435\u0442 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438"},{status:c.f.PostingStatus.AcceptanceInProgress,text:"\u0418\u0434\u0451\u0442 \u043f\u0440\u0438\u0451\u043c\u043a\u0430"},{status:c.f.PostingStatus.AwaitingApprove,text:"\u041e\u0436\u0438\u0434\u0430\u0435\u0442 \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0438\u044f"},{status:c.f.PostingStatus.Arbitration,text:"\u0410\u0440\u0431\u0438\u0442\u0440\u0430\u0436"},{status:c.f.PostingStatus.ClientArbitration,text:"\u041a\u043b\u0438\u0435\u043d\u0442\u0441\u043a\u0438\u0439 \u0430\u0440\u0431\u0438\u0442\u0440\u0430\u0436 \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0438"},{status:c.f.PostingStatus.DriverPickup,text:"\u0423 \u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044f"},{status:c.f.PostingStatus.NotAccepted,text:"\u041d\u0435 \u043f\u0440\u0438\u043d\u044f\u0442\u043e"},{status:c.f.PostingStatus.SentBySeller,text:"\u041e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043e \u043f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a\u043e\u043c"}]}updateFilter(t){this.dbService.update("filters",{id:r.name,data:t}).pipe((0,f.K)(p=>(this.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f \u0444\u0438\u043b\u044c\u0442\u0440\u0430",severity:"error",detail:p}),x.E))).subscribe()}ngOnInit(){this.titleService.setTitle("\u0417\u0430\u043a\u0430\u0437\u044b Ozon"),this.ozonWarehouseService.getWarehouses().pipe((0,T.h)(t=>!this.ozonWarehouses&&!!t)).subscribe(t=>{this.ozonWarehouses=t,this.findOrdersSubject.pipe((0,M.R)(this.destroyed),(0,T.h)(p=>!!p)).pipe((0,b.b)(p=>{this.updateFilter(p)})).subscribe(p=>{this.findOrders()})}),this.dbService.getByID("filters",r.name).subscribe(t=>{t&&t.data&&(this.filterModel=t.data),this.changeReportDate()})}changeReportDate(){var t=this;return(0,s.Z)(function*(){t.findOrdersSubject.next(t.filterModel)})()}getSummary(){let t=0,p=0,_=0,I=0,B=0,ue=0,se=0,ge=0,xe=0,be=0;if(this.data)for(const ct of this.data){let vt=!1,Qe=!1,Be=!1,Wn=!1;for(let Ge of ct.orderItems){if(Ge.status==c.f.PostingStatus.Cancelled){const yt=ct.operations.filter(Zt=>Zt.postingNumber==Ge.postingNumber).reduce((Zt,Qn)=>Zt+Qn.amount,0);0!=yt?(Be||=!0,be+=Ge.quantity,ge+=yt,t+=yt,I-=yt):(Qe||=!0,xe+=Ge.quantity)}else{Wn=!0;const yt=ct.operations.filter(Zt=>Zt.postingNumber==Ge.postingNumber).reduce((Zt,Qn)=>Zt+Qn.amount,0);Ge.status==c.f.PostingStatus.Delivered&&(vt=!0,_+=Ge.quantity,t+=yt,I+=Ge.price),se+=Ge.quantity}B+=Ge.price}const Ni=ct.operations.filter(Ge=>Ge.postingNumber==ct.ozonOrderNumber).reduce((Ge,yt)=>Ge+yt.amount,0);vt&&p++,(vt||Qe||Be)&&(t+=Ni),Wn&&ue++}const Ze=_+be==0?0:be/(_+be);return{finalizedOrderCount:p,finalizedSum:t,finalizedProductCount:_,returnSum:ge,cancelledProductCount:xe,returnedProductCount:be,returnProductCountPercentage:Ze,totalOrderCount:ue,totalSum:B,totalProductCount:se,finalizedSalesSum:I,expectedPayout:Ze*se*(0==be?0:ge/be)+t*B/I}}pageChange(t){this.filterModel.rows!=t.rows&&this.updateFilter(this.filterModel),this.filterModel.rows=t.rows;let p=0,_=0,ue=0,se=t.first;const ge=Math.min(t.rows+se,this.filteredData.length);for(this.pageOrderCount=ge==se?0:ge-se;se<ge;se++){const xe=this.filteredData[se];p+=xe.sum,xe.orderItems.forEach(be=>{be.status==c.f.PostingStatus.Cancelled?ue+=be.quantity:_+=be.quantity})}this.pageOrderSum=p,this.pageItemCount=_,this.pageCanceledItemCount=ue}onFilter(t){this.filteredData=t.filteredValue,this.pageChange({first:0,rows:this.filterModel.rows})}getOrderTypeIcon(t){switch(t){case c.f.OzonSalesOrderType.Fbo:return"ozon-fbo";case c.f.OzonSalesOrderType.Fbs:return"ozon-fbs";default:return"pi-question"}}mapOrder(t){const p=[],_=new Set(t.orderItems.map(ge=>ge.postingNumber));let I=t.orderItems.reduce((ge,xe)=>{const be=null==ge[xe.product.productPackageID]?{quantity:0,name:xe.product.name}:ge[xe.product.productPackageID];return be.quantity+=xe.quantity,be.primaryImage=xe.product.primaryImage,be.price=xe.price,be.link="https://www.ozon.ru/product/"+(xe.product.sku||(t.type==c.f.OzonSalesOrderType.Fbo?xe.product.fboSku:xe.product.fbsSku)),ge[xe.product.productPackageID]=be,ge},{}),B=Object.keys(I).map(ge=>({productPackageID:ge,quantity:I[ge].quantity,primaryImage:I[ge].primaryImage,link:I[ge].link,name:I[ge].name,price:I[ge].price}));for(const ge of _){const xe=t.orderItems.filter(Me=>Me.postingNumber==ge),be={postingNumber:ge,orderItems:xe,operations:t.operations.filter(Me=>Me.postingNumber==ge),status:xe[0].status,statusText:this.orderStatuses.find(Me=>Me.status==xe[0].status)?.text,statusTag:this.getOrderStatusTag(xe[0].status)};p.push(be)}var ue=t;ue.products=B,ue.orderOperations=ue.operations.filter(ge=>ge.postingNumber==ue.ozonOrderNumber),ue.sum=t.operations.reduce((ge,xe)=>ge+xe.amount,0),ue.productCount=t.orderItems.reduce((ge,xe)=>ge+xe.quantity,0),ue.statuses=this.getOrderStatuses(ue),ue.status=ue.statuses.map(ge=>ge.status),ue.product=ue.products.map(ge=>ge.productPackageID),ue.directions=this.getOrderDirections(ue);const se=new Set;return ue.directions.forEach((ge,xe)=>se.add(xe.warehouse)),ue.orderWarehouses=[...se],ue.postings=p,ue}getOrderStatuses(t){return[...new Set(t.orderItems.map(I=>I.status))].map(I=>({status:I,statusText:this.orderStatuses.find(B=>B.status==I)?.text??t.toString(),tag:this.getOrderStatusTag(I),icon:this.getOrderStatusIcon(I)}))}getOrderStatusIcon(t){switch(t){case c.f.PostingStatus.AwaitingDeliver:return"pi-car";case c.f.PostingStatus.Cancelled:return"pi-ban";case c.f.PostingStatus.AwaitingPackaging:return"pi-box";case c.f.PostingStatus.Delivering:return"pi-car";case c.f.PostingStatus.Delivered:return"pi-dollar";default:return""}}getOrderStatusTag(t){switch(t){case c.f.PostingStatus.AwaitingDeliver:return"warning";case c.f.PostingStatus.Cancelled:return"danger";case c.f.PostingStatus.AwaitingPackaging:return"warning";case c.f.PostingStatus.Delivering:return"info";case c.f.PostingStatus.Delivered:return"success";default:return"warning"}}importOrders(){var t=this;return(0,s.Z)(function*(){let[p,_]=t.getDateRange();_?.setDate(_.getDate()+1);const I=(0,f.K)(B=>(t.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430",severity:"error",detail:B}),t.loading=!1,x.E));yield t.ozonPostingCommandClient.importOzonFboPostings(p,_).pipe(I).pipe((0,u.w)(()=>t.ozonOperationCommandClient.importOzonOperations(p,_).pipe(I))).subscribe(()=>{t.findOrdersSubject.next(t.filterModel)})})()}getDateRange(){var t=new Date,p=null;switch(this.filterModel.dateRangeType){case De.ThisDay:t.setHours(0,0,0,0);break;case De.PreviousDay:t.setDate(t.getDate()-1),t.setHours(0,0,0,0),p=new Date(t);break;case De.Day:t.setDate(t.getDate()-1);break;case De.ThisWeek:t.setDate(t.getDate()-(t.getDay()?t.getDay()-1:6)),t.setHours(0,0,0,0);break;case De.PreviousWeek:const I=(p=new Date(t)).getDay()||7;p.setHours(0,0,0,0),p.setDate(p.getDate()-I),(t=new Date(p)).setDate(t.getDate()-6);break;case De.Week:t.setDate(t.getDate()-7);break;case De.ThisMonth:t.setHours(0,0,0,0),t.setDate(1);break;case De.PreviousMonth:t.setHours(0,0,0,0),t.setDate(1),(p=new Date(t)).setDate(p.getDate()-1),t.setMonth(t.getMonth()-1);break;case De.Month:t.setMonth(t.getMonth()-1);break;default:t=this.filterModel.dateRange?.[0],t=null==t?null:new Date(t.getFullYear(),t.getMonth(),t.getDate()),p=this.filterModel.dateRange?.[1],p=null==p?null:new Date(p.getFullYear(),p.getMonth(),p.getDate())}return[t,p]}getOrderDirections(t){const p=new Map;return t.orderItems.reduce((_,I)=>{const B=this.ozonWarehouses.find(xe=>xe.iD==I.ozonWarehouseID)?.name||"<UNKNOWN>",ue=`${I.clusterFrom}#${I.clusterTo}#${B}#${I.status}`;p.has(ue)||p.set(ue,{clusterFrom:I.clusterFrom,clusterTo:I.clusterTo,warehouse:B,clusterTag:I.clusterFrom==I.clusterTo?"success":"danger",statusTag:this.getOrderStatusTag(I.status),statusIcon:this.getOrderStatusIcon(I.status)});const se=p.get(ue);let ge=_.has(se)?_.get(se):0;return ge+=I.quantity,_.set(se,ge),_},new Map)}findOrders(){let[t,p]=this.getDateRange();p?.setDate(p.getDate()+1);const I=new c.f.FindPostingsModel({dateFrom:t??void 0,dateTo:p??void 0,orderNumbers:[]});this.loading=!0,this.ozonSalesOrderClient.findSalesOzonOrders(I).pipe((0,f.K)(B=>(this.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430",severity:"error",detail:B}),this.loading=!1,x.E))).subscribe(B=>{this.loading=!1;let ue=0,se=0,ge=0,xe=0;const be=new Map,Me=new Set;this.data=B?.map(Ze=>{const Ce=this.mapOrder(Ze);return Ce.orderWarehouses.forEach(Ne=>Me.add(Ne)),se++,ue+=Ce.sum,Ce.orderItems.forEach(Ne=>{Ne.status==c.f.PostingStatus.Cancelled?xe+=Ne.quantity:ge+=Ne.quantity,be.set(Ne.product.productPackageID,Ne.product.primaryImage)}),Ce}),this.warehouses=Array.from(Me).sort((Ze,Ce)=>Ze.localeCompare(Ce)),this.productPackageIDs=Array.from(be.entries(),([Ze,Ce])=>({id:Ze,image:Ce})).sort((Ze,Ce)=>Math.sign(Ze.id-Ce.id)).map(Ze=>({id:Ze.id.toString(),image:Ze.image})),this.totalOrderSum=ue,this.totalOrderCount=se,this.totalItemCount=ge,this.totalCanceledItemCount=xe,this.filteredData=this.data,this.pageChange({first:0,rows:this.filterModel.rows})})}getTransactionTypeText(t){return c.f.TransactionType[t]}getOperationTypeText(t){return c.f.OperationType[t]}static#e=this.\u0275fac=function(p){return new(p||r)(e.Y36(c.f.OzonSalesOrderClient),e.Y36(S.Q.PostingClient),e.Y36(S.Q.OperationClient),e.Y36(c.f.OperationClient),e.Y36(w.ez),e.Y36(Z.w),e.Y36(U.O),e.Y36(F.Dx),e.Y36(k.ys))};static#t=this.\u0275cmp=e.Xpm({type:r,selectors:[["app-ozon-sales-order-list"]],features:[e.qOj],decls:8,vars:6,consts:[["header","\u0417\u0430\u043a\u0430\u0437\u044b Ozon"],[1,"justify-content-center"],["icon","pi pi-search","optionLabel","name","optionValue","value",3,"options","tabIndex","ngModel","tabIndexChange","ngModelChange","onOptionClick"],["class","justify-content-center mb-1",4,"ngIf"],["styleClass","m-3","label","\u0418\u043c\u043f\u043e\u0440\u0442 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0439",3,"icon","click",4,"ngIf"],["class","card",4,"ngIf"],[1,"justify-content-center","mb-1"],["selectionMode","range","placeholder","\u041f\u0435\u0440\u0438\u043e\u0434",3,"ngModel","showClear","selectOtherMonths","readonlyInput","ngModelChange"],["icon","pi pi-search","label","\u041d\u0430\u0439\u0442\u0438 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f",3,"click"],["styleClass","m-3","label","\u0418\u043c\u043f\u043e\u0440\u0442 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0439",3,"icon","click"],[1,"card"],[1,"grid"],[1,"col-12","md:col-4"],[1,"card","text-right"],[1,"text-900","font-medium","text-xl","mb-3"],[1,"text-500","text-center"],[1,"flex","justify-content-between"],[4,"ngIf"],["responsiveLayout","stack","dataKey","iD",3,"value","loading","paginator","showCurrentPageReport","rows","rowsPerPageOptions","tableStyle","onPage","onFilter",4,"ngIf"],["responsiveLayout","stack","dataKey","iD",3,"value","loading","paginator","showCurrentPageReport","rows","rowsPerPageOptions","tableStyle","onPage","onFilter"],["pTemplate","header"],["pTemplate","body"],["pTemplate","rowexpansion"],["pTemplate","footer"],["width","1%"],["pSortableColumn","date"],["field","date"],["field","product","matchMode","intersects","display","menu",3,"showMatchModes","showOperator","showAddButton"],["pTemplate","filter"],["pSortableColumn","sum"],["field","sum"],["field","status","matchMode","intersects","display","menu",3,"showMatchModes","showOperator","showAddButton"],["field","orderWarehouses","matchMode","intersects","display","menu",3,"showMatchModes","showOperator","showAddButton"],[1,"px-3","pt-3","pb-0"],[1,"font-bold"],["optionValue","id","placeholder","\u0412\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0435","appendTo","body",3,"ngModel","filter","options","onChange"],["pTemplate","item"],["pTemplate","selectedItems"],[1,"flex","align-items-center","gap-2"],[2,"width","36px",3,"src"],[4,"ngFor","ngForOf"],["optionValue","status","placeholder","\u0412\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0435","optionLabel","text",3,"ngModel","filter","options","onChange"],["placeholder","\u0412\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0435",3,"ngModel","filter","options","onChange"],[3,"pRowToggler"],[1,"p-column-title","font-bold"],[1,"mb-2"],[1,"p-column-title"],[1,"vertical-align-middle"],[3,"title"],["target","_blank",3,"href"],["width","50",3,"src"],[3,"severity","icon"],["severity","success",4,"ngIf"],["severity","info"],["severity","danger"],["severity","success"],["colspan","4"],["colspan","4",1,"text-left","justify-content-start"],["target","_blank","rel","noreferrer",3,"href"],[3,"value","severity"],["responsiveLayout","stack",3,"value","breakpoint","tableStyle"],["dataKey","iD","responsiveLayout","stack",3,"value","breakpoint","tableStyle"],[1,"text-right"]],template:function(p,_){1&p&&(e._UZ(0,"p-toast")(1,"p-scrollTop"),e.TgZ(2,"p-card",0)(3,"div",1)(4,"p-selectButton",2),e.NdJ("tabIndexChange",function(B){return _.filterModel.dateRangeType=B})("ngModelChange",function(B){return _.filterModel.dateRangeType=B})("onOptionClick",function(){return _.changeReportDate()}),e.qZA()(),e.YNc(5,Se,3,4,"div",3),e.YNc(6,Pe,1,1,"p-button",4),e.qZA(),e.YNc(7,rr,89,29,"div",5)),2&p&&(e.xp6(4),e.Q6J("options",_.dateRangeOptions)("tabIndex",_.filterModel.dateRangeType)("ngModel",_.filterModel.dateRangeType),e.xp6(1),e.Q6J("ngIf",_.filterModel.dateRangeType==_.dateRangeTypes.Custom),e.xp6(1),e.Q6J("ngIf",void 0!==_.filterModel.dateRangeType),e.xp6(1),e.Q6J("ngIf",_.getSummary()))},dependencies:[w.jx,J.zx,H.f,V.Z,n.sg,n.O5,K.JJ,K.On,C,G.F,X.UN,W.iA,W.lQ,W.jB,W.fz,W.xl,_e.V,me.FN,n.JJ,n.uU],styles:["@media (min-width: 961px){.p-column-title[_ngcontent-%COMP%]{display:none}}@media (max-width: 960px){.p-column-title[_ngcontent-%COMP%]{display:block}.p-datatable-tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:block}}"]})}return r})();var ir=v(6387),Fn=v(8057),Nn=v(3714),Yn=v(3904),Bn=v(3530),jn=v(9653);function ar(r,P){1&r&&(e.TgZ(0,"tr"),e._UZ(1,"th"),e.TgZ(2,"th",9),e._uU(3," ID "),e._UZ(4,"p-sortIcon",10),e.qZA(),e.TgZ(5,"th",11),e._uU(6," \u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 "),e._UZ(7,"p-sortIcon",12),e.qZA(),e._UZ(8,"th"),e.qZA(),e.TgZ(9,"tr"),e._UZ(10,"th"),e.TgZ(11,"th"),e._UZ(12,"p-columnFilter",13),e.qZA(),e.TgZ(13,"th"),e._UZ(14,"p-columnFilter",14),e.qZA(),e._UZ(15,"th"),e.qZA()),2&r&&(e.xp6(12),e.Q6J("showButtons",!1)("useGrouping",!1))}function ur(r,P){if(1&r&&e._UZ(0,"button",21),2&r){const t=e.oxw(),_=t.expanded;e.Q6J("pRowToggler",t.$implicit)("icon",_?"pi pi-chevron-down":"pi pi-chevron-right")}}function lr(r,P){if(1&r){const t=e.EpF();e.TgZ(0,"tr")(1,"td")(2,"a",15),e._UZ(3,"i",16),e.qZA(),e.TgZ(4,"a",15),e._UZ(5,"i",17),e.qZA()(),e.TgZ(6,"td"),e._uU(7),e.qZA(),e.TgZ(8,"td"),e._uU(9),e.qZA(),e.TgZ(10,"td")(11,"p-button",18),e.NdJ("click",function(){const I=e.CHM(t).$implicit,B=e.oxw();return e.KtG(B.showBarcodeGenerator(I))}),e.qZA(),e.TgZ(12,"p-button",19),e.NdJ("click",function(_){const B=e.CHM(t).$implicit,ue=e.oxw();return e.KtG(ue.confirmProductRemoval(_,B))}),e.qZA(),e.YNc(13,ur,1,2,"button",20),e.qZA()()}if(2&r){const t=P.$implicit;e.xp6(2),e.MGl("href","https://www.ozon.ru/product/",t.sku,"",e.LSH),e.xp6(2),e.MGl("href","https://seller.ozon.ru/app/prices/control?search=",t.sku,"",e.LSH),e.xp6(3),e.Oqu(t.productPackageID),e.xp6(2),e.Oqu(t.name),e.xp6(4),e.Q6J("ngIf",null==t.stocks?null:t.stocks.length)}}function sr(r,P){1&r&&(e.TgZ(0,"tr")(1,"th",26),e._uU(2,"\u0421\u043a\u043b\u0430\u0434 "),e._UZ(3,"p-sortIcon",27),e.qZA(),e.TgZ(4,"th",28),e._uU(5,"\u041a\u043b\u0430\u0441\u0442\u0435\u0440 "),e._UZ(6,"p-sortIcon",29),e.qZA(),e.TgZ(7,"th",30),e._uU(8,"\u041d\u0430\u043b\u0438\u0447\u0438\u0435 "),e._UZ(9,"p-sortIcon",31),e.qZA(),e.TgZ(10,"th",32),e._uU(11,"\u0420\u0435\u0437\u0435\u0440\u0432 "),e._UZ(12,"p-sortIcon",33),e.qZA()())}function cr(r,P){if(1&r&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td",34),e._uU(6),e.qZA(),e.TgZ(7,"td",34),e._uU(8),e.qZA()()),2&r){const t=P.$implicit;e.xp6(2),e.Oqu(t.warehouse.name),e.xp6(2),e.Oqu(t.warehouse.warehouseCluster),e.xp6(2),e.Oqu(t.present),e.xp6(2),e.Oqu(t.reserved)}}function dr(r,P){if(1&r&&(e.TgZ(0,"tr")(1,"td",35),e._uU(2,"\u0412\u0441\u0435\u0433\u043e:"),e.qZA(),e.TgZ(3,"td",34),e._uU(4),e.qZA(),e.TgZ(5,"td",34),e._uU(6),e.qZA()()),2&r){const t=e.oxw(2).$implicit;e.xp6(4),e.Oqu(t.totalPresent),e.xp6(2),e.Oqu(t.totalReserved)}}function pr(r,P){if(1&r&&(e.TgZ(0,"tr")(1,"td",23)(2,"div")(3,"p-table",24),e.YNc(4,sr,13,0,"ng-template",3),e.YNc(5,cr,9,4,"ng-template",4),e.YNc(6,dr,7,2,"ng-template",25),e.qZA()()()()),2&r){const t=e.oxw().$implicit;e.xp6(3),e.Q6J("value",t.stocks)}}function fr(r,P){if(1&r&&e.YNc(0,pr,7,1,"tr",22),2&r){const t=P.$implicit;e.Q6J("ngIf",null==t.stocks?null:t.stocks.length)}}function _r(r,P){if(1&r){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",44)(2,"div",45)(3,"label",46),e._uU(4,"\u0422\u0435\u043a\u0441\u0442"),e.qZA(),e.TgZ(5,"input",47),e.NdJ("ngModelChange",function(_){const B=e.CHM(t).$implicit;return e.KtG(B.text=_)}),e.qZA()()(),e.TgZ(6,"div",45)(7,"label",48),e._uU(8,"\u0420\u0430\u0437\u043c\u0435\u0440 \u0448\u0440\u0438\u0444\u0442\u0430"),e.qZA(),e.TgZ(9,"p-inputNumber",49),e.NdJ("ngModelChange",function(_){const B=e.CHM(t).$implicit;return e.KtG(B.fontSize=_)}),e.qZA()(),e.TgZ(10,"div",45)(11,"label",50),e._uU(12,"\u0416\u0438\u0440\u043d\u044b\u0439"),e.qZA(),e.TgZ(13,"p-checkbox",51),e.NdJ("ngModelChange",function(_){const B=e.CHM(t).$implicit;return e.KtG(B.bold=_)}),e.qZA()(),e.BQk()}if(2&r){const t=P.$implicit;e.xp6(5),e.Q6J("ngModel",t.text),e.xp6(4),e.Q6J("ngModel",t.fontSize)("showButtons",!0),e.xp6(4),e.Q6J("ngModel",t.bold)("binary",!0)}}function hr(r,P){if(1&r&&(e.O4$(),e.ynx(0),e._UZ(1,"rect",52),e.BQk()),2&r){const t=P.$implicit;e.xp6(1),e.uIk("width",3*t.width)("x",3*t.offset+89)}}function gr(r,P){if(1&r&&(e.O4$(),e.ynx(0),e._UZ(1,"text",53),e.BQk()),2&r){const t=P.$implicit,p=P.index,_=e.oxw(3);e.xp6(1),e.Q6J("innerHTML",t.text,e.oJD),e.uIk("font-weight",t.bold?"bold":"normal")("font-size",t.fontSize)("y",160+40*p/_.barcodeTexts.length)}}function mr(r,P){if(1&r){const t=e.EpF();e.TgZ(0,"div",38),e.YNc(1,_r,14,5,"ng-container",39),e.TgZ(2,"div")(3,"p-button",40),e.NdJ("click",function(){e.CHM(t);const _=e.oxw(2);return e.KtG(_.addBarcodeText())}),e.qZA()()(),e.TgZ(4,"div"),e.O4$(),e.TgZ(5,"svg",41),e._UZ(6,"rect",42),e.YNc(7,hr,2,2,"ng-container",39),e.YNc(8,gr,2,4,"ng-container",39),e.qZA(),e.kcU(),e.TgZ(9,"a",43),e.NdJ("click",function(){e.CHM(t);const _=e.oxw(2);return e.KtG(_.downloadBarcode())}),e._uU(10,"\u0421\u043a\u0430\u0447\u0430\u0442\u044c"),e.qZA()()}if(2&r){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.barcodeTexts),e.xp6(6),e.Q6J("ngForOf",t.barcodeData),e.xp6(1),e.Q6J("ngForOf",t.barcodeTexts),e.xp6(1),e.Q6J("download",t.selectedProductForBarcode.productPackageID+".png")}}const vr=function(){return{width:"50vw"}};function yr(r,P){if(1&r){const t=e.EpF();e.TgZ(0,"p-dialog",36),e.NdJ("onShow",function(){e.CHM(t);const _=e.oxw();return e.KtG(_.onShowBarcodeDialog())}),e.YNc(1,mr,11,4,"ng-template",37),e.qZA()}if(2&r){const t=e.oxw();e.Akn(e.DdM(6,vr)),e.Q6J("modal",!0)("visible",!!t.selectedProductForBarcode)("draggable",!1)("resizable",!1)}}const xr=function(){return{"min-width":"75rem"}},br=function(){return[10,25,50]},Tr=function(){return["name"]};let Or=(()=>{class r extends l.V{addBarcodeText(){this.barcodeTexts=[...this.barcodeTexts,{fontSize:10,text:"",bold:!1}]}constructor(t,p,_,I,B){super(B),this.ozonProductClient=t,this.messageService=p,this.ozonProductCommandHandler=_,this.confirmationService=I,this.findProductsSubject=new d.X(null),this.rows=50,this.barcodeHeight=10}ngOnInit(){this.titleService.setTitle("Ozon Products"),this.px2mmFactor=this.calcPx2MmFactor()}findProducts(t){this.ozonProductClient.findOzonProducts(t).pipe((0,M.R)(this.destroyed)).pipe((0,f.K)(p=>(this.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430",severity:"error",detail:p}),x.E))).subscribe(p=>{p.items?.forEach(_=>{let I=_;I.totalPresent=_.stocks.reduce((B,ue)=>B+ue.present,0),I.totalReserved=_.stocks.reduce((B,ue)=>B+ue.reserved,0)}),this.data=p.items,this.totalRecords=p.totalCount})}confirmProductRemoval(t,p){this.confirmationService.confirm({target:t.target,message:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0442\u043e\u0432\u0430\u0440?",header:"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0438\u0435 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f",icon:"pi pi-exclamation-triangle",acceptIcon:"none",rejectIcon:"none",rejectButtonStyleClass:"p-button-text",accept:()=>{this.ozonProductCommandHandler.removeOzonProduct(p.productPackageID).pipe((0,f.K)(_=>(this.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f \u0442\u043e\u0432\u0430\u0440\u0430",severity:"error",detail:_}),x.E))).subscribe(_=>{const I=this.data.indexOf(p);this.data.splice(I,1),this.messageService.add({summary:"\u0422\u043e\u0432\u0430\u0440 \u0443\u0434\u0430\u043b\u0451\u043d",severity:"success"})})}})}onDataLazyLoad(t){const p=new c.f.FindOzonProductsModel({offset:t.first,count:t.rows,includeStocks:!0});if(this.fillFilterModel(p,t.filters),t.sortField){switch(t.sortField){case"name":p.orderField=c.f.FindOzonProductsModelSortField.ProductName;break;case"productPackageID":p.orderField=c.f.FindOzonProductsModelSortField.ProductPackageID}p.orderAscending=t.sortOrder>0}this.findProducts(p)}fillFilterModel(t,p){t.productName=p?.name?.value,t.productPackageID=p?.productPackageID?.value}onShowBarcodeDialog(){this.barcodeTexts=[]}calcPx2MmFactor(){let t=document.createElement("div");t.style.position="absolute",t.style.width="100mm",document.body.appendChild(t);let p=t.getBoundingClientRect();return document.body.removeChild(t),p.width/100}showBarcodeGenerator(t){if(t.barcodes?.length>0){this.selectedProductForBarcode=t;const p=this.selectedProductForBarcode.barcodes[0],_={};ir(_,p,{format:"code128",height:this.barcodeHeight*this.px2mmFactor,text:p,background:"rgba(255, 255, 255, 1)",font:"monospace",fontOptions:"bold",marginTop:0,fontSize:16,lineColor:"black",margin:2*this.px2mmFactor,textMargin:0,flat:!0});let ue,B=[];for(let se=0;se<_.encodings[0].data.length;se++)"1"==_.encodings[0].data[se]?ue?ue.width++:ue={width:1,offset:se}:ue?.width>0&&(B.push(ue),ue=null);ue&&B.push(ue),this.barcodeData=B}}downloadBarcode(){var t=this;return(0,s.Z)(function*(){yield new Promise(_=>{try{const B=document.getElementById("barcodeImage").outerHTML,ue=btoa(encodeURIComponent(B).replace(/%([0-9A-F]{2})/g,(ge,xe)=>String.fromCharCode(parseInt(xe,16)))),se=document.createElement("a");se.href="data:image/svg+xml;base64,"+ue,se.download=t.selectedProductForBarcode.productPackageID+".svg",se.click()}catch(I){t.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430",severity:"error",detail:I})}})})()}importProducts(){var t=this;return(0,s.Z)(function*(){yield t.ozonProductCommandHandler.importOzonProducts().pipe((0,f.K)(p=>(t.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0438\u043c\u043f\u043e\u0440\u0442\u0430 \u0442\u043e\u0432\u0430\u0440\u043e\u0432",severity:"error",detail:p}),x.E))).subscribe(()=>{t.messageService.add({summary:"\u0423\u0441\u043f\u0435\u0445",severity:"success",detail:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0442\u043e\u0432\u0430\u0440\u043e\u0432 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u0430"}),t.onDataLazyLoad({first:0,rows:t.rows})})})()}updateStocks(){var t=this;return(0,s.Z)(function*(){t.ozonProductCommandHandler.importOzonProductStocks().pipe((0,f.K)(p=>(t.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430",severity:"error",detail:p}),x.E))).subscribe(()=>{t.messageService.add({summary:"\u0423\u0441\u043f\u0435\u0445",severity:"success",detail:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0441\u043a\u043b\u0430\u0434\u043e\u0432 \u041e\u0437\u043e\u043d \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u0430"}),t.onDataLazyLoad({first:0,rows:t.rows})})})()}static#e=this.\u0275fac=function(p){return new(p||r)(e.Y36(c.f.OzonProductClient),e.Y36(w.ez),e.Y36(S.Q.OzonProductClient),e.Y36(w.YP),e.Y36(F.Dx))};static#t=this.\u0275cmp=e.Xpm({type:r,selectors:[["app-ozon-product-list"]],features:[e.qOj],decls:11,vars:13,consts:[["pButton","","pRipple","","type","button","label","\u0418\u043c\u043f\u043e\u0440\u0442 \u0442\u043e\u0432\u0430\u0440\u043e\u0432",1,"mb-2",3,"click"],["pButton","","pRipple","","type","button","label","\u0418\u043c\u043f\u043e\u0440\u0442 \u043e\u0441\u0442\u0430\u0442\u043a\u043e\u0432",1,"ml-1","mb-2",3,"click"],["dataKey","productPackageID",3,"value","lazy","tableStyle","paginator","rows","rowsPerPageOptions","totalRecords","loading","globalFilterFields","onLazyLoad"],["pTemplate","header"],["pTemplate","body"],["pTemplate","rowexpansion"],["header","\u0413\u0435\u043d\u0435\u0440\u0430\u0446\u0438\u044f \u0431\u0430\u0440\u043a\u043e\u0434\u0430",3,"modal","style","visible","draggable","resizable","onShow",4,"ngIf"],[1,"hidden"],["id","barcode",2,"display","none"],["pSortableColumn","productPackageID","width","20%"],["field","productPackageID"],["pSortableColumn","name"],["field","name"],["field","productPackageID","type","numeric",3,"showButtons","useGrouping"],["field","name","type","text"],["target","_blank",3,"href"],[1,"pi","ozon-fbo"],[1,"pi","ozon-seller"],["icon","pi pi-chart-bar",3,"click"],["type","button","pRipple","","icon","pi pi-trash","styleClass","p-button-danger",3,"click"],["type","button","pButton","","pRipple","","class","p-button-text p-button-rounded p-button-plain",3,"pRowToggler","icon",4,"ngIf"],["type","button","pButton","","pRipple","",1,"p-button-text","p-button-rounded","p-button-plain",3,"pRowToggler","icon"],[4,"ngIf"],["colspan","4"],[3,"value"],["pTemplate","footer"],["pSortableColumn","warehouse.name"],["field","warehouse.name"],["pSortableColumn","warehouse.warehouseCluster"],["field","warehouse.warehouseCluster"],["width","10%","pSortableColumn","present"],["field","present"],["width","10%","pSortableColumn","reserved"],["field","reserved"],[1,"text-right"],["colspan","2",1,"text-right"],["header","\u0413\u0435\u043d\u0435\u0440\u0430\u0446\u0438\u044f \u0431\u0430\u0440\u043a\u043e\u0434\u0430",3,"modal","visible","draggable","resizable","onShow"],["pTemplate","content"],[1,"card"],[4,"ngFor","ngForOf"],["icon","pi pi-plus","label","\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0442\u0435\u043a\u0441\u0442",3,"click"],["id","barcodeImage","xmlns","http://www.w3.org/2000/svg"],["width","350em","height","600em","fill","white"],[1,"p-ripple","p-element","p-button","p-component",3,"download","click"],[1,"flex"],[1,"flex-auto"],["for","text",1,"block","font-bold"],["pInputText","","inputId","text",3,"ngModel","ngModelChange"],["for","fontSize",1,"mb-2","block","font-bold"],["inputId","fontSize",3,"ngModel","showButtons","ngModelChange"],["for","fontWeight",1,"mb-2","block","font-bold"],["inputId","binary",3,"ngModel","binary","ngModelChange"],["y","50","height","60","fill","black"],["x","50%","fill","black","text-anchor","middle",3,"innerHTML"]],template:function(p,_){1&p&&(e._UZ(0,"p-toast")(1,"p-confirmDialog"),e.TgZ(2,"button",0),e.NdJ("click",function(){return _.importProducts()}),e.qZA(),e.TgZ(3,"button",1),e.NdJ("click",function(){return _.updateStocks()}),e.qZA(),e.TgZ(4,"p-table",2),e.NdJ("onLazyLoad",function(B){return _.onDataLazyLoad(B)}),e.YNc(5,ar,16,2,"ng-template",3),e.YNc(6,lr,14,5,"ng-template",4),e.YNc(7,fr,1,1,"ng-template",5),e.qZA(),e.YNc(8,yr,2,7,"p-dialog",6),e.TgZ(9,"div",7),e.O4$(),e._UZ(10,"svg",8),e.qZA()),2&p&&(e.xp6(4),e.Q6J("value",_.data)("lazy",!0)("tableStyle",e.DdM(10,xr))("paginator",!0)("rows",_.rows)("rowsPerPageOptions",e.DdM(11,br))("totalRecords",_.totalRecords)("loading",_.loading)("globalFilterFields",e.DdM(12,Tr)),e.xp6(4),e.Q6J("ngIf",_.selectedProductForBarcode))},dependencies:[w.jx,J.Hq,J.zx,Fn.XZ,Nn.o,n.sg,n.O5,Yn.Q,Bn.V,K.Fj,K.JJ,K.On,jn.Rn,W.iA,W.lQ,W.jB,W.fz,W.xl,me.FN]})}return r})();var Cr=v(7398),ot=v(701),wr=v(8645),Sr=v(7715);let Gn=(()=>{class r{defaultConfig(){return{inputStream:{name:"Live",type:"LiveStream"},locator:{patchSize:"medium",halfSample:!1},locate:!0,numOfWorkers:8,frequency:10}}isScanMatch(t,p){const _=this.meanBy(t.codeResult.decodedCodes,"error");return!!_&&_<p}start(t,p){var _=this;return typeof this.scanResult>"u"&&(this.scanResult=new wr.x),ot.onProcessed(I=>{this.onProcessed(I)}),ot.onDetected(I=>{const B=I.codeResult.code;this.isScanMatch(I,p)&&this.scanResult?.next(B+"")}),ot.init(t,function(){var I=(0,s.Z)(function*(B){B?(_.scanResult?.error(B),yield _.stop()):ot.start()});return function(B){return I.apply(this,arguments)}}()),this.scanResult}stop(){return typeof this.scanResult<"u"&&(this.scanResult?.unsubscribe(),this.scanResult=void 0),(0,Sr.D)(ot.stop())}meanBy(t,p){if(t)return t.reduce((_,I)=>p in I?_+I[p]:_,0)/t.length}onProcessed(t){const p=ot.canvas.ctx.overlay,_=ot.canvas.dom.overlay;if(t){if(t.boxes){const I=_.getAttribute("width")??"0",B=_.getAttribute("height")??"0",ue=parseInt(I,10),se=parseInt(B,10);p.clearRect(0,0,ue,se),t.boxes.filter(ge=>ge!==t.box).forEach(ge=>{ot.ImageDebug.drawPath(ge,{x:0,y:1},p,{color:"green",lineWidth:2})})}t.box&&ot.ImageDebug.drawPath(t.box,{x:0,y:1},p,{color:"#00F",lineWidth:2}),t.codeResult&&t.codeResult.code&&ot.ImageDebug.drawPath(t.line,{x:"x",y:"y"},p,{color:"red",lineWidth:3})}}static#e=this.\u0275fac=function(p){return new(p||r)};static#t=this.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();class mt{static setOrDefault(P,t,p){typeof P[t]>"u"&&(P[t]=p)}}let Ar=(()=>{class r{constructor(t){this.service=t,this.codes=["code_128","ean","ean_8","code_39","code_39_vin","codabar","upc","upc_e","i2of5","2of5","code_93"],this.valueChange=new e.vpe,this.exception=new e.vpe}setConfig(){this.config||(this.config={...this.service.defaultConfig(),decoder:{readers:this.readers()}}),this.config.inputStream||(this.config.inputStream={}),mt.setOrDefault(this.config.inputStream,"name","Live"),mt.setOrDefault(this.config.inputStream,"type","LiveStream"),this.config.locator||(this.config.locator={}),mt.setOrDefault(this.config.locator,"patchSize","medium"),mt.setOrDefault(this.config.locator,"halfSample",!1),mt.setOrDefault(this.config,"locate",!0),mt.setOrDefault(this.config,"numOfWorkers",8),mt.setOrDefault(this.config,"frequency",10),this.config.decoder||(this.config.decoder={}),mt.setOrDefault(this.config.decoder,"readers",this.readers())}ngOnInit(){this.setConfig();const t=isNaN(this.errorThreshold)?.1:this.errorThreshold;this.service.start(this.config,t).subscribe(_=>{this.valueChange.emit(_)},_=>{this.exception.emit(_)})}ngOnDestroy(){this.service.stop()}readers(){return("string"==typeof this.codes?[this.codes]:this.codes).map(p=>`${p}_reader`)}static#e=this.\u0275fac=function(p){return new(p||r)(e.Y36(Gn))};static#t=this.\u0275cmp=e.Xpm({type:r,selectors:[["ngx-barcode-scanner"]],inputs:{codes:"codes",config:"config",errorThreshold:"errorThreshold",value:"value"},outputs:{valueChange:"valueChange",exception:"exception"},decls:1,vars:0,consts:[["id","interactive",1,"viewport"]],template:function(p,_){1&p&&e._UZ(0,"div",0)},styles:["#interactive.viewport{position:relative;width:100%;height:auto;overflow:hidden;text-align:center}  #interactive.viewport>canvas,   #interactive.viewport>video{max-width:100%;width:100%}  canvas.drawing,   canvas.drawingBuffer{position:absolute;left:0;top:0}  video{width:100%;object-fit:cover}[_nghost-%COMP%]{position:static;width:100%}"]})}return r})(),Er=(()=>{class r{static#e=this.\u0275fac=function(p){return new(p||r)};static#t=this.\u0275mod=e.oAB({type:r});static#n=this.\u0275inj=e.cJS({})}return r})();const Mr=["table"];function Zr(r,P){1&r&&(e.TgZ(0,"tr")(1,"th"),e._uU(2,"\u0414\u0430\u0442\u0430"),e.qZA(),e.TgZ(3,"th"),e._uU(4,"\u0421\u0442\u0430\u0442\u0443\u0441"),e.qZA(),e.TgZ(5,"th"),e._uU(6,"\u0421\u043a\u043b\u0430\u0434 \u043e\u0442\u0433\u0440\u0443\u0437\u043a\u0438"),e.qZA(),e.TgZ(7,"th"),e._uU(8,"\u0421\u043a\u043b\u0430\u0434\u044b \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f"),e.qZA(),e.TgZ(9,"th"),e._uU(10,"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043f\u043e\u0437\u0438\u0446\u0438\u0439"),e.qZA(),e.TgZ(11,"th"),e._uU(12,"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0442\u043e\u0432\u0430\u0440\u043e\u0432"),e.qZA(),e._UZ(13,"th"),e.qZA())}function kr(r,P){if(1&r&&(e.TgZ(0,"tr")(1,"td")(2,"a",8),e._uU(3),e.ALo(4,"date"),e.qZA()(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA(),e.TgZ(13,"td"),e._uU(14),e.qZA(),e.TgZ(15,"td"),e._UZ(16,"button",9),e.qZA()()),2&r){const t=P.$implicit,p=P.expanded;e.xp6(2),e.s9C("href",t.link,e.LSH),e.xp6(1),e.Oqu(e.xi3(4,9,t.date,"y-MM-dd")),e.xp6(3),e.Oqu(t.statusName),e.xp6(2),e.Oqu(null==t.ozonWarehouse?null:t.ozonWarehouse.name),e.xp6(2),e.Oqu(t.warehouses),e.xp6(2),e.Oqu(t.totalItemCount),e.xp6(2),e.Oqu(t.totalQuantity),e.xp6(2),e.Q6J("pRowToggler",t)("icon",p?"pi pi-chevron-down":"pi pi-chevron-right")}}function Ir(r,P){1&r&&(e.TgZ(0,"tr")(1,"th",13),e._uU(2,"\u0410\u0440\u0442\u0438\u043a\u0443\u043b "),e._UZ(3,"p-sortIcon",14),e.qZA(),e.TgZ(4,"th",15),e._uU(5,"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 "),e._UZ(6,"p-sortIcon",16),e.qZA(),e.TgZ(7,"th",17),e._uU(8,"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e "),e._UZ(9,"p-sortIcon",18),e.qZA()())}function Rr(r,P){if(1&r&&(e.TgZ(0,"tr",19)(1,"td",10)(2,"b"),e._uU(3),e.qZA()()()),2&r){const t=P.$implicit;e.xp6(3),e.Oqu(null==t.ozonWarehouse?null:t.ozonWarehouse.name)}}function Pr(r,P){if(1&r&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA()()),2&r){const t=P.$implicit;e.xp6(2),e.Oqu(t.productPackageID),e.xp6(2),e.Oqu(t.productPackage.name),e.xp6(2),e.Oqu(t.quantity)}}function Dr(r,P){if(1&r&&(e.TgZ(0,"tr")(1,"td",10)(2,"p-table",11),e.YNc(3,Ir,10,0,"ng-template",4),e.YNc(4,Rr,4,1,"ng-template",12),e.YNc(5,Pr,7,3,"ng-template",5),e.qZA()()()),2&r){const t=P.$implicit;e.xp6(2),e.Q6J("value",t.orderItems)}}const zr=function(){return["code_128","ean","upc","upc_e","ean_8"]};function Lr(r,P){if(1&r){const t=e.EpF();e.TgZ(0,"ngx-barcode-scanner",22),e.NdJ("valueChange",function(_){e.CHM(t);const I=e.oxw(2);return e.KtG(I.onValueChanged(_))}),e.qZA(),e._uU(1)}if(2&r){const t=e.oxw(2);e.Q6J("codes",e.DdM(3,zr))("errorThreshold",.1),e.xp6(1),e.hij(" ",t.barcode," ")}}const Ur=function(){return{width:"50vw"}};function qr(r,P){if(1&r){const t=e.EpF();e.TgZ(0,"p-dialog",20),e.NdJ("valueChange",function(_){e.CHM(t);const I=e.oxw();return e.KtG(I.barcode=_)})("visibleChange",function(_){e.CHM(t);const I=e.oxw();return e.KtG(I.showScanBarcodeDialog=_)}),e.YNc(1,Lr,2,4,"ng-template",21),e.qZA()}if(2&r){const t=e.oxw();e.Akn(e.DdM(7,Ur)),e.Q6J("value",t.barcode)("modal",!0)("visible",t.showScanBarcodeDialog)("draggable",!1)("resizable",!1)}}const Fr=function(){return{"min-width":"75rem"}},Nr=function(){return[10,25,50]};let Br=(()=>{class r extends l.V{constructor(t,p,_,I){super(I),this.supplyOrderClient=t,this.supplyOrderCommandHandler=p,this.messageService=_,this.findSupplyOrdersSubject=new d.X(null),this.rows=50}closeCellEdit(){}editComplete(t){if("ozonCrossDockWarehouseID"==t.field){const p=t.data;this.supplyOrderCommandHandler.updateOzonSupplyOrderCrossDockWarehouse(p.iD,p.ozonCrossDockWarehouse?.iD).pipe((0,f.K)(_=>(this.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430",severity:"error",detail:_}),x.E))).subscribe()}}ngOnInit(){this.titleService.setTitle("\u041f\u043e\u0441\u0442\u0430\u0432\u043a\u0438 Ozon"),this.findSupplyOrdersSubject.pipe((0,T.h)(t=>!!t)).pipe((0,M.R)(this.destroyed)).pipe((0,Cr.U)(t=>{this.findSupplyOrders(t)}))}onValueChanged(t){}scanBarcode(){this.showScanBarcodeDialog=!0}findSupplyOrders(t){this.supplyOrderClient.findOzonSupplyOrders(t).pipe((0,M.R)(this.destroyed)).pipe((0,f.K)(p=>(this.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430",severity:"error",detail:p}),x.E))).subscribe(p=>{this.data=p.items,this.data.forEach(_=>{var I=_.orderItems.reduce((se,ge)=>(ge.ozonWarehouse?.name&&se.add(ge.ozonWarehouse.name),se),new Set),B=_;B.statusName=this.getOrderStatusName(_.status),B.warehouses=[...I].join(", "),B.link=`${_.state==c.f.SupplyOrderState.DataFilling?"https://seller.ozon.ru/app/supply/orders/draft":"https://seller.ozon.ru/app/supply/orders"}/${B.iD}`}),this.totalRecords=p.totalCount})}getOrderStatusName(t){let p;const _=Object.values(c.f.SupplyOrderState);switch(null==t?c.f.SupplyOrderState.Unknown:_[t]){case c.f.SupplyOrderState.AcceptanceAtStorageWarehouse:p="\u041f\u0440\u0438\u0451\u043c\u043a\u0430 \u043d\u0430 \u0441\u043a\u043b\u0430\u0434\u0435 \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f";break;case c.f.SupplyOrderState.Cancelled:p="\u041e\u0442\u043c\u0435\u043d\u0435\u043d\u0430";break;case c.f.SupplyOrderState.DataFilling:p="\u0417\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435";break;case c.f.SupplyOrderState.AcceptedAtSupplyWarehouse:p="\u041f\u0440\u0438\u043d\u044f\u0442\u0430 \u043d\u0430 \u0441\u043a\u043b\u0430\u0434\u0435 \u043e\u0442\u0433\u0440\u0443\u0437\u043a\u0438";break;case c.f.SupplyOrderState.Completed:p="\u0417\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u0430";break;case c.f.SupplyOrderState.InTransit:p="\u0412 \u043f\u0443\u0442\u0438";break;case c.f.SupplyOrderState.ReadyToSupply:p="\u0413\u043e\u0442\u043e\u0432\u0430 \u043a \u043e\u0442\u0433\u0440\u0443\u0437\u043a\u0435";break;case c.f.SupplyOrderState.RejectedAtSupplyWarehouse:p="\u041e\u0442\u043a\u0430\u0437\u0430\u043d\u043e \u0432 \u043f\u0440\u0438\u0451\u043c\u043a\u0435";break;case c.f.SupplyOrderState.ReportRejected:p="\u0421\u043f\u043e\u0440";break;case c.f.SupplyOrderState.ReportsConfirmationAwaiting:p="\u0421\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u0435 \u0430\u043a\u0442\u043e\u0432";break;case c.f.SupplyOrderState.Unknown:p="\u0421\u0442\u0430\u0442\u0443\u0441 \u043d\u0435 \u0437\u0430\u0434\u0430\u043d";break;default:throw Error(`Unsupported status ${t}`)}return p}onDataLazyLoad(t){const p=new c.f.FindOzonSupplyOrdersModel({offset:t.first,count:t.rows});this.findSupplyOrdersSubject.next(p),this.findSupplyOrders(p)}importSupplyOrders(){var t=this;return(0,s.Z)(function*(){t.supplyOrderCommandHandler.updateOzonSupplyOrders().pipe((0,f.K)(p=>(t.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0438\u043c\u043f\u043e\u0440\u0442\u0430 \u0437\u0430\u044f\u0432\u043e\u043a \u043d\u0430 \u043f\u043e\u0441\u0442\u0430\u0432\u043a\u0443",severity:"error",detail:p}),x.E))).subscribe(()=>{t.messageService.add({summary:"\u0423\u0441\u043f\u0435\u0445",severity:"success",detail:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0437\u0430\u044f\u0432\u043e\u043a \u043d\u0430 \u043f\u043e\u0441\u0442\u0430\u0432\u043a\u0443 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u0430"}),t.onDataLazyLoad({first:0,rows:t.rows})})})()}static#e=this.\u0275fac=function(p){return new(p||r)(e.Y36(c.f.OzonSupplyOrderClient),e.Y36(S.Q.OzonSupplyOrderClient),e.Y36(w.ez),e.Y36(F.Dx))};static#t=this.\u0275cmp=e.Xpm({type:r,selectors:[["app-ozon-supply-order-list"]],viewQuery:function(p,_){if(1&p&&e.Gf(Mr,5),2&p){let I;e.iGM(I=e.CRH())&&(_.table=I.first)}},features:[e.qOj],decls:9,vars:11,consts:[["label","\u0421\u043a\u0430\u043d\u0438\u0440\u043e\u0432\u0430\u0442\u044c",3,"click"],["pButton","","pRipple","","type","button","label","\u0418\u043c\u043f\u043e\u0440\u0442 \u0437\u0430\u044f\u0432\u043e\u043a \u043d\u0430 \u043f\u043e\u0441\u0442\u0430\u0432\u043a\u0443",1,"ml-1",3,"click"],["dataKey","iD","editMode","cell",3,"value","lazy","tableStyle","paginator","rows","rowsPerPageOptions","totalRecords","loading","onLazyLoad","onEditComplete"],["table",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","rowexpansion"],["header","\u0421\u043a\u0430\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u0434\u0430",3,"value","modal","style","visible","draggable","resizable","valueChange","visibleChange",4,"ngIf"],["target","_blank",3,"href"],["type","button","pButton","","pRipple","",1,"p-button-text","p-button-rounded","p-button-plain",3,"pRowToggler","icon"],["colspan","7"],["rowGroupMode","subheader","groupRowsBy","ozonWarehouse?.name",3,"value"],["pTemplate","groupheader"],["pSortableColumn","productPackageID"],["field","productPackageID"],["pSortableColumn","productPackage.name"],["field","productPackage.name"],["pSortableColumn","quantity"],["field","quantity"],["pRowGroupHeader",""],["header","\u0421\u043a\u0430\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u0434\u0430",3,"value","modal","visible","draggable","resizable","valueChange","visibleChange"],["pTemplate","content"],["width","300",3,"codes","errorThreshold","valueChange"]],template:function(p,_){1&p&&(e._UZ(0,"p-toast"),e.TgZ(1,"p-button",0),e.NdJ("click",function(){return _.scanBarcode()}),e.qZA(),e.TgZ(2,"button",1),e.NdJ("click",function(){return _.importSupplyOrders()}),e.qZA(),e.TgZ(3,"p-table",2,3),e.NdJ("onLazyLoad",function(B){return _.onDataLazyLoad(B)})("onEditComplete",function(B){return _.editComplete(B)}),e.YNc(5,Zr,14,0,"ng-template",4),e.YNc(6,kr,17,12,"ng-template",5),e.YNc(7,Dr,6,1,"ng-template",6),e.qZA(),e.YNc(8,qr,2,8,"p-dialog",7)),2&p&&(e.xp6(3),e.Q6J("value",_.data)("lazy",!0)("tableStyle",e.DdM(9,Fr))("paginator",!0)("rows",_.rows)("rowsPerPageOptions",e.DdM(10,Nr))("totalRecords",_.totalRecords)("loading",_.loading),e.xp6(5),e.Q6J("ngIf",_.showScanBarcodeDialog))},dependencies:[w.jx,J.Hq,J.zx,n.O5,Bn.V,Ar,W.iA,W.lQ,W.Z5,W.jB,W.fz,me.FN,n.uU]})}return r})();function jr(r,P){if(1&r&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"number"),e.qZA(),e.TgZ(3,"div"),e._uU(4),e.ALo(5,"number"),e.qZA(),e.TgZ(6,"div"),e._uU(7),e.ALo(8,"number"),e.qZA(),e.TgZ(9,"div"),e._uU(10),e.ALo(11,"number"),e.qZA()),2&r){const t=e.oxw().ngIf;e.xp6(1),e.hij("\u0421\u0443\u043c\u043c\u0430: ",e.xi3(2,4,t.sum,"1.2-2"),""),e.xp6(3),e.hij("\u041d\u0430\u0447\u0438\u0441\u043b\u0435\u043d\u043e: ",e.xi3(5,7,t.accrual,"1.2-2"),""),e.xp6(3),e.hij("\u041a\u043e\u043c\u0438\u0441\u0441\u0438\u044f: ",e.xi3(8,10,t.commission,"1.2-2"),""),e.xp6(3),e.hij("\u041d\u0430\u0447\u0438\u0441\u043b\u0435\u043d\u043e \u0437\u0430 \u0432\u044b\u0447\u0435\u0442\u043e\u043c \u043a\u043e\u043c\u0438\u0441\u0441\u0438\u0438: ",e.xi3(11,13,t.accrual+t.commission,"1.2-2"),"")}}const Jr=function(){return{"max-width":"300px"}};function Qr(r,P){if(1&r){const t=e.EpF();e.TgZ(0,"tr")(1,"th"),e._uU(2,"ID"),e.qZA(),e.TgZ(3,"th"),e._uU(4,"\u0414\u0430\u0442\u0430"),e.qZA(),e.TgZ(5,"th",11),e._uU(6,"\u0421\u0443\u043c\u043c\u0430 "),e._UZ(7,"p-sortIcon",12),e.qZA(),e.TgZ(8,"th"),e._uU(9,"\u0421\u0435\u0440\u0432\u0438\u0441\u044b"),e.qZA(),e._UZ(10,"th"),e.qZA(),e.TgZ(11,"tr"),e._UZ(12,"th")(13,"th")(14,"th"),e.TgZ(15,"th")(16,"p-multiSelect",13),e.NdJ("ngModelChange",function(_){e.CHM(t);const I=e.oxw(2);return e.KtG(I.selectedServiceTypes=_)})("onChange",function(){e.CHM(t);const _=e.oxw(2);return e.KtG(_.filterData())}),e.qZA()(),e._UZ(17,"th"),e.qZA()}if(2&r){const t=e.oxw(2);e.xp6(16),e.Akn(e.DdM(4,Jr)),e.Q6J("ngModel",t.selectedServiceTypes)("options",t.serviceTypes)}}function Yr(r,P){if(1&r&&(e.TgZ(0,"div")(1,"div",17)(2,"div"),e._uU(3),e.qZA(),e.TgZ(4,"div"),e._uU(5),e.ALo(6,"number"),e.qZA()()()),2&r){const t=P.$implicit,p=e.oxw(3);e.xp6(3),e.Oqu(p.getOperationServiceType(t.type)),e.xp6(2),e.Oqu(e.xi3(6,2,t.price,"1.2-2"))}}function Gr(r,P){if(1&r&&(e.TgZ(0,"tr",14)(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.ALo(5,"date"),e.qZA(),e.TgZ(6,"td")(7,"span",15),e._uU(8,"\u0421\u0443\u043c\u043c\u0430"),e.qZA(),e.TgZ(9,"div"),e._uU(10),e.ALo(11,"number"),e.qZA()(),e.TgZ(12,"td"),e.YNc(13,Yr,7,5,"div",16),e.qZA(),e.TgZ(14,"td"),e._uU(15),e.qZA()()),2&r){const t=P.$implicit,p=e.oxw(2);e.Q6J("pRowToggler",t),e.xp6(2),e.hij(" ",t.iD," "),e.xp6(2),e.hij(" ",e.xi3(5,6,t.date,"y-MM-dd HH:mm")," "),e.xp6(6),e.hij(" ",e.xi3(11,9,t.amount,"1.2-2"),"\u20bd "),e.xp6(3),e.Q6J("ngForOf",t.services),e.xp6(2),e.Oqu(p.getOperationType(t.operationType))}}function Hr(r,P){1&r&&(e.TgZ(0,"tr")(1,"th"),e._uU(2,"\u0422\u0438\u043f"),e.qZA(),e.TgZ(3,"th"),e._uU(4,"\u0421\u0443\u043c\u043c\u0430"),e.qZA()())}function Vr(r,P){if(1&r&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA()()),2&r){const t=P.$implicit,p=e.oxw(3);e.xp6(2),e.AsE("",p.getOperationServiceType(t.type),"",t.type,""),e.xp6(2),e.Oqu(t.price)}}const Wr=function(){return{"min-width":"50rem"}};function $r(r,P){if(1&r&&(e.TgZ(0,"tr")(1,"td",18)(2,"h5"),e._uU(3,"\u0421\u0435\u0440\u0432\u0438\u0441\u044b \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438"),e.qZA()()(),e.TgZ(4,"tr")(5,"td",18)(6,"p-table",19),e.YNc(7,Hr,5,0,"ng-template",8),e.YNc(8,Vr,5,3,"ng-template",9),e.qZA()()()),2&r){const t=P.$implicit;e.xp6(6),e.Q6J("value",t.services)("breakpoint","960px")("tableStyle",e.DdM(3,Wr))}}const Kr=function(){return[50,250,1e3]};function Xr(r,P){if(1&r){const t=e.EpF();e.TgZ(0,"div",5)(1,"p-table",6),e.NdJ("onPage",function(_){e.CHM(t);const I=e.oxw();return e.KtG(I.pageChange(_))}),e.YNc(2,jr,12,16,"ng-template",7),e.YNc(3,Qr,18,5,"ng-template",8),e.YNc(4,Gr,16,12,"ng-template",9),e.YNc(5,$r,9,4,"ng-template",10),e.qZA()()}if(2&r){const t=P.ngIf,p=e.oxw();e.xp6(1),e.Q6J("value",t.items)("loading",p.loading)("totalRecords",t.totalCount)("paginator",!0)("showCurrentPageReport",!1)("rows",p.rows)("rowsPerPageOptions",e.DdM(7,Kr))}}let eo=(()=>{class r extends l.V{constructor(t,p,_,I,B){super(B),this.operationClient=t,this.messageService=p,this.operationCommandHandler=_,this.timeService=I,this.rows=50,this.isLoading=!1,this.serviceTypes=[],this.selectedServiceTypes=[],this.operationServiceTypes=Object.values(c.f.OperationServiceType),this.operationTypes=Object.values(c.f.OperationType),this.filteredData=new d.X(null),this.dataSubject=new d.X(null),this.filterSubject=new d.X(null),this.serviceTypes=Object.keys(c.f.OperationServiceType).map(ue=>({type:ue,text:c.f.OperationServiceType[ue]})).sort((ue,se)=>ue.text>se.text?1:se.text>ue.text?-1:0)}ngOnInit(){this.titleService.setTitle("\u0422\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0438 Ozon"),this.filterSubject.pipe((0,M.R)(this.destroyed)).pipe((0,T.h)(t=>!!t)).pipe((0,u.w)(t=>this.operationClient.findOzonOperations(t).pipe((0,f.K)(p=>(this.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430",severity:"error",detail:p}),x.E))))).subscribe(t=>{this.dataSubject.next(t)}),this.dataSubject.pipe((0,M.R)(this.destroyed)).pipe((0,T.h)(t=>!!t)).pipe((0,f.K)(t=>(this.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430",severity:"error",detail:t}),x.E))).subscribe(t=>{this.filterData()})}filterData(){const t=this.dataSubject.value,p=[];let _=0,I=0,B=0;if(t)for(const se of t.items){let ge=!0;const xe=Object.assign({},se);if(this.selectedServiceTypes.length){const be=xe.services.filter(Me=>this.selectedServiceTypes.find(Ze=>Ze==Me.type));be.length?xe.services=be:ge=!1}ge&&(p.push(xe),I+=xe.accrualsForSale,B+=xe.saleCommission,_+=xe.services.reduce((be,Me)=>be+Me.price,0)??0)}this.filteredData.next({totalCount:p.length,items:p,sum:_,commission:B,accrual:I})}importTransactions(){var t=this;return(0,s.Z)(function*(){const[p,_]=[t.timeService.asUtc(t.dateRange?.[0]),t.timeService.asUtc(t.dateRange?.[1])];t.operationCommandHandler.importOzonOperations(p,_).pipe((0,f.K)(I=>(t.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430",severity:"error",detail:I}),x.E))).subscribe(()=>{t.messageService.add({summary:"\u0423\u0441\u043f\u0435\u0445",severity:"success",detail:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0439 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u0430"}),t.findTransactionsClick()})})()}findTransactionsClick(){const t=new c.f.FindOzonOperationsModel({dateFrom:this.timeService.asUtc(this.dateRange?.[0]),dateTo:this.timeService.asUtc(this.dateRange?.[1]),offset:0,count:this.rows});this.filterSubject.next(t)}getOperationServiceType(t){return this.operationServiceTypes[t]}getOperationType(t){return this.operationTypes[t]}static#e=this.\u0275fac=function(p){return new(p||r)(e.Y36(c.f.OperationClient),e.Y36(w.ez),e.Y36(S.Q.OperationClient),e.Y36(U.O),e.Y36(F.Dx))};static#t=this.\u0275cmp=e.Xpm({type:r,selectors:[["app-ozon-transaction-list"]],features:[e.qOj],decls:7,vars:7,consts:[["header","\u0422\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0438 Ozon"],["styleClass","m-1","selectionMode","range","placeholder","\u041f\u0435\u0440\u0438\u043e\u0434",3,"ngModel","showClear","readonlyInput","ngModelChange"],["styleClass","m-1","icon","pi pi-search","label","\u041d\u0430\u0439\u0442\u0438 \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0438",3,"click"],["styleClass","m-1","label","\u0418\u043c\u043f\u043e\u0440\u0442 \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0439",3,"icon","click"],["class","card",4,"ngIf"],[1,"card"],["responsiveLayout","stack","dataKey","iD",3,"value","loading","totalRecords","paginator","showCurrentPageReport","rows","rowsPerPageOptions","onPage"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","rowexpansion"],["pSortableColumn","sum"],["field","amount"],["appendTo","body","optionValue","type","optionLabel","text","placeholder","\u0412\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0435",3,"ngModel","options","ngModelChange","onChange"],[3,"pRowToggler"],[1,"p-column-title"],[4,"ngFor","ngForOf"],[1,"flex","justify-content-between"],["colspan","5"],["responsiveLayout","stack",3,"value","breakpoint","tableStyle"]],template:function(p,_){1&p&&(e._UZ(0,"p-toast"),e.TgZ(1,"p-card",0)(2,"p-calendar",1),e.NdJ("ngModelChange",function(B){return _.dateRange=B}),e.qZA(),e.TgZ(3,"p-button",2),e.NdJ("click",function(){return _.findTransactionsClick()}),e.qZA(),e.TgZ(4,"p-button",3),e.NdJ("click",function(){return _.importTransactions()}),e.qZA()(),e.YNc(5,Xr,6,8,"div",4),e.ALo(6,"async")),2&p&&(e.xp6(2),e.Q6J("ngModel",_.dateRange)("showClear",!0)("readonlyInput",!0),e.xp6(2),e.Q6J("icon",_.isLoading?"pi pi-download":""),e.xp6(1),e.Q6J("ngIf",e.lcZ(6,5,_.filteredData)))},dependencies:[w.jx,J.zx,H.f,V.Z,n.sg,n.O5,K.JJ,K.On,C,W.iA,W.lQ,W.jB,W.fz,me.FN,n.Ov,n.JJ,n.uU]})}return r})();function to(r,P){1&r&&(e.TgZ(0,"div",22)(1,"span",23),e._uU(2,"\u0410\u0440\u0442\u0438\u043a\u0443\u043b\u044b"),e.qZA()())}function no(r,P){if(1&r){const t=e.EpF();e.TgZ(0,"p-multiSelect",24),e.NdJ("onChange",function(_){const B=e.CHM(t).filterCallback;return e.KtG(B(_.value))}),e.qZA()}if(2&r){const t=P.$implicit,p=e.oxw(4);e.Q6J("ngModel",t)("filter",!1)("options",p.productPackageIDs)}}function ro(r,P){1&r&&(e.TgZ(0,"tr")(1,"th"),e._uU(2," \u0422\u043e\u0432\u0430\u0440 "),e.TgZ(3,"p-columnFilter",15),e.YNc(4,to,3,0,"ng-template",12),e.YNc(5,no,1,3,"ng-template",16),e.qZA()(),e.TgZ(6,"th",17),e._uU(7,"\u0421\u0443\u043c\u043c\u0430 "),e._UZ(8,"p-sortIcon",18),e.qZA(),e.TgZ(9,"th",19),e._uU(10,"\u0414\u0430\u0442\u0430 "),e._UZ(11,"p-sortIcon",20),e.qZA(),e.TgZ(12,"th"),e._uU(13," \u2116 \u0437\u0430\u043a\u0430\u0437\u0430 "),e._UZ(14,"p-columnFilter",21),e.qZA()()),2&r&&(e.xp6(3),e.Q6J("showMatchModes",!1)("showOperator",!1)("showAddButton",!1),e.xp6(11),e.Q6J("showMatchModes",!1)("showOperator",!1))}function oo(r,P){if(1&r&&(e.TgZ(0,"div")(1,"div"),e._uU(2),e.qZA(),e._uU(3),e.qZA()),2&r){const t=P.$implicit;e.xp6(2),e.Oqu(t.product.name),e.xp6(1),e.AsE(" ",t.product.productPackageID," x ",t.quantity," ")}}function io(r,P){if(1&r&&(e.TgZ(0,"tr",25)(1,"td"),e.YNc(2,oo,4,3,"div",26),e.qZA(),e.TgZ(3,"td")(4,"div"),e._uU(5),e.ALo(6,"number"),e.qZA()(),e.TgZ(7,"td")(8,"div"),e._uU(9),e.ALo(10,"date"),e.qZA()(),e.TgZ(11,"td")(12,"div"),e._uU(13),e.qZA()()()),2&r){const t=P.$implicit;e.Q6J("pRowToggler",t),e.xp6(2),e.Q6J("ngForOf",t.orderItems),e.xp6(3),e.hij(" ",e.xi3(6,5,t.sum,"1.2-2"),"\u20bd "),e.xp6(4),e.hij(" ",e.xi3(10,8,t.date,"y-MM-dd HH:mm")," "),e.xp6(4),e.hij(" ",t.ozonOrderNumber," ")}}function ao(r,P){1&r&&(e.TgZ(0,"tr")(1,"th"),e._uU(2,"\u0410\u0440\u0442\u0438\u043a\u0443\u043b"),e.qZA(),e.TgZ(3,"th"),e._uU(4,"\u0426\u0435\u043d\u0430"),e.qZA(),e.TgZ(5,"th"),e._uU(6,"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e"),e.qZA(),e.TgZ(7,"th"),e._uU(8,"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435"),e.qZA()())}function uo(r,P){if(1&r&&(e.TgZ(0,"tr")(1,"td")(2,"div")(3,"span",30),e._uU(4,"\u0410\u0440\u0442\u0438\u043a\u0443\u043b"),e.qZA(),e.TgZ(5,"div"),e._uU(6),e.qZA()()(),e.TgZ(7,"td")(8,"div")(9,"span",30),e._uU(10,"\u0426\u0435\u043d\u0430"),e.qZA(),e.TgZ(11,"div"),e._uU(12),e.ALo(13,"number"),e.qZA()()(),e.TgZ(14,"td")(15,"div")(16,"span",30),e._uU(17,"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e"),e.qZA(),e.TgZ(18,"div"),e._uU(19),e.qZA()()(),e.TgZ(20,"td")(21,"div")(22,"span",30),e._uU(23,"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435"),e.qZA(),e.TgZ(24,"div"),e._uU(25),e.qZA()()()()),2&r){const t=P.$implicit;e.xp6(6),e.hij(" ",t.product.productPackageID," "),e.xp6(6),e.hij(" ",e.xi3(13,4,t.price,"1.2-2"),"\u20bd "),e.xp6(7),e.hij(" ",t.quantity," "),e.xp6(6),e.hij(" ",t.product.name," ")}}function lo(r,P){1&r&&(e.TgZ(0,"tr")(1,"th"),e._uU(2,"ID"),e.qZA(),e.TgZ(3,"th"),e._uU(4,"\u0414\u0430\u0442\u0430"),e.qZA(),e.TgZ(5,"th"),e._uU(6,"\u0421\u0443\u043c\u043c\u0430"),e.qZA(),e.TgZ(7,"th"),e._uU(8,"\u041a\u043e\u043c\u0438\u0441\u0441\u0438\u044f"),e.qZA(),e.TgZ(9,"th"),e._uU(10,"\u0422\u0438\u043f \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438"),e.qZA(),e.TgZ(11,"th"),e._uU(12,"\u0422\u0438\u043f \u043d\u0430\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u044f"),e.qZA()())}function so(r,P){if(1&r&&(e.TgZ(0,"tr")(1,"td")(2,"div")(3,"span",30),e._uU(4,"ID"),e.qZA(),e.TgZ(5,"div"),e._uU(6),e.qZA()()(),e.TgZ(7,"td")(8,"div")(9,"span",30),e._uU(10,"\u0414\u0430\u0442\u0430"),e.qZA(),e.TgZ(11,"div"),e._uU(12),e.ALo(13,"date"),e.qZA()()(),e.TgZ(14,"td")(15,"div")(16,"span",30),e._uU(17,"\u0421\u0443\u043c\u043c\u0430"),e.qZA(),e.TgZ(18,"div"),e._uU(19),e.ALo(20,"number"),e.qZA()()(),e.TgZ(21,"td")(22,"div")(23,"span",30),e._uU(24,"\u041a\u043e\u043c\u0438\u0441\u0441\u0438\u044f"),e.qZA(),e.TgZ(25,"div"),e._uU(26),e.ALo(27,"number"),e.qZA()()(),e.TgZ(28,"td")(29,"div")(30,"span",30),e._uU(31,"\u0422\u0438\u043f \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438"),e.qZA(),e.TgZ(32,"div"),e._uU(33),e.qZA()()(),e.TgZ(34,"td")(35,"div")(36,"span",30),e._uU(37,"\u0422\u0438\u043f \u043d\u0430\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u044f"),e.qZA(),e.TgZ(38,"div"),e._uU(39),e.qZA()()()()),2&r){const t=P.$implicit,p=e.oxw(7);e.xp6(6),e.hij(" ",t.iD," "),e.xp6(6),e.hij(" ",e.xi3(13,6,t.date,"y-MM-dd HH:mm")," "),e.xp6(7),e.hij(" ",e.xi3(20,9,t.amount,"1.2-2"),"\u20bd "),e.xp6(7),e.hij(" ",e.xi3(27,12,t.saleCommission,"1.2-2"),"\u20bd "),e.xp6(7),e.hij(" ",p.getOperationTypeText(t.operationType)," "),e.xp6(6),e.hij(" ",p.getTransactionTypeText(t.accrualType)," ")}}const Jn=function(){return{"min-width":"50rem"}};function co(r,P){if(1&r&&(e.ynx(0),e.TgZ(1,"tr")(2,"td",28)(3,"h5"),e._uU(4,"\u041e\u043f\u0435\u0440\u0430\u0446\u0438\u0438 \u043f\u043e \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044e"),e.qZA()()(),e.TgZ(5,"tr")(6,"td",28)(7,"p-table",29),e.YNc(8,lo,13,0,"ng-template",12),e.YNc(9,so,40,15,"ng-template",13),e.qZA()()(),e.BQk()),2&r){const t=e.oxw().$implicit;e.xp6(7),e.Q6J("value",t.operations)("breakpoint","960px")("tableStyle",e.DdM(3,Jn))}}function po(r,P){if(1&r&&(e.ynx(0),e.TgZ(1,"tr")(2,"td",28)(3,"p-table",29),e.YNc(4,ao,9,0,"ng-template",12),e.YNc(5,uo,26,7,"ng-template",13),e.qZA()()(),e.YNc(6,co,10,4,"ng-container",27),e.BQk()),2&r){const t=P.$implicit;e.xp6(3),e.Q6J("value",t.orderItems)("breakpoint","960px")("tableStyle",e.DdM(4,Jn)),e.xp6(3),e.Q6J("ngIf",null==t.operations?null:t.operations.length)}}function fo(r,P){if(1&r&&(e.ynx(0),e.TgZ(1,"tr")(2,"td",28)(3,"h5"),e._uU(4,"\u0421\u043e\u0441\u0442\u0430\u0432 \u0437\u0430\u043a\u0430\u0437\u0430"),e.qZA()()(),e.YNc(5,po,7,5,"ng-container",26),e.BQk()),2&r){const t=e.oxw().$implicit;e.xp6(5),e.Q6J("ngForOf",t.orderItems)}}function _o(r,P){1&r&&(e.TgZ(0,"tr")(1,"th"),e._uU(2,"ID"),e.qZA(),e.TgZ(3,"th"),e._uU(4,"\u0414\u0430\u0442\u0430"),e.qZA(),e.TgZ(5,"th"),e._uU(6,"\u0421\u0443\u043c\u043c\u0430"),e.qZA(),e.TgZ(7,"th"),e._uU(8,"\u041a\u043e\u043c\u0438\u0441\u0441\u0438\u044f"),e.qZA(),e.TgZ(9,"th"),e._uU(10,"\u0422\u0438\u043f \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438"),e.qZA(),e.TgZ(11,"th"),e._uU(12,"\u0422\u0438\u043f \u043d\u0430\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u044f"),e.qZA()())}function ho(r,P){if(1&r&&(e.TgZ(0,"tr")(1,"td")(2,"div")(3,"span",30),e._uU(4,"ID"),e.qZA(),e.TgZ(5,"div"),e._uU(6),e.qZA()()(),e.TgZ(7,"td")(8,"div")(9,"span",30),e._uU(10,"\u0414\u0430\u0442\u0430"),e.qZA(),e.TgZ(11,"div"),e._uU(12),e.ALo(13,"date"),e.qZA()()(),e.TgZ(14,"td")(15,"div")(16,"span",30),e._uU(17,"\u0421\u0443\u043c\u043c\u0430"),e.qZA(),e.TgZ(18,"div"),e._uU(19),e.ALo(20,"number"),e.qZA()()(),e.TgZ(21,"td")(22,"div")(23,"span",30),e._uU(24,"\u041a\u043e\u043c\u0438\u0441\u0441\u0438\u044f"),e.qZA(),e.TgZ(25,"div"),e._uU(26),e.ALo(27,"number"),e.qZA()()(),e.TgZ(28,"td")(29,"div")(30,"span",30),e._uU(31,"\u0422\u0438\u043f \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438"),e.qZA(),e.TgZ(32,"div"),e._uU(33),e.qZA()()(),e.TgZ(34,"td")(35,"div")(36,"span",30),e._uU(37,"\u0422\u0438\u043f \u043d\u0430\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u044f"),e.qZA(),e.TgZ(38,"div"),e._uU(39),e.qZA()()()()),2&r){const t=P.$implicit,p=e.oxw(5);e.xp6(6),e.hij(" ",t.iD," "),e.xp6(6),e.hij(" ",e.xi3(13,6,t.date,"y-MM-dd HH:mm")," "),e.xp6(7),e.hij(" ",e.xi3(20,9,t.amount,"1.2-2"),"\u20bd "),e.xp6(7),e.hij(" ",e.xi3(27,12,t.saleCommission,"1.2-2"),"\u20bd "),e.xp6(7),e.hij(" ",p.getOperationTypeText(t.operationType)," "),e.xp6(6),e.hij(" ",p.getTransactionTypeText(t.accrualType)," ")}}function go(r,P){if(1&r&&(e.ynx(0),e.TgZ(1,"tr")(2,"td",28)(3,"h5"),e._uU(4,"\u041e\u043f\u0435\u0440\u0430\u0446\u0438\u0438 \u043f\u043e \u0437\u0430\u043a\u0430\u0437\u0443"),e.qZA()()(),e.TgZ(5,"tr")(6,"td",28)(7,"p-table",31),e.YNc(8,_o,13,0,"ng-template",12),e.YNc(9,ho,40,15,"ng-template",13),e.qZA()()(),e.BQk()),2&r){const t=e.oxw().$implicit;e.xp6(7),e.Q6J("value",t.operations)("breakpoint","960px")("tableStyle",e.DdM(3,Jn))}}function mo(r,P){if(1&r&&(e.YNc(0,fo,6,1,"ng-container",27),e.YNc(1,go,10,4,"ng-container",27)),2&r){const t=P.$implicit;e.Q6J("ngIf",null==t.orderItems?null:t.orderItems.length),e.xp6(1),e.Q6J("ngIf",null==t.operations?null:t.operations.length)}}const vo=function(){return[8,15,30,50]},yo=function(){return{}};function xo(r,P){if(1&r&&(e.TgZ(0,"p-table",11),e.YNc(1,ro,15,5,"ng-template",12),e.YNc(2,io,14,11,"ng-template",13),e.YNc(3,mo,2,2,"ng-template",14),e.qZA()),2&r){const t=e.oxw(2);e.Q6J("value",t.data)("loading",t.loading)("paginator",!0)("showCurrentPageReport",!1)("rows",8)("rowsPerPageOptions",e.DdM(7,vo))("tableStyle",e.DdM(8,yo))}}function bo(r,P){if(1&r&&(e.TgZ(0,"div",3)(1,"div",4)(2,"div",5)(3,"div",6)(4,"div",7)(5,"div")(6,"div",8)(7,"span"),e._uU(8,"\u0421\u0443\u043c\u043c\u0430 \u043f\u0440\u043e\u0434\u0430\u0436"),e.qZA(),e.TgZ(9,"span"),e._uU(10),e.ALo(11,"number"),e.qZA()()()(),e.TgZ(12,"div",7)(13,"div")(14,"div",8)(15,"span"),e._uU(16,"\u041a\u043e\u043c\u0438\u0441\u0441\u0438\u044f"),e.qZA(),e.TgZ(17,"span"),e._uU(18),e.ALo(19,"number"),e.ALo(20,"number"),e.qZA()()()(),e.TgZ(21,"div",7)(22,"div")(23,"div",8)(24,"span"),e._uU(25,"\u0412\u043e\u0437\u0432\u0440\u0430\u0442\u044b"),e.qZA(),e.TgZ(26,"span"),e._uU(27),e.ALo(28,"number"),e.ALo(29,"number"),e.qZA()()()(),e.TgZ(30,"div",7)(31,"div")(32,"div",8)(33,"span"),e._uU(34,"\u0421\u0435\u0440\u0432\u0438\u0441\u044b"),e.qZA(),e.TgZ(35,"span"),e._uU(36),e.ALo(37,"number"),e.ALo(38,"number"),e.qZA()()()(),e.TgZ(39,"div",7)(40,"div")(41,"div",8)(42,"span"),e._uU(43,"\u0421\u0435\u0440\u0432\u0438\u0441\u044b \u0437\u0430\u043a\u0430\u0437\u043e\u0432"),e.qZA(),e.TgZ(44,"span"),e._uU(45),e.ALo(46,"number"),e.ALo(47,"number"),e.qZA()()()()()(),e.TgZ(48,"div",5)(49,"div",6)(50,"div",7)(51,"div",9),e._uU(52,"\u0417\u0430\u043a\u0430\u0437\u044b"),e.qZA(),e.TgZ(53,"div")(54,"div",8)(55,"span"),e._uU(56,"\u0417\u0430\u043a\u0430\u0437\u043e\u0432"),e.qZA(),e.TgZ(57,"span"),e._uU(58),e.qZA()()(),e.TgZ(59,"div",8)(60,"span"),e._uU(61,"\u0422\u043e\u0432\u0430\u0440\u043e\u0432"),e.qZA(),e.TgZ(62,"span"),e._uU(63),e.qZA()(),e.TgZ(64,"div",8)(65,"span"),e._uU(66,"\u041e\u0442\u043c\u0435\u043d"),e.qZA(),e.TgZ(67,"span"),e._uU(68),e.qZA()(),e.TgZ(69,"div",8)(70,"span"),e._uU(71,"\u0421\u0443\u043c\u043c\u0430 \u043e\u0442\u043c\u0435\u043d"),e.qZA(),e.TgZ(72,"span"),e._uU(73),e.qZA()(),e.TgZ(74,"div",8)(75,"span"),e._uU(76,"\u0412\u043e\u0437\u0432\u0440\u0430\u0442\u043e\u0432"),e.qZA(),e.TgZ(77,"span"),e._uU(78),e.qZA()(),e.TgZ(79,"div",8)(80,"span"),e._uU(81,"\u0421\u0443\u043c\u043c\u0430 \u0432\u043e\u0437\u0432\u0440\u0430\u0442\u043e\u0432"),e.qZA(),e.TgZ(82,"span"),e._uU(83),e.qZA()()()()()(),e.YNc(84,xo,4,9,"p-table",10),e.qZA()),2&r){const t=e.oxw();e.xp6(10),e.hij("",e.xi3(11,16,t.summary.totalSum,"1.2-2"),"\u20bd"),e.xp6(8),e.AsE("",e.xi3(19,19,t.summary.commission,"1.2-2"),"\u20bd (",e.xi3(20,22,t.summary.totalSum+t.summary.commission,"1.2-2"),"\u20bd)"),e.xp6(9),e.AsE(" ",e.xi3(28,25,t.summary.returnedSum,"1.2-2"),"\u20bd (",e.xi3(29,28,t.summary.returnedProductCount+t.summary.totalSum+t.summary.commission-t.summary.returnedSum,"1.2-2"),"\u20bd) "),e.xp6(9),e.AsE("",e.xi3(37,31,t.summary.serviceTotalSum,"1.2-2"),"\u20bd (",e.xi3(38,34,t.summary.totalSum+t.summary.commission+t.summary.serviceTotalSum,"1.2-2"),"\u20bd)"),e.xp6(9),e.AsE("",e.xi3(46,37,t.summary.orderServiceTotalSum,"1.2-2"),"\u20bd (",e.xi3(47,40,t.summary.totalSum+t.summary.commission+t.summary.serviceTotalSum+t.summary.orderServiceTotalSum,"1.2-2"),"\u20bd)"),e.xp6(13),e.Oqu(t.summary.totalOrderCount),e.xp6(5),e.Oqu(t.summary.totalProductCount),e.xp6(5),e.Oqu(t.summary.cancelledProductCount),e.xp6(5),e.Oqu(t.summary.cancelledSum),e.xp6(5),e.Oqu(t.summary.returnedProductCount),e.xp6(5),e.Oqu(t.summary.returnedSum),e.xp6(1),e.Q6J("ngIf",t.data)}}let To=(()=>{class r extends l.V{constructor(t,p,_,I){super(I),this.ozonSalesOrderClient=t,this.messageService=p,this.timeService=_,this.data=[],this.excludedDates=[],this.productPackageIDs=[],this.loading=!1}ngOnInit(){this.titleService.setTitle("\u0421\u0432\u0435\u0440\u043a\u0430 \u0441 Ozon")}getDateRange(){const t=this.timeService.asUtc(this.date),p=new Date(t),_=new Date(t);return _.setMonth(_.getMonth()+1),[p,_]}prepareReport(){this.loading=!0;const[t,p]=this.getDateRange(),_=new Date(t);_.setMonth(_.getMonth()-1),this.ozonSalesOrderClient.findSalesOzonOrders(new c.f.FindPostingsModel({dateFrom:_,dateTo:p})).pipe((0,M.R)(this.destroyed)).pipe((0,f.K)(I=>(this.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430",severity:"error",detail:I}),this.loading=!1,x.E))).subscribe(I=>{this.data=I.filter(be=>be.operations.reduce((Me,Ze)=>Me||=Ze.operationType==c.f.OperationType.OperationAgentDeliveredToCustomer&&(!t||Ze.date>=t)&&(!p||Ze.date<p),!1));const B=new Set,se={totalOrderCount:0,totalSum:0,totalProductCount:0,sumWithCommission:0,commission:0,orderServiceTotalSum:0,orderServiceTotalCount:0,serviceTotalSum:0,cancelledProductCount:0,returnedProductCount:0,cancelledSum:0,returnedSum:0,services:{},orderServices:{}},ge={},xe=[];for(const be of I){const Me=be.operations.filter(Ce=>(!t||Ce.date>=t)&&(!p||Ce.date<p)),Ze=!!Me.length;for(const Ce of Me)if(Ce.postingNumber==be.ozonOrderNumber)for(const Ne of Ce.services)se.orderServices[Ne.type]=Ne.price+se.services[Ne.type],se.orderServiceTotalSum+=Ne.price,se.orderServiceTotalCount++,xe.push(Ne.price);if(Ze){for(const Ce of be.orderItems){B.add(Ce.product.productPackageID);const Ne=[];ge[Ce.product.productPackageID]||(ge[Ce.product.productPackageID]={prices:{},operations:[]});const ct=ge[Ce.product.productPackageID];ct.prices[Ce.price]||(ct.prices[Ce.price]={quantity:0,sum:0,commission:0});const vt=ct.prices[Ce.price];vt.quantity+=Ce.quantity,vt.sum+=Ce.quantity*Ce.price;for(const Qe of Me)if(Qe.postingNumber==Ce.postingNumber)switch(Ne.push(Qe),Qe.operationType){case c.f.OperationType.OperationAgentDeliveredToCustomer:se.totalProductCount+=Ce.quantity,vt.commission+=Qe.saleCommission,se.commission+=Qe.saleCommission,se.totalSum+=Ce.price*Ce.quantity;for(const Be of Qe.services)se.services[Be.type]=Be.price+(se.services[Be.type]??0),se.serviceTotalSum+=Be.price;break;case c.f.OperationType.ClientReturnAgentOperation:vt.commission+=Qe.saleCommission,se.commission+=Qe.saleCommission,se.returnedProductCount+=Ce.quantity,se.returnedSum+=Qe.amount,se.totalSum-=Ce.price*Ce.quantity;for(const Be of Qe.services)se.services[Be.type]=Be.price+(se.services[Be.type]??0),se.serviceTotalSum+=Be.price;break;case c.f.OperationType.OperationItemReturn:se.commission+=Qe.saleCommission,se.cancelledProductCount+=Ce.quantity;for(const Be of Qe.services)se.services[Be.type]=Be.price+(se.services[Be.type]??0),se.serviceTotalSum+=Be.price;break;default:console.log("x",Qe)}}se.totalOrderCount++}}this.summary=se,this.loading=!1})}static#e=this.\u0275fac=function(p){return new(p||r)(e.Y36(c.f.OzonSalesOrderClient),e.Y36(w.ez),e.Y36(U.O),e.Y36(F.Dx))};static#t=this.\u0275cmp=e.Xpm({type:r,selectors:[["app-sales-reconciliation-report"]],features:[e.qOj],decls:4,vars:4,consts:[["header","\u0421\u0432\u0435\u0440\u043a\u0430 Ozon"],["selectionMode","single","view","month","dateFormat","yy-mm","placeholder","\u041f\u0435\u0440\u0438\u043e\u0434",3,"ngModel","disabledDates","readonlyInput","ngModelChange","onSelect"],["class","card",4,"ngIf"],[1,"card"],[1,"grid"],[1,"col-12","md:col-6"],[1,"card","text-right"],[1,"text-900","font-medium","text-xl","mb-3"],[1,"flex","justify-content-between"],[1,"text-500","text-center"],["responsiveLayout","stack","dataKey","iD",3,"value","loading","paginator","showCurrentPageReport","rows","rowsPerPageOptions","tableStyle",4,"ngIf"],["responsiveLayout","stack","dataKey","iD",3,"value","loading","paginator","showCurrentPageReport","rows","rowsPerPageOptions","tableStyle"],["pTemplate","header"],["pTemplate","body"],["pTemplate","rowexpansion"],["field","product","matchMode","intersects","display","menu",3,"showMatchModes","showOperator","showAddButton"],["pTemplate","filter"],["pSortableColumn","sum"],["field","sum"],["pSortableColumn","date"],["field","date"],["field","ozonOrderNumber","matchMode","contains","display","menu",3,"showMatchModes","showOperator"],[1,"px-3","pt-3","pb-0"],[1,"font-bold"],["placeholder","\u0412\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0435",3,"ngModel","filter","options","onChange"],[3,"pRowToggler"],[4,"ngFor","ngForOf"],[4,"ngIf"],["colspan","4"],["responsiveLayout","stack",3,"value","breakpoint","tableStyle"],[1,"p-column-title","font-bold"],["dataKey","iD","responsiveLayout","stack",3,"value","breakpoint","tableStyle"]],template:function(p,_){1&p&&(e._UZ(0,"p-toast"),e.TgZ(1,"p-card",0)(2,"p-calendar",1),e.NdJ("ngModelChange",function(B){return _.date=B})("onSelect",function(){return _.prepareReport()}),e.qZA()(),e.YNc(3,bo,85,43,"div",2)),2&p&&(e.xp6(2),e.Q6J("ngModel",_.date)("disabledDates",_.excludedDates)("readonlyInput",!0),e.xp6(1),e.Q6J("ngIf",_.summary))},dependencies:[w.jx,H.f,V.Z,n.sg,n.O5,K.JJ,K.On,C,W.iA,W.lQ,W.jB,W.fz,W.xl,me.FN,n.JJ,n.uU]})}return r})();const Oo=["inputtext"];function Co(r,P){1&r&&e.GkF(0)}function wo(r,P){if(1&r&&(e.TgZ(0,"span",11),e._uU(1),e.qZA()),2&r){const t=e.oxw().$implicit,p=e.oxw();e.xp6(1),e.Oqu(p.field?p.resolveFieldData(t,p.field):t)}}function So(r,P){if(1&r){const t=e.EpF();e.TgZ(0,"TimesCircleIcon",14),e.NdJ("click",function(_){e.CHM(t);const I=e.oxw(2).index,B=e.oxw();return e.KtG(B.removeItem(_,I))}),e.qZA()}2&r&&e.Q6J("styleClass","p-chips-token-icon")}function Ao(r,P){}function Eo(r,P){1&r&&e.YNc(0,Ao,0,0,"ng-template")}function Mo(r,P){if(1&r){const t=e.EpF();e.TgZ(0,"span",15),e.NdJ("click",function(_){e.CHM(t);const I=e.oxw(2).index,B=e.oxw();return e.KtG(B.removeItem(_,I))}),e.YNc(1,Eo,1,0,null,16),e.qZA()}if(2&r){const t=e.oxw(3);e.xp6(1),e.Q6J("ngTemplateOutlet",t.removeTokenIconTemplate)}}function Zo(r,P){if(1&r&&(e.ynx(0),e.YNc(1,So,1,1,"TimesCircleIcon",12),e.YNc(2,Mo,2,1,"span",13),e.BQk()),2&r){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",!t.removeTokenIconTemplate),e.xp6(1),e.Q6J("ngIf",t.removeTokenIconTemplate)}}const ko=function(r){return{$implicit:r}};function Io(r,P){if(1&r){const t=e.EpF();e.TgZ(0,"li",7,8),e.NdJ("click",function(_){const B=e.CHM(t).$implicit,ue=e.oxw();return e.KtG(ue.onItemClick(_,B))}),e.YNc(2,Co,1,0,"ng-container",9),e.YNc(3,wo,2,1,"span",10),e.YNc(4,Zo,3,2,"ng-container",6),e.qZA()}if(2&r){const t=P.$implicit,p=e.oxw();e.xp6(2),e.Q6J("ngTemplateOutlet",p.itemTemplate)("ngTemplateOutletContext",e.VKq(4,ko,t)),e.xp6(1),e.Q6J("ngIf",!p.itemTemplate),e.xp6(1),e.Q6J("ngIf",!p.disabled)}}function Ro(r,P){if(1&r){const t=e.EpF();e.TgZ(0,"TimesIcon",14),e.NdJ("click",function(){e.CHM(t);const _=e.oxw(2);return e.KtG(_.clear())}),e.qZA()}2&r&&e.Q6J("styleClass","p-chips-clear-icon")}function Po(r,P){}function Do(r,P){1&r&&e.YNc(0,Po,0,0,"ng-template")}function zo(r,P){if(1&r){const t=e.EpF();e.TgZ(0,"span",18),e.NdJ("click",function(){e.CHM(t);const _=e.oxw(2);return e.KtG(_.clear())}),e.YNc(1,Do,1,0,null,16),e.qZA()}if(2&r){const t=e.oxw(2);e.xp6(1),e.Q6J("ngTemplateOutlet",t.clearIconTemplate)}}function Lo(r,P){if(1&r&&(e.TgZ(0,"li"),e.YNc(1,Ro,1,1,"TimesIcon",12),e.YNc(2,zo,2,1,"span",17),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!t.clearIconTemplate),e.xp6(1),e.Q6J("ngIf",t.clearIconTemplate)}}const Uo=function(r,P){return{"p-inputtext p-chips-multiple-container":!0,"p-focus":r,"p-disabled":P}},qo=function(r){return{"p-chips-clearable":r}},Fo={provide:K.JU,useExisting:(0,e.Gpc)(()=>Hn),multi:!0};let Hn=(()=>{class r{document;el;cd;style;styleClass;disabled;field;placeholder;max;ariaLabelledBy;tabindex;inputId;allowDuplicate=!0;inputStyle;inputStyleClass;addOnTab;addOnBlur;separator;showClear=!1;onAdd=new e.vpe;onRemove=new e.vpe;onFocus=new e.vpe;onBlur=new e.vpe;onChipClick=new e.vpe;onClear=new e.vpe;inputViewChild;templates;itemTemplate;removeTokenIconTemplate;clearIconTemplate;value;onModelChange=()=>{};onModelTouched=()=>{};valueChanged;focus;filled;get isValueMaxLimited(){return this.max&&this.value&&this.max===this.value.length}constructor(t,p,_){this.document=t,this.el=p,this.cd=_}ngAfterContentInit(){this.templates.forEach(t=>{switch(t.getType()){case"item":default:this.itemTemplate=t.template;break;case"removetokenicon":this.removeTokenIconTemplate=t.template;break;case"clearicon":this.clearIconTemplate=t.template}}),this.updateFilledState()}onClick(){this.inputViewChild?.nativeElement.focus()}onInput(){this.updateFilledState()}onPaste(t){this.disabled||(this.separator&&((t.clipboardData||this.document.defaultView.clipboardData).getData("Text").split(this.separator).forEach(_=>{this.addItem(t,_,!0)}),this.inputViewChild.nativeElement.value=""),this.updateFilledState())}updateFilledState(){this.filled=!(!this.value||0===this.value.length)||this.inputViewChild&&this.inputViewChild.nativeElement&&""!=this.inputViewChild.nativeElement.value}onItemClick(t,p){this.onChipClick.emit({originalEvent:t,value:p})}writeValue(t){this.value=t,this.updateMaxedOut(),this.updateFilledState(),this.cd.markForCheck()}registerOnChange(t){this.onModelChange=t}registerOnTouched(t){this.onModelTouched=t}setDisabledState(t){this.disabled=t,this.cd.markForCheck()}resolveFieldData(t,p){if(t&&p){if(-1==p.indexOf("."))return t[p];{let B=p.split("."),ue=t;for(var _=0,I=B.length;_<I;++_)ue=ue[B[_]];return ue}}return null}onInputFocus(t){this.focus=!0,this.onFocus.emit(t)}onInputBlur(t){this.focus=!1,this.addOnBlur&&this.inputViewChild.nativeElement.value&&this.addItem(t,this.inputViewChild.nativeElement.value,!1),this.onModelTouched(),this.onBlur.emit(t)}removeItem(t,p){if(this.disabled)return;let _=this.value[p];this.value=this.value.filter((I,B)=>B!=p),this.onModelChange(this.value),this.onRemove.emit({originalEvent:t,value:_}),this.updateFilledState(),this.updateMaxedOut()}addItem(t,p,_){this.value=this.value||[],p&&p.trim().length&&(this.allowDuplicate||-1===this.value.indexOf(p))&&!this.isValueMaxLimited&&(this.value=[...this.value,p],this.onModelChange(this.value),this.onAdd.emit({originalEvent:t,value:p})),this.updateFilledState(),this.updateMaxedOut(),this.inputViewChild.nativeElement.value="",_&&t.preventDefault()}clear(){this.value=null,this.updateFilledState(),this.onModelChange(this.value),this.updateMaxedOut(),this.onClear.emit()}onKeydown(t){switch(t.which){case 8:if(0===this.inputViewChild.nativeElement.value.length&&this.value&&this.value.length>0){this.value=[...this.value];let p=this.value.pop();this.onModelChange(this.value),this.onRemove.emit({originalEvent:t,value:p}),this.updateFilledState()}break;case 13:this.addItem(t,this.inputViewChild.nativeElement.value,!0);break;case 9:this.addOnTab&&""!==this.inputViewChild.nativeElement.value&&this.addItem(t,this.inputViewChild.nativeElement.value,!0);break;default:this.max&&this.value&&this.max===this.value.length?t.preventDefault():this.separator&&(this.separator===t.key||t.key.match(this.separator))&&this.addItem(t,this.inputViewChild.nativeElement.value,!0)}}updateMaxedOut(){this.inputViewChild&&this.inputViewChild.nativeElement&&(this.isValueMaxLimited?(this.inputViewChild.nativeElement.blur(),this.inputViewChild.nativeElement.disabled=!0):(this.disabled&&this.inputViewChild.nativeElement.blur(),this.inputViewChild.nativeElement.disabled=this.disabled||!1))}static \u0275fac=function(p){return new(p||r)(e.Y36(n.K0),e.Y36(e.SBq),e.Y36(e.sBO))};static \u0275cmp=e.Xpm({type:r,selectors:[["p-chips"]],contentQueries:function(p,_,I){if(1&p&&e.Suo(I,w.jx,4),2&p){let B;e.iGM(B=e.CRH())&&(_.templates=B)}},viewQuery:function(p,_){if(1&p&&e.Gf(Oo,5),2&p){let I;e.iGM(I=e.CRH())&&(_.inputViewChild=I.first)}},hostAttrs:[1,"p-element","p-inputwrapper"],hostVars:6,hostBindings:function(p,_){2&p&&e.ekj("p-inputwrapper-filled",_.filled)("p-inputwrapper-focus",_.focus)("p-chips-clearable",_.showClear)},inputs:{style:"style",styleClass:"styleClass",disabled:"disabled",field:"field",placeholder:"placeholder",max:"max",ariaLabelledBy:"ariaLabelledBy",tabindex:"tabindex",inputId:"inputId",allowDuplicate:"allowDuplicate",inputStyle:"inputStyle",inputStyleClass:"inputStyleClass",addOnTab:"addOnTab",addOnBlur:"addOnBlur",separator:"separator",showClear:"showClear"},outputs:{onAdd:"onAdd",onRemove:"onRemove",onFocus:"onFocus",onBlur:"onBlur",onChipClick:"onChipClick",onClear:"onClear"},features:[e._Bn([Fo])],decls:7,vars:21,consts:[[3,"ngClass","ngStyle","click"],[3,"ngClass"],["class","p-chips-token",3,"click",4,"ngFor","ngForOf"],[1,"p-chips-input-token",3,"ngClass"],["type","text",3,"disabled","ngStyle","keydown","input","paste","focus","blur"],["inputtext",""],[4,"ngIf"],[1,"p-chips-token",3,"click"],["token",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["class","p-chips-token-label",4,"ngIf"],[1,"p-chips-token-label"],[3,"styleClass","click",4,"ngIf"],["class","p-chips-token-icon",3,"click",4,"ngIf"],[3,"styleClass","click"],[1,"p-chips-token-icon",3,"click"],[4,"ngTemplateOutlet"],["class","p-chips-clear-icon",3,"click",4,"ngIf"],[1,"p-chips-clear-icon",3,"click"]],template:function(p,_){1&p&&(e.TgZ(0,"div",0),e.NdJ("click",function(){return _.onClick()}),e.TgZ(1,"ul",1),e.YNc(2,Io,5,6,"li",2),e.TgZ(3,"li",3)(4,"input",4,5),e.NdJ("keydown",function(B){return _.onKeydown(B)})("input",function(){return _.onInput()})("paste",function(B){return _.onPaste(B)})("focus",function(B){return _.onInputFocus(B)})("blur",function(B){return _.onInputBlur(B)}),e.qZA()(),e.YNc(6,Lo,3,2,"li",6),e.qZA()()),2&p&&(e.Tol(_.styleClass),e.Q6J("ngClass","p-chips p-component")("ngStyle",_.style),e.xp6(1),e.Q6J("ngClass",e.WLB(16,Uo,_.focus,_.disabled)),e.xp6(1),e.Q6J("ngForOf",_.value),e.xp6(1),e.Q6J("ngClass",e.VKq(19,qo,_.showClear&&!_.disabled)),e.xp6(1),e.Tol(_.inputStyleClass),e.Q6J("disabled",_.disabled)("ngStyle",_.inputStyle),e.uIk("id",_.inputId)("placeholder",_.value&&_.value.length?null:_.placeholder)("tabindex",_.tabindex)("aria-labelledby",_.ariaLabelledBy),e.xp6(2),e.Q6J("ngIf",null!=_.value&&_.filled&&!_.disabled&&_.showClear))},dependencies:function(){return[n.mk,n.sg,n.O5,n.tP,n.PC,Y.x,Q.q]},styles:["@layer primeng{.p-chips{display:inline-flex}.p-chips-multiple-container{margin:0;padding:0;list-style-type:none;cursor:text;overflow:hidden;display:flex;align-items:center;flex-wrap:wrap}.p-chips-token{cursor:default;display:inline-flex;align-items:center;flex:0 0 auto;max-width:100%}.p-chips-token-label{min-width:0%;overflow:auto}.p-chips-token-label::-webkit-scrollbar{display:none}.p-chips-input-token{flex:1 1 auto;display:inline-flex}.p-chips-token-icon{cursor:pointer}.p-chips-input-token input{border:0 none;outline:0 none;background-color:transparent;margin:0;padding:0;box-shadow:none;border-radius:0;width:100%}.p-fluid .p-chips{display:flex}.p-chips-clear-icon{position:absolute;top:50%;margin-top:-.5rem;cursor:pointer}.p-chips-clearable .p-inputtext{position:relative}}\n"],encapsulation:2,changeDetection:0})}return r})(),No=(()=>{class r{static \u0275fac=function(p){return new(p||r)};static \u0275mod=e.oAB({type:r});static \u0275inj=e.cJS({imports:[n.ez,Nn.j,w.m8,Y.x,Q.q,Nn.j,w.m8]})}return r})();function Bo(r,P){1&r&&(e.TgZ(0,"div",10)(1,"span",11),e._uU(2,"\u041a\u043b\u0430\u0441\u0442\u0435\u0440\u044b"),e.qZA()())}function jo(r,P){if(1&r){const t=e.EpF();e.TgZ(0,"p-multiSelect",12),e.NdJ("onChange",function(_){const B=e.CHM(t).filterCallback;return e.KtG(B(_.value))}),e.qZA()}if(2&r){const t=P.$implicit,p=e.oxw(3);e.Q6J("ngModel",t)("filter",!1)("options",p.warehouseClusters)}}function Jo(r,P){1&r&&(e.TgZ(0,"tr")(1,"th"),e._UZ(2,"p-columnFilter",5),e._uU(3," \u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 "),e.qZA(),e.TgZ(4,"th"),e._uU(5,"\u0410\u0434\u0440\u0435\u0441"),e.qZA(),e.TgZ(6,"th"),e._uU(7,"\u041e\u0441\u043e\u0431\u044b\u0439"),e.qZA(),e.TgZ(8,"th",6),e._uU(9," \u041a\u043b\u0430\u0441\u0442\u0435\u0440"),e._UZ(10,"p-sortIcon",7),e.TgZ(11,"p-columnFilter",8),e.YNc(12,Bo,3,0,"ng-template",3),e.YNc(13,jo,1,3,"ng-template",9),e.qZA()(),e.TgZ(14,"th"),e._uU(15,"\u041f\u0441\u0435\u0432\u0434\u043e\u043d\u0438\u043c\u044b"),e.qZA(),e._UZ(16,"th"),e.qZA()),2&r&&(e.xp6(2),e.Q6J("showMatchModes",!1)("showOperator",!1)("showAddButton",!1),e.xp6(9),e.Q6J("showMatchModes",!1)("showOperator",!1)("showAddButton",!1))}function Qo(r,P){if(1&r){const t=e.EpF();e.TgZ(0,"p-checkbox",20),e.NdJ("ngModelChange",function(_){e.CHM(t);const I=e.oxw().$implicit;return e.KtG(I.standalone=_)}),e.qZA()}if(2&r){const t=e.oxw().$implicit;e.Q6J("ngModel",t.standalone)("binary",!0)}}function Yo(r,P){if(1&r){const t=e.EpF();e.TgZ(0,"p-checkbox",21),e.NdJ("ngModelChange",function(_){e.CHM(t);const I=e.oxw().$implicit;return e.KtG(I.standalone=_)}),e.qZA()}if(2&r){const t=e.oxw().$implicit;e.Q6J("ngModel",t.standalone)("readonly",!0)("binary",!0)}}function Go(r,P){if(1&r){const t=e.EpF();e.TgZ(0,"p-chips",22),e.NdJ("ngModelChange",function(_){e.CHM(t);const I=e.oxw().$implicit;return e.KtG(I.aliases=_)}),e.qZA()}if(2&r){const t=e.oxw().$implicit;e.Q6J("ngModel",t.aliases)}}function Ho(r,P){if(1&r&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&r){const t=P.$implicit;e.xp6(1),e.Oqu(t)}}function Vo(r,P){if(1&r&&e.YNc(0,Ho,2,1,"div",23),2&r){const t=e.oxw().$implicit;e.Q6J("ngForOf",t.aliases)}}function Wo(r,P){if(1&r){const t=e.EpF();e.TgZ(0,"button",24),e.NdJ("click",function(){e.CHM(t);const _=e.oxw().$implicit,I=e.oxw(2);return e.KtG(I.onRowEditInit(_))}),e.qZA()}}function $o(r,P){if(1&r){const t=e.EpF();e.TgZ(0,"button",25),e.NdJ("click",function(){e.CHM(t);const _=e.oxw().$implicit,I=e.oxw(2);return e.KtG(I.onRowEditSave(_))}),e.qZA()}}function Ko(r,P){if(1&r){const t=e.EpF();e.TgZ(0,"button",26),e.NdJ("click",function(){e.CHM(t);const _=e.oxw().$implicit,I=e.oxw(2);return e.KtG(I.onRowEditCancel(_))}),e.qZA()}}function Xo(r,P){if(1&r&&(e.TgZ(0,"tr",13)(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td")(6,"p-cellEditor"),e.YNc(7,Qo,1,2,"ng-template",14),e.YNc(8,Yo,1,3,"ng-template",15),e.qZA()(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td")(12,"p-cellEditor"),e.YNc(13,Go,1,1,"ng-template",14),e.YNc(14,Vo,1,1,"ng-template",15),e.qZA()(),e.TgZ(15,"td")(16,"div",16),e.YNc(17,Wo,1,0,"button",17),e.YNc(18,$o,1,0,"button",18),e.YNc(19,Ko,1,0,"button",19),e.qZA()()()),2&r){const t=P.$implicit,p=P.editing;e.Q6J("pEditableRow",t),e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Oqu(t.address),e.xp6(6),e.Oqu(t.warehouseCluster),e.xp6(7),e.Q6J("ngIf",!p),e.xp6(1),e.Q6J("ngIf",p),e.xp6(1),e.Q6J("ngIf",p)}}const ei=function(){return{"min-width":"50rem"}},ti=function(){return[50,100,250]};function ni(r,P){if(1&r){const t=e.EpF();e.TgZ(0,"p-table",2),e.NdJ("onEditComplete",function(_){e.CHM(t);const I=e.oxw();return e.KtG(I.editComplete(_))}),e.YNc(1,Jo,17,6,"ng-template",3),e.YNc(2,Xo,20,7,"ng-template",4),e.qZA()}if(2&r){const t=e.oxw();e.Q6J("value",t.data)("tableStyle",e.DdM(6,ei))("paginator",!0)("rows",100)("rowsPerPageOptions",e.DdM(7,ti))("totalRecords",t.totalRecords)}}let ri=(()=>{class r extends l.V{constructor(t,p,_,I){super(I),this.warehouseClient=t,this.ozonWarehouseService=p,this.messageService=_,this.clonedData={},this.warehouseClusters=[]}ngOnInit(){this.titleService.setTitle("\u0421\u043a\u043b\u0430\u0434\u044b Ozon"),this.getOzonWarehouses()}getOzonWarehouses(){this.ozonWarehouseService.getWarehouses().pipe((0,f.K)(t=>(this.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430",severity:"error",detail:t}),x.E))).subscribe(t=>{this.data=t,this.warehouseClusters=[...t.reduce((p,_)=>(p.add(_.warehouseCluster),p),new Set)].sort()})}onRowEditInit(t){const p=new c.f.OzonWarehouse(t);this.clonedData[t.iD]=p}onRowEditCancel(t){const p=this.data.findIndex(_=>_.iD==t.iD);this.data[p]=this.clonedData[t.iD],delete this.clonedData[t.iD]}onRowEditSave(t){this.ozonWarehouseService.updateWarehouse(t).pipe((0,f.K)(p=>(this.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430",severity:"error",detail:p}),x.E))).subscribe()}importWarehouses(){var t=this;return(0,s.Z)(function*(){t.ozonWarehouseService.importOzonWarehouses().pipe((0,f.K)(p=>(t.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430",severity:"error",detail:p}),x.E))).subscribe(()=>{t.messageService.add({summary:"\u0423\u0441\u043f\u0435\u0445",severity:"success",detail:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0441\u043a\u043b\u0430\u0434\u043e\u0432 \u041e\u0437\u043e\u043d \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u0430"}),t.getOzonWarehouses()})})()}static#e=this.\u0275fac=function(p){return new(p||r)(e.Y36(c.f.WarehouseClient),e.Y36(Z.w),e.Y36(w.ez),e.Y36(F.Dx))};static#t=this.\u0275cmp=e.Xpm({type:r,selectors:[["app-ozon-warehouse-list"]],features:[e.qOj],decls:5,vars:1,consts:[["pButton","","pRipple","","type","button","label","\u0418\u043c\u043f\u043e\u0440\u0442 \u0441\u043a\u043b\u0430\u0434\u043e\u0432",3,"click"],["dataKey","iD","editMode","row",3,"value","tableStyle","paginator","rows","rowsPerPageOptions","totalRecords","onEditComplete",4,"ngIf"],["dataKey","iD","editMode","row",3,"value","tableStyle","paginator","rows","rowsPerPageOptions","totalRecords","onEditComplete"],["pTemplate","header"],["pTemplate","body"],["type","text","field","name","matchMode","contains",3,"showMatchModes","showOperator","showAddButton"],["pSortableColumn","warehouseCluster"],["field","warehouseCluster"],["field","warehouseCluster","matchMode","in","display","menu",3,"showMatchModes","showOperator","showAddButton"],["pTemplate","filter"],[1,"px-3","pt-3","pb-0"],[1,"font-bold"],["placeholder","\u0412\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0435",3,"ngModel","filter","options","onChange"],[3,"pEditableRow"],["pTemplate","input"],["pTemplate","output"],[1,"flex","align-items-center","justify-content-center","gap-2"],["pButton","","pRipple","","type","button","pInitEditableRow","","icon","pi pi-pencil","class","p-button-rounded p-button-text",3,"click",4,"ngIf"],["pButton","","pRipple","","type","button","pSaveEditableRow","","icon","pi pi-check","class","p-button-rounded p-button-text p-button-success mr-2",3,"click",4,"ngIf"],["pButton","","pRipple","","type","button","pCancelEditableRow","","icon","pi pi-times","class","p-button-rounded p-button-text p-button-danger",3,"click",4,"ngIf"],["inputId","binary",3,"ngModel","binary","ngModelChange"],["inputId","binary",3,"ngModel","readonly","binary","ngModelChange"],["separator","",3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],["pButton","","pRipple","","type","button","pInitEditableRow","","icon","pi pi-pencil",1,"p-button-rounded","p-button-text",3,"click"],["pButton","","pRipple","","type","button","pSaveEditableRow","","icon","pi pi-check",1,"p-button-rounded","p-button-text","p-button-success","mr-2",3,"click"],["pButton","","pRipple","","type","button","pCancelEditableRow","","icon","pi pi-times",1,"p-button-rounded","p-button-text","p-button-danger",3,"click"]],template:function(p,_){1&p&&(e._UZ(0,"p-toast"),e.TgZ(1,"h1"),e._uU(2,"\u0421\u043a\u043b\u0430\u0434\u044b Ozon"),e.qZA(),e.TgZ(3,"button",0),e.NdJ("click",function(){return _.importWarehouses()}),e.qZA(),e.YNc(4,ni,3,8,"p-table",1)),2&p&&(e.xp6(4),e.Q6J("ngIf",_.data))},dependencies:[w.jx,J.Hq,Fn.XZ,Hn,n.sg,n.O5,K.JJ,K.On,C,W.iA,W.lQ,W.YL,W.fz,W.D$,W.Pv,W.U1,W.wT,W.xl,me.FN]})}return r})();var oi=v(3620);function ii(r,P){if(1&r&&(e.TgZ(0,"tr",16)(1,"td",17)(2,"span",18),e._uU(3),e.qZA()()()),2&r){const t=P.$implicit;e.xp6(3),e.Oqu(t.warehouseClusterName)}}function ai(r,P){1&r&&(e.TgZ(0,"tr")(1,"th",19),e._uU(2," ID "),e._UZ(3,"p-sortIcon",20),e.qZA(),e.TgZ(4,"th"),e._uU(5,"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435"),e.qZA(),e.TgZ(6,"th",21),e._uU(7," \u041f\u0440\u043e\u0434\u0430\u0436 \u0437\u0430 \u043f\u0435\u0440\u0438\u043e\u0434 \u0430\u043d\u0430\u043b\u0438\u0437\u0430 "),e._UZ(8,"p-sortIcon",22),e.qZA(),e.TgZ(9,"th",23),e._uU(10," \u041d\u0430\u043b\u0438\u0447\u0438\u0435 "),e._UZ(11,"p-sortIcon",24),e.qZA(),e.TgZ(12,"th",25),e._uU(13," \u0420\u0435\u0437\u0435\u0440\u0432 "),e._UZ(14,"p-sortIcon",26),e.qZA(),e.TgZ(15,"th",27),e._uU(16," \u0412 \u043f\u0443\u0442\u0438 "),e._UZ(17,"p-sortIcon",28),e.qZA(),e.TgZ(18,"th",29),e._uU(19," \u041f\u0440\u043e\u0434\u0430\u0436 \u0432 \u0434\u0435\u043d\u044c "),e._UZ(20,"p-sortIcon",30),e.qZA(),e.TgZ(21,"th",31),e._uU(22," \u0417\u0430\u043f\u0430\u0441 \u0432 \u0434\u043d\u044f\u0445 "),e._UZ(23,"p-sortIcon",32),e.qZA()(),e.TgZ(24,"tr")(25,"th"),e._UZ(26,"p-columnFilter",33),e.qZA(),e.TgZ(27,"th"),e._UZ(28,"p-columnFilter",34),e.qZA(),e.TgZ(29,"th"),e._UZ(30,"p-columnFilter",35),e.qZA(),e.TgZ(31,"th"),e._UZ(32,"p-columnFilter",36),e.qZA(),e.TgZ(33,"th"),e._UZ(34,"p-columnFilter",37),e.qZA(),e.TgZ(35,"th"),e._UZ(36,"p-columnFilter",38),e.qZA(),e.TgZ(37,"th"),e._UZ(38,"p-columnFilter",39),e.qZA(),e._UZ(39,"th"),e.qZA()),2&r&&(e.xp6(26),e.Q6J("min",1)("showButtons",!1)("showOperator",!1)("useGrouping",!1),e.xp6(2),e.Q6J("showMatchModes",!1)("showOperator",!1),e.xp6(2),e.Q6J("showMatchModes",!1)("showButtons",!1)("showOperator",!1)("useGrouping",!1),e.xp6(2),e.Q6J("showButtons",!1)("showOperator",!1)("useGrouping",!1),e.xp6(2),e.Q6J("showButtons",!1)("showOperator",!1)("useGrouping",!1),e.xp6(2),e.Q6J("showButtons",!1)("showOperator",!1)("useGrouping",!1),e.xp6(2),e.Q6J("showButtons",!1)("showOperator",!1))}function ui(r,P){if(1&r&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA(),e.TgZ(13,"td"),e._uU(14),e.ALo(15,"number"),e.qZA(),e.TgZ(16,"td"),e._uU(17),e.ALo(18,"number"),e.qZA()()),2&r){const t=P.$implicit;e.xp6(2),e.Oqu(t.productPackageID),e.xp6(2),e.Oqu(t.productPackageName),e.xp6(2),e.Oqu(t.salesCount),e.xp6(2),e.Oqu(t.present),e.xp6(2),e.Oqu(t.reserved),e.xp6(2),e.Oqu(t.moving),e.xp6(2),e.Oqu(e.xi3(15,8,t.salesRate,"1.0-1")),e.xp6(3),e.Oqu(e.xi3(18,11,t.stockDays,"1.0-1"))}}const li=function(){return{"min-width":"75rem"}},si=function(){return["name"]};function ci(r,P){if(1&r&&(e.TgZ(0,"p-table",12),e.YNc(1,ii,4,1,"ng-template",13),e.YNc(2,ai,40,21,"ng-template",14),e.YNc(3,ui,19,14,"ng-template",15),e.qZA()),2&r){const t=e.oxw();e.Q6J("value",t.data)("tableStyle",e.DdM(6,li))("paginator",!1)("loading",t.loading)("sortOrder",1)("globalFilterFields",e.DdM(7,si))}}let di=(()=>{class r extends l.V{constructor(t,p,_,I,B){super(I),this.route=t,this.reportClient=p,this.messageService=_,this.dbService=B,this.loading=!1,this.filter=new c.f.OzonStockScarcityReportRequestModel({salesAnalysisInDays:null,notificationPeriodInDays:null,date:null,respectMinimalStock:!1,respectSupplyPreparationPeriod:!1,respectActiveSupplyOrders:!1}),this.filterSubject=new d.X(null)}ngOnInit(){this.titleService.setTitle("\u0414\u0435\u0444\u0438\u0446\u0438\u0442 \u0442\u043e\u0432\u0430\u0440\u043e\u0432 Ozon"),this.filterSubject.pipe((0,M.R)(this.destroyed),(0,T.h)(B=>!!B),(0,oi.b)(1e3)).pipe((0,T.h)(B=>B.salesAnalysisInDays>0&&B.notificationPeriodInDays>0)).subscribe(B=>{this.loading=!0;const ue={...B};delete ue.date,this.dbService.update("filters",{id:r.name,data:ue}).pipe((0,f.K)(se=>(this.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f \u0444\u0438\u043b\u044c\u0442\u0440\u0430",severity:"error",detail:se}),x.E))).subscribe(),this.reportClient.getOzonStockStarvationReport(new c.f.OzonStockScarcityReportRequestModel(B)).pipe((0,f.K)(se=>(this.loading=!1,this.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430",severity:"error",detail:se}),x.E))).subscribe(se=>{this.data=se,this.data.reduce((xe,be)=>{let Me;const Ze=be.standaloneWarehouse?be.warehouseName:be.warehouseClusterName??"\u0411\u0435\u0437 \u043a\u043b\u0430\u0441\u0442\u0435\u0440\u0430";let Ce;return xe[Ze]?Me=xe[Ze]:(Me={},xe[Ze]=Me),Me[be.productPackageID]?(Ce=Me[be.productPackageID],Ce.reserved+=be.reserved,Ce.present+=be.present,Ce.moving+=be.moving,Ce.salesCount+=be.salesCount):(Ce={productPackageName:be.productPackageName,productPackageID:be.productPackageID,reserved:be.reserved,present:be.present,moving:be.moving,salesCount:be.salesCount},Me[be.productPackageID]=Ce),xe},{}),this.loading=!1})});const t=+this.route.snapshot.paramMap.get("salesAnalysisInDays"),p=+this.route.snapshot.paramMap.get("notificationPeriodInDays"),I=this.route.snapshot.paramMap.get("date")?new Date:null;this.filter.salesAnalysisInDays=t>0?t:7,this.filter.notificationPeriodInDays=p>0?p:7,this.filter.date=I,this.dbService.getByID("filters",r.name).subscribe(B=>{B&&(B.data&&(this.filter=B.data),this.filterSubject.next(this.filter))}),this.filter.salesAnalysisInDays>0&&this.filter.notificationPeriodInDays>0&&this.filterSubject.next(this.filter)}onFilterChanged(){this.filterSubject.next(this.filter)}static#e=this.\u0275fac=function(p){return new(p||r)(e.Y36(a.gz),e.Y36(c.f.ReportClient),e.Y36(w.ez),e.Y36(F.Dx),e.Y36(k.ys))};static#t=this.\u0275cmp=e.Xpm({type:r,selectors:[["app-stock-starvation-report"]],features:[e.qOj],decls:22,vars:16,consts:[[1,"card"],[1,"flex","gap-3","m-3"],[1,"p-float-label"],["inputId","salesAnalysisInDays",3,"min","required","ngModel","onInput","ngModelChange"],["htmlFor","number-input"],["inputId","notificationPeriodInDays",3,"min","required","ngModel","onInput","ngModelChange"],["input","date","dateFormat","dd.mm.yy","placeholder","\u0414\u0430\u0442\u0430 \u043e\u0442\u0447\u0451\u0442\u0430",3,"ngModel","showClear","readonlyInput","ngModelChange","onClear","onSelect"],["for","date",1,"font-bold"],["input","respectMinimalStock","label","\u0423\u0447\u0438\u0442\u044b\u0432\u0430\u0442\u044c \u043c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u044b\u0439 \u043e\u0441\u0442\u0430\u0442\u043e\u043a",3,"ngModel","binary","ngModelChange","onChange"],["input","respectActiveSupplyOrders","label","\u0423\u0447\u0438\u0442\u044b\u0432\u0430\u0442\u044c \u043f\u043e\u0441\u0442\u0430\u0432\u043a\u0438 \u0432 \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u0435",3,"ngModel","binary","ngModelChange","onChange"],["input","respectSupplyPreparationPeriod","label","\u0423\u0447\u0438\u0442\u044b\u0432\u0430\u0442\u044c \u043f\u043e\u0434\u0433\u043e\u0442\u043e\u0432\u043a\u0443 \u043a \u043f\u043e\u0441\u0442\u0430\u0432\u043a\u0435",3,"ngModel","binary","ngModelChange","onChange"],["sortField","stockDays","rowGroupMode","subheader","groupRowsBy","warehouseClusterName","groupRowsByOrder","9",3,"value","tableStyle","paginator","loading","sortOrder","globalFilterFields",4,"ngIf"],["sortField","stockDays","rowGroupMode","subheader","groupRowsBy","warehouseClusterName","groupRowsByOrder","9",3,"value","tableStyle","paginator","loading","sortOrder","globalFilterFields"],["pTemplate","groupheader"],["pTemplate","header"],["pTemplate","body"],["pRowGroupHeader",""],["colspan","8"],[1,"font-bold","ml-2"],["pSortableColumn","productPackageID"],["field","productPackageID"],["pSortableColumn","salesCount"],["field","salesCount"],["pSortableColumn","present"],["field","present"],["pSortableColumn","reserved"],["field","reserved"],["pSortableColumn","moving"],["field","moving"],["pSortableColumn","salesRate"],["field","salesRate"],["pSortableColumn","stockDays"],["field","stockDays"],["field","productPackageID","type","numeric",3,"min","showButtons","showOperator","useGrouping"],["field","productPackageName","matchMode","contains","type","text",3,"showMatchModes","showOperator"],["field","salesCount","type","numeric",3,"showMatchModes","showButtons","showOperator","useGrouping"],["field","present","type","numeric",3,"showButtons","showOperator","useGrouping"],["field","reserved","type","numeric",3,"showButtons","showOperator","useGrouping"],["field","moving","type","numeric",3,"showButtons","showOperator","useGrouping"],["field","salesRate","type","numeric",3,"showButtons","showOperator"]],template:function(p,_){1&p&&(e._UZ(0,"p-toast"),e.TgZ(1,"h1"),e._uU(2," \u041e\u0442\u0447\u0451\u0442 \u043e \u0437\u0430\u043a\u0430\u043d\u0447\u0438\u0432\u0430\u044e\u0449\u0438\u0445\u0441\u044f \u043e\u0441\u0442\u0430\u0442\u043a\u0430\u0445\n"),e.qZA(),e.TgZ(3,"div",0)(4,"div",1)(5,"span",2)(6,"p-inputNumber",3),e.NdJ("onInput",function(){return _.onFilterChanged()})("ngModelChange",function(B){return _.filter.salesAnalysisInDays=B}),e.qZA(),e.TgZ(7,"label",4),e._uU(8,"\u041f\u0435\u0440\u0438\u043e\u0434 \u0430\u043d\u0430\u043b\u0438\u0437\u0430 \u043f\u0440\u043e\u0434\u0430\u0436, \u0434\u043d\u0435\u0439"),e.qZA()(),e.TgZ(9,"span",2)(10,"p-inputNumber",5),e.NdJ("onInput",function(){return _.onFilterChanged()})("ngModelChange",function(B){return _.filter.notificationPeriodInDays=B}),e.qZA(),e.TgZ(11,"label",4),e._uU(12,"\u0417\u0430\u043f\u0430\u0441 \u043e\u0441\u0442\u0430\u0442\u043a\u043e\u0432, \u0434\u043d\u0435\u0439"),e.qZA()(),e.TgZ(13,"span",2)(14,"p-calendar",6),e.NdJ("ngModelChange",function(B){return _.filter.date=B})("onClear",function(){return _.onFilterChanged()})("onSelect",function(){return _.onFilterChanged()}),e.qZA(),e.TgZ(15,"label",7),e._uU(16,"\u0414\u0430\u0442\u0430 \u043e\u0442\u0447\u0451\u0442\u0430"),e.qZA()()(),e.TgZ(17,"div",1)(18,"p-checkbox",8),e.NdJ("ngModelChange",function(B){return _.filter.respectMinimalStock=B})("onChange",function(){return _.onFilterChanged()}),e.qZA(),e.TgZ(19,"p-checkbox",9),e.NdJ("ngModelChange",function(B){return _.filter.respectActiveSupplyOrders=B})("onChange",function(){return _.onFilterChanged()}),e.qZA(),e.TgZ(20,"p-checkbox",10),e.NdJ("ngModelChange",function(B){return _.filter.respectSupplyPreparationPeriod=B})("onChange",function(){return _.onFilterChanged()}),e.qZA()()(),e.YNc(21,ci,4,8,"p-table",11)),2&p&&(e.xp6(6),e.Q6J("min",1)("required",!0)("ngModel",_.filter.salesAnalysisInDays),e.xp6(4),e.Q6J("min",1)("required",!0)("ngModel",_.filter.notificationPeriodInDays),e.xp6(4),e.Q6J("ngModel",_.filter.date)("showClear",!0)("readonlyInput",!0),e.xp6(4),e.Q6J("ngModel",_.filter.respectMinimalStock)("binary",!0),e.xp6(1),e.Q6J("ngModel",_.filter.respectActiveSupplyOrders)("binary",!0),e.xp6(1),e.Q6J("ngModel",_.filter.respectSupplyPreparationPeriod)("binary",!0),e.xp6(1),e.Q6J("ngIf",_.data))},dependencies:[w.jx,H.f,Fn.XZ,n.O5,K.JJ,K.Q7,K.On,jn.Rn,W.iA,W.lQ,W.Z5,W.fz,W.xl,me.FN,n.JJ]})}return r})();var Vn=v(4227);function pi(r,P){if(1&r){const t=e.EpF();e.TgZ(0,"h1"),e._uU(1,"\u0410\u043a\u0446\u0438\u0438 Ozon"),e.qZA(),e.TgZ(2,"div",4)(3,"button",5),e.NdJ("click",function(){e.CHM(t);const _=e.oxw();return e.KtG(_.togglePromotionExpansion())}),e.qZA(),e.TgZ(4,"button",6),e.NdJ("click",function(){e.CHM(t);const _=e.oxw();return e.KtG(_.importOzonPromotions())}),e.qZA()()}if(2&r){const t=e.oxw();e.xp6(3),e.Q6J("label",t.expandedAll?"\u0421\u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0430\u043a\u0446\u0438\u0438":"\u0420\u0430\u0437\u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0430\u043a\u0446\u0438\u0438")}}function fi(r,P){if(1&r&&e._UZ(0,"button",17),2&r){const t=e.oxw(),_=t.expanded;e.Q6J("pRowToggler",t.$implicit)("icon",_?"pi pi-chevron-down":"pi pi-chevron-right")}}function _i(r,P){if(1&r&&(e.ynx(0,15),e._uU(1),e.BQk()),2&r){const t=e.oxw(2).$implicit;e.xp6(1),e.hij(" (\u0417\u0430\u043a\u0430\u0437 \u043e\u0442 ",t.orderAmount,"\u20bd) ")}}function hi(r,P){if(1&r&&(e.TgZ(0,"div",15),e._uU(1),e.YNc(2,_i,2,1,"ng-container",16),e.qZA()),2&r){const t=e.oxw().$implicit;e.xp6(1),e.hij(" \u0421\u043a\u0438\u0434\u043a\u0430: ","CURRENCY"==t.discountType?t.discountValue+"\u20bd":"PERCENT"==t.discountType?t.discountValue+"%":t.discountType+" - "+t.discountValue," "),e.xp6(1),e.Q6J("ngIf",t.orderAmount)}}function gi(r,P){1&r&&(e.TgZ(0,"div",15),e._UZ(1,"i",18),e._uU(2," \u041f\u0440\u043e\u043c\u043e\u043a\u043e\u0434 "),e.qZA())}function mi(r,P){if(1&r&&(e.TgZ(0,"div",15),e._uU(1," \u041d\u043e\u0432\u044b\u0445 \u0442\u043e\u0432\u0430\u0440\u043e\u0432: "),e.TgZ(2,"p-tag",19),e._uU(3),e.qZA()()),2&r){const t=e.oxw().$implicit;e.xp6(2),e.Q6J("severity",t._activeProductCount?"danger":"success"),e.xp6(1),e.hij(" ",t._unconfirmedProductCount," ")}}function vi(r,P){if(1&r&&(e.TgZ(0,"tr")(1,"td",7)(2,"div",8),e.YNc(3,fi,1,2,"button",9),e.qZA()(),e.TgZ(4,"td")(5,"div",10)(6,"div",11)(7,"div",12)(8,"div")(9,"div",13)(10,"a",14),e._uU(11),e.qZA()(),e.TgZ(12,"div",15),e._uU(13),e.qZA(),e.YNc(14,hi,3,2,"div",16),e.YNc(15,gi,3,0,"div",16),e.YNc(16,mi,4,2,"div",16),e.qZA()()()()()()),2&r){const t=P.$implicit;e.xp6(3),e.Q6J("ngIf",t.products.length),e.xp6(7),e.MGl("href","https://seller.ozon.ru/app/highlights/",t.iD,"",e.LSH),e.xp6(1),e.hij(" ",t.name," "),e.xp6(2),e.hij(" \u0422\u0438\u043f: ",t.actionType," "),e.xp6(1),e.Q6J("ngIf",t.discountValue),e.xp6(1),e.Q6J("ngIf",t.isVoucherAction),e.xp6(1),e.Q6J("ngIf",t.products.length)}}function yi(r,P){if(1&r){const t=e.EpF();e.TgZ(0,"tr")(1,"th",24)(2,"div"),e._UZ(3,"p-sortIcon",25),e.qZA(),e.TgZ(4,"div",26)(5,"p-checkbox",27),e.NdJ("ngModelChange",function(_){e.CHM(t);const I=e.oxw().$implicit;return e.KtG(I.allChecked=_)})("click",function(){e.CHM(t);const _=e.oxw().$implicit,I=e.oxw();return e.KtG(I.toggleCheckedProducts(_))}),e.qZA()()(),e.TgZ(6,"th",28),e._uU(7,"\u0410\u0440\u0442\u0438\u043a\u0443\u043b "),e._UZ(8,"p-sortIcon",29),e.qZA(),e.TgZ(9,"th"),e._uU(10,"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435"),e.qZA(),e.TgZ(11,"th")(12,"div"),e._uU(13,"\u0426\u0435\u043d\u0430 \u043f\u0440\u043e\u0434\u0430\u0436\u0438"),e.qZA(),e.TgZ(14,"div",30),e._uU(15,"\u041f\u043e\u043b\u043d\u0430\u044f \u0446\u0435\u043d\u0430"),e.qZA(),e.TgZ(16,"div",30),e._uU(17,"\u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0446\u0435\u043d\u0430"),e.qZA()(),e.TgZ(18,"th"),e._uU(19," \u0426\u0435\u043d\u0430 \u043f\u043e \u0430\u043a\u0446\u0438\u0438 "),e._UZ(20,"br"),e.TgZ(21,"span",30),e._uU(22,"\u041c\u0430\u043a\u0441. \u0446\u0435\u043d\u0430 \u043f\u043e \u0430\u043a\u0446\u0438\u0438"),e.qZA()(),e.TgZ(23,"th"),e._uU(24,"\u041c\u0438\u043d. \u0441\u0442\u043e\u043a"),e.qZA(),e.TgZ(25,"th"),e._uU(26,"\u0421\u0442\u043e\u043a"),e.qZA()()}if(2&r){const t=e.oxw().$implicit;e.xp6(5),e.Q6J("ngModel",t.allChecked)("binary",!0)}}function xi(r,P){1&r&&(e.ynx(0),e.TgZ(1,"tr"),e._UZ(2,"td",7),e.TgZ(3,"td",32),e._UZ(4,"p-skeleton",33),e.qZA(),e._UZ(5,"td",20),e.qZA(),e.BQk())}function bi(r,P){if(1&r){const t=e.EpF();e.TgZ(0,"input",39),e.NdJ("ngModelChange",function(_){e.CHM(t);const I=e.oxw(2).$implicit;return e.KtG(I.actionPrice=_)}),e.qZA(),e.TgZ(1,"div",30),e._uU(2),e.qZA()}if(2&r){const t=e.oxw(2).$implicit;e.Q6J("ngModel",t.actionPrice),e.xp6(2),e.Oqu(t.maxActionPrice)}}function Ti(r,P){if(1&r&&(e.ynx(0),e.TgZ(1,"p-tag",19)(2,"span",40),e._uU(3),e.qZA()(),e.BQk()),2&r){const t=e.oxw(3).$implicit,p=e.oxw(2);e.xp6(1),e.Q6J("severity",p.getPriceSeverity(t)),e.xp6(2),e.Oqu(t.actionPrice)}}function Oi(r,P){1&r&&(e.ynx(0),e._uU(1,"-"),e.BQk())}function Ci(r,P){if(1&r&&(e.YNc(0,Ti,4,2,"ng-container",31),e.YNc(1,Oi,2,0,"ng-container",31),e.TgZ(2,"div",30),e._uU(3),e.qZA()),2&r){const t=e.oxw(2).$implicit;e.Q6J("ngIf",!!t.actionPrice),e.xp6(1),e.Q6J("ngIf",!t.actionPrice),e.xp6(2),e.Oqu(t.maxActionPrice)}}const wi=function(r){return{"bg-orange-100":r}};function Si(r,P){if(1&r){const t=e.EpF();e.ynx(0),e.TgZ(1,"tr",34)(2,"td",7)(3,"div",35)(4,"p-checkbox",27),e.NdJ("ngModelChange",function(_){e.CHM(t);const I=e.oxw().$implicit;return e.KtG(I._active=_)})("click",function(){e.CHM(t);const _=e.oxw().$implicit,I=e.oxw().$implicit,B=e.oxw();return e.KtG(B.changeCandidateState(I,_))}),e.qZA()()(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td")(10,"div"),e._uU(11),e.qZA(),e.TgZ(12,"div",30),e._uU(13),e.qZA(),e.TgZ(14,"div",30),e._uU(15),e.qZA()(),e.TgZ(16,"td",36)(17,"p-cellEditor"),e.YNc(18,bi,3,2,"ng-template",37),e.YNc(19,Ci,4,3,"ng-template",38),e.qZA()(),e.TgZ(20,"td"),e._uU(21),e.qZA(),e.TgZ(22,"td"),e._uU(23),e.qZA()(),e.BQk()}if(2&r){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngClass",e.VKq(11,wi,!t.isCandidate&&!t.confirmed)),e.xp6(3),e.Q6J("ngModel",t._active)("binary",!0),e.xp6(2),e.Oqu(t.ozonProduct.productPackageID),e.xp6(2),e.Oqu(t.ozonProduct.name),e.xp6(3),e.Oqu(t.ozonProduct.marketingPrice||"-"),e.xp6(2),e.Oqu(t.ozonProduct.price||"-"),e.xp6(2),e.Oqu(t.ozonProduct.minPrice||"-"),e.xp6(1),e.Q6J("pEditableColumn",t.actionPrice),e.xp6(5),e.Oqu(t.stock),e.xp6(2),e.Oqu(t.minStock)}}function Ai(r,P){if(1&r&&(e.YNc(0,xi,6,0,"ng-container",31),e.YNc(1,Si,24,13,"ng-container",31)),2&r){const t=P.$implicit;e.Q6J("ngIf",!t.ozonProduct),e.xp6(1),e.Q6J("ngIf",t.ozonProduct)}}function Ei(r,P){if(1&r){const t=e.EpF();e.TgZ(0,"button",41),e.NdJ("click",function(){e.CHM(t);const _=e.oxw().$implicit,I=e.oxw();return e.KtG(I.updatePromotionProducts(_))}),e.qZA()}}function Mi(r,P){if(1&r&&(e.TgZ(0,"tr")(1,"td",20)(2,"p-table",21),e.YNc(3,yi,27,2,"ng-template",22),e.YNc(4,Ai,2,2,"ng-template",2),e.YNc(5,Ei,1,0,"ng-template",23),e.qZA()()()),2&r){const t=P.$implicit;e.xp6(2),e.Q6J("value",t.products)("sortOrder",-1)}}const Zi=function(){return{"min-width":"50rem"}},ki=function(){return[10,50,100,250]};let Ii=(()=>{class r extends l.V{constructor(t,p,_,I,B){super(B),this.promotionReader=t,this.promotionWriter=p,this.messageService=_,this.ozonProductClient=I,this.loading=!1,this.expandedAll=!1,this.expandedRowKeys={},this.rows=50,this.findModelSubject=new d.X(new c.f.FindOzonPromotionsModel({count:this.rows,excludeDeleted:!1,offset:0,includeProduct:!0})),this.cachedProducts=new Map}ngOnInit(){this.titleService.setTitle("\u0410\u043a\u0446\u0438\u0438 Ozon"),this.findModelSubject.pipe((0,T.h)(t=>!!t&&t.count>0)).pipe((0,M.R)(this.destroyed)).pipe((0,u.w)(t=>this.findOzonPromotions(t))).subscribe(t=>{const p=t.items.reduce((_,I)=>(this.preparePromotion(I),I.products.forEach(B=>{this.cachedProducts.has(B.iD)||_.add(B.iD)}),_),new Set);this.data=t.items,p.size?this.loadOzonProducts(p):this.data.forEach(_=>this.setOzonProducts(_)),this.totalRecords=t.totalCount})}preparePromotion(t){Object.defineProperty(t,"_activeProductCount",{get:()=>t.products.filter(_=>!_.isCandidate).length});let p=0;return t.products.forEach(_=>{Object.defineProperty(_,"_active",{get:()=>!_.isCandidate,set:I=>_.isCandidate=!I}),p+=+(!_.confirmed&&!_.isCandidate)}),Object.assign(t,{_totalProductCount:t.products.length,_unconfirmedProductCount:p}),t}changeCandidateState(t,p){if(!p.isCandidate&&!p.actionPrice){const _=p.ozonProduct;p.actionPrice=_.marketingPrice||_.price||_.minPrice}this.sortProducts(t),this.resetGroupCheckedState(t)}sortProducts(t){t.products.sort((p,_)=>{const B=_.ozonProduct,ue=this.getMinimalPrice(p.ozonProduct),se=this.getMinimalPrice(B);return+p.isCandidate-+_.isCandidate||+p.confirmed-+_.confirmed||+(null!=p.maxActionPrice&&null!=ue&&ue<p.maxActionPrice)-+(null!=_.maxActionPrice&&null!=se&&se<_.maxActionPrice)||+(null==ue)-+(null==se)||+(+ue<p.maxActionPrice)-+(+se<_.maxActionPrice)})}getMinimalPrice(t){return t?.minPrice||t?.marketingPrice}getPriceSeverity(t){const p=this.getMinimalPrice(t.ozonProduct);return t.maxActionPrice<p?"danger":"success"}setOzonProducts(t){t.products.forEach(p=>{p.ozonProduct=this.cachedProducts.get(p.iD)}),this.sortProducts(t)}resetGroupCheckedState(t){const p=t;p.allChecked=!1,p.normalChecked=!1}toggleCheckedProducts(t){const p=t.allChecked;t.products.forEach(_=>{_.isCandidate=!p})}loadOzonProducts(t){this.ozonProductClient.findOzonProducts(new c.f.FindOzonProductsModel({productIDs:[...t],includeStocks:!1,offset:0,count:1e5})).subscribe(p=>{p.items.forEach(_=>{_.ozonProductID&&this.cachedProducts.set(_.ozonProductID,_)}),this.data.forEach(_=>this.setOzonProducts(_))})}updatePromotionProducts(t){const p=t.products.filter(_=>!_.isCandidate);this.promotionWriter.updateOzonPromotionProducts(t.iD,p).pipe((0,f.K)(_=>(this.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430",severity:"error",detail:_}),x.E))).subscribe(_=>{let I=!1;if(_.additionErrors)for(var B of Object.keys(_.additionErrors)){I=!0;const se=this.cachedProducts.get(+B);this.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430",severity:"error",detail:`\u041e\u0448\u0438\u0431\u043a\u0430 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u0442\u043e\u0432\u0430\u0440\u0430 #${se.name} \u0432 \u0430\u043a\u0446\u0438\u044e: ${_.additionErrors[B]}`})}if(_.deletionErrors)for(var B of Object.keys(_.deletionErrors)){I=!0;const ge=this.cachedProducts.get(+B);this.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430",severity:"error",detail:`\u041e\u0448\u0438\u0431\u043a\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f \u0442\u043e\u0432\u0430\u0440\u0430 #${ge.name} \u0438\u0437 \u0430\u043a\u0446\u0438\u0438: ${_.additionErrors[B]}`})}I||this.messageService.add({summary:"\u0423\u0441\u043f\u0435\u0445",severity:"success",detail:"\u0421\u043f\u0438\u0441\u043e\u043a \u043f\u0440\u043e\u0434\u0443\u043a\u0442\u043e\u0432 \u0430\u043a\u0446\u0438\u0438 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0438\u0437\u043c\u0435\u043d\u0451\u043d"});const ue=this.data.findIndex(se=>se.iD==t.iD);this.data[ue]=this.preparePromotion(_.updatedPromotion),this.setOzonProducts(_.updatedPromotion)})}togglePromotionExpansion(){this.expandedAll=!this.expandedAll,this.data.forEach(t=>{t.products.length&&(this.expandedRowKeys[t.iD]=this.expandedAll)})}onDataLazyLoad(t){const p=this.findModelSubject.getValue();p.offset=t.first,p.count=t.rows,this.findModelSubject.next(p)}findOzonPromotions(t){return this.promotionReader.findOzonPromotions(t).pipe((0,f.K)(p=>(this.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430",severity:"error",detail:p}),x.E)))}importOzonPromotions(){var t=this;return(0,s.Z)(function*(){t.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430",severity:"error",detail:"\u041d\u0435 \u0440\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u043d\u043e"})})()}static#e=this.\u0275fac=function(p){return new(p||r)(e.Y36(c.f.OzonPromotionClient),e.Y36(S.Q.OzonPromotionClient),e.Y36(w.ez),e.Y36(c.f.OzonProductClient),e.Y36(F.Dx))};static#t=this.\u0275cmp=e.Xpm({type:r,selectors:[["app-ozon-promotion-list"]],features:[e.qOj],decls:5,vars:11,consts:[["dataKey","iD",3,"value","lazy","expandedRowKeys","tableStyle","paginator","rows","rowsPerPageOptions","totalRecords","loading","onLazyLoad"],["pTemplate","caption"],["pTemplate","body"],["pTemplate","rowexpansion"],[1,"flex","gap-3","p-2"],["pButton","","pRipple","","type","button",3,"label","click"],["pButton","","pRipple","","type","button","label","\u0418\u043c\u043f\u043e\u0440\u0442 \u0430\u043a\u0446\u0438\u0439",3,"click"],[2,"width","1%"],[1,"flex","align-items-center","justify-content-center","gap-2"],["type","button","pButton","","pRipple","","class","p-button-text p-button-rounded p-button-plain",3,"pRowToggler","icon",4,"ngIf"],[1,"flex","flex-column","sm:flex-row","sm:align-items-center"],[1,"flex","flex-column","md:flex-row","justify-content-between","md:align-items-center","flex-1"],[1,"flex","flex-row","md:flex-column","justify-content-between","align-items-start","gap-2"],[1,"text-lg","font-medium","font-bold","text-900","mt-2"],["target","_blank",3,"href"],[1,"text-lg","font-medium","text-900","mt-2"],["class","text-lg font-medium text-900 mt-2",4,"ngIf"],["type","button","pButton","","pRipple","",1,"p-button-text","p-button-rounded","p-button-plain",3,"pRowToggler","icon"],[1,"pi","pi-barcode","text-blue-500"],[3,"severity"],["colspan","2"],["sortField","_active",3,"value","sortOrder"],["pTemplate","header"],["pTemplate","footer"],["pSortableColumn","_active"],["field","_active"],[1,"p-2"],[3,"ngModel","binary","ngModelChange","click"],["pSortableColumn","ozonProduct.productPackageID"],["field","ozonProduct.productPackageID"],[1,"text-500"],[4,"ngIf"],["colspan","4"],["width","100%","height","4rem"],[3,"ngClass"],[1,"gap-2","p-2"],["pEditableColumnField","product.actionPrice",1,"text-center",3,"pEditableColumn"],["pTemplate","input"],["pTemplate","output"],["pInputText","","type","number",3,"ngModel","ngModelChange"],[1,"text-white-500"],["pButton","","pRipple","","type","button","label","\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",3,"click"]],template:function(p,_){1&p&&(e.TgZ(0,"p-table",0),e.NdJ("onLazyLoad",function(B){return _.onDataLazyLoad(B)}),e.YNc(1,pi,5,1,"ng-template",1),e.YNc(2,vi,17,7,"ng-template",2),e.YNc(3,Mi,6,2,"ng-template",3),e.qZA(),e._UZ(4,"p-toast")),2&p&&e.Q6J("value",_.data)("lazy",!0)("expandedRowKeys",_.expandedRowKeys)("tableStyle",e.DdM(9,Zi))("paginator",!0)("rows",_.rows)("rowsPerPageOptions",e.DdM(10,ki))("totalRecords",_.totalRecords)("loading",_.loading)},dependencies:[w.jx,J.Hq,Fn.XZ,Nn.o,n.mk,n.O5,K.Fj,K.wV,K.JJ,K.On,W.iA,W.lQ,W.jB,W.Wq,W.YL,W.fz,_e.V,me.FN,Vn.O]})}return r})(),Ri=(()=>{class r{static#e=this.\u0275fac=function(p){return new(p||r)};static#t=this.\u0275mod=e.oAB({type:r});static#n=this.\u0275inj=e.cJS({imports:[a.Bz.forChild([{path:"warehouse/list",component:ri},{path:"salesOrders",component:or},{path:"action",component:Ii},{path:"product",component:Or},{path:"transaction",component:eo},{path:"supplyOrder",component:Br},{path:"reconciliation",component:To},{path:"stock-starvation-report",component:di}]),a.Bz]})}return r})(),Pi=(()=>{class r{static#e=this.\u0275fac=function(p){return new(p||r)};static#t=this.\u0275mod=e.oAB({type:r});static#n=this.\u0275inj=e.cJS({})}return r})(),Di=(()=>{class r{static \u0275fac=function(p){return new(p||r)};static \u0275mod=e.oAB({type:r});static \u0275inj=e.cJS({imports:[n.ez]})}return r})();var zi=v(7327),Li=v(3965),Ui=v(5096),qi=v(9818);let Fi=(()=>{class r{static#e=this.\u0275fac=function(p){return new(p||r)};static#t=this.\u0275mod=e.oAB({type:r});static#n=this.\u0275inj=e.cJS({providers:[c.f.WarehouseClient,c.f.ReportClient,c.f.OzonSalesOrderClient,c.f.OperationClient,c.f.OzonProductClient,c.f.OzonSupplyOrderClient,S.Q.PostingClient,S.Q.OperationClient,S.Q.OzonProductClient,S.Q.OzonSupplyOrderClient,S.Q.WarehouseClient,S.Q.OzonPromotionClient,c.f.ProductClient,c.f.OzonPromotionClient,Z.w,Gn,w.ez,w.YP],imports:[zi.WN,J.hJ,H._8,V.d,Fn.nD,No,Pi,n.ez,Yn.D,Bn.S,Li.kW,Ui.O,K.u5,jn.L$,Di,Nn.j,D,Er,Ri,G.r,X.Qy,W.U$,_e.W,me.EV,Vn.m,qi.GY]})}return r})()},6387:(ye,o,v)=>{"use strict";var a=F(v(4168)),d=F(v(6017)),x=F(v(1301)),M=F(v(7164)),u=F(v(8619)),c=F(v(4866)),S=F(v(3057)),w=v(856),U=F(v(530));function F(ee){return ee&&ee.__esModule?ee:{default:ee}}var k=function(){},J=function(N,ae,oe){var re=new k;if(typeof N>"u")throw Error("No element to render on was provided.");return re._renderProperties=(0,u.default)(N),re._encodings=[],re._options=U.default,re._errorHandler=new S.default(re),typeof ae<"u"&&((oe=oe||{}).format||(oe.format=ne()),re.options(oe)[oe.format](ae,oe).render()),re};for(var H in J.getModule=function(ee){return a.default[ee]},a.default)a.default.hasOwnProperty(H)&&V(a.default,H);function V(ee,N){k.prototype[N]=k.prototype[N.toUpperCase()]=k.prototype[N.toLowerCase()]=function(ae,oe){var re=this;return re._errorHandler.wrapBarcodeCall(function(){oe.text=typeof oe.text>"u"?void 0:""+oe.text;var de=(0,d.default)(re._options,oe);de=(0,c.default)(de);var Q=K(ae,ee[N],de);return re._encodings.push(Q),re})}}function K(ee,N,ae){var oe=new N(ee=""+ee,ae);if(!oe.valid())throw new w.InvalidInputException(oe.constructor.name,ee);var re=oe.encode();re=(0,x.default)(re);for(var de=0;de<re.length;de++)re[de].options=(0,d.default)(ae,re[de].options);return re}function ne(){return a.default.CODE128?"CODE128":Object.keys(a.default)[0]}function $(ee,N,ae){N=(0,x.default)(N);for(var oe=0;oe<N.length;oe++)N[oe].options=(0,d.default)(ae,N[oe].options),(0,M.default)(N[oe].options);(0,M.default)(ae),new(0,ee.renderer)(ee.element,N,ae).render(),ee.afterRender&&ee.afterRender()}k.prototype.options=function(ee){return this._options=(0,d.default)(this._options,ee),this},k.prototype.blank=function(ee){var N=new Array(ee+1).join("0");return this._encodings.push({data:N}),this},k.prototype.init=function(){var ee;if(this._renderProperties)for(var N in Array.isArray(this._renderProperties)||(this._renderProperties=[this._renderProperties]),this._renderProperties){var ae=(0,d.default)(this._options,(ee=this._renderProperties[N]).options);"auto"==ae.format&&(ae.format=ne()),this._errorHandler.wrapBarcodeCall(function(){var de=K(ae.value,a.default[ae.format.toUpperCase()],ae);$(ee,de,ae)})}},k.prototype.render=function(){if(!this._renderProperties)throw new w.NoElementException;if(Array.isArray(this._renderProperties))for(var ee=0;ee<this._renderProperties.length;ee++)$(this._renderProperties[ee],this._encodings,this._options);else $(this._renderProperties,this._encodings,this._options);return this},k.prototype._defaults=U.default,typeof window<"u"&&(window.JsBarcode=J),typeof jQuery<"u"&&(jQuery.fn.JsBarcode=function(ee,N){var ae=[];return jQuery(this).each(function(){ae.push(this)}),J(ae,ee,N)}),ye.exports=J},9418:(ye,o)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=function a(s,d){(function v(a,s){if(!(a instanceof s))throw new TypeError("Cannot call a class as a function")})(this,a),this.data=s,this.text=d.text||s,this.options=d}},8514:(ye,o,v)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function u(l,c){for(var e=0;e<c.length;e++){var S=c[e];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(l,S.key,S)}}return function(l,c,e){return c&&u(l.prototype,c),e&&u(l,e),l}}(),s=function f(u){return u&&u.__esModule?u:{default:u}}(v(9418)),d=v(9144),b=function(u){function l(c,e){!function x(u,l){if(!(u instanceof l))throw new TypeError("Cannot call a class as a function")}(this,l);var S=function T(u,l){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!l||"object"!=typeof l&&"function"!=typeof l?u:l}(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,c.substring(1),e));return S.bytes=c.split("").map(function(w){return w.charCodeAt(0)}),S}return function M(u,l){if("function"!=typeof l&&null!==l)throw new TypeError("Super expression must either be null or a function, not "+typeof l);u.prototype=Object.create(l&&l.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),l&&(Object.setPrototypeOf?Object.setPrototypeOf(u,l):u.__proto__=l)}(l,u),n(l,[{key:"valid",value:function(){return/^[\x00-\x7F\xC8-\xD3]+$/.test(this.data)}},{key:"encode",value:function(){var e=this.bytes,S=e.shift()-105,w=d.SET_BY_CODE[S];if(void 0===w)throw new RangeError("The encoding does not start with a start character.");!0===this.shouldEncodeAsEan128()&&e.unshift(d.FNC1);var Z=l.next(e,1,w);return{text:this.text===this.data?this.text.replace(/[^\x20-\x7E]/g,""):this.text,data:l.getBar(S)+Z.result+l.getBar((Z.checksum+S)%d.MODULO)+l.getBar(d.STOP)}}},{key:"shouldEncodeAsEan128",value:function(){var e=this.options.ean128||!1;return"string"==typeof e&&(e="true"===e.toLowerCase()),e}}],[{key:"getBar",value:function(e){return d.BARS[e]?d.BARS[e].toString():""}},{key:"correctIndex",value:function(e,S){if(S===d.SET_A){var w=e.shift();return w<32?w+64:w-32}return S===d.SET_B?e.shift()-32:10*(e.shift()-48)+e.shift()-48}},{key:"next",value:function(e,S,w){if(!e.length)return{result:"",checksum:0};var Z=void 0,U=void 0;if(e[0]>=200){U=e.shift()-105;var F=d.SWAP[U];void 0!==F?Z=l.next(e,S+1,F):((w===d.SET_A||w===d.SET_B)&&U===d.SHIFT&&(e[0]=w===d.SET_A?e[0]>95?e[0]-96:e[0]:e[0]<32?e[0]+96:e[0]),Z=l.next(e,S+1,w))}else U=l.correctIndex(e,w),Z=l.next(e,S+1,w);return{result:l.getBar(U)+Z.result,checksum:U*S+Z.checksum}}}]),l}(s.default);o.default=b},2100:(ye,o,v)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function u(l,c){for(var e=0;e<c.length;e++){var S=c[e];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(l,S.key,S)}}return function(l,c,e){return c&&u(l.prototype,c),e&&u(l,e),l}}(),s=function f(u){return u&&u.__esModule?u:{default:u}}(v(8514)),d=v(9144),b=function(u){function l(c,e){return function x(u,l){if(!(u instanceof l))throw new TypeError("Cannot call a class as a function")}(this,l),function T(u,l){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!l||"object"!=typeof l&&"function"!=typeof l?u:l}(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,d.A_START_CHAR+c,e))}return function M(u,l){if("function"!=typeof l&&null!==l)throw new TypeError("Super expression must either be null or a function, not "+typeof l);u.prototype=Object.create(l&&l.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),l&&(Object.setPrototypeOf?Object.setPrototypeOf(u,l):u.__proto__=l)}(l,u),n(l,[{key:"valid",value:function(){return new RegExp("^"+d.A_CHARS+"+$").test(this.data)}}]),l}(s.default);o.default=b},2943:(ye,o,v)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function u(l,c){for(var e=0;e<c.length;e++){var S=c[e];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(l,S.key,S)}}return function(l,c,e){return c&&u(l.prototype,c),e&&u(l,e),l}}(),s=function f(u){return u&&u.__esModule?u:{default:u}}(v(8514)),d=v(9144),b=function(u){function l(c,e){return function x(u,l){if(!(u instanceof l))throw new TypeError("Cannot call a class as a function")}(this,l),function T(u,l){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!l||"object"!=typeof l&&"function"!=typeof l?u:l}(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,d.B_START_CHAR+c,e))}return function M(u,l){if("function"!=typeof l&&null!==l)throw new TypeError("Super expression must either be null or a function, not "+typeof l);u.prototype=Object.create(l&&l.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),l&&(Object.setPrototypeOf?Object.setPrototypeOf(u,l):u.__proto__=l)}(l,u),n(l,[{key:"valid",value:function(){return new RegExp("^"+d.B_CHARS+"+$").test(this.data)}}]),l}(s.default);o.default=b},5683:(ye,o,v)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function u(l,c){for(var e=0;e<c.length;e++){var S=c[e];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(l,S.key,S)}}return function(l,c,e){return c&&u(l.prototype,c),e&&u(l,e),l}}(),s=function f(u){return u&&u.__esModule?u:{default:u}}(v(8514)),d=v(9144),b=function(u){function l(c,e){return function x(u,l){if(!(u instanceof l))throw new TypeError("Cannot call a class as a function")}(this,l),function T(u,l){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!l||"object"!=typeof l&&"function"!=typeof l?u:l}(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,d.C_START_CHAR+c,e))}return function M(u,l){if("function"!=typeof l&&null!==l)throw new TypeError("Super expression must either be null or a function, not "+typeof l);u.prototype=Object.create(l&&l.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),l&&(Object.setPrototypeOf?Object.setPrototypeOf(u,l):u.__proto__=l)}(l,u),n(l,[{key:"valid",value:function(){return new RegExp("^"+d.C_CHARS+"+$").test(this.data)}}]),l}(s.default);o.default=b},7737:(ye,o,v)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0});var a=f(v(8514)),d=f(v(4336));function f(u){return u&&u.__esModule?u:{default:u}}function T(u,l){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!l||"object"!=typeof l&&"function"!=typeof l?u:l}var b=function(u){function l(c,e){if(function x(u,l){if(!(u instanceof l))throw new TypeError("Cannot call a class as a function")}(this,l),/^[\x00-\x7F\xC8-\xD3]+$/.test(c))var S=T(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,(0,d.default)(c),e));else S=T(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,c,e));return T(S)}return function M(u,l){if("function"!=typeof l&&null!==l)throw new TypeError("Super expression must either be null or a function, not "+typeof l);u.prototype=Object.create(l&&l.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),l&&(Object.setPrototypeOf?Object.setPrototypeOf(u,l):u.__proto__=l)}(l,u),l}(a.default);o.default=b},4336:(ye,o,v)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0});var n=v(9144),a=function(M){return M.match(new RegExp("^"+n.A_CHARS+"*"))[0].length},s=function(M){return M.match(new RegExp("^"+n.B_CHARS+"*"))[0].length},d=function(M){return M.match(new RegExp("^"+n.C_CHARS+"*"))[0]};function f(T,M){var b=M?n.A_CHARS:n.B_CHARS,u=T.match(new RegExp("^("+b+"+?)(([0-9]{2}){2,})([^0-9]|$)"));if(u)return u[1]+String.fromCharCode(204)+x(T.substring(u[1].length));var l=T.match(new RegExp("^"+b+"+"))[0];return l.length===T.length?T:l+String.fromCharCode(M?205:206)+f(T.substring(l.length),!M)}function x(T){var M=d(T),b=M.length;if(b===T.length)return T;T=T.substring(b);var u=a(T)>=s(T);return M+String.fromCharCode(u?206:205)+f(T,u)}o.default=function(T){var M=void 0;if(d(T).length>=2)M=n.C_START_CHAR+x(T);else{var u=a(T)>s(T);M=(u?n.A_START_CHAR:n.B_START_CHAR)+f(T,u)}return M.replace(/[\xCD\xCE]([^])[\xCD\xCE]/,function(l,c){return String.fromCharCode(203)+c})}},9144:(ye,o)=>{"use strict";var v;function n(H,V,K){return V in H?Object.defineProperty(H,V,{value:K,enumerable:!0,configurable:!0,writable:!0}):H[V]=K,H}Object.defineProperty(o,"__esModule",{value:!0});var a=o.SET_A=0,s=o.SET_B=1,d=o.SET_C=2,x=(o.SHIFT=98,o.START_A=103),T=o.START_B=104,M=o.START_C=105;o.MODULO=103,o.STOP=106,o.FNC1=207,o.SET_BY_CODE=(n(v={},x,a),n(v,T,s),n(v,M,d),v),o.SWAP={101:a,100:s,99:d},o.A_START_CHAR=String.fromCharCode(208),o.B_START_CHAR=String.fromCharCode(209),o.C_START_CHAR=String.fromCharCode(210),o.A_CHARS="[\0-_\xc8-\xcf]",o.B_CHARS="[ -\x7f\xc8-\xcf]",o.C_CHARS="(\xcf*[0-9]{2}\xcf*)",o.BARS=[11011001100,11001101100,11001100110,10010011e3,10010001100,10001001100,10011001e3,10011000100,10001100100,11001001e3,11001000100,11000100100,10110011100,10011011100,10011001110,10111001100,10011101100,10011100110,11001110010,11001011100,11001001110,11011100100,11001110100,11101101110,11101001100,11100101100,11100100110,11101100100,11100110100,11100110010,11011011e3,11011000110,11000110110,10100011e3,10001011e3,10001000110,10110001e3,10001101e3,10001100010,11010001e3,11000101e3,11000100010,10110111e3,10110001110,10001101110,10111011e3,10111000110,10001110110,11101110110,11010001110,11000101110,11011101e3,11011100010,11011101110,11101011e3,11101000110,11100010110,11101101e3,11101100010,11100011010,11101111010,11001000010,11110001010,1010011e4,10100001100,1001011e4,10010000110,10000101100,10000100110,1011001e4,10110000100,1001101e4,10011000010,10000110100,10000110010,11000010010,1100101e4,11110111010,11000010100,10001111010,10100111100,10010111100,10010011110,10111100100,10011110100,10011110010,11110100100,11110010100,11110010010,11011011110,11011110110,11110110110,10101111e3,10100011110,10001011110,10111101e3,10111100010,11110101e3,11110100010,10111011110,10111101110,11101011110,11110101110,11010000100,1101001e4,11010011100,1100011101011]},8754:(ye,o,v)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.CODE128C=o.CODE128B=o.CODE128A=o.CODE128=void 0;var a=b(v(7737)),d=b(v(2100)),x=b(v(2943)),M=b(v(5683));function b(u){return u&&u.__esModule?u:{default:u}}o.CODE128=a.default,o.CODE128A=d.default,o.CODE128B=x.default,o.CODE128C=M.default},6602:(ye,o,v)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.CODE39=void 0;var n=function(){function Z(U,F){for(var k=0;k<F.length;k++){var J=F[k];J.enumerable=J.enumerable||!1,J.configurable=!0,"value"in J&&(J.writable=!0),Object.defineProperty(U,J.key,J)}}return function(U,F,k){return F&&Z(U.prototype,F),k&&Z(U,k),U}}(),M=function(Z){function U(F,k){return function f(Z,U){if(!(Z instanceof U))throw new TypeError("Cannot call a class as a function")}(this,U),F=F.toUpperCase(),k.mod43&&(F+=function e(Z){return b[Z]}(function w(Z){for(var U=0,F=0;F<Z.length;F++)U+=S(Z[F]);return U%=43}(F))),function x(Z,U){if(!Z)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!U||"object"!=typeof U&&"function"!=typeof U?Z:U}(this,(U.__proto__||Object.getPrototypeOf(U)).call(this,F,k))}return function T(Z,U){if("function"!=typeof U&&null!==U)throw new TypeError("Super expression must either be null or a function, not "+typeof U);Z.prototype=Object.create(U&&U.prototype,{constructor:{value:Z,enumerable:!1,writable:!0,configurable:!0}}),U&&(Object.setPrototypeOf?Object.setPrototypeOf(Z,U):Z.__proto__=U)}(U,Z),n(U,[{key:"encode",value:function(){for(var k=l("*"),J=0;J<this.data.length;J++)k+=l(this.data[J])+"0";return{data:k+=l("*"),text:this.text}}},{key:"valid",value:function(){return-1!==this.data.search(/^[0-9A-Z\-\.\ \$\/\+\%]+$/)}}]),U}(function d(Z){return Z&&Z.__esModule?Z:{default:Z}}(v(9418)).default),b=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","-","."," ","$","/","+","%","*"],u=[20957,29783,23639,30485,20951,29813,23669,20855,29789,23645,29975,23831,30533,22295,30149,24005,21623,29981,23837,22301,30023,23879,30545,22343,30161,24017,21959,30065,23921,22385,29015,18263,29141,17879,29045,18293,17783,29021,18269,17477,17489,17681,20753,35770];function l(Z){return function c(Z){return u[Z].toString(2)}(S(Z))}function S(Z){return b.indexOf(Z)}o.CODE39=M},4079:(ye,o,v)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function c(e,S){for(var w=0;w<S.length;w++){var Z=S[w];Z.enumerable=Z.enumerable||!1,Z.configurable=!0,"value"in Z&&(Z.writable=!0),Object.defineProperty(e,Z.key,Z)}}return function(e,S,w){return S&&c(e.prototype,S),w&&c(e,w),e}}(),a=v(1392),d=T(v(2651));function T(c){return c&&c.__esModule?c:{default:c}}var l=function(c){function e(S,w){!function M(c,e){if(!(c instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var Z=function b(c,e){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?c:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,S,w));return Z.fontSize=!w.flat&&w.fontSize>10*w.width?10*w.width:w.fontSize,Z.guardHeight=w.height+Z.fontSize/2+w.textMargin,Z}return function u(c,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);c.prototype=Object.create(e&&e.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(c,e):c.__proto__=e)}(e,c),n(e,[{key:"encode",value:function(){return this.options.flat?this.encodeFlat():this.encodeGuarded()}},{key:"leftText",value:function(w,Z){return this.text.substr(w,Z)}},{key:"leftEncode",value:function(w,Z){return(0,d.default)(w,Z)}},{key:"rightText",value:function(w,Z){return this.text.substr(w,Z)}},{key:"rightEncode",value:function(w,Z){return(0,d.default)(w,Z)}},{key:"encodeGuarded",value:function(){var w={fontSize:this.fontSize},Z={height:this.guardHeight};return[{data:a.SIDE_BIN,options:Z},{data:this.leftEncode(),text:this.leftText(),options:w},{data:a.MIDDLE_BIN,options:Z},{data:this.rightEncode(),text:this.rightText(),options:w},{data:a.SIDE_BIN,options:Z}]}},{key:"encodeFlat",value:function(){return{data:[a.SIDE_BIN,this.leftEncode(),a.MIDDLE_BIN,this.rightEncode(),a.SIDE_BIN].join(""),text:this.text}}}]),e}(T(v(9418)).default);o.default=l},9619:(ye,o,v)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function c(e,S){for(var w=0;w<S.length;w++){var Z=S[w];Z.enumerable=Z.enumerable||!1,Z.configurable=!0,"value"in Z&&(Z.writable=!0),Object.defineProperty(e,Z.key,Z)}}return function(e,S,w){return S&&c(e.prototype,S),w&&c(e,w),e}}(),a=function c(e,S,w){null===e&&(e=Function.prototype);var Z=Object.getOwnPropertyDescriptor(e,S);if(void 0===Z){var U=Object.getPrototypeOf(e);return null===U?void 0:c(U,S,w)}if("value"in Z)return Z.value;var F=Z.get;return void 0===F?void 0:F.call(w)},s=v(1392),f=function x(c){return c&&c.__esModule?c:{default:c}}(v(4079)),u=function(e){return(10-e.substr(0,12).split("").map(function(w){return+w}).reduce(function(w,Z,U){return U%2?w+3*Z:w+Z},0)%10)%10},l=function(c){function e(S,w){(function T(c,e){if(!(c instanceof e))throw new TypeError("Cannot call a class as a function")})(this,e),-1!==S.search(/^[0-9]{12}$/)&&(S+=u(S));var Z=function M(c,e){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?c:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,S,w));return Z.lastChar=w.lastChar,Z}return function b(c,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);c.prototype=Object.create(e&&e.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(c,e):c.__proto__=e)}(e,c),n(e,[{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]{13}$/)&&+this.data[12]===u(this.data)}},{key:"leftText",value:function(){return a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"leftText",this).call(this,1,6)}},{key:"leftEncode",value:function(){var w=this.data.substr(1,6),Z=s.EAN13_STRUCTURE[this.data[0]];return a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"leftEncode",this).call(this,w,Z)}},{key:"rightText",value:function(){return a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rightText",this).call(this,7,6)}},{key:"rightEncode",value:function(){var w=this.data.substr(7,6);return a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rightEncode",this).call(this,w,"RRRRRR")}},{key:"encodeGuarded",value:function(){var w=a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"encodeGuarded",this).call(this);return this.options.displayValue&&(w.unshift({data:"000000000000",text:this.text.substr(0,1),options:{textAlign:"left",fontSize:this.fontSize}}),this.options.lastChar&&(w.push({data:"00"}),w.push({data:"00000",text:this.options.lastChar,options:{fontSize:this.fontSize}}))),w}}]),e}(f.default);o.default=l},5754:(ye,o,v)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function c(e,S){for(var w=0;w<S.length;w++){var Z=S[w];Z.enumerable=Z.enumerable||!1,Z.configurable=!0,"value"in Z&&(Z.writable=!0),Object.defineProperty(e,Z.key,Z)}}return function(e,S,w){return S&&c(e.prototype,S),w&&c(e,w),e}}(),a=v(1392),d=T(v(2651));function T(c){return c&&c.__esModule?c:{default:c}}var l=function(c){function e(S,w){return function M(c,e){if(!(c instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function b(c,e){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?c:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,S,w))}return function u(c,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);c.prototype=Object.create(e&&e.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(c,e):c.__proto__=e)}(e,c),n(e,[{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]{2}$/)}},{key:"encode",value:function(){var w=a.EAN2_STRUCTURE[parseInt(this.data)%4];return{data:"1011"+(0,d.default)(this.data,w,"01"),text:this.text}}}]),e}(T(v(9418)).default);o.default=l},1931:(ye,o,v)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(S,w){for(var Z=0;Z<w.length;Z++){var U=w[Z];U.enumerable=U.enumerable||!1,U.configurable=!0,"value"in U&&(U.writable=!0),Object.defineProperty(S,U.key,U)}}return function(S,w,Z){return w&&e(S.prototype,w),Z&&e(S,Z),S}}(),a=v(1392),d=T(v(2651));function T(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function S(w,Z){return function M(e,S){if(!(e instanceof S))throw new TypeError("Cannot call a class as a function")}(this,S),function b(e,S){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!S||"object"!=typeof S&&"function"!=typeof S?e:S}(this,(S.__proto__||Object.getPrototypeOf(S)).call(this,w,Z))}return function u(e,S){if("function"!=typeof S&&null!==S)throw new TypeError("Super expression must either be null or a function, not "+typeof S);e.prototype=Object.create(S&&S.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),S&&(Object.setPrototypeOf?Object.setPrototypeOf(e,S):e.__proto__=S)}(S,e),n(S,[{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]{5}$/)}},{key:"encode",value:function(){var Z=a.EAN5_STRUCTURE[function(S){return S.split("").map(function(Z){return+Z}).reduce(function(Z,U,F){return F%2?Z+9*U:Z+3*U},0)%10}(this.data)];return{data:"1011"+(0,d.default)(this.data,Z,"01"),text:this.text}}}]),S}(T(v(9418)).default);o.default=c},3372:(ye,o,v)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function l(c,e){for(var S=0;S<e.length;S++){var w=e[S];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(c,w.key,w)}}return function(c,e,S){return e&&l(c.prototype,e),S&&l(c,S),c}}(),a=function l(c,e,S){null===c&&(c=Function.prototype);var w=Object.getOwnPropertyDescriptor(c,e);if(void 0===w){var Z=Object.getPrototypeOf(c);return null===Z?void 0:l(Z,e,S)}if("value"in w)return w.value;var U=w.get;return void 0===U?void 0:U.call(S)},d=function f(l){return l&&l.__esModule?l:{default:l}}(v(4079)),b=function(c){return(10-c.substr(0,7).split("").map(function(S){return+S}).reduce(function(S,w,Z){return Z%2?S+w:S+3*w},0)%10)%10},u=function(l){function c(e,S){return function x(l,c){if(!(l instanceof c))throw new TypeError("Cannot call a class as a function")}(this,c),-1!==e.search(/^[0-9]{7}$/)&&(e+=b(e)),function T(l,c){if(!l)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!c||"object"!=typeof c&&"function"!=typeof c?l:c}(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,e,S))}return function M(l,c){if("function"!=typeof c&&null!==c)throw new TypeError("Super expression must either be null or a function, not "+typeof c);l.prototype=Object.create(c&&c.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),c&&(Object.setPrototypeOf?Object.setPrototypeOf(l,c):l.__proto__=c)}(c,l),n(c,[{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]{8}$/)&&+this.data[7]===b(this.data)}},{key:"leftText",value:function(){return a(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"leftText",this).call(this,0,4)}},{key:"leftEncode",value:function(){var S=this.data.substr(0,4);return a(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"leftEncode",this).call(this,S,"LLLL")}},{key:"rightText",value:function(){return a(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"rightText",this).call(this,4,4)}},{key:"rightEncode",value:function(){var S=this.data.substr(4,4);return a(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"rightEncode",this).call(this,S,"RRRR")}}]),c}(d.default);o.default=u},5821:(ye,o,v)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function c(e,S){for(var w=0;w<S.length;w++){var Z=S[w];Z.enumerable=Z.enumerable||!1,Z.configurable=!0,"value"in Z&&(Z.writable=!0),Object.defineProperty(e,Z.key,Z)}}return function(e,S,w){return S&&c(e.prototype,S),w&&c(e,w),e}}();o.checksum=l;var s=x(v(2651));function x(c){return c&&c.__esModule?c:{default:c}}var u=function(c){function e(S,w){(function T(c,e){if(!(c instanceof e))throw new TypeError("Cannot call a class as a function")})(this,e),-1!==S.search(/^[0-9]{11}$/)&&(S+=l(S));var Z=function M(c,e){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?c:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,S,w));return Z.displayValue=w.displayValue,Z.fontSize=w.fontSize>10*w.width?10*w.width:w.fontSize,Z.guardHeight=w.height+Z.fontSize/2+w.textMargin,Z}return function b(c,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);c.prototype=Object.create(e&&e.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(c,e):c.__proto__=e)}(e,c),n(e,[{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]{12}$/)&&this.data[11]==l(this.data)}},{key:"encode",value:function(){return this.options.flat?this.flatEncoding():this.guardedEncoding()}},{key:"flatEncoding",value:function(){var w="";return w+="101",w+=(0,s.default)(this.data.substr(0,6),"LLLLLL"),w+="01010",w+=(0,s.default)(this.data.substr(6,6),"RRRRRR"),{data:w+="101",text:this.text}}},{key:"guardedEncoding",value:function(){var w=[];return this.displayValue&&w.push({data:"00000000",text:this.text.substr(0,1),options:{textAlign:"left",fontSize:this.fontSize}}),w.push({data:"101"+(0,s.default)(this.data[0],"L"),options:{height:this.guardHeight}}),w.push({data:(0,s.default)(this.data.substr(1,5),"LLLLL"),text:this.text.substr(1,5),options:{fontSize:this.fontSize}}),w.push({data:"01010",options:{height:this.guardHeight}}),w.push({data:(0,s.default)(this.data.substr(6,5),"RRRRR"),text:this.text.substr(6,5),options:{fontSize:this.fontSize}}),w.push({data:(0,s.default)(this.data[11],"R")+"101",options:{height:this.guardHeight}}),this.displayValue&&w.push({data:"00000000",text:this.text.substr(11,1),options:{textAlign:"right",fontSize:this.fontSize}}),w}}]),e}(x(v(9418)).default);function l(c){var S,e=0;for(S=1;S<11;S+=2)e+=parseInt(c[S]);for(S=0;S<11;S+=2)e+=3*parseInt(c[S]);return(10-e%10)%10}o.default=u},1091:(ye,o,v)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function w(Z,U){for(var F=0;F<U.length;F++){var k=U[F];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(Z,k.key,k)}}return function(Z,U,F){return U&&w(Z.prototype,U),F&&w(Z,F),Z}}(),s=T(v(2651)),f=T(v(9418)),x=v(5821);function T(w){return w&&w.__esModule?w:{default:w}}function b(w,Z){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!Z||"object"!=typeof Z&&"function"!=typeof Z?w:Z}var l=["XX00000XXX","XX10000XXX","XX20000XXX","XXX00000XX","XXXX00000X","XXXXX00005","XXXXX00006","XXXXX00007","XXXXX00008","XXXXX00009"],c=[["EEEOOO","OOOEEE"],["EEOEOO","OOEOEE"],["EEOOEO","OOEEOE"],["EEOOOE","OOEEEO"],["EOEEOO","OEOOEE"],["EOOEEO","OEEOOE"],["EOOOEE","OEEEOO"],["EOEOEO","OEOEOE"],["EOEOOE","OEOEEO"],["EOOEOE","OEEOEO"]],e=function(w){function Z(U,F){!function M(w,Z){if(!(w instanceof Z))throw new TypeError("Cannot call a class as a function")}(this,Z);var k=b(this,(Z.__proto__||Object.getPrototypeOf(Z)).call(this,U,F));if(k.isValid=!1,-1!==U.search(/^[0-9]{6}$/))k.middleDigits=U,k.upcA=S(U,"0"),k.text=F.text||""+k.upcA[0]+U+k.upcA[k.upcA.length-1],k.isValid=!0;else{if(-1===U.search(/^[01][0-9]{7}$/))return b(k);if(k.middleDigits=U.substring(1,U.length-1),k.upcA=S(k.middleDigits,U[0]),k.upcA[k.upcA.length-1]!==U[U.length-1])return b(k);k.isValid=!0}return k.displayValue=F.displayValue,k.fontSize=F.fontSize>10*F.width?10*F.width:F.fontSize,k.guardHeight=F.height+k.fontSize/2+F.textMargin,k}return function u(w,Z){if("function"!=typeof Z&&null!==Z)throw new TypeError("Super expression must either be null or a function, not "+typeof Z);w.prototype=Object.create(Z&&Z.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),Z&&(Object.setPrototypeOf?Object.setPrototypeOf(w,Z):w.__proto__=Z)}(Z,w),n(Z,[{key:"valid",value:function(){return this.isValid}},{key:"encode",value:function(){return this.options.flat?this.flatEncoding():this.guardedEncoding()}},{key:"flatEncoding",value:function(){var F="";return F+="101",F+=this.encodeMiddleDigits(),{data:F+="010101",text:this.text}}},{key:"guardedEncoding",value:function(){var F=[];return this.displayValue&&F.push({data:"00000000",text:this.text[0],options:{textAlign:"left",fontSize:this.fontSize}}),F.push({data:"101",options:{height:this.guardHeight}}),F.push({data:this.encodeMiddleDigits(),text:this.text.substring(1,7),options:{fontSize:this.fontSize}}),F.push({data:"010101",options:{height:this.guardHeight}}),this.displayValue&&F.push({data:"00000000",text:this.text[7],options:{textAlign:"right",fontSize:this.fontSize}}),F}},{key:"encodeMiddleDigits",value:function(){var F=this.upcA[0],J=c[parseInt(this.upcA[this.upcA.length-1])][parseInt(F)];return(0,s.default)(this.middleDigits,J)}}]),Z}(f.default);function S(w,Z){for(var U=parseInt(w[w.length-1]),F=l[U],k="",J=0,H=0;H<F.length;H++){var V=F[H];k+="X"===V?w[J++]:V}return(k=""+Z+k)+(0,x.checksum)(k)}o.default=e},1392:(ye,o)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.SIDE_BIN="101",o.MIDDLE_BIN="01010",o.BINARIES={L:["0001101","0011001","0010011","0111101","0100011","0110001","0101111","0111011","0110111","0001011"],G:["0100111","0110011","0011011","0100001","0011101","0111001","0000101","0010001","0001001","0010111"],R:["1110010","1100110","1101100","1000010","1011100","1001110","1010000","1000100","1001000","1110100"],O:["0001101","0011001","0010011","0111101","0100011","0110001","0101111","0111011","0110111","0001011"],E:["0100111","0110011","0011011","0100001","0011101","0111001","0000101","0010001","0001001","0010111"]},o.EAN2_STRUCTURE=["LL","LG","GL","GG"],o.EAN5_STRUCTURE=["GGLLL","GLGLL","GLLGL","GLLLG","LGGLL","LLGGL","LLLGG","LGLGL","LGLLG","LLGLG"],o.EAN13_STRUCTURE=["LLLLLL","LLGLGG","LLGGLG","LLGGGL","LGLLGG","LGGLLG","LGGGLL","LGLGLG","LGLGGL","LGGLGL"]},2651:(ye,o,v)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0});var n=v(1392);o.default=function(d,f,x){var T=d.split("").map(function(b,u){return n.BINARIES[f[u]]}).map(function(b,u){return b?b[d[u]]:""});if(x){var M=d.length-1;T=T.map(function(b,u){return u<M?b+x:b})}return T.join("")}},2708:(ye,o,v)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.UPCE=o.UPC=o.EAN2=o.EAN5=o.EAN8=o.EAN13=void 0;var a=e(v(9619)),d=e(v(3372)),x=e(v(1931)),M=e(v(5754)),u=e(v(5821)),c=e(v(1091));function e(S){return S&&S.__esModule?S:{default:S}}o.EAN13=a.default,o.EAN8=d.default,o.EAN5=x.default,o.EAN2=M.default,o.UPC=u.default,o.UPCE=c.default},8817:(ye,o,v)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.GenericBarcode=void 0;var n=function(){function b(u,l){for(var c=0;c<l.length;c++){var e=l[c];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(u,e.key,e)}}return function(u,l,c){return l&&b(u.prototype,l),c&&b(u,c),u}}(),M=function(b){function u(l,c){return function f(b,u){if(!(b instanceof u))throw new TypeError("Cannot call a class as a function")}(this,u),function x(b,u){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!u||"object"!=typeof u&&"function"!=typeof u?b:u}(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,l,c))}return function T(b,u){if("function"!=typeof u&&null!==u)throw new TypeError("Super expression must either be null or a function, not "+typeof u);b.prototype=Object.create(u&&u.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),u&&(Object.setPrototypeOf?Object.setPrototypeOf(b,u):b.__proto__=u)}(u,b),n(u,[{key:"encode",value:function(){return{data:"10101010101010101010101010101010101010101",text:this.text}}},{key:"valid",value:function(){return!0}}]),u}(function d(b){return b&&b.__esModule?b:{default:b}}(v(9418)).default);o.GenericBarcode=M},6065:(ye,o,v)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function u(l,c){for(var e=0;e<c.length;e++){var S=c[e];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(l,S.key,S)}}return function(l,c,e){return c&&u(l.prototype,c),e&&u(l,e),l}}(),a=v(5168),b=function(u){function l(){return function x(u,l){if(!(u instanceof l))throw new TypeError("Cannot call a class as a function")}(this,l),function T(u,l){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!l||"object"!=typeof l&&"function"!=typeof l?u:l}(this,(l.__proto__||Object.getPrototypeOf(l)).apply(this,arguments))}return function M(u,l){if("function"!=typeof l&&null!==l)throw new TypeError("Super expression must either be null or a function, not "+typeof l);u.prototype=Object.create(l&&l.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),l&&(Object.setPrototypeOf?Object.setPrototypeOf(u,l):u.__proto__=l)}(l,u),n(l,[{key:"valid",value:function(){return-1!==this.data.search(/^([0-9]{2})+$/)}},{key:"encode",value:function(){var e=this,S=this.data.match(/.{2}/g).map(function(w){return e.encodePair(w)}).join("");return{data:a.START_BIN+S+a.END_BIN,text:this.text}}},{key:"encodePair",value:function(e){var S=a.BINARIES[e[1]];return a.BINARIES[e[0]].split("").map(function(w,Z){return("1"===w?"111":"1")+("1"===S[Z]?"000":"0")}).join("")}}]),l}(function f(u){return u&&u.__esModule?u:{default:u}}(v(9418)).default);o.default=b},9643:(ye,o,v)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function u(l,c){for(var e=0;e<c.length;e++){var S=c[e];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(l,S.key,S)}}return function(l,c,e){return c&&u(l.prototype,c),e&&u(l,e),l}}(),s=function d(u){return u&&u.__esModule?u:{default:u}}(v(6065)),M=function(l){var c=l.substr(0,13).split("").map(function(e){return parseInt(e,10)}).reduce(function(e,S,w){return e+S*(3-w%2*2)},0);return 10*Math.ceil(c/10)-c},b=function(u){function l(c,e){return function f(u,l){if(!(u instanceof l))throw new TypeError("Cannot call a class as a function")}(this,l),-1!==c.search(/^[0-9]{13}$/)&&(c+=M(c)),function x(u,l){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!l||"object"!=typeof l&&"function"!=typeof l?u:l}(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,c,e))}return function T(u,l){if("function"!=typeof l&&null!==l)throw new TypeError("Super expression must either be null or a function, not "+typeof l);u.prototype=Object.create(l&&l.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),l&&(Object.setPrototypeOf?Object.setPrototypeOf(u,l):u.__proto__=l)}(l,u),n(l,[{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]{14}$/)&&+this.data[13]===M(this.data)}}]),l}(s.default);o.default=b},5168:(ye,o)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.START_BIN="1010",o.END_BIN="11101",o.BINARIES=["00110","10001","01001","11000","00101","10100","01100","00011","10010","01010"]},8969:(ye,o,v)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.ITF14=o.ITF=void 0;var a=f(v(6065)),d=f(v(9643));function f(x){return x&&x.__esModule?x:{default:x}}o.ITF=a.default,o.ITF14=d.default},7037:(ye,o,v)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function u(l,c){for(var e=0;e<c.length;e++){var S=c[e];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(l,S.key,S)}}return function(l,c,e){return c&&u(l.prototype,c),e&&u(l,e),l}}(),M=function(u){function l(c,e){return function f(u,l){if(!(u instanceof l))throw new TypeError("Cannot call a class as a function")}(this,l),function x(u,l){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!l||"object"!=typeof l&&"function"!=typeof l?u:l}(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,c,e))}return function T(u,l){if("function"!=typeof l&&null!==l)throw new TypeError("Super expression must either be null or a function, not "+typeof l);u.prototype=Object.create(l&&l.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),l&&(Object.setPrototypeOf?Object.setPrototypeOf(u,l):u.__proto__=l)}(l,u),n(l,[{key:"encode",value:function(){for(var e="110",S=0;S<this.data.length;S++){var Z=parseInt(this.data[S]).toString(2);Z=b(Z,4-Z.length);for(var U=0;U<Z.length;U++)e+="0"==Z[U]?"100":"110"}return{data:e+="1001",text:this.text}}},{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]+$/)}}]),l}(function d(u){return u&&u.__esModule?u:{default:u}}(v(9418)).default);function b(u,l){for(var c=0;c<l;c++)u="0"+u;return u}o.default=M},3922:(ye,o,v)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0});var a=function d(b){return b&&b.__esModule?b:{default:b}}(v(7037)),s=v(6225),M=function(b){function u(l,c){return function f(b,u){if(!(b instanceof u))throw new TypeError("Cannot call a class as a function")}(this,u),function x(b,u){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!u||"object"!=typeof u&&"function"!=typeof u?b:u}(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,l+(0,s.mod10)(l),c))}return function T(b,u){if("function"!=typeof u&&null!==u)throw new TypeError("Super expression must either be null or a function, not "+typeof u);b.prototype=Object.create(u&&u.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),u&&(Object.setPrototypeOf?Object.setPrototypeOf(b,u):b.__proto__=u)}(u,b),u}(a.default);o.default=M},8742:(ye,o,v)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0});var a=function d(b){return b&&b.__esModule?b:{default:b}}(v(7037)),s=v(6225),M=function(b){function u(l,c){return function f(b,u){if(!(b instanceof u))throw new TypeError("Cannot call a class as a function")}(this,u),l+=(0,s.mod10)(l),l+=(0,s.mod10)(l),function x(b,u){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!u||"object"!=typeof u&&"function"!=typeof u?b:u}(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,l,c))}return function T(b,u){if("function"!=typeof u&&null!==u)throw new TypeError("Super expression must either be null or a function, not "+typeof u);b.prototype=Object.create(u&&u.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),u&&(Object.setPrototypeOf?Object.setPrototypeOf(b,u):b.__proto__=u)}(u,b),u}(a.default);o.default=M},1825:(ye,o,v)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0});var a=function d(b){return b&&b.__esModule?b:{default:b}}(v(7037)),s=v(6225),M=function(b){function u(l,c){return function f(b,u){if(!(b instanceof u))throw new TypeError("Cannot call a class as a function")}(this,u),function x(b,u){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!u||"object"!=typeof u&&"function"!=typeof u?b:u}(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,l+(0,s.mod11)(l),c))}return function T(b,u){if("function"!=typeof u&&null!==u)throw new TypeError("Super expression must either be null or a function, not "+typeof u);b.prototype=Object.create(u&&u.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),u&&(Object.setPrototypeOf?Object.setPrototypeOf(b,u):b.__proto__=u)}(u,b),u}(a.default);o.default=M},4455:(ye,o,v)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0});var a=function d(b){return b&&b.__esModule?b:{default:b}}(v(7037)),s=v(6225),M=function(b){function u(l,c){return function f(b,u){if(!(b instanceof u))throw new TypeError("Cannot call a class as a function")}(this,u),l+=(0,s.mod11)(l),l+=(0,s.mod10)(l),function x(b,u){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!u||"object"!=typeof u&&"function"!=typeof u?b:u}(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,l,c))}return function T(b,u){if("function"!=typeof u&&null!==u)throw new TypeError("Super expression must either be null or a function, not "+typeof u);b.prototype=Object.create(u&&u.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),u&&(Object.setPrototypeOf?Object.setPrototypeOf(b,u):b.__proto__=u)}(u,b),u}(a.default);o.default=M},6225:(ye,o)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.mod10=function v(a){for(var s=0,d=0;d<a.length;d++){var f=parseInt(a[d]);s+=(d+a.length)%2==0?f:2*f%10+Math.floor(2*f/10)}return(10-s%10)%10},o.mod11=function n(a){for(var s=0,d=[2,3,4,5,6,7],f=0;f<a.length;f++){var x=parseInt(a[a.length-1-f]);s+=d[f%d.length]*x}return(11-s%11)%11}},1122:(ye,o,v)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.MSI1110=o.MSI1010=o.MSI11=o.MSI10=o.MSI=void 0;var a=l(v(7037)),d=l(v(3922)),x=l(v(1825)),M=l(v(8742)),u=l(v(4455));function l(c){return c&&c.__esModule?c:{default:c}}o.MSI=a.default,o.MSI10=d.default,o.MSI11=x.default,o.MSI1010=M.default,o.MSI1110=u.default},886:(ye,o,v)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.codabar=void 0;var n=function(){function b(u,l){for(var c=0;c<l.length;c++){var e=l[c];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(u,e.key,e)}}return function(u,l,c){return l&&b(u.prototype,l),c&&b(u,c),u}}(),M=function(b){function u(l,c){(function f(b,u){if(!(b instanceof u))throw new TypeError("Cannot call a class as a function")})(this,u),0===l.search(/^[0-9\-\$\:\.\+\/]+$/)&&(l="A"+l+"A");var e=function x(b,u){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!u||"object"!=typeof u&&"function"!=typeof u?b:u}(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,l.toUpperCase(),c));return e.text=e.options.text||e.text.replace(/[A-D]/g,""),e}return function T(b,u){if("function"!=typeof u&&null!==u)throw new TypeError("Super expression must either be null or a function, not "+typeof u);b.prototype=Object.create(u&&u.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),u&&(Object.setPrototypeOf?Object.setPrototypeOf(b,u):b.__proto__=u)}(u,b),n(u,[{key:"valid",value:function(){return-1!==this.data.search(/^[A-D][0-9\-\$\:\.\+\/]+[A-D]$/)}},{key:"encode",value:function(){for(var c=[],e=this.getEncodings(),S=0;S<this.data.length;S++)c.push(e[this.data.charAt(S)]),S!==this.data.length-1&&c.push("0");return{text:this.text,data:c.join("")}}},{key:"getEncodings",value:function(){return{0:"101010011",1:"101011001",2:"101001011",3:"110010101",4:"101101001",5:"110101001",6:"100101011",7:"100101101",8:"100110101",9:"110100101","-":"101001101",$:"101100101",":":"1101011011","/":"1101101011",".":"1101101101","+":"1011011011",A:"1011001001",B:"1001001011",C:"1010010011",D:"1010011001"}}}]),u}(function d(b){return b&&b.__esModule?b:{default:b}}(v(9418)).default);o.codabar=M},4168:(ye,o,v)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0});var n=v(6602),a=v(8754),s=v(2708),d=v(8969),f=v(1122),x=v(8758),T=v(886),M=v(8817);o.default={CODE39:n.CODE39,CODE128:a.CODE128,CODE128A:a.CODE128A,CODE128B:a.CODE128B,CODE128C:a.CODE128C,EAN13:s.EAN13,EAN8:s.EAN8,EAN5:s.EAN5,EAN2:s.EAN2,UPC:s.UPC,UPCE:s.UPCE,ITF14:d.ITF14,ITF:d.ITF,MSI:f.MSI,MSI10:f.MSI10,MSI11:f.MSI11,MSI1010:f.MSI1010,MSI1110:f.MSI1110,pharmacode:x.pharmacode,codabar:T.codabar,GenericBarcode:M.GenericBarcode}},8758:(ye,o,v)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.pharmacode=void 0;var n=function(){function b(u,l){for(var c=0;c<l.length;c++){var e=l[c];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(u,e.key,e)}}return function(u,l,c){return l&&b(u.prototype,l),c&&b(u,c),u}}(),M=function(b){function u(l,c){!function f(b,u){if(!(b instanceof u))throw new TypeError("Cannot call a class as a function")}(this,u);var e=function x(b,u){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!u||"object"!=typeof u&&"function"!=typeof u?b:u}(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,l,c));return e.number=parseInt(l,10),e}return function T(b,u){if("function"!=typeof u&&null!==u)throw new TypeError("Super expression must either be null or a function, not "+typeof u);b.prototype=Object.create(u&&u.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),u&&(Object.setPrototypeOf?Object.setPrototypeOf(b,u):b.__proto__=u)}(u,b),n(u,[{key:"encode",value:function(){for(var c=this.number,e="";!isNaN(c)&&0!=c;)c%2==0?(e="11100"+e,c=(c-2)/2):(e="100"+e,c=(c-1)/2);return{data:e=e.slice(0,-2),text:this.text}}},{key:"valid",value:function(){return this.number>=3&&this.number<=131070}}]),u}(function d(b){return b&&b.__esModule?b:{default:b}}(v(9418)).default);o.pharmacode=M},3057:(ye,o)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0});var v=function(){function s(d,f){for(var x=0;x<f.length;x++){var T=f[x];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(d,T.key,T)}}return function(d,f,x){return f&&s(d.prototype,f),x&&s(d,x),d}}(),a=function(){function s(d){(function n(s,d){if(!(s instanceof d))throw new TypeError("Cannot call a class as a function")})(this,s),this.api=d}return v(s,[{key:"handleCatch",value:function(f){if("InvalidInputException"!==f.name)throw f;if(this.api._options.valid===this.api._defaults.valid)throw f.message;this.api._options.valid(!1),this.api.render=function(){}}},{key:"wrapBarcodeCall",value:function(f){try{var x=f.apply(void 0,arguments);return this.api._options.valid(!0),x}catch(T){return this.handleCatch(T),this.api}}}]),s}();o.default=a},856:(ye,o)=>{"use strict";function v(x,T){if(!(x instanceof T))throw new TypeError("Cannot call a class as a function")}function n(x,T){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!T||"object"!=typeof T&&"function"!=typeof T?x:T}function a(x,T){if("function"!=typeof T&&null!==T)throw new TypeError("Super expression must either be null or a function, not "+typeof T);x.prototype=Object.create(T&&T.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),T&&(Object.setPrototypeOf?Object.setPrototypeOf(x,T):x.__proto__=T)}Object.defineProperty(o,"__esModule",{value:!0});var s=function(x){function T(M,b){v(this,T);var u=n(this,(T.__proto__||Object.getPrototypeOf(T)).call(this));return u.name="InvalidInputException",u.symbology=M,u.input=b,u.message='"'+u.input+'" is not a valid input for '+u.symbology,u}return a(T,Error),T}(),d=function(x){function T(){v(this,T);var M=n(this,(T.__proto__||Object.getPrototypeOf(T)).call(this));return M.name="InvalidElementException",M.message="Not supported type to render on",M}return a(T,Error),T}(),f=function(x){function T(){v(this,T);var M=n(this,(T.__proto__||Object.getPrototypeOf(T)).call(this));return M.name="NoElementException",M.message="No element to render on.",M}return a(T,Error),T}();o.InvalidInputException=s,o.InvalidElementException=d,o.NoElementException=f},7164:(ye,o)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=function v(n){return n.marginTop=n.marginTop||n.margin,n.marginBottom=n.marginBottom||n.margin,n.marginRight=n.marginRight||n.margin,n.marginLeft=n.marginLeft||n.margin,n}},7020:(ye,o,v)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0});var a=f(v(4866)),d=f(v(530));function f(T){return T&&T.__esModule?T:{default:T}}o.default=function x(T){var M={};for(var b in d.default)d.default.hasOwnProperty(b)&&(T.hasAttribute("jsbarcode-"+b.toLowerCase())&&(M[b]=T.getAttribute("jsbarcode-"+b.toLowerCase())),T.hasAttribute("data-"+b.toLowerCase())&&(M[b]=T.getAttribute("data-"+b.toLowerCase())));return M.value=T.getAttribute("jsbarcode-value")||T.getAttribute("data-value"),(0,a.default)(M)}},8619:(ye,o,v)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(l){return typeof l}:function(l){return l&&"function"==typeof Symbol&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l},s=T(v(7020)),f=T(v(2233)),x=v(856);function T(l){return l&&l.__esModule?l:{default:l}}o.default=function M(l){if("string"==typeof l)return function b(l){var c=document.querySelectorAll(l);if(0!==c.length){for(var e=[],S=0;S<c.length;S++)e.push(M(c[S]));return e}}(l);if(Array.isArray(l)){for(var c=[],e=0;e<l.length;e++)c.push(M(l[e]));return c}if(typeof HTMLCanvasElement<"u"&&l instanceof HTMLImageElement)return function u(l){var c=document.createElement("canvas");return{element:c,options:(0,s.default)(l),renderer:f.default.CanvasRenderer,afterRender:function(){l.setAttribute("src",c.toDataURL())}}}(l);if(l&&l.nodeName&&"svg"===l.nodeName.toLowerCase()||typeof SVGElement<"u"&&l instanceof SVGElement)return{element:l,options:(0,s.default)(l),renderer:f.default.SVGRenderer};if(typeof HTMLCanvasElement<"u"&&l instanceof HTMLCanvasElement)return{element:l,options:(0,s.default)(l),renderer:f.default.CanvasRenderer};if(l&&l.getContext)return{element:l,renderer:f.default.CanvasRenderer};if(l&&"object"===(typeof l>"u"?"undefined":n(l))&&!l.nodeName)return{element:l,renderer:f.default.ObjectRenderer};throw new x.InvalidElementException}},1301:(ye,o)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=function v(n){var a=[];return function s(d){if(Array.isArray(d))for(var f=0;f<d.length;f++)s(d[f]);else d.text=d.text||"",d.data=d.data||"",a.push(d)}(n),a}},6017:(ye,o)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0});var v=Object.assign||function(n){for(var a=1;a<arguments.length;a++){var s=arguments[a];for(var d in s)Object.prototype.hasOwnProperty.call(s,d)&&(n[d]=s[d])}return n};o.default=function(n,a){return v({},n,a)}},4866:(ye,o)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=function v(n){var a=["width","height","textMargin","fontSize","margin","marginTop","marginBottom","marginLeft","marginRight"];for(var s in a)a.hasOwnProperty(s)&&"string"==typeof n[s=a[s]]&&(n[s]=parseInt(n[s],10));return"string"==typeof n.displayValue&&(n.displayValue="false"!=n.displayValue),n}},530:(ye,o)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default={width:2,height:100,format:"auto",displayValue:!0,fontOptions:"",font:"monospace",text:void 0,textAlign:"center",textPosition:"bottom",textMargin:2,fontSize:20,background:"#ffffff",lineColor:"#000000",margin:10,marginTop:void 0,marginBottom:void 0,marginLeft:void 0,marginRight:void 0,valid:function(){}}},1799:(ye,o,v)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function M(b,u){for(var l=0;l<u.length;l++){var c=u[l];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(b,c.key,c)}}return function(b,u,l){return u&&M(b.prototype,u),l&&M(b,l),b}}(),s=function f(M){return M&&M.__esModule?M:{default:M}}(v(6017)),d=v(4358),T=function(){function M(b,u,l){(function x(M,b){if(!(M instanceof b))throw new TypeError("Cannot call a class as a function")})(this,M),this.canvas=b,this.encodings=u,this.options=l}return n(M,[{key:"render",value:function(){if(!this.canvas.getContext)throw new Error("The browser does not support canvas.");this.prepareCanvas();for(var u=0;u<this.encodings.length;u++){var l=(0,s.default)(this.options,this.encodings[u].options);this.drawCanvasBarcode(l,this.encodings[u]),this.drawCanvasText(l,this.encodings[u]),this.moveCanvasDrawing(this.encodings[u])}this.restoreCanvas()}},{key:"prepareCanvas",value:function(){var u=this.canvas.getContext("2d");u.save(),(0,d.calculateEncodingAttributes)(this.encodings,this.options,u);var l=(0,d.getTotalWidthOfEncodings)(this.encodings),c=(0,d.getMaximumHeightOfEncodings)(this.encodings);this.canvas.width=l+this.options.marginLeft+this.options.marginRight,this.canvas.height=c,u.clearRect(0,0,this.canvas.width,this.canvas.height),this.options.background&&(u.fillStyle=this.options.background,u.fillRect(0,0,this.canvas.width,this.canvas.height)),u.translate(this.options.marginLeft,0)}},{key:"drawCanvasBarcode",value:function(u,l){var S,c=this.canvas.getContext("2d"),e=l.data;S="top"==u.textPosition?u.marginTop+u.fontSize+u.textMargin:u.marginTop,c.fillStyle=u.lineColor;for(var w=0;w<e.length;w++){var Z=w*u.width+l.barcodePadding;"1"===e[w]?c.fillRect(Z,S,u.width,u.height):e[w]&&c.fillRect(Z,S,u.width,u.height*e[w])}}},{key:"drawCanvasText",value:function(u,l){var S,w,c=this.canvas.getContext("2d");u.displayValue&&(w="top"==u.textPosition?u.marginTop+u.fontSize-u.textMargin:u.height+u.textMargin+u.marginTop+u.fontSize,c.font=u.fontOptions+" "+u.fontSize+"px "+u.font,"left"==u.textAlign||l.barcodePadding>0?(S=0,c.textAlign="left"):"right"==u.textAlign?(S=l.width-1,c.textAlign="right"):(S=l.width/2,c.textAlign="center"),c.fillText(l.text,S,w))}},{key:"moveCanvasDrawing",value:function(u){this.canvas.getContext("2d").translate(u.width,0)}},{key:"restoreCanvas",value:function(){this.canvas.getContext("2d").restore()}}]),M}();o.default=T},2233:(ye,o,v)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0});var a=T(v(1799)),d=T(v(5794)),x=T(v(1138));function T(M){return M&&M.__esModule?M:{default:M}}o.default={CanvasRenderer:a.default,SVGRenderer:d.default,ObjectRenderer:x.default}},1138:(ye,o)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0});var v=function(){function s(d,f){for(var x=0;x<f.length;x++){var T=f[x];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(d,T.key,T)}}return function(d,f,x){return f&&s(d.prototype,f),x&&s(d,x),d}}(),a=function(){function s(d,f,x){(function n(s,d){if(!(s instanceof d))throw new TypeError("Cannot call a class as a function")})(this,s),this.object=d,this.encodings=f,this.options=x}return v(s,[{key:"render",value:function(){this.object.encodings=this.encodings}}]),s}();o.default=a},4358:(ye,o,v)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.getTotalWidthOfEncodings=o.calculateEncodingAttributes=o.getBarcodePadding=o.getEncodingHeight=o.getMaximumHeightOfEncodings=void 0;var a=function s(u){return u&&u.__esModule?u:{default:u}}(v(6017));function d(u,l){return l.height+(l.displayValue&&u.text.length>0?l.fontSize+l.textMargin:0)+l.marginTop+l.marginBottom}function f(u,l,c){if(c.displayValue&&l<u){if("center"==c.textAlign)return Math.floor((u-l)/2);if("left"==c.textAlign)return 0;if("right"==c.textAlign)return Math.floor(u-l)}return 0}function b(u,l,c){var e;if(c)e=c;else{if(!(typeof document<"u"))return 0;e=document.createElement("canvas").getContext("2d")}e.font=l.fontOptions+" "+l.fontSize+"px "+l.font;var S=e.measureText(u);return S?S.width:0}o.getMaximumHeightOfEncodings=function M(u){for(var l=0,c=0;c<u.length;c++)u[c].height>l&&(l=u[c].height);return l},o.getEncodingHeight=d,o.getBarcodePadding=f,o.calculateEncodingAttributes=function x(u,l,c){for(var e=0;e<u.length;e++){var Z,S=u[e],w=(0,a.default)(l,S.options);Z=w.displayValue?b(S.text,w,c):0;var U=S.data.length*w.width;S.width=Math.ceil(Math.max(Z,U)),S.height=d(S,w),S.barcodePadding=f(Z,U,w)}},o.getTotalWidthOfEncodings=function T(u){for(var l=0,c=0;c<u.length;c++)l+=u[c].width;return l}},5794:(ye,o,v)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function b(u,l){for(var c=0;c<l.length;c++){var e=l[c];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(u,e.key,e)}}return function(u,l,c){return l&&b(u.prototype,l),c&&b(u,c),u}}(),s=function f(b){return b&&b.__esModule?b:{default:b}}(v(6017)),d=v(4358),T="http://www.w3.org/2000/svg",M=function(){function b(u,l,c){(function x(b,u){if(!(b instanceof u))throw new TypeError("Cannot call a class as a function")})(this,b),this.svg=u,this.encodings=l,this.options=c,this.document=c.xmlDocument||document}return n(b,[{key:"render",value:function(){var l=this.options.marginLeft;this.prepareSVG();for(var c=0;c<this.encodings.length;c++){var e=this.encodings[c],S=(0,s.default)(this.options,e.options),w=this.createGroup(l,S.marginTop,this.svg);this.setGroupOptions(w,S),this.drawSvgBarcode(w,S,e),this.drawSVGText(w,S,e),l+=e.width}}},{key:"prepareSVG",value:function(){for(;this.svg.firstChild;)this.svg.removeChild(this.svg.firstChild);(0,d.calculateEncodingAttributes)(this.encodings,this.options);var l=(0,d.getTotalWidthOfEncodings)(this.encodings),c=(0,d.getMaximumHeightOfEncodings)(this.encodings),e=l+this.options.marginLeft+this.options.marginRight;this.setSvgAttributes(e,c),this.options.background&&this.drawRect(0,0,e,c,this.svg).setAttribute("style","fill:"+this.options.background+";")}},{key:"drawSvgBarcode",value:function(l,c,e){var w,S=e.data;w="top"==c.textPosition?c.fontSize+c.textMargin:0;for(var Z=0,U=0,F=0;F<S.length;F++)U=F*c.width+e.barcodePadding,"1"===S[F]?Z++:Z>0&&(this.drawRect(U-c.width*Z,w,c.width*Z,c.height,l),Z=0);Z>0&&this.drawRect(U-c.width*(Z-1),w,c.width*Z,c.height,l)}},{key:"drawSVGText",value:function(l,c,e){var w,Z,S=this.document.createElementNS(T,"text");c.displayValue&&(S.setAttribute("style","font:"+c.fontOptions+" "+c.fontSize+"px "+c.font),Z="top"==c.textPosition?c.fontSize-c.textMargin:c.height+c.textMargin+c.fontSize,"left"==c.textAlign||e.barcodePadding>0?(w=0,S.setAttribute("text-anchor","start")):"right"==c.textAlign?(w=e.width-1,S.setAttribute("text-anchor","end")):(w=e.width/2,S.setAttribute("text-anchor","middle")),S.setAttribute("x",w),S.setAttribute("y",Z),S.appendChild(this.document.createTextNode(e.text)),l.appendChild(S))}},{key:"setSvgAttributes",value:function(l,c){var e=this.svg;e.setAttribute("width",l+"px"),e.setAttribute("height",c+"px"),e.setAttribute("x","0px"),e.setAttribute("y","0px"),e.setAttribute("viewBox","0 0 "+l+" "+c),e.setAttribute("xmlns",T),e.setAttribute("version","1.1"),e.setAttribute("style","transform: translate(0,0)")}},{key:"createGroup",value:function(l,c,e){var S=this.document.createElementNS(T,"g");return S.setAttribute("transform","translate("+l+", "+c+")"),e.appendChild(S),S}},{key:"setGroupOptions",value:function(l,c){l.setAttribute("style","fill:"+c.lineColor+";")}},{key:"drawRect",value:function(l,c,e,S,w){var Z=this.document.createElementNS(T,"rect");return Z.setAttribute("x",l),Z.setAttribute("y",c),Z.setAttribute("width",e),Z.setAttribute("height",S),w.appendChild(Z),Z}}]),b}();o.default=M}}]);