"use strict";(self.webpackChunkseller=self.webpackChunkseller||[]).push([[406],{2406:(eA,Z,a)=>{a.r(Z),a.d(Z,{PurchaseModule:()=>Wn});var l=a(177),x=a(9909),D=a(2180),T=a(4412),$=a(5964),E=a(5558),u=a(9437),m=a(983),p=a(4153),e=a(4438),d=a(5779),N=a(345),v=a(1141),f=a(544),S=a(9998);const xe=()=>["/purchase/edit"],Ee=()=>({"min-width":"75rem"}),Se=()=>[10,25,50],Ne=()=>["name","date"],q=g=>({id:g}),ke=g=>["summary",g],De=g=>["edit",g];function Ge(g,A){1&g&&(e.j41(0,"tr")(1,"th"),e.EFF(2," \u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 "),e.k0s(),e.j41(3,"th",6),e.EFF(4,"\u0414\u0430\u0442\u0430 "),e.nrm(5,"p-sortIcon",7),e.k0s(),e.j41(6,"th"),e.EFF(7,"\u0421\u0442\u0430\u0442\u0443\u0441"),e.k0s(),e.j41(8,"th"),e.EFF(9,"\u0422\u043e\u0432\u0430\u0440\u044b"),e.k0s(),e.nrm(10,"th"),e.k0s(),e.j41(11,"tr")(12,"th"),e.nrm(13,"p-columnFilter",8),e.k0s(),e.nrm(14,"th")(15,"th"),e.j41(16,"th"),e.nrm(17,"p-columnFilter",9),e.k0s(),e.nrm(18,"th"),e.k0s()),2&g&&(e.R7$(13),e.Y8G("showMatchModes",!1)("showOperator",!1),e.R7$(4),e.Y8G("showMatchModes",!1)("showOperator",!1))}function Fe(g,A){if(1&g&&(e.j41(0,"li"),e.EFF(1),e.k0s()),2&g){const t=A.$implicit;e.R7$(),e.SpI(" ",t.value.name," ")}}function we(g,A){if(1&g&&(e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.nI1(5,"date"),e.k0s(),e.j41(6,"td"),e.EFF(7),e.k0s(),e.j41(8,"td")(9,"ul"),e.DNE(10,Fe,2,1,"li",10),e.nI1(11,"keyvalue"),e.k0s()(),e.j41(12,"td"),e.nrm(13,"p-button",11)(14,"p-button",12),e.k0s()()),2&g){const t=A.$implicit;e.R7$(2),e.JRh(t.name),e.R7$(2),e.JRh(e.i5U(5,6,t.date,"y-MM-dd")),e.R7$(3),e.JRh(t.status),e.R7$(3),e.Y8G("ngForOf",e.bMT(11,9,t.products)),e.R7$(3),e.Y8G("routerLink",e.eq3(13,ke,e.eq3(11,q,t.iD))),e.R7$(),e.Y8G("routerLink",e.eq3(17,De,e.eq3(15,q,t.iD)))}}function je(g,A){if(1&g){const t=e.RV6();e.j41(0,"p-table",3,0),e.bIt("onLazyLoad",function(I){e.eBV(t);const n=e.XpG();return e.Njj(n.onDataLazyLoad(I))}),e.DNE(2,Ge,19,4,"ng-template",4)(3,we,15,19,"ng-template",5),e.k0s()}if(2&g){const t=e.XpG();e.Y8G("value",t.data)("lazy",!0)("tableStyle",e.lJ4(9,Ee))("paginator",!0)("rows",10)("rowsPerPageOptions",e.lJ4(10,Se))("totalRecords",t.totalRecords)("loading",t.loading)("globalFilterFields",e.lJ4(11,Ne))}}let Re=(()=>{class g extends D.x{constructor(t,C,I){super(I),this.productBatchService=t,this.messageService=C,this.loading=!0,this.totalRecords=0,this.purchaseFilterSubject=new T.t(null)}ngOnInit(){this.titleService.setTitle("\u0423\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0437\u0430\u043a\u0443\u043f\u043a\u0430\u043c\u0438"),this.purchaseFilterSubject.pipe((0,$.p)(t=>!!t)).pipe((0,E.n)(t=>this.productBatchService.findPurchaseBatches(t).pipe((0,u.W)(C=>(this.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0441\u043f\u0438\u0441\u043a\u0430 \u0437\u0430\u043a\u0443\u043f\u043e\u043a",severity:"error",detail:C}),this.loading=!1,m.w))))).subscribe(t=>{this.data=t.items.map(C=>{const I=C;return I.products=C.items.reduce((n,i)=>i.salesItems.reduce((o,s)=>o.set(s.productPackageID,s.productPackage),n),new Map),I}),this.totalRecords=t.totalCount,this.loading=!1}),this.purchaseFilterSubject.next(new p.D.FindPurchaseBatchesModel({count:0,offset:0}))}onDataLazyLoad(t){const C=new p.D.FindPurchaseBatchesModel({offset:t.first,count:t.rows});this.fillFilterModel(C,t.filters),this.purchaseFilterSubject.next(C)}onDateFilter(t,C){C(this.dateFilter)}fillFilterModel(t,C){t.name=C.name?.value,t.dateFrom=C.date?.[0]?.value?.[0],t.dateTo=C.date?.[0]?.value?.[1],t.article=C.article?.value||null}static{this.\u0275fac=function(C){return new(C||g)(e.rXU(p.D.PurchaseBatchClient),e.rXU(d.bg),e.rXU(N.hE))}}static{this.\u0275cmp=e.VBU({type:g,selectors:[["app-purchase-list"]],features:[e.Vt3],decls:6,vars:3,consts:[["dataTable",""],[3,"routerLink"],["dataKey","iD",3,"value","lazy","tableStyle","paginator","rows","rowsPerPageOptions","totalRecords","loading","globalFilterFields","onLazyLoad",4,"ngIf"],["dataKey","iD",3,"onLazyLoad","value","lazy","tableStyle","paginator","rows","rowsPerPageOptions","totalRecords","loading","globalFilterFields"],["pTemplate","header"],["pTemplate","body"],["pSortableColumn","date"],["field","date"],["field","name","matchMode","contains",3,"showMatchModes","showOperator"],["field","article","matchMode","containsKey",3,"showMatchModes","showOperator"],[4,"ngFor","ngForOf"],["icon","pi pi-dollar",3,"routerLink"],["icon","pi pi-pencil",3,"routerLink"]],template:function(C,I){1&C&&(e.nrm(0,"p-toast"),e.j41(1,"h1"),e.EFF(2,"\u0417\u0430\u043a\u0443\u043f\u043a\u0438"),e.k0s(),e.j41(3,"p-button",1),e.EFF(4,"\u041d\u043e\u0432\u0430\u044f"),e.k0s(),e.DNE(5,je,4,12,"p-table",2)),2&C&&(e.R7$(3),e.Y8G("routerLink",e.lJ4(2,xe)),e.R7$(2),e.Y8G("ngIf",I.data))},dependencies:[d.Ei,v.$n,l.Sq,l.bT,x.Wk,f.XI,f.Tg,f.yc,f.rl,S.y8,l.vh,l.lG]})}}return g})();var ee=a(1413),G=a(6977),F=a(6557),te=a(8141);let w=(()=>{class g{constructor(t,C,I,n){this.packageTypeClient=t,this.packageTypeCommandHandlerClient=C,this.messageService=I,this.purchaseClient=n,this.packageTypes=new T.t([]),this.packageTypeClient.getPackageTypes().pipe((0,u.W)(i=>(this.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0441\u043f\u0438\u0441\u043a\u0430 \u0442\u0438\u043f\u043e\u0432 \u0443\u043f\u0430\u043a\u043e\u0432\u043a\u0438",severity:"error",detail:i}),m.w))).subscribe(i=>{this.packageTypes.next(i)})}getBatch(t){return this.purchaseClient.getPurchaseBatch(t)}getSalesPlanSelfCost(t,C,I,n=!0){const i=this.getSalesItemCosts(t),o=n?this.getSalesPlanCommission(C):0,s=+C.returnCost*+C.returnPercentage/100,_=C.amount?+C.marketingBudget/C.amount:0,c=C.amount?Math.ceil(100*+C.deliveryCost/+C.amount)/100:0;return I.price+i+s+o+c+_}getPackageTypes(){return this.packageTypes.value}getPackageType(t){return this.packageTypes.value.find(C=>C.iD==t)}getSalesItemCosts(t){let C=0;for(const I of t.salesItemPackages)C+=Math.ceil(I.pricePerUom*I.amount*100)/100;return C+=t.packagingPrice,C=Math.ceil(100*C)/100,C}getSalesPlanCommission(t){return Math.ceil(+t.commissionMultiplier*+t.price)/100+ +t.commissionAddition}calcPlans(){this.purchaseClient.calcSalesPlans().pipe((0,u.W)(t=>(this.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0441\u043f\u0438\u0441\u043a\u0430 \u0442\u0438\u043f\u043e\u0432 \u0443\u043f\u0430\u043a\u043e\u0432\u043a\u0438",severity:"error",detail:t}),m.w))).subscribe(()=>{this.messageService.add({summary:"\u0423\u0441\u043f\u0435\u0445",severity:"success",detail:"\u041f\u0435\u0440\u0435\u0440\u0430\u0441\u0447\u0451\u0442 \u043f\u043b\u0430\u043d\u043e\u0432 \u043f\u0440\u043e\u0434\u0430\u0436 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0432\u0435\u0440\u0448\u0451\u043d"})})}getSalesPlansSummaries(t){return this.purchaseClient.getSalesPlansSummaries(t)}addPackageType(t){return this.packageTypeCommandHandlerClient.addPackageType(t)}updatePackageType(t){return this.packageTypeCommandHandlerClient.updatePackageType(t).pipe((0,te.M)(()=>{this.packageTypes.next(this.packageTypes.value.map(C=>C.iD==t.iD?t:C))}))}removePackageType(t){return this.packageTypeCommandHandlerClient.removePackageType(t).pipe((0,te.M)(()=>{this.packageTypes.next(this.packageTypes.value.filter(C=>C.iD!=t))}))}static{this.\u0275fac=function(C){return new(C||g)(e.KVO(p.D.PackageTypeClient),e.KVO(F.X.PackageTypeClient),e.KVO(d.bg),e.KVO(p.D.PurchaseBatchClient))}}static{this.\u0275prov=e.jDH({token:g,factory:g.\u0275fac,providedIn:"root"})}}return g})();var O=a(2637),ge=a(8537),Ce=a(612),U=a(6781),j=a(8833),h=a(9417),R=a(1802),L=a(2242),r=a(1455),Ie=a(8148),P=a(8807),M=a(1512),k=a(563),ne=a(8542),y=a(4420);const Ae=["*"];function Pe(g,A){1&g&&e.eu8(0)}function Me(g,A){if(1&g&&(e.qex(0),e.DNE(1,Pe,1,0,"ng-container",3),e.bVm()),2&g){const t=e.XpG(2);e.R7$(),e.Y8G("ngTemplateOutlet",t.contentTemplate)}}function Be(g,A){if(1&g&&(e.j41(0,"div",1),e.SdG(1),e.DNE(2,Me,2,1,"ng-container",2),e.k0s()),2&g){const t=e.XpG();e.Y8G("hidden",!t.selected),e.BMQ("id",t.tabView.getTabContentId(t.id))("aria-hidden",!t.selected)("aria-labelledby",t.tabView.getTabHeaderActionId(t.id))("data-pc-name","tabpanel"),e.R7$(2),e.Y8G("ngIf",t.contentTemplate&&(t.cache?t.loaded:t.selected))}}const Ve=["content"],Ye=["navbar"],Xe=["prevBtn"],$e=["nextBtn"],Oe=["inkbar"],Ue=["elementToObserve"],Le=g=>({"p-tabview p-component":!0,"p-tabview-scrollable":g}),He=(g,A)=>({"p-highlight":g,"p-disabled":A});function ze(g,A){1&g&&e.nrm(0,"ChevronLeftIcon"),2&g&&e.BMQ("aria-hidden",!0)}function Ke(g,A){}function Qe(g,A){1&g&&e.DNE(0,Ke,0,0,"ng-template")}function We(g,A){if(1&g){const t=e.RV6();e.j41(0,"button",15,4),e.bIt("click",function(){e.eBV(t);const I=e.XpG();return e.Njj(I.navBackward())}),e.DNE(2,ze,1,1,"ChevronLeftIcon",16)(3,Qe,1,0,null,17),e.k0s()}if(2&g){const t=e.XpG();e.BMQ("tabindex",t.tabindex)("aria-label",t.prevButtonAriaLabel),e.R7$(2),e.Y8G("ngIf",!t.previousIconTemplate),e.R7$(),e.Y8G("ngTemplateOutlet",t.previousIconTemplate)}}function Je(g,A){if(1&g&&e.nrm(0,"span",26),2&g){const t=e.XpG(3).$implicit;e.Y8G("ngClass",t.leftIcon)}}function Ze(g,A){}function qe(g,A){1&g&&e.DNE(0,Ze,0,0,"ng-template")}function et(g,A){if(1&g&&(e.j41(0,"span",27),e.DNE(1,qe,1,0,null,17),e.k0s()),2&g){const t=e.XpG(3).$implicit;e.R7$(),e.Y8G("ngTemplateOutlet",t.leftIconTemplate)}}function tt(g,A){if(1&g&&e.nrm(0,"span",28),2&g){const t=e.XpG(3).$implicit;e.Y8G("ngClass",t.rightIcon)}}function gt(g,A){}function Ct(g,A){1&g&&e.DNE(0,gt,0,0,"ng-template")}function It(g,A){if(1&g&&(e.j41(0,"span",29),e.DNE(1,Ct,1,0,null,17),e.k0s()),2&g){const t=e.XpG(3).$implicit;e.R7$(),e.Y8G("ngTemplateOutlet",t.rightIconTemplate)}}function nt(g,A){if(1&g&&(e.qex(0),e.DNE(1,Je,1,1,"span",21)(2,et,2,1,"span",22),e.j41(3,"span",23),e.EFF(4),e.k0s(),e.DNE(5,tt,1,1,"span",24)(6,It,2,1,"span",25),e.bVm()),2&g){const t=e.XpG(2).$implicit;e.R7$(),e.Y8G("ngIf",t.leftIcon&&!t.leftIconTemplate),e.R7$(),e.Y8G("ngIf",t.leftIconTemplate),e.R7$(2),e.JRh(t.header),e.R7$(),e.Y8G("ngIf",t.rightIcon&&!t.rightIconTemplate),e.R7$(),e.Y8G("ngIf",t.rightIconTemplate)}}function At(g,A){1&g&&e.eu8(0)}function it(g,A){if(1&g){const t=e.RV6();e.j41(0,"TimesIcon",32),e.bIt("click",function(I){e.eBV(t);const n=e.XpG(3).$implicit,i=e.XpG();return e.Njj(i.close(I,n))}),e.k0s()}2&g&&e.Y8G("styleClass","p-tabview-close")}function ot(g,A){1&g&&e.nrm(0,"span",33)}function at(g,A){}function lt(g,A){1&g&&e.DNE(0,at,0,0,"ng-template")}function rt(g,A){if(1&g&&(e.qex(0),e.DNE(1,it,1,1,"TimesIcon",30)(2,ot,1,0,"span",31)(3,lt,1,0,null,17),e.bVm()),2&g){const t=e.XpG(2).$implicit;e.R7$(),e.Y8G("ngIf",!t.closeIconTemplate),e.R7$(),e.Y8G("ngIf",t.closeIconTemplate),e.R7$(),e.Y8G("ngTemplateOutlet",t.closeIconTemplate)}}function st(g,A){if(1&g){const t=e.RV6();e.j41(0,"li",19)(1,"a",20),e.bIt("click",function(I){e.eBV(t);const n=e.XpG().$implicit,i=e.XpG();return e.Njj(i.open(I,n))})("keydown",function(I){e.eBV(t);const n=e.XpG().$implicit,i=e.XpG();return e.Njj(i.onTabKeyDown(I,n))}),e.DNE(2,nt,7,5,"ng-container",16)(3,At,1,0,"ng-container",17)(4,rt,4,3,"ng-container",16),e.k0s()()}if(2&g){const t=e.XpG(),C=t.$implicit,I=t.index,n=e.XpG();e.HbH(C.headerStyleClass),e.Y8G("ngClass",e.l_i(19,He,C.selected,C.disabled))("ngStyle",C.headerStyle),e.BMQ("data-p-disabled",C.disabled),e.R7$(),e.Y8G("pTooltip",C.tooltip)("tooltipPosition",C.tooltipPosition)("positionStyle",C.tooltipPositionStyle)("tooltipStyleClass",C.tooltipStyleClass),e.BMQ("id",n.getTabHeaderActionId(C.id))("aria-controls",n.getTabContentId(C.id))("aria-selected",C.selected)("tabindex",C.disabled||!C.selected?"-1":n.tabindex)("aria-disabled",C.disabled)("data-pc-index",I)("data-pc-section","headeraction"),e.R7$(),e.Y8G("ngIf",!C.headerTemplate),e.R7$(),e.Y8G("ngTemplateOutlet",C.headerTemplate),e.R7$(),e.Y8G("ngIf",C.closable)}}function ct(g,A){1&g&&e.DNE(0,st,5,22,"li",18),2&g&&e.Y8G("ngIf",!A.$implicit.closed)}function pt(g,A){1&g&&e.nrm(0,"ChevronRightIcon"),2&g&&e.BMQ("aria-hidden",!0)}function dt(g,A){}function _t(g,A){1&g&&e.DNE(0,dt,0,0,"ng-template")}function ut(g,A){if(1&g){const t=e.RV6();e.j41(0,"button",34,5),e.bIt("click",function(){e.eBV(t);const I=e.XpG();return e.Njj(I.navForward())}),e.DNE(2,pt,1,1,"ChevronRightIcon",16)(3,_t,1,0,null,17),e.k0s()}if(2&g){const t=e.XpG();e.BMQ("tabindex",t.tabindex)("aria-label",t.nextButtonAriaLabel),e.R7$(2),e.Y8G("ngIf",!t.nextIconTemplate),e.R7$(),e.Y8G("ngTemplateOutlet",t.nextIconTemplate)}}let ie=(()=>{class g{el;viewContainer;cd;closable=!1;get headerStyle(){return this._headerStyle}set headerStyle(t){this._headerStyle=t,this.tabView.cd.markForCheck()}get headerStyleClass(){return this._headerStyleClass}set headerStyleClass(t){this._headerStyleClass=t,this.tabView.cd.markForCheck()}cache=!0;tooltip;tooltipPosition="top";tooltipPositionStyle="absolute";tooltipStyleClass;get selected(){return!!this._selected}set selected(t){this._selected=t,this.loaded||this.cd.detectChanges(),t&&(this.loaded=!0)}get disabled(){return!!this._disabled}set disabled(t){this._disabled=t,this.tabView.cd.markForCheck()}get header(){return this._header}set header(t){this._header=t,Promise.resolve().then(()=>{this.tabView.updateInkBar(),this.tabView.cd.markForCheck()})}get leftIcon(){return this._leftIcon}set leftIcon(t){this._leftIcon=t,this.tabView.cd.markForCheck()}get rightIcon(){return this._rightIcon}set rightIcon(t){this._rightIcon=t,this.tabView.cd.markForCheck()}templates;closed=!1;view=null;_headerStyle;_headerStyleClass;_selected;_disabled;_header;_leftIcon;_rightIcon=void 0;loaded=!1;id;contentTemplate;headerTemplate;leftIconTemplate;rightIconTemplate;closeIconTemplate;tabView;constructor(t,C,I,n){this.el=C,this.viewContainer=I,this.cd=n,this.tabView=t,this.id=(0,y._Y)()}ngAfterContentInit(){this.templates.forEach(t=>{switch(t.getType()){case"header":this.headerTemplate=t.template;break;case"content":default:this.contentTemplate=t.template;break;case"righticon":this.rightIconTemplate=t.template;break;case"lefticon":this.leftIconTemplate=t.template;break;case"closeicon":this.closeIconTemplate=t.template}})}ngOnDestroy(){this.view=null}static \u0275fac=function(C){return new(C||g)(e.rXU((0,e.Rfq)(()=>oe)),e.rXU(e.aKT),e.rXU(e.c1b),e.rXU(e.gRc))};static \u0275cmp=e.VBU({type:g,selectors:[["p-tabPanel"]],contentQueries:function(C,I,n){if(1&C&&e.wni(n,d.Ei,4),2&C){let i;e.mGM(i=e.lsd())&&(I.templates=i)}},hostAttrs:[1,"p-element"],inputs:{closable:[2,"closable","closable",e.L39],headerStyle:"headerStyle",headerStyleClass:"headerStyleClass",cache:[2,"cache","cache",e.L39],tooltip:"tooltip",tooltipPosition:"tooltipPosition",tooltipPositionStyle:"tooltipPositionStyle",tooltipStyleClass:"tooltipStyleClass",selected:"selected",disabled:"disabled",header:"header",leftIcon:"leftIcon",rightIcon:"rightIcon"},features:[e.GFd],ngContentSelectors:Ae,decls:1,vars:1,consts:[["class","p-tabview-panel","role","tabpanel",3,"hidden",4,"ngIf"],["role","tabpanel",1,"p-tabview-panel",3,"hidden"],[4,"ngIf"],[4,"ngTemplateOutlet"]],template:function(C,I){1&C&&(e.NAR(),e.DNE(0,Be,3,6,"div",0)),2&C&&e.Y8G("ngIf",!I.closed)},dependencies:[l.bT,l.T3],encapsulation:2})}return g})(),oe=(()=>{class g{platformId;el;cd;renderer;style;styleClass;controlClose;scrollable;get activeIndex(){return this._activeIndex}set activeIndex(t){this._activeIndex=t,this.preventActiveIndexPropagation?this.preventActiveIndexPropagation=!1:this.tabs&&this.tabs.length&&null!=this._activeIndex&&this.tabs.length>this._activeIndex&&(this.findSelectedTab().selected=!1,this.tabs[this._activeIndex].selected=!0,this.tabChanged=!0,this.updateScrollBar(t))}selectOnFocus=!1;nextButtonAriaLabel;prevButtonAriaLabel;autoHideButtons=!0;tabindex=0;onChange=new e.bkB;onClose=new e.bkB;activeIndexChange=new e.bkB;content;navbar;prevBtn;nextBtn;inkbar;tabPanels;templates;initialized;tabs;_activeIndex;preventActiveIndexPropagation;tabChanged;backwardIsDisabled=!0;forwardIsDisabled=!1;tabChangesSubscription;nextIconTemplate;previousIconTemplate;resizeObserver;container;list;buttonVisible;elementToObserve;constructor(t,C,I,n){this.platformId=t,this.el=C,this.cd=I,this.renderer=n}ngAfterContentInit(){this.initTabs(),this.tabChangesSubscription=this.tabPanels.changes.subscribe(t=>{this.initTabs(),this.refreshButtonState(),this.callResizeObserver()}),this.templates.forEach(t=>{switch(t.getType()){case"previousicon":this.previousIconTemplate=t.template;break;case"nexticon":this.nextIconTemplate=t.template}})}callResizeObserver(){(0,l.UE)(this.platformId)&&this.autoHideButtons&&this.bindResizeObserver()}ngAfterViewInit(){this.callResizeObserver()}bindResizeObserver(){this.container=r.D.findSingle(this.el.nativeElement,'[data-pc-section="navcontent"]'),this.list=r.D.findSingle(this.el.nativeElement,'[data-pc-section="nav"]'),this.resizeObserver=new ResizeObserver(()=>{this.buttonVisible=this.list.offsetWidth>=this.container.offsetWidth,this.updateButtonState(),this.cd.detectChanges()}),this.resizeObserver.observe(this.container)}unbindResizeObserver(){this.resizeObserver.unobserve(this.elementToObserve.nativeElement),this.resizeObserver=null}ngAfterViewChecked(){(0,l.UE)(this.platformId)&&this.tabChanged&&(this.updateInkBar(),this.tabChanged=!1)}ngOnDestroy(){this.tabChangesSubscription&&this.tabChangesSubscription.unsubscribe(),this.resizeObserver&&this.unbindResizeObserver()}getTabHeaderActionId(t){return`${t}_header_action`}getTabContentId(t){return`${t}_content`}initTabs(){this.tabs=this.tabPanels.toArray(),!this.findSelectedTab()&&this.tabs.length&&(null!=this.activeIndex&&this.tabs.length>this.activeIndex?this.tabs[this.activeIndex].selected=!0:this.tabs[0].selected=!0,this.tabChanged=!0),this.cd.markForCheck()}onTabKeyDown(t,C){switch(t.code){case"ArrowLeft":this.onTabArrowLeftKey(t);break;case"ArrowRight":this.onTabArrowRightKey(t);break;case"Home":case"PageUp":this.onTabHomeKey(t);break;case"End":case"PageDown":this.onTabEndKey(t);break;case"Enter":case"Space":this.open(t,C)}}onTabArrowLeftKey(t){const C=this.findPrevHeaderAction(t.target.parentElement),I=r.D.getAttribute(C,"data-pc-index");C?this.changeFocusedTab(t,C,I):this.onTabEndKey(t),t.preventDefault()}onTabArrowRightKey(t){const C=this.findNextHeaderAction(t.target.parentElement),I=r.D.getAttribute(C,"data-pc-index");C?this.changeFocusedTab(t,C,I):this.onTabHomeKey(t),t.preventDefault()}onTabHomeKey(t){const C=this.findFirstHeaderAction(),I=r.D.getAttribute(C,"data-pc-index");this.changeFocusedTab(t,C,I),t.preventDefault()}onTabEndKey(t){const C=this.findLastHeaderAction(),I=r.D.getAttribute(C,"data-pc-index");this.changeFocusedTab(t,C,I),t.preventDefault()}changeFocusedTab(t,C,I){C&&(r.D.focus(C),C.scrollIntoView({block:"nearest"}),this.selectOnFocus)&&this.open(t,this.tabs[I])}findNextHeaderAction(t,C=!1){const I=C?t:t.nextElementSibling;return I?r.D.getAttribute(I,"data-p-disabled")||"inkbar"===r.D.getAttribute(I,"data-pc-section")?this.findNextHeaderAction(I):r.D.findSingle(I,'[data-pc-section="headeraction"]'):null}findPrevHeaderAction(t,C=!1){const I=C?t:t.previousElementSibling;return I?r.D.getAttribute(I,"data-p-disabled")||"inkbar"===r.D.getAttribute(I,"data-pc-section")?this.findPrevHeaderAction(I):r.D.findSingle(I,'[data-pc-section="headeraction"]'):null}findFirstHeaderAction(){return this.findNextHeaderAction(this.navbar.nativeElement.firstElementChild,!0)}findLastHeaderAction(){const t=this.navbar.nativeElement.lastElementChild,C="inkbar"===r.D.getAttribute(t,"data-pc-section")?t.previousElementSibling:t;return this.findPrevHeaderAction(C,!0)}open(t,C){if(C.disabled)t&&t.preventDefault();else{if(!C.selected){let I=this.findSelectedTab();I&&(I.selected=!1),this.tabChanged=!0,C.selected=!0;let n=this.findTabIndex(C);this.preventActiveIndexPropagation=!0,this.activeIndexChange.emit(n),this.onChange.emit({originalEvent:t,index:n}),this.updateScrollBar(n)}t&&t.preventDefault()}}close(t,C){this.controlClose?this.onClose.emit({originalEvent:t,index:this.findTabIndex(C),close:()=>{this.closeTab(C)}}):(this.closeTab(C),this.onClose.emit({originalEvent:t,index:this.findTabIndex(C)}))}closeTab(t){if(!t.disabled){if(t.selected){this.tabChanged=!0,t.selected=!1;for(let C=0;C<this.tabs.length;C++){let I=this.tabs[C];if(!I.closed&&!t.disabled&&I!=t){I.selected=!0;break}}}t.closed=!0,setTimeout(()=>{this.updateInkBar()})}}findSelectedTab(){for(let t=0;t<this.tabs.length;t++)if(this.tabs[t].selected)return this.tabs[t];return null}findTabIndex(t){let C=-1;for(let I=0;I<this.tabs.length;I++)if(this.tabs[I]==t){C=I;break}return C}getBlockableElement(){return this.el.nativeElement.children[0]}updateInkBar(){if((0,l.UE)(this.platformId)&&this.navbar){const t=r.D.findSingle(this.navbar.nativeElement,"li.p-highlight");if(!t)return;this.inkbar.nativeElement.style.width=r.D.getWidth(t)+"px",this.inkbar.nativeElement.style.left=r.D.getOffset(t).left-r.D.getOffset(this.navbar.nativeElement).left+"px"}}updateScrollBar(t){let C=this.navbar.nativeElement.children[t];C&&C.scrollIntoView({block:"nearest"})}updateButtonState(){const t=this.content.nativeElement,{scrollLeft:C,scrollWidth:I}=t,n=r.D.getWidth(t);this.backwardIsDisabled=0===C,this.forwardIsDisabled=Math.round(C)===I-n}refreshButtonState(){this.container=r.D.findSingle(this.el.nativeElement,'[data-pc-section="navcontent"]'),this.list=r.D.findSingle(this.el.nativeElement,'[data-pc-section="nav"]'),this.list.offsetWidth>=this.container.offsetWidth&&(this.buttonVisible=this.list.offsetWidth>=this.container.offsetWidth,this.updateButtonState(),this.cd.markForCheck())}onScroll(t){this.scrollable&&this.updateButtonState(),t.preventDefault()}getVisibleButtonWidths(){return[this.prevBtn?.nativeElement,this.nextBtn?.nativeElement].reduce((t,C)=>C?t+r.D.getWidth(C):t,0)}navBackward(){const t=this.content.nativeElement,C=r.D.getWidth(t)-this.getVisibleButtonWidths(),I=t.scrollLeft-C;t.scrollLeft=I<=0?0:I}navForward(){const t=this.content.nativeElement,C=r.D.getWidth(t)-this.getVisibleButtonWidths(),I=t.scrollLeft+C,n=t.scrollWidth-C;t.scrollLeft=I>=n?n:I}static \u0275fac=function(C){return new(C||g)(e.rXU(e.Agw),e.rXU(e.aKT),e.rXU(e.gRc),e.rXU(e.sFG))};static \u0275cmp=e.VBU({type:g,selectors:[["p-tabView"]],contentQueries:function(C,I,n){if(1&C&&(e.wni(n,ie,4),e.wni(n,d.Ei,4)),2&C){let i;e.mGM(i=e.lsd())&&(I.tabPanels=i),e.mGM(i=e.lsd())&&(I.templates=i)}},viewQuery:function(C,I){if(1&C&&(e.GBs(Ve,5),e.GBs(Ye,5),e.GBs(Xe,5),e.GBs($e,5),e.GBs(Oe,5),e.GBs(Ue,5)),2&C){let n;e.mGM(n=e.lsd())&&(I.content=n.first),e.mGM(n=e.lsd())&&(I.navbar=n.first),e.mGM(n=e.lsd())&&(I.prevBtn=n.first),e.mGM(n=e.lsd())&&(I.nextBtn=n.first),e.mGM(n=e.lsd())&&(I.inkbar=n.first),e.mGM(n=e.lsd())&&(I.elementToObserve=n.first)}},hostAttrs:[1,"p-element"],inputs:{style:"style",styleClass:"styleClass",controlClose:[2,"controlClose","controlClose",e.L39],scrollable:[2,"scrollable","scrollable",e.L39],activeIndex:"activeIndex",selectOnFocus:[2,"selectOnFocus","selectOnFocus",e.L39],nextButtonAriaLabel:"nextButtonAriaLabel",prevButtonAriaLabel:"prevButtonAriaLabel",autoHideButtons:[2,"autoHideButtons","autoHideButtons",e.L39],tabindex:[2,"tabindex","tabindex",e.Udg]},outputs:{onChange:"onChange",onClose:"onClose",activeIndexChange:"activeIndexChange"},features:[e.GFd],ngContentSelectors:Ae,decls:14,vars:13,consts:[["elementToObserve",""],["content",""],["navbar",""],["inkbar",""],["prevBtn",""],["nextBtn",""],[3,"ngClass","ngStyle"],[1,"p-tabview-nav-container"],["class","p-tabview-nav-prev p-tabview-nav-btn p-link","type","button","pRipple","",3,"click",4,"ngIf"],[1,"p-tabview-nav-content",3,"scroll"],["role","tablist",1,"p-tabview-nav"],["ngFor","",3,"ngForOf"],["role","presentation","aria-hidden","true",1,"p-tabview-ink-bar"],["class","p-tabview-nav-next p-tabview-nav-btn p-link","type","button","pRipple","",3,"click",4,"ngIf"],[1,"p-tabview-panels"],["type","button","pRipple","",1,"p-tabview-nav-prev","p-tabview-nav-btn","p-link",3,"click"],[4,"ngIf"],[4,"ngTemplateOutlet"],["role","presentation",3,"ngClass","ngStyle","class",4,"ngIf"],["role","presentation",3,"ngClass","ngStyle"],["role","tab","pRipple","",1,"p-tabview-nav-link",3,"click","keydown","pTooltip","tooltipPosition","positionStyle","tooltipStyleClass"],["class","p-tabview-left-icon",3,"ngClass",4,"ngIf"],["class","p-tabview-left-icon",4,"ngIf"],[1,"p-tabview-title"],["class","p-tabview-right-icon",3,"ngClass",4,"ngIf"],["class","p-tabview-right-icon",4,"ngIf"],[1,"p-tabview-left-icon",3,"ngClass"],[1,"p-tabview-left-icon"],[1,"p-tabview-right-icon",3,"ngClass"],[1,"p-tabview-right-icon"],[3,"styleClass","click",4,"ngIf"],["class","tab.closeIconTemplate",4,"ngIf"],[3,"click","styleClass"],[1,"tab.closeIconTemplate"],["type","button","pRipple","",1,"p-tabview-nav-next","p-tabview-nav-btn","p-link",3,"click"]],template:function(C,I){if(1&C){const n=e.RV6();e.NAR(),e.j41(0,"div",6)(1,"div",7,0),e.DNE(3,We,4,4,"button",8),e.j41(4,"div",9,1),e.bIt("scroll",function(o){return e.eBV(n),e.Njj(I.onScroll(o))}),e.j41(6,"ul",10,2),e.DNE(8,ct,1,1,"ng-template",11),e.nrm(9,"li",12,3),e.k0s()(),e.DNE(11,ut,4,4,"button",13),e.k0s(),e.j41(12,"div",14),e.SdG(13),e.k0s()()}2&C&&(e.HbH(I.styleClass),e.Y8G("ngClass",e.eq3(11,Le,I.scrollable))("ngStyle",I.style),e.BMQ("data-pc-name","tabview"),e.R7$(3),e.Y8G("ngIf",I.scrollable&&!I.backwardIsDisabled&&I.autoHideButtons),e.R7$(),e.BMQ("data-pc-section","navcontent"),e.R7$(2),e.BMQ("data-pc-section","nav"),e.R7$(2),e.Y8G("ngForOf",I.tabs),e.R7$(),e.BMQ("data-pc-section","inkbar"),e.R7$(2),e.Y8G("ngIf",I.scrollable&&!I.forwardIsDisabled&&I.buttonVisible))},dependencies:()=>[l.YU,l.Sq,l.bT,l.T3,l.B3,ne.m,k.n,M.A,Ie.Y,P.v],styles:["@layer primeng{.p-tabview-nav-container{position:relative}.p-tabview-scrollable .p-tabview-nav-container{overflow:hidden}.p-tabview-nav-content{overflow-x:auto;overflow-y:hidden;scroll-behavior:smooth;scrollbar-width:none;overscroll-behavior:contain auto}.p-tabview-nav{display:inline-flex;min-width:100%;margin:0;padding:0;list-style-type:none;flex:1 1 auto}.p-tabview-nav-link{cursor:pointer;-webkit-user-select:none;user-select:none;display:flex;align-items:center;position:relative;text-decoration:none;overflow:hidden}.p-tabview-ink-bar{display:none;z-index:1}.p-tabview-nav-link:focus{z-index:1}.p-tabview-title{line-height:1;white-space:nowrap}.p-tabview-nav-btn{position:absolute;top:0;z-index:2;height:100%;display:flex;align-items:center;justify-content:center}.p-tabview-nav-prev{left:0}.p-tabview-nav-next{right:0}.p-tabview-nav-content::-webkit-scrollbar{display:none}.p-tabview-close{z-index:1}}\n"],encapsulation:2,changeDetection:0})}return g})(),mt=(()=>{class g{static \u0275fac=function(C){return new(C||g)};static \u0275mod=e.$C({type:g});static \u0275inj=e.G2t({imports:[l.MD,d.Gg,ne.S,k.Z,M.A,Ie.Y,P.v,d.Gg]})}return g})();var ae=a(935);let ht=(()=>{class g{constructor(t){this.sanitizer=t}transform(t){return this.sanitizer.bypassSecurityTrustHtml(t)}static{this.\u0275fac=function(C){return new(C||g)(e.rXU(N.up,16))}}static{this.\u0275pipe=e.EJ8({name:"safeHtml",type:g,pure:!0})}}return g})();const ft=["productPackageDropdown"],bt=["packageTypeDropdown"],Tt=["salesChannelDropdown"],vt=["productAutocomplete"],yt=(g,A)=>({profitRate:20,cost:g,costWithCommission:A}),xt=()=>({width:"50vw"});function Et(g,A){1&g&&(e.nrm(0,"i",22),e.j41(1,"span"),e.EFF(2,"\u0417\u0430\u043a\u0443\u043f\u043a\u0430"),e.k0s())}function St(g,A){1&g&&(e.j41(0,"tr"),e.nrm(1,"th",27),e.j41(2,"th",27),e.EFF(3,"ID"),e.k0s(),e.j41(4,"th"),e.EFF(5,"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435"),e.k0s(),e.j41(6,"th",27),e.EFF(7,"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e"),e.k0s(),e.j41(8,"th",27),e.EFF(9,"\u0417\u0430\u043a\u0443\u043f\u043e\u0447\u043d\u0430\u044f \u0446\u0435\u043d\u0430"),e.k0s()())}function Nt(g,A){if(1&g){const t=e.RV6();e.j41(0,"p-inputNumber",33),e.mxI("ngModelChange",function(I){e.eBV(t);const n=e.XpG().$implicit;return e.DH7(n.count,I)||(n.count=I),e.Njj(I)}),e.k0s()}if(2&g){const t=e.XpG().$implicit;e.Y8G("useGrouping",!1),e.R50("ngModel",t.count)}}function kt(g,A){if(1&g&&e.EFF(0),2&g){const t=e.XpG().$implicit;e.SpI(" ",t.count," ")}}function Dt(g,A){if(1&g){const t=e.RV6();e.j41(0,"p-inputNumber",34),e.mxI("ngModelChange",function(I){e.eBV(t);const n=e.XpG().$implicit;return e.DH7(n.price,I)||(n.price=I),e.Njj(I)}),e.k0s()}if(2&g){const t=e.XpG().$implicit;e.Y8G("useGrouping",!1),e.R50("ngModel",t.price),e.Y8G("maxFractionDigits",2)}}function Gt(g,A){if(1&g&&e.EFF(0),2&g){const t=e.XpG().$implicit;e.SpI(" ",t.price," ")}}function Ft(g,A){if(1&g){const t=e.RV6();e.j41(0,"tr")(1,"td")(2,"p-button",28),e.bIt("click",function(){const I=e.eBV(t).rowIndex,n=e.XpG(4);return e.Njj(n.removeItem(n.calculation.items,I))}),e.k0s()(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td",29)(8,"p-cellEditor"),e.DNE(9,Nt,1,2,"ng-template",30)(10,kt,1,1,"ng-template",31),e.k0s()(),e.j41(11,"td",32)(12,"p-cellEditor"),e.DNE(13,Dt,1,3,"ng-template",30)(14,Gt,1,1,"ng-template",31),e.k0s()()()}if(2&g){const t=A.$implicit;e.R7$(4),e.JRh(t.productID),e.R7$(2),e.JRh(t.product.name),e.R7$(),e.Y8G("pEditableColumn",t.count),e.R7$(4),e.Y8G("pEditableColumn",t.price)}}function wt(g,A){if(1&g&&(e.j41(0,"tr")(1,"td",35),e.EFF(2,"\u0418\u0442\u043e\u0433\u043e:"),e.k0s(),e.j41(3,"td",36),e.EFF(4),e.k0s(),e.j41(5,"td",36),e.EFF(6),e.k0s()()),2&g){const t=e.XpG(4);e.R7$(4),e.SpI(" ",t.calculationTotalProductCount," "),e.R7$(2),e.SpI(" ",t.calculationTotalSum," ")}}function jt(g,A){if(1&g&&(e.j41(0,"p-table",25),e.DNE(1,St,10,0,"ng-template",14)(2,Ft,15,4,"ng-template",15)(3,wt,7,2,"ng-template",26),e.k0s()),2&g){const t=e.XpG(3);e.Y8G("value",t.calculation.items)}}function Rt(g,A){if(1&g&&(e.j41(0,"div",37)(1,"div"),e.EFF(2),e.k0s()()),2&g){const t=A.$implicit;e.R7$(2),e.Lme("",t.iD,": ",t.name,"")}}function Pt(g,A){1&g&&e.EFF(0,"\u041f\u043e\u0438\u0441\u043a \u0442\u043e\u0432\u0430\u0440\u0430")}function Mt(g,A){if(1&g){const t=e.RV6();e.j41(0,"div",5),e.DNE(1,jt,4,1,"p-table",23),e.j41(2,"p-autoComplete",24,1),e.nI1(4,"async"),e.bIt("completeMethod",function(I){e.eBV(t);const n=e.XpG(2);return e.Njj(n.findProductsByName(I))})("onSelect",function(I){e.eBV(t);const n=e.XpG(2);return e.Njj(n.addProduct(I))}),e.DNE(5,Rt,3,2,"ng-template",18)(6,Pt,1,0,"ng-template",19),e.k0s()()}if(2&g){const t=e.XpG(2);e.R7$(),e.Y8G("ngIf",t.calculation.items.length),e.R7$(),e.Y8G("suggestions",e.bMT(4,3,t.products))("minLength",3)}}function Bt(g,A){1&g&&(e.nrm(0,"i",38),e.j41(1,"span"),e.EFF(2,"\u0422\u0438\u043f\u043e\u0444\u043e\u0440\u043c\u0430\u0442\u044b"),e.k0s())}function Vt(g,A){if(1&g&&(e.j41(0,"div",37)(1,"div"),e.EFF(2),e.k0s()()),2&g){const t=A.$implicit;e.R7$(2),e.Lme("",t.product.iD,": ",t.product.name,"")}}function Yt(g,A){if(1&g&&(e.j41(0,"div",37)(1,"div"),e.EFF(2),e.k0s()()),2&g){const t=A.$implicit;e.R7$(2),e.Lme("",t.iD,": ",t.name,"")}}function Xt(g,A){1&g&&e.EFF(0,"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0430\u0440\u0442\u0438\u043a\u0443\u043b")}function $t(g,A){if(1&g&&e.EFF(0),2&g){const t=e.XpG().$implicit;e.E5c(" \u0410\u0440\u0442\u0438\u043a\u0443\u043b: ",t.productPackage.iD,", ",t.productPackage.productCount,"\u0448\u0442, ",t.name," ")}}function Ot(g,A){1&g&&(e.j41(0,"tr")(1,"th"),e.EFF(2,"\u0422\u0438\u043f \u0443\u043f\u0430\u043a\u043e\u0432\u043a\u0438"),e.k0s(),e.j41(3,"th"),e.EFF(4,"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e"),e.k0s(),e.j41(5,"th"),e.EFF(6,"\u0426\u0435\u043d\u0430 \u0443\u043f\u0430\u043a\u043e\u0432\u043a\u0438"),e.k0s(),e.j41(7,"th"),e.EFF(8,"\u0421\u0443\u043c\u043c\u0430"),e.k0s()())}function Ut(g,A){if(1&g&&(e.j41(0,"tr")(1,"td",35),e.EFF(2,"\u0418\u0442\u043e\u0433\u043e:"),e.k0s(),e.j41(3,"td",36),e.EFF(4),e.k0s()()),2&g){const t=e.XpG(3).$implicit,C=e.XpG(3);e.R7$(4),e.JRh(C.getPackagePrice(t))}}function Lt(g,A){if(1&g&&(e.j41(0,"span"),e.EFF(1),e.k0s()),2&g){const t=A.ngIf;e.R7$(),e.SpI(" ",t.name," ")}}function Ht(g,A){if(1&g){const t=e.RV6();e.j41(0,"div",48)(1,"p-inputNumber",58),e.mxI("ngModelChange",function(I){e.eBV(t);const n=e.XpG(2).$implicit;return e.DH7(n.amount,I)||(n.amount=I),e.Njj(I)}),e.k0s(),e.nrm(2,"span",59),e.nI1(3,"safeHtml"),e.k0s()}if(2&g){const t=e.XpG().ngIf,C=e.XpG().$implicit,I=e.XpG(6);e.R7$(),e.Y8G("useGrouping",!1)("minFractionDigits",t.decimalPlaces)("maxFractionDigits",t.decimalPlaces),e.R50("ngModel",C.amount),e.R7$(),e.Y8G("innerHtml",e.bMT(3,5,I.getUnitOfMeasure(t.unitOfMeasure)),e.npT)}}function zt(g,A){if(1&g&&(e.qex(0),e.EFF(1),e.nrm(2,"span",60),e.nI1(3,"safeHtml"),e.bVm()),2&g){const t=e.XpG().ngIf,C=e.XpG().$implicit,I=e.XpG(6);e.R7$(),e.SpI(" ",C.amount,""),e.R7$(),e.Y8G("innerHtml",e.bMT(3,2,I.getUnitOfMeasure(t.unitOfMeasure)),e.npT)}}function Kt(g,A){1&g&&(e.j41(0,"p-cellEditor"),e.DNE(1,Ht,4,7,"ng-template",30)(2,zt,4,4,"ng-template",31),e.k0s())}function Qt(g,A){if(1&g){const t=e.RV6();e.j41(0,"div",48)(1,"p-inputNumber",61),e.mxI("ngModelChange",function(I){e.eBV(t);const n=e.XpG().$implicit;return e.DH7(n.pricePerUom,I)||(n.pricePerUom=I),e.Njj(I)}),e.k0s(),e.nrm(2,"span",59),e.nI1(3,"safeHtml"),e.k0s()}if(2&g){const t=e.XpG().$implicit,C=e.XpG(6);e.R7$(),e.Y8G("useGrouping",!1)("minFractionDigits",0)("maxFractionDigits",2),e.R50("ngModel",t.pricePerUom),e.R7$(),e.Y8G("innerHtml",e.bMT(3,5,"\u20bd/"+C.getUnitOfMeasureByPackageTypeID(t.packageTypeID)),e.npT)}}function Wt(g,A){if(1&g&&(e.EFF(0),e.nrm(1,"span",60)),2&g){const t=e.XpG().$implicit,C=e.XpG(6);e.SpI(" ",t.pricePerUom,"\u20bd/"),e.R7$(),e.Y8G("innerHtml",C.getUnitOfMeasureByPackageTypeID(t.packageTypeID),e.npT)}}function Jt(g,A){if(1&g){const t=e.RV6();e.j41(0,"tr")(1,"td")(2,"p-button",55),e.bIt("click",function(){const I=e.eBV(t).rowIndex,n=e.XpG(3).$implicit,i=e.XpG(3);return e.Njj(i.removeItem(n.salesItemPackages,I))}),e.k0s(),e.DNE(3,Lt,2,1,"span",21),e.k0s(),e.j41(4,"td",56),e.DNE(5,Kt,3,0,"p-cellEditor",21),e.k0s(),e.j41(6,"td",57)(7,"p-cellEditor"),e.DNE(8,Qt,4,7,"ng-template",30)(9,Wt,2,2,"ng-template",31),e.k0s()(),e.j41(10,"td",36),e.EFF(11),e.nI1(12,"number"),e.k0s()()}if(2&g){const t=A.$implicit,C=e.XpG(6);e.R7$(3),e.Y8G("ngIf",C.getPackageType(t.packageTypeID)),e.R7$(),e.Y8G("pEditableColumn",t.amount),e.R7$(),e.Y8G("ngIf",C.getPackageType(t.packageTypeID)),e.R7$(),e.Y8G("pEditableColumn",t.pricePerUom),e.R7$(5),e.SpI(" ",e.i5U(12,5,t.pricePerUom*t.amount,"1.2-2"),"\u20bd ")}}function Zt(g,A){if(1&g&&(e.j41(0,"p-table",25),e.DNE(1,Ot,9,0,"ng-template",14)(2,Ut,5,1,"ng-template",26)(3,Jt,13,8,"ng-template",15),e.k0s()),2&g){const t=e.XpG(2).$implicit;e.Y8G("value",t.salesItemPackages)}}function qt(g,A){if(1&g&&(e.j41(0,"div",37),e.nrm(1,"div",62),e.nI1(2,"safeHtml"),e.k0s()),2&g){const t=A.$implicit,C=e.XpG(5);e.R7$(),e.Y8G("innerHTML",e.bMT(2,1,t.name+" ("+(null==t.price?"-":t.price)+" \u20bd/"+C.getUnitOfMeasure(t.unitOfMeasure)+")"),e.npT)}}function eg(g,A){if(1&g&&(e.j41(0,"div",37)(1,"div"),e.EFF(2),e.k0s()()),2&g){const t=A.$implicit;e.R7$(2),e.JRh(t.name)}}function tg(g,A){1&g&&e.EFF(0,"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u043b\u0430\u043d \u043f\u0440\u043e\u0434\u0430\u0436")}function gg(g,A){1&g&&(e.j41(0,"tr")(1,"th"),e.EFF(2,"\u041a\u0430\u043d\u0430\u043b"),e.k0s(),e.j41(3,"th",36),e.EFF(4,"\u0426\u0435\u043d\u0430"),e.k0s(),e.j41(5,"th",36),e.EFF(6,"\u0421\u0435\u0431\u0435\u0441"),e.k0s(),e.j41(7,"th",36),e.EFF(8,"\u041e\u0442\u0433\u0440\u0443\u0437\u043a\u0430"),e.k0s(),e.j41(9,"th",36),e.EFF(10,"\u0420\u0435\u043a\u043b\u0430\u043c\u0430, \u20bd/\u043f\u043b\u0430\u043d"),e.k0s(),e.j41(11,"th"),e.EFF(12,"\u041a\u043e\u043b-\u0432\u043e"),e.k0s(),e.j41(13,"th",36),e.EFF(14,"\u041a\u043e\u043c\u0438\u0441\u0441\u0438\u044f"),e.k0s(),e.j41(15,"th",36),e.EFF(16,"\u0412\u043e\u0437\u0432\u0440\u0430\u0442\u044b"),e.k0s(),e.nrm(17,"th"),e.k0s())}function Cg(g,A){if(1&g){const t=e.RV6();e.j41(0,"div",48)(1,"p-inputNumber",74),e.mxI("ngModelChange",function(I){e.eBV(t);const n=e.XpG(2).$implicit;return e.DH7(n.price,I)||(n.price=I),e.Njj(I)}),e.k0s(),e.j41(2,"span",50),e.EFF(3,"\u20bd"),e.k0s()()}if(2&g){const t=e.XpG(2).$implicit;e.R7$(),e.Y8G("useGrouping",!1),e.R50("ngModel",t.price),e.Y8G("minFractionDigits",0)("maxFractionDigits",2)}}function Ig(g,A){if(1&g&&(e.j41(0,"div"),e.EFF(1),e.k0s(),e.j41(2,"p-tag",75),e.EFF(3),e.nI1(4,"number"),e.nI1(5,"number"),e.k0s(),e.j41(6,"div"),e.EFF(7),e.nI1(8,"number"),e.k0s()),2&g){const t=e.XpG().ngIf,C=e.XpG().$implicit;e.R7$(),e.SpI(" ",C.price,"\u20bd "),e.R7$(),e.Y8G("severity",C.price<t.costWithCommission?"danger":(C.price-t.costWithCommission)/t.cost>t.profitRate/100?"success":"info"),e.R7$(),e.Lme(" ",e.i5U(4,6,C.price-t.costWithCommission,"1.2-2"),"\u20bd/",e.i5U(5,9,(C.price-t.costWithCommission)/t.cost*100,"1.0-2"),"% "),e.R7$(4),e.Lme(" (",e.i5U(8,12,(t.cost*(1+t.profitRate/100)+C.commissionAddition)/(1-C.commissionMultiplier/100),"1.2-2"),"\u20bd \u0434\u043b\u044f ",t.profitRate,"%) ")}}function ng(g,A){if(1&g){const t=e.RV6();e.j41(0,"div",48)(1,"p-inputNumber",76),e.mxI("ngModelChange",function(I){e.eBV(t);const n=e.XpG(2).$implicit;return e.DH7(n.deliveryCost,I)||(n.deliveryCost=I),e.Njj(I)}),e.k0s(),e.j41(2,"span",50),e.EFF(3,"\u20bd"),e.k0s()()}if(2&g){const t=e.XpG(2).$implicit;e.R7$(),e.Y8G("useGrouping",!1)("minFractionDigits",0)("maxFractionDigits",2),e.R50("ngModel",t.deliveryCost)}}function Ag(g,A){if(1&g&&(e.j41(0,"div",36),e.EFF(1),e.k0s()),2&g){const t=e.XpG(2).$implicit;e.R7$(),e.SpI(" ",t.deliveryCost,"\u20bd ")}}function ig(g,A){if(1&g){const t=e.RV6();e.j41(0,"div",48)(1,"p-inputNumber",74),e.mxI("ngModelChange",function(I){e.eBV(t);const n=e.XpG(2).$implicit;return e.DH7(n.marketingBudget,I)||(n.marketingBudget=I),e.Njj(I)}),e.k0s(),e.j41(2,"span",50),e.EFF(3,"\u20bd"),e.k0s()()}if(2&g){const t=e.XpG(2).$implicit;e.R7$(),e.Y8G("useGrouping",!1),e.R50("ngModel",t.marketingBudget),e.Y8G("minFractionDigits",0)("maxFractionDigits",2)}}function og(g,A){if(1&g&&e.EFF(0),2&g){const t=e.XpG(2).$implicit;e.SpI(" ",t.marketingBudget," ")}}function ag(g,A){if(1&g){const t=e.RV6();e.j41(0,"div",48)(1,"p-inputNumber",33),e.mxI("ngModelChange",function(I){e.eBV(t);const n=e.XpG(2).$implicit;return e.DH7(n.amount,I)||(n.amount=I),e.Njj(I)}),e.k0s(),e.j41(2,"span",50),e.EFF(3,"\u0448\u0442"),e.k0s()()}if(2&g){const t=e.XpG(2).$implicit;e.R7$(),e.Y8G("useGrouping",!1),e.R50("ngModel",t.amount)}}function lg(g,A){if(1&g&&e.EFF(0),2&g){const t=e.XpG(2).$implicit;e.SpI(" ",t.amount,"\u0448\u0442 ")}}function rg(g,A){if(1&g){const t=e.RV6();e.j41(0,"div",48)(1,"p-inputNumber",74),e.mxI("ngModelChange",function(I){e.eBV(t);const n=e.XpG(2).$implicit;return e.DH7(n.commissionMultiplier,I)||(n.commissionMultiplier=I),e.Njj(I)}),e.k0s(),e.j41(2,"span",50),e.EFF(3,"%"),e.k0s()()}if(2&g){const t=e.XpG(2).$implicit;e.R7$(),e.Y8G("useGrouping",!1),e.R50("ngModel",t.commissionMultiplier),e.Y8G("minFractionDigits",1)("maxFractionDigits",1)}}function sg(g,A){if(1&g&&e.EFF(0),2&g){const t=e.XpG(2).$implicit;e.SpI(" ",t.commissionMultiplier,"% ")}}function cg(g,A){if(1&g){const t=e.RV6();e.j41(0,"div",48)(1,"p-inputNumber",74),e.mxI("ngModelChange",function(I){e.eBV(t);const n=e.XpG(2).$implicit;return e.DH7(n.returnPercentage,I)||(n.returnPercentage=I),e.Njj(I)}),e.k0s(),e.j41(2,"span",50),e.EFF(3,"%"),e.k0s()()}if(2&g){const t=e.XpG(2).$implicit;e.R7$(),e.Y8G("useGrouping",!1),e.R50("ngModel",t.returnPercentage),e.Y8G("minFractionDigits",1)("maxFractionDigits",1)}}function pg(g,A){if(1&g&&e.EFF(0),2&g){const t=e.XpG(2).$implicit;e.SpI(" ",t.returnPercentage,"% ")}}function dg(g,A){if(1&g){const t=e.RV6();e.j41(0,"tr")(1,"td",66),e.EFF(2),e.k0s(),e.j41(3,"td",67)(4,"p-cellEditor"),e.DNE(5,Cg,4,4,"ng-template",30)(6,Ig,9,15,"ng-template",31),e.k0s()(),e.j41(7,"td",68),e.EFF(8),e.nI1(9,"number"),e.nrm(10,"br"),e.EFF(11),e.nI1(12,"number"),e.k0s(),e.j41(13,"td",69)(14,"p-cellEditor"),e.DNE(15,ng,4,4,"ng-template",30)(16,Ag,2,1,"ng-template",31),e.k0s()(),e.j41(17,"td",70)(18,"p-cellEditor"),e.DNE(19,ig,4,4,"ng-template",30)(20,og,1,1,"ng-template",31),e.k0s()(),e.j41(21,"td",71)(22,"p-cellEditor"),e.DNE(23,ag,4,2,"ng-template",30)(24,lg,1,1,"ng-template",31),e.k0s()(),e.j41(25,"td",72)(26,"p-cellEditor"),e.DNE(27,rg,4,4,"ng-template",30)(28,sg,1,1,"ng-template",31),e.k0s()(),e.j41(29,"td",73)(30,"p-cellEditor"),e.DNE(31,cg,4,4,"ng-template",30)(32,pg,1,1,"ng-template",31),e.k0s()(),e.j41(33,"td",66)(34,"p-button",28),e.bIt("click",function(){e.eBV(t);const I=e.XpG().rowIndex,n=e.XpG(2).$implicit,i=e.XpG(3);return e.Njj(i.removeItem(n.salesPlans,I))}),e.k0s()()()}if(2&g){const t=A.ngIf,C=e.XpG().$implicit;e.R7$(2),e.SpI(" ",C.salesChannel.name," "),e.R7$(),e.Y8G("pEditableColumn",C.price),e.R7$(5),e.SpI(" ",e.i5U(9,8,t.costWithCommission,"1.2-2"),"\u20bd "),e.R7$(3),e.SpI(" (",e.i5U(12,11,(t.cost+C.commissionAddition)/(1-C.commissionMultiplier/100),"1.2-2"),"\u20bd) "),e.R7$(6),e.Y8G("pEditableColumn",C.marketingBudget),e.R7$(4),e.Y8G("pEditableColumn",C.amount),e.R7$(4),e.Y8G("pEditableColumn",C.commissionMultiplier),e.R7$(4),e.Y8G("pEditableColumn",C.returnPercentage)}}function _g(g,A){if(1&g){const t=e.RV6();e.j41(0,"p-calendar",77),e.mxI("ngModelChange",function(I){e.eBV(t);const n=e.XpG().$implicit;return e.DH7(n.deliveryDate,I)||(n.deliveryDate=I),e.Njj(I)}),e.k0s()}if(2&g){const t=e.XpG().$implicit;e.R50("ngModel",t.deliveryDate),e.Y8G("readonlyInput",!0)}}function ug(g,A){if(1&g&&(e.EFF(0),e.nI1(1,"date")),2&g){const t=e.XpG().$implicit;e.SpI(" ",e.i5U(1,1,t.deliveryDate,"dd.MM.yyyy")," ")}}function mg(g,A){if(1&g){const t=e.RV6();e.j41(0,"div",48)(1,"p-inputNumber",74),e.mxI("ngModelChange",function(I){e.eBV(t);const n=e.XpG().$implicit;return e.DH7(n.commissionAddition,I)||(n.commissionAddition=I),e.Njj(I)}),e.k0s(),e.j41(2,"span",50),e.EFF(3,"\u20bd"),e.k0s()()}if(2&g){const t=e.XpG().$implicit;e.R7$(),e.Y8G("useGrouping",!1),e.R50("ngModel",t.commissionAddition),e.Y8G("minFractionDigits",2)("maxFractionDigits",2)}}function hg(g,A){if(1&g&&e.EFF(0),2&g){const t=e.XpG().$implicit;e.SpI(" ",t.commissionAddition,"\u20bd ")}}function fg(g,A){if(1&g){const t=e.RV6();e.j41(0,"div",48)(1,"p-inputNumber",74),e.mxI("ngModelChange",function(I){e.eBV(t);const n=e.XpG().$implicit;return e.DH7(n.returnCost,I)||(n.returnCost=I),e.Njj(I)}),e.k0s(),e.j41(2,"span",50),e.EFF(3,"\u20bd"),e.k0s()()}if(2&g){const t=e.XpG().$implicit;e.R7$(),e.Y8G("useGrouping",!1),e.R50("ngModel",t.returnCost),e.Y8G("minFractionDigits",2)("maxFractionDigits",2)}}function bg(g,A){if(1&g&&e.EFF(0),2&g){const t=e.XpG().$implicit;e.SpI(" ",t.returnCost,"\u20bd ")}}function Tg(g,A){if(1&g&&(e.DNE(0,dg,35,14,"tr",21),e.j41(1,"tr")(2,"td",63)(3,"p-cellEditor"),e.DNE(4,_g,1,2,"ng-template",30)(5,ug,2,4,"ng-template",31),e.k0s()(),e.j41(6,"td",64)(7,"p-cellEditor"),e.DNE(8,mg,4,4,"ng-template",30)(9,hg,1,1,"ng-template",31),e.k0s()(),e.j41(10,"td",65)(11,"p-cellEditor"),e.DNE(12,fg,4,4,"ng-template",30)(13,bg,1,1,"ng-template",31),e.k0s()()()),2&g){const t=A.$implicit,C=e.XpG(2).$implicit,I=e.XpG().$implicit,n=e.XpG(2);e.Y8G("ngIf",e.l_i(3,yt,n.getSelfCost(C,t,I,!1),n.getSelfCost(C,t,I,!0))),e.R7$(6),e.Y8G("pEditableColumn",t.commissionAddition),e.R7$(4),e.Y8G("pEditableColumn",t.returnCost)}}function vg(g,A){if(1&g){const t=e.RV6();e.j41(0,"div",41)(1,"p-button",42),e.bIt("click",function(){e.eBV(t);const I=e.XpG().index,n=e.XpG().$implicit,i=e.XpG(2);return e.Njj(i.removeItem(n.salesItems,I))}),e.k0s(),e.j41(2,"h5"),e.EFF(3,"\u041e\u0444\u043e\u0440\u043c\u043b\u0435\u043d\u0438\u0435 \u0443\u043f\u0430\u043a\u043e\u0432\u043a\u0438"),e.k0s(),e.j41(4,"div",43)(5,"div",44)(6,"div")(7,"label",45),e.EFF(8,"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435"),e.k0s()(),e.j41(9,"input",46),e.mxI("ngModelChange",function(I){e.eBV(t);const n=e.XpG().$implicit;return e.DH7(n.name,I)||(n.name=I),e.Njj(I)}),e.k0s()(),e.j41(10,"div",44)(11,"label",47),e.EFF(12,"\u041e\u0431\u044a\u0451\u043c"),e.k0s(),e.j41(13,"div",48)(14,"p-inputNumber",49),e.mxI("ngModelChange",function(I){e.eBV(t);const n=e.XpG().$implicit;return e.DH7(n.volume,I)||(n.volume=I),e.Njj(I)}),e.k0s(),e.j41(15,"span",50),e.EFF(16,"\u043b"),e.k0s()()(),e.j41(17,"div",44)(18,"label",51),e.EFF(19,"\u0421\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c \u0444\u0430\u0441\u043e\u0432\u043a\u0438"),e.k0s(),e.j41(20,"div",48)(21,"p-inputNumber",52),e.mxI("ngModelChange",function(I){e.eBV(t);const n=e.XpG().$implicit;return e.DH7(n.packagingPrice,I)||(n.packagingPrice=I),e.Njj(I)}),e.k0s(),e.j41(22,"span",50),e.EFF(23,"\u20bd"),e.k0s()()()(),e.DNE(24,Zt,4,1,"p-table",23),e.j41(25,"p-dropdown",53,2),e.bIt("onChange",function(I){e.eBV(t);const n=e.XpG().$implicit,i=e.XpG(3);return e.Njj(i.addSalesItemPackage(n,I.value))}),e.DNE(27,qt,3,3,"ng-template",18),e.k0s()(),e.j41(28,"div",41)(29,"p-dropdown",54,3),e.nI1(31,"async"),e.bIt("onChange",function(I){e.eBV(t);const n=e.XpG().$implicit,i=e.XpG(3);return e.Njj(i.addSalesPlan(n,I.value))}),e.DNE(32,eg,3,1,"ng-template",18)(33,tg,1,0,"ng-template",19),e.k0s(),e.j41(34,"p-table",25),e.DNE(35,gg,18,0,"ng-template",14)(36,Tg,14,6,"ng-template",15),e.k0s()()}if(2&g){const t=e.XpG().$implicit,C=e.XpG(3);e.R7$(9),e.R50("ngModel",t.name),e.R7$(5),e.Y8G("useGrouping",!1)("minFractionDigits",0)("maxFractionDigits",1),e.R50("ngModel",t.volume),e.R7$(7),e.Y8G("useGrouping",!1)("minFractionDigits",0)("maxFractionDigits",2),e.R50("ngModel",t.packagingPrice),e.R7$(3),e.Y8G("ngIf",null==t.salesItemPackages?null:t.salesItemPackages.length),e.R7$(),e.Y8G("options",C.getAvailablePackageTypes(t)),e.R7$(4),e.Y8G("options",e.bMT(31,14,C.salesChannels))("autoDisplayFirst",!1),e.R7$(5),e.Y8G("value",t.salesPlans)}}function yg(g,A){1&g&&(e.qex(0),e.j41(1,"p-accordionTab",39),e.DNE(2,$t,1,3,"ng-template",14)(3,vg,37,16,"ng-template",40),e.k0s(),e.bVm())}function xg(g,A){if(1&g&&(e.qex(0),e.DNE(1,yg,4,0,"ng-container",20),e.bVm()),2&g){const t=A.$implicit;e.R7$(),e.Y8G("ngForOf",t.salesItems)}}function Eg(g,A){if(1&g){const t=e.RV6();e.qex(0),e.j41(1,"p-dialog",78),e.mxI("visibleChange",function(I){e.eBV(t);const n=e.XpG(2);return e.DH7(n.duplicateProductDialogVisible,I)||(n.duplicateProductDialogVisible=I),e.Njj(I)}),e.j41(2,"p",79),e.EFF(3),e.k0s()(),e.bVm()}if(2&g){const t=e.XpG(2);e.R7$(),e.Aen(e.lJ4(7,xt)),e.Y8G("modal",!0),e.R50("visible",t.duplicateProductDialogVisible),e.Y8G("draggable",!1)("resizable",!1),e.R7$(2),e.SpI(" ",t.addedProduct.name," ")}}function Sg(g,A){if(1&g){const t=e.RV6();e.j41(0,"div",5)(1,"h5"),e.EFF(2,"\u0420\u0430\u0441\u0447\u0451\u0442 \u0434\u043e\u0445\u043e\u0434\u043d\u043e\u0441\u0442\u0438 \u043f\u043e \u0430\u0440\u0442\u0438\u043a\u0443\u043b\u0443"),e.k0s(),e.j41(3,"span",6)(4,"input",7),e.mxI("ngModelChange",function(I){e.eBV(t);const n=e.XpG();return e.DH7(n.calculation.name,I)||(n.calculation.name=I),e.Njj(I)}),e.k0s(),e.j41(5,"label",8),e.EFF(6,"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0440\u0430\u0441\u0447\u0451\u0442\u0430"),e.k0s()(),e.j41(7,"span",6)(8,"p-calendar",9),e.mxI("ngModelChange",function(I){e.eBV(t);const n=e.XpG();return e.DH7(n.calculation.date,I)||(n.calculation.date=I),e.Njj(I)}),e.k0s(),e.j41(9,"label",10),e.EFF(10,"\u0414\u0430\u0442\u0430 \u0437\u0430\u043a\u0443\u043f\u043a\u0438"),e.k0s()(),e.j41(11,"div",11)(12,"p-button",12),e.bIt("click",function(){e.eBV(t);const I=e.XpG();return e.Njj(I.savePurchaseBatch())}),e.k0s()(),e.j41(13,"p-tabView",13)(14,"p-tabPanel"),e.DNE(15,Et,3,0,"ng-template",14)(16,Mt,7,5,"ng-template",15),e.k0s(),e.j41(17,"p-tabPanel"),e.DNE(18,Bt,3,0,"ng-template",14),e.j41(19,"div",5)(20,"p-dropdown",16,0),e.bIt("onChange",function(I){e.eBV(t);const n=e.XpG();return e.Njj(n.addSalesItem(I.value))}),e.DNE(22,Vt,3,2,"ng-template",17)(23,Yt,3,2,"ng-template",18)(24,Xt,1,0,"ng-template",19),e.k0s(),e.j41(25,"p-accordion"),e.DNE(26,xg,2,1,"ng-container",20),e.k0s()()()(),e.DNE(27,Eg,4,8,"ng-container",21),e.k0s()}if(2&g){const t=e.XpG();e.R7$(4),e.R50("ngModel",t.calculation.name),e.R7$(4),e.R50("ngModel",t.calculation.date),e.Y8G("readonlyInput",!0),e.R7$(12),e.Y8G("ngModel",t.selectedProduct)("options",t.calculation.items)("autoDisplayFirst",!1)("group",!0),e.R7$(6),e.Y8G("ngForOf",t.calculation.items),e.R7$(),e.Y8G("ngIf",t.addedProduct)}}let Ng=(()=>{class g extends D.x{constructor(t,C,I,n,i,o,s){super(s),this.route=t,this.productClient=C,this.purchaseBatchCommandHandlerClient=I,this.salesChannelClient=n,this.messageService=i,this.purchaseService=o,this.productSearchSubject=new ee.B,this.purchaseBatchIDSubject=new ee.B,this.products=new T.t([]),this.salesChannels=new T.t([])}get duplicateProductDialogVisible(){return!!this.addedProduct}set duplicateProductDialogVisible(t){t||(this.addedProduct=null)}get calculationTotalProductCount(){return this.calculation.items.reduce((t,C)=>Math.round(t+C.count),0)}get calculationTotalSum(){return this.calculation.items.reduce((t,C)=>Math.round(t+C.price*C.count),0)}ngOnInit(){this.titleService.setTitle("\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0437\u0430\u043a\u0443\u043f\u043a\u0438"),this.purchaseBatchIDSubject.pipe((0,G.Q)(this.destroyed)).pipe((0,E.n)(C=>this.purchaseService.getBatch(C).pipe((0,u.W)(I=>(this.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0437\u0430\u043a\u0443\u043f\u043a\u0438",severity:"error",detail:I}),m.w))))).subscribe(C=>{C.items.forEach(I=>{const n=I.product.packages.reduce((i,o)=>(i.set(o.iD,o),i),new Map);I.salesItems.forEach(i=>{let o={productPackage:n.get(i.productPackageID)};Object.assign(i,o)})}),this.calculation=C,this.titleService.setTitle(`\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0437\u0430\u043a\u0443\u043f\u043a\u0438 - ${C.name}`)}),this.productSearchSubject.pipe((0,G.Q)(this.destroyed)).pipe((0,E.n)(C=>this.productClient.findProducts(new p.D.FindProductsModel({count:10,offset:0,name:C})).pipe((0,u.W)(I=>(this.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u043e\u0438\u0441\u043a\u0430 \u0442\u043e\u0432\u0430\u0440\u043e\u0432",severity:"error",detail:I}),m.w))))).subscribe(C=>{this.products.next(C.items)}),this.salesChannelClient.getSalesChannels().pipe((0,u.W)(C=>(this.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0441\u043f\u0438\u0441\u043a\u0430 \u043a\u0430\u043d\u0430\u043b\u043e\u0432 \u043f\u0440\u043e\u0434\u0430\u0436",severity:"error",detail:C}),m.w))).subscribe(C=>{this.salesChannels.next(C)});const t=+this.route.snapshot.paramMap.get("id");t>0&&t!=this.calculation?.iD?this.purchaseBatchIDSubject.next(t):this.calculation=new p.D.PurchaseBatch({date:new Date,status:p.D.PurchaseBatchStatus.Unknown,items:[],name:"\u041d\u043e\u0432\u0430\u044f \u0437\u0430\u043a\u0443\u043f\u043a\u0430",iD:0})}addSalesPlan(t,C){if(C){t.salesPlans||(t.salesPlans=[]);const I=this.getSalesItemProductPackage(t),n=this.getProductPackageBatchItem(I),i=new p.D.SalesPlan;i.salesChannel=C,i.salesChannelID=C.iD,i.amount=0,i.marketingBudget=0,i.deliveryCost=0,i.deliveryDate=new Date,i.status=p.D.SalesPlanStatus.InProcess,i.price=n.price+t.packagingPrice+this.getPackagePrice(t),t.salesPlans.push(i),this.salesChannelDropdown.clear(null)}}getSalesItemProductPackage(t){return this.getProductPackageBatchItem(t.productPackage).product.packages.find(n=>n.iD==t.productPackageID)}getProductPackageBatchItem(t){return this.calculation.items.find(I=>I.productID==t.productID)}addSalesItem(t){if(t){const C=this.getProductPackageBatchItem(t),I=this.createNewSalesItem(t,C);C.salesItems.push(I),this.productPackageDropdown.clear(null)}}removeItem(t,C){t.splice(C,1)}getAvailablePackageTypes(t){const C=[],I=new Set(t.salesItemPackages.map(i=>i.packageTypeID)),n=this.purchaseService.getPackageTypes();for(const i of n)I.has(i.iD)||C.push(i);return C}addSalesItemPackage(t,C){C&&(t.salesItemPackages.push(new p.D.SalesItemPackage({packageTypeID:C.iD,amount:0,pricePerUom:C.price??0,salesItemID:t.iD})),this.packageTypeDropdown.clear(null))}getSelfCost(t,C,I,n=!0){return this.purchaseService.getSalesPlanSelfCost(t,C,I,n)}getPackagePrice(t){return this.purchaseService.getSalesItemCosts(t)}getPackageType(t){return this.purchaseService.getPackageType(t)}findProductsByName(t){t.query.trim().length>2&&this.productSearchSubject.next(t.query)}addProduct(t){const C=t.value;if(C){this.productAutocomplete.clear();const I=this.calculation.items.find(n=>n.productID==C.iD);this.selectedProduct=null,I?this.addedProduct=C:this.calculation.items.push(new p.D.PurchaseBatchItem({productID:C.iD,count:0,product:C,purchaseBatchID:this.calculation.iD,price:0,salesItems:[],iD:0}))}}savePurchaseBatch(){this.purchaseBatchCommandHandlerClient.updatePurchaseBatch(this.calculation).pipe((0,u.W)(t=>(this.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430",severity:"error",detail:t}),m.w))).subscribe(t=>{this.calculation.iD=t.iD,this.messageService.add({summary:"\u0423\u0441\u043f\u0435\u0445",severity:"success",detail:"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0438 \u043f\u0430\u0440\u0442\u0438\u0438 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u043e"})})}getUnitOfMeasureByPackageTypeID(t){const I=this.purchaseService.getPackageTypes().find(n=>n.iD==t);return I?this.getUnitOfMeasure(I.unitOfMeasure):"?"}getUnitOfMeasure(t){let C;switch(t){case p.D.UnitOfMeasure.Piece:C="\u0448\u0442";break;case p.D.UnitOfMeasure.SquareMeter:C="\u043c&sup2;";break;default:C=""}return C}createNewSalesItem(t,C){return new p.D.SalesItem({packagingPrice:0,volume:0,salesItemPackages:[],salesPlans:[],iD:0,name:"\u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u0430\u044f \u0443\u043f\u0430\u043a\u043e\u0432\u043a\u0430",productPackageID:t.iD,productPackage:t,purchaseBatchItemID:C.iD})}static{this.\u0275fac=function(C){return new(C||g)(e.rXU(x.nX),e.rXU(p.D.ProductClient),e.rXU(F.X.PurchaseBatchClient),e.rXU(p.D.SalesChannelClient),e.rXU(d.bg),e.rXU(w),e.rXU(N.hE))}}static{this.\u0275cmp=e.VBU({type:g,selectors:[["app-purchase-editor"]],viewQuery:function(C,I){if(1&C&&(e.GBs(ft,5),e.GBs(bt,5),e.GBs(Tt,5),e.GBs(vt,5)),2&C){let n;e.mGM(n=e.lsd())&&(I.productPackageDropdown=n.first),e.mGM(n=e.lsd())&&(I.packageTypeDropdown=n.first),e.mGM(n=e.lsd())&&(I.salesChannelDropdown=n.first),e.mGM(n=e.lsd())&&(I.productAutocomplete=n.first)}},features:[e.Vt3],decls:2,vars:1,consts:[["productPackageDropdown",""],["productAutocomplete",""],["packageTypeDropdown",""],["salesChannelDropdown",""],["class","card",4,"ngIf"],[1,"card"],[1,"p-float-label"],["id","productName","type","text","pInputText","",1,"w-full","md:w-30rem","mb-5","p-3",3,"ngModelChange","ngModel"],["for","productName",1,"font-bold"],["input","date","placeholder","\u0414\u0430\u0442\u0430 \u0437\u0430\u043a\u0443\u043f\u043a\u0438","dateFormat","dd.mm.yy",3,"ngModelChange","ngModel","readonlyInput"],["for","date","dateFormat","dd.mm.yy",1,"font-bold"],[1,"mt-3"],["icon","pi pi-save","label","\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",3,"click"],["styleClass","tabview-custom"],["pTemplate","header"],["pTemplate","body"],["styleClass","m-3","appendTo","body","placeholder","\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0430\u0440\u0442\u0438\u043a\u0443\u043b","optionGroupChildren","product.packages",3,"onChange","ngModel","options","autoDisplayFirst","group"],["pTemplate","group"],["pTemplate","item"],["pTemplate","selectedItem"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"pi","pi-shopping-cart","pi-fw"],[3,"value",4,"ngIf"],["styleClass","mb-3","field","name","placeholder","\u041f\u043e\u0438\u0441\u043a \u0442\u043e\u0432\u0430\u0440\u0430",3,"completeMethod","onSelect","suggestions","minLength"],[3,"value"],["pTemplate","footer"],["width","10%"],["icon","pi pi-trash",3,"click"],["pEditableColumnField","count",1,"text-right",3,"pEditableColumn"],["pTemplate","input"],["pTemplate","output"],["pEditableColumnField","price",1,"text-right",3,"pEditableColumn"],[3,"ngModelChange","useGrouping","ngModel"],[3,"ngModelChange","useGrouping","ngModel","maxFractionDigits"],["colspan","3",1,"text-right"],[1,"text-right"],[1,"flex","align-items-center","gap-2"],[1,"pi","pi-box","pi-fw"],["transitionOptions","50ms"],["pTemplate","content"],[1,"card","m-2"],["label","\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0442\u0438\u043f\u043e\u0444\u043e\u0440\u043c\u0430\u0442","styleClass","mb-3","icon","pi pi-trash",3,"click"],[1,"grid"],[1,"col","xs:col-12"],["for","name"],["maxlength","100","pInputText","","inputId","name",3,"ngModelChange","ngModel"],["for","volume"],[1,"p-inputgroup"],["inputId","volume",3,"ngModelChange","useGrouping","minFractionDigits","maxFractionDigits","ngModel"],[1,"p-inputgroup-addon"],["for","packagingPrice"],["inputId","packagingPrice",3,"ngModelChange","useGrouping","minFractionDigits","maxFractionDigits","ngModel"],["styleClass","m-3","appendTo","body","optionLabel","name","placeholder","\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043e\u0444\u043e\u0440\u043c\u043b\u0435\u043d\u0438\u0435",3,"onChange","options"],["styleClass","m-3","appendTo","body","placeholder","\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u043b\u0430\u043d \u043f\u0440\u043e\u0434\u0430\u0436","optionLabel","\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u043b\u0430\u043d \u043f\u0440\u043e\u0434\u0430\u0436",3,"onChange","options","autoDisplayFirst"],["icon","pi pi-trash","styleClass","p-button-sm",3,"click"],["pEditableColumnField","amount",1,"text-right",3,"pEditableColumn"],["pEditableColumnField","pricePerUom",1,"text-right",3,"pEditableColumn"],[3,"ngModelChange","useGrouping","minFractionDigits","maxFractionDigits","ngModel"],[1,"p-inputgroup-addon",3,"innerHtml"],[3,"innerHtml"],["emptyValue","empty",3,"ngModelChange","useGrouping","minFractionDigits","maxFractionDigits","ngModel"],[3,"innerHTML"],["pEditableColumn","",1,"text-right"],["pEditableColumnField","commissionAddition",1,"text-right",3,"pEditableColumn"],["pEditableColumnField","returnCost",1,"text-right",3,"pEditableColumn"],["rowspan","2"],["rowspan","2","pEditableColumnField","price",1,"text-right",3,"pEditableColumn"],["rowspan","2",1,"text-right"],["pEditableColumn",""],["rowspan","2","pEditableColumnField","marketingBudget",1,"text-right",3,"pEditableColumn"],["rowspan","2","pEditableColumnField","amount",1,"text-right",3,"pEditableColumn"],["pEditableColumnField","commissionMultiplier",1,"text-right",3,"pEditableColumn"],["pEditableColumnField","returnPercentage",1,"text-right",3,"pEditableColumn"],[3,"ngModelChange","useGrouping","ngModel","minFractionDigits","maxFractionDigits"],[3,"severity"],["inputId","deliveryCost",3,"ngModelChange","useGrouping","minFractionDigits","maxFractionDigits","ngModel"],["input","date","placeholder","\u0414\u0430\u0442\u0430 \u043e\u0442\u0433\u0440\u0443\u0437\u043a\u0438","appendTo","body","dateFormat","dd.mm.yy",3,"ngModelChange","ngModel","readonlyInput"],["header","\u041e\u0448\u0438\u0431\u043a\u0430",3,"visibleChange","modal","visible","draggable","resizable"],[1,"m-0"]],template:function(C,I){1&C&&(e.nrm(0,"p-toast"),e.DNE(1,Sg,28,9,"div",4)),2&C&&(e.R7$(),e.Y8G("ngIf",I.calculation))},dependencies:[O.nD,O.gV,d.Ei,ge.j9,v.$n,Ce.Vv,l.Sq,l.bT,U.l,j.ms,h.me,h.BC,h.tU,h.vS,R.YI,L.S,oe,ie,f.XI,f.hp,f.c5,ae.v,S.y8,l.Jj,l.QX,l.vh,ht]})}}return g})();const kg=g=>({id:g}),Dg=g=>["/purchase","edit",g];function Gg(g,A){if(1&g&&(e.j41(0,"div",4)(1,"h5"),e.EFF(2,"\u0417\u0430\u043a\u0443\u043f\u043a\u0430"),e.k0s(),e.j41(3,"div",5)(4,"div",6)(5,"div",7)(6,"span",8),e.EFF(7,"\u0421\u0443\u043c\u043c\u0430 \u0437\u0430\u043a\u0443\u043f\u043a\u0438:"),e.k0s(),e.j41(8,"span"),e.EFF(9),e.k0s()(),e.j41(10,"div",7)(11,"span",8),e.EFF(12,"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043f\u043e\u0437\u0438\u0446\u0438\u0439:"),e.k0s(),e.j41(13,"span"),e.EFF(14),e.k0s()(),e.j41(15,"div",7)(16,"span",8),e.EFF(17,"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0442\u043e\u0432\u0430\u0440\u043e\u0432:"),e.k0s(),e.j41(18,"span"),e.EFF(19),e.k0s()()()()()),2&g){const t=e.XpG(2);e.R7$(9),e.SpI("",t.batchInfo.sum,"\u20bd"),e.R7$(5),e.JRh(t.batchInfo.positionCount),e.R7$(5),e.JRh(t.batchInfo.productCount)}}function Fg(g,A){if(1&g&&(e.j41(0,"div",11)(1,"div",7)(2,"div",8),e.EFF(3,"\u0422\u043e\u0432\u0430\u0440:"),e.k0s(),e.j41(4,"div"),e.EFF(5),e.k0s()(),e.j41(6,"div",7)(7,"div",8),e.EFF(8,"\u041f\u0440\u043e\u0434\u0430\u0436\u0438, \u043f\u043b\u0430\u043d:"),e.k0s(),e.j41(9,"div"),e.EFF(10),e.k0s()(),e.j41(11,"div",7)(12,"div",8),e.EFF(13,"\u041f\u0440\u043e\u0434\u0430\u0436\u0438, \u0444\u0430\u043a\u0442:"),e.k0s(),e.j41(14,"div"),e.EFF(15),e.k0s()(),e.j41(16,"div",7)(17,"div",8),e.EFF(18,"\u041f\u0440\u043e\u0434\u0430\u0436\u0438, \u043f\u043b\u0430\u043d:"),e.k0s(),e.j41(19,"div"),e.EFF(20),e.nI1(21,"number"),e.k0s()(),e.j41(22,"div",7)(23,"div",8),e.EFF(24,"\u041f\u0440\u043e\u0434\u0430\u0436\u0438, \u0444\u0430\u043a\u0442:"),e.k0s(),e.j41(25,"div"),e.EFF(26),e.nI1(27,"number"),e.k0s()(),e.j41(28,"div",7)(29,"div",8),e.EFF(30,"\u041a\u043e\u043c\u0438\u0441\u0441\u0438\u044f, \u043f\u043b\u0430\u043d:"),e.k0s(),e.j41(31,"div"),e.EFF(32),e.nI1(33,"number"),e.k0s()(),e.j41(34,"div",7)(35,"div",8),e.EFF(36,"\u041a\u043e\u043c\u0438\u0441\u0441\u0438\u044f, \u0444\u0430\u043a\u0442:"),e.k0s(),e.j41(37,"div"),e.EFF(38),e.nI1(39,"number"),e.k0s()(),e.j41(40,"div",7)(41,"div",8),e.EFF(42,"\u0414\u043e\u0441\u0442\u0430\u0432\u043a\u0430, \u043f\u043b\u0430\u043d:"),e.k0s(),e.j41(43,"div"),e.EFF(44),e.nI1(45,"number"),e.k0s()(),e.j41(46,"div",7)(47,"div",8),e.EFF(48,"\u0414\u043e\u0441\u0442\u0430\u0432\u043a\u0430, \u0444\u0430\u043a\u0442:"),e.k0s(),e.j41(49,"div"),e.EFF(50),e.nI1(51,"number"),e.k0s()(),e.j41(52,"div",7)(53,"div",8),e.EFF(54,"\u0412\u043e\u0437\u0432\u0440\u0430\u0442\u044b, \u043f\u043b\u0430\u043d:"),e.k0s(),e.j41(55,"div"),e.EFF(56),e.k0s()(),e.j41(57,"div",7)(58,"div",8),e.EFF(59,"\u0412\u043e\u0437\u0432\u0440\u0430\u0442\u044b, \u0444\u0430\u043a\u0442:"),e.k0s(),e.j41(60,"div"),e.EFF(61),e.k0s()(),e.j41(62,"div",7)(63,"div",8),e.EFF(64,"\u041f\u0440\u0438\u0431\u044b\u043b\u044c, \u043f\u043b\u0430\u043d:"),e.k0s(),e.j41(65,"div"),e.EFF(66),e.nI1(67,"number"),e.k0s()(),e.j41(68,"div",7)(69,"div",8),e.EFF(70,"\u041f\u0440\u0438\u0431\u044b\u043b\u044c, \u0444\u0430\u043a\u0442:"),e.k0s(),e.j41(71,"div"),e.EFF(72),e.nI1(73,"number"),e.k0s()()()),2&g){const t=A.$implicit;e.R7$(5),e.JRh(t.name),e.R7$(5),e.SpI("",t.plannedAmount,"\u0448\u0442"),e.R7$(5),e.SpI("",t.soldAmount,"\u0448\u0442"),e.R7$(5),e.SpI("",e.i5U(21,13,t.plannedSum,"1.2-2"),"\u20bd"),e.R7$(6),e.SpI("",e.i5U(27,16,t.soldSum,"1.2-2"),"\u20bd"),e.R7$(6),e.SpI("",e.i5U(33,19,t.plannedCommissionPercent,"1.2-2"),"\u20bd"),e.R7$(6),e.SpI("",e.i5U(39,22,t.commissionPercent,"1.2-2"),"\u20bd"),e.R7$(6),e.SpI("",e.i5U(45,25,t.plannedCommissionAddition,"1.2-2"),"\u20bd"),e.R7$(6),e.SpI("",e.i5U(51,28,t.commissionAddition,"1.2-2"),"\u20bd"),e.R7$(6),e.SpI("",t.plannedReturnCount,"\u0448\u0442"),e.R7$(5),e.SpI("",t.returnCount,"\u0448\u0442"),e.R7$(5),e.SpI("",e.i5U(67,31,t.plannedProfit,"1.2-2"),"\u20bd"),e.R7$(6),e.SpI("",e.i5U(73,34,t.profit,"1.2-2"),"\u20bd")}}function wg(g,A){if(1&g&&(e.j41(0,"div",4)(1,"h5"),e.EFF(2),e.k0s(),e.j41(3,"div",5),e.DNE(4,Fg,74,37,"div",10),e.k0s()()),2&g){const t=A.$implicit;e.R7$(2),e.SpI(" ",t.name," "),e.R7$(2),e.Y8G("ngForOf",t.plans)}}function jg(g,A){if(1&g&&(e.j41(0,"div",4)(1,"h4"),e.EFF(2,"\u041f\u043b\u0430\u043d\u044b \u043f\u0440\u043e\u0434\u0430\u0436"),e.k0s(),e.DNE(3,wg,5,2,"div",9),e.k0s()),2&g){const t=e.XpG(2);e.R7$(3),e.Y8G("ngForOf",t.salesInfo.salesChannels)}}function Rg(g,A){if(1&g){const t=e.RV6();e.qex(0),e.j41(1,"h1"),e.EFF(2),e.k0s(),e.j41(3,"p-button",1),e.bIt("click",function(){e.eBV(t);const I=e.XpG();return e.Njj(I.calcPlans())}),e.k0s(),e.nrm(4,"p-button",2),e.DNE(5,Gg,20,3,"div",3)(6,jg,4,1,"div",3),e.bVm()}if(2&g){const t=e.XpG();e.R7$(2),e.JRh(t.batch.name),e.R7$(2),e.Y8G("routerLink",e.eq3(6,Dg,e.eq3(4,kg,t.batch.iD))),e.R7$(),e.Y8G("ngIf",t.batchInfo),e.R7$(),e.Y8G("ngIf",t.salesInfo)}}let Pg=(()=>{class g extends D.x{constructor(t,C,I){super(I),this.purchaseService=t,this.route=C,this.batchID=new T.t(null),this.salesPlanIDs=new T.t([])}ngOnInit(){this.titleService.setTitle("\u0421\u0432\u043e\u0434\u043a\u0430 \u043f\u043e \u0437\u0430\u043a\u0443\u043f\u043a\u0435");const t=+this.route.snapshot.paramMap.get("id");t>0&&this.batchID.next(t),this.batchID.pipe((0,G.Q)(this.destroyed)).pipe((0,$.p)(C=>!!C)).pipe((0,E.n)(C=>this.purchaseService.getBatch(C))).subscribe(C=>{this.batch=C,this.updateBatchInfo(),this.titleService.setTitle(`\u0421\u0432\u043e\u0434\u043a\u0430 \u043f\u043e \u0437\u0430\u043a\u0443\u043f\u043a\u0435 - ${C.name}`)}),this.salesPlanIDs.pipe((0,G.Q)(this.destroyed)).pipe((0,$.p)(C=>!!C?.length)).pipe((0,E.n)(C=>this.purchaseService.getSalesPlansSummaries(C))).subscribe(C=>{this.summaries=C,this.salesInfo=this.getSalesInfo(this.batch,C)})}updateBatchInfo(){this.batchInfo=this.batch?this.getBatchInfo(this.batch):{},this.salesInfo={},this.summaries=[],this.salesPlanIDs.next(this.batch.items.reduce((t,C)=>C.salesItems.reduce((I,n)=>n.salesPlans.reduce((i,o)=>(t.push(o.iD),t),t),t),[]))}getBatchInfo(t){const C={};return C.sum=t.items.reduce((I,n)=>I+n.count*n.price,0),C.productCount=t.items.reduce((I,n)=>I+n.count,0),C.positionCount=t.items.length,C}getSalesInfo(t,C){const I={},n=[];for(const i of t.items)for(const s of i.salesItems){this.purchaseService.getSalesItemCosts(s);for(const c of s.salesPlans){const b=C.find(J=>J.iD==c.iD);let X=n.find(J=>J.channelID==c.salesChannelID);X||(X={channelID:c.salesChannelID,name:c.salesChannel.name,plans:[]},n.push(X)),this.purchaseService.getSalesPlanSelfCost(s,c,i);const Zn=this.purchaseService.getSalesPlanSelfCost(s,c,i)*c.amount,qn=this.purchaseService.getSalesItemCosts(s)*c.amount;X.plans.push({name:s.productPackage.name+", "+s.name,plannedAmount:c.amount,soldAmount:b.salesCount,plannedSum:c.price*c.amount,soldSum:b.salesSum,plannedCommissionAddition:-c.commissionAddition*c.amount,plannedCommissionPercent:-Math.ceil(c.amount*c.price*c.commissionMultiplier/100),commissionAddition:b.commissionAddition,commissionPercent:b.commissionPercent,plannedReturnCount:Math.ceil(c.amount*c.returnPercentage/100),returnCount:b.returnCount,plannedProfit:c.amount*c.price-Zn-c.deliveryCost,profit:b.salesSum-b.returnSum+b.commissionPercent+b.commissionAddition-qn-c.deliveryCost-i.count*i.price})}}return I.salesChannels=n,I}calcPlans(){this.purchaseService.calcPlans()}static{this.\u0275fac=function(C){return new(C||g)(e.rXU(w),e.rXU(x.nX),e.rXU(N.hE))}}static{this.\u0275cmp=e.VBU({type:g,selectors:[["app-purchase-summary"]],inputs:{batchID:"batchID"},features:[e.Jv_([{provide:h.kq,useExisting:(0,e.Rfq)(()=>g),multi:!0}]),e.Vt3],decls:1,vars:1,consts:[[4,"ngIf"],["styleClass","mb-3","label","\u041f\u0435\u0440\u0435\u0441\u0447\u0438\u0442\u0430\u0442\u044c",3,"click"],["styleClass","mb-3","label","\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0437\u0430\u043a\u0443\u043f\u043a\u0443",3,"routerLink"],["class","card",4,"ngIf"],[1,"card"],[1,"grid"],[1,"col-12","md:col-6","xl:col-4"],[1,"flex","justify-content-between"],[1,"font-bold","text-900"],["class","card",4,"ngFor","ngForOf"],["class","col-6 md:col-12 xl:col-4",4,"ngFor","ngForOf"],[1,"col-6","md:col-12","xl:col-4"]],template:function(C,I){1&C&&e.DNE(0,Rg,7,8,"ng-container",0),2&C&&e.Y8G("ngIf",I.batch)},dependencies:[v.$n,l.Sq,l.bT,x.Wk,l.QX]})}}return g})();var Mg=a(152),Bg=a(3294),le=a(2356),re=a(5430),H=a(9071),se=a(3306),B=a(2423),ce=a(5434),pe=a(6018),V=a(5998),z=a(8757);const de=g=>({"p-treenode-droppoint-active":g}),Vg=(g,A)=>["p-treenode",g,A],_e=g=>({height:g}),Yg=g=>({"padding-left":g}),Xg=(g,A,t)=>({"p-treenode-selectable":g,"p-treenode-dragover":A,"p-highlight":t}),Y=g=>({$implicit:g}),$g=(g,A)=>({"p-checkbox-disabled p-disabled":g,"p-variant-filled":A}),Og=(g,A)=>({"p-highlight":g,"p-indeterminate":A}),Ug=(g,A)=>({$implicit:g,partialSelected:A}),ue=g=>({display:g}),Lg=g=>({"p-treenode-collapsed":g}),Hg=(g,A)=>({"p-treenode-selectable":g,"p-highlight":A}),me=g=>({"p-treenode-connector-line":g});function zg(g,A){if(1&g){const t=e.RV6();e.j41(0,"li",4),e.bIt("drop",function(I){e.eBV(t);const n=e.XpG(2);return e.Njj(n.onDropPoint(I,-1))})("dragover",function(I){e.eBV(t);const n=e.XpG(2);return e.Njj(n.onDropPointDragOver(I))})("dragenter",function(I){e.eBV(t);const n=e.XpG(2);return e.Njj(n.onDropPointDragEnter(I,-1))})("dragleave",function(I){e.eBV(t);const n=e.XpG(2);return e.Njj(n.onDropPointDragLeave(I))}),e.k0s()}if(2&g){const t=e.XpG(2);e.Y8G("ngClass",e.eq3(2,de,t.draghoverPrev)),e.BMQ("aria-hidden",!0)}}function Kg(g,A){1&g&&e.nrm(0,"ChevronRightIcon",14),2&g&&e.Y8G("styleClass","p-tree-toggler-icon")}function Qg(g,A){1&g&&e.nrm(0,"ChevronDownIcon",14),2&g&&e.Y8G("styleClass","p-tree-toggler-icon")}function Wg(g,A){if(1&g&&(e.qex(0),e.DNE(1,Kg,1,1,"ChevronRightIcon",13)(2,Qg,1,1,"ChevronDownIcon",13),e.bVm()),2&g){const t=e.XpG(4);e.R7$(),e.Y8G("ngIf",!t.node.expanded),e.R7$(),e.Y8G("ngIf",t.node.expanded)}}function Jg(g,A){1&g&&(e.qex(0),e.nrm(1,"SpinnerIcon",15),e.bVm()),2&g&&(e.R7$(),e.Y8G("spin",!0)("styleClass","p-tree-node-toggler-icon"))}function Zg(g,A){if(1&g&&(e.qex(0),e.DNE(1,Wg,3,2,"ng-container",8)(2,Jg,2,2,"ng-container",8),e.bVm()),2&g){const t=e.XpG(3);e.R7$(),e.Y8G("ngIf",!t.node.loading),e.R7$(),e.Y8G("ngIf","icon"===t.loadingMode&&t.node.loading)}}function qg(g,A){}function eC(g,A){1&g&&e.DNE(0,qg,0,0,"ng-template")}function tC(g,A){if(1&g&&(e.j41(0,"span",16),e.DNE(1,eC,1,0,null,17),e.k0s()),2&g){const t=e.XpG(3);e.R7$(),e.Y8G("ngTemplateOutlet",t.tree.togglerIconTemplate)("ngTemplateOutletContext",e.eq3(2,Y,t.node.expanded))}}function gC(g,A){1&g&&e.nrm(0,"CheckIcon",14),2&g&&e.Y8G("styleClass","p-checkbox-icon")}function CC(g,A){1&g&&e.nrm(0,"MinusIcon",14),2&g&&e.Y8G("styleClass","p-checkbox-icon")}function IC(g,A){if(1&g&&(e.qex(0),e.DNE(1,gC,1,1,"CheckIcon",13)(2,CC,1,1,"MinusIcon",13),e.bVm()),2&g){const t=e.XpG(4);e.R7$(),e.Y8G("ngIf",!t.node.partialSelected&&t.isSelected()),e.R7$(),e.Y8G("ngIf",t.node.partialSelected)}}function nC(g,A){}function AC(g,A){1&g&&e.DNE(0,nC,0,0,"ng-template")}function iC(g,A){if(1&g&&(e.j41(0,"div",18)(1,"div",19),e.DNE(2,IC,3,2,"ng-container",8)(3,AC,1,0,null,17),e.k0s()()),2&g){const t=e.XpG(3);e.Y8G("ngClass",e.l_i(5,$g,!1===t.node.selectable,"filled"===(null==t.tree?null:t.tree.config.inputStyle()))),e.R7$(),e.Y8G("ngClass",e.l_i(8,Og,t.isSelected(),t.node.partialSelected)),e.R7$(),e.Y8G("ngIf",!t.tree.checkboxIconTemplate),e.R7$(),e.Y8G("ngTemplateOutlet",t.tree.checkboxIconTemplate)("ngTemplateOutletContext",e.l_i(11,Ug,t.isSelected(),t.node.partialSelected))}}function oC(g,A){if(1&g&&e.nrm(0,"span"),2&g){const t=e.XpG(3);e.HbH(t.getIcon())}}function aC(g,A){if(1&g&&(e.j41(0,"span"),e.EFF(1),e.k0s()),2&g){const t=e.XpG(3);e.R7$(),e.JRh(t.node.label)}}function lC(g,A){1&g&&e.eu8(0)}function rC(g,A){if(1&g&&(e.j41(0,"span"),e.DNE(1,lC,1,0,"ng-container",17),e.k0s()),2&g){const t=e.XpG(3);e.R7$(),e.Y8G("ngTemplateOutlet",t.tree.getTemplateForNode(t.node))("ngTemplateOutletContext",e.eq3(2,Y,t.node))}}function sC(g,A){if(1&g&&e.nrm(0,"p-treeNode",22),2&g){const t=A.$implicit,C=A.first,I=A.last,n=A.index,i=e.XpG(4);e.Y8G("node",t)("parentNode",i.node)("firstChild",C)("lastChild",I)("index",n)("itemSize",i.itemSize)("level",i.level+1)("loadingMode",i.loadingMode)}}function cC(g,A){if(1&g&&(e.j41(0,"ul",20),e.DNE(1,sC,1,8,"p-treeNode",21),e.k0s()),2&g){const t=e.XpG(3);e.Y8G("ngStyle",e.eq3(3,ue,t.node.expanded?"block":"none")),e.R7$(),e.Y8G("ngForOf",t.node.children)("ngForTrackBy",t.tree.trackBy)}}function pC(g,A){if(1&g){const t=e.RV6();e.j41(0,"li",5),e.bIt("keydown",function(I){e.eBV(t);const n=e.XpG(2);return e.Njj(n.onKeyDown(I))}),e.j41(1,"div",6),e.bIt("click",function(I){e.eBV(t);const n=e.XpG(2);return e.Njj(n.onNodeClick(I))})("contextmenu",function(I){e.eBV(t);const n=e.XpG(2);return e.Njj(n.onNodeRightClick(I))})("touchend",function(){e.eBV(t);const I=e.XpG(2);return e.Njj(I.onNodeTouchEnd())})("drop",function(I){e.eBV(t);const n=e.XpG(2);return e.Njj(n.onDropNode(I))})("dragover",function(I){e.eBV(t);const n=e.XpG(2);return e.Njj(n.onDropNodeDragOver(I))})("dragenter",function(I){e.eBV(t);const n=e.XpG(2);return e.Njj(n.onDropNodeDragEnter(I))})("dragleave",function(I){e.eBV(t);const n=e.XpG(2);return e.Njj(n.onDropNodeDragLeave(I))})("dragstart",function(I){e.eBV(t);const n=e.XpG(2);return e.Njj(n.onDragStart(I))})("dragend",function(I){e.eBV(t);const n=e.XpG(2);return e.Njj(n.onDragStop(I))}),e.j41(2,"button",7),e.bIt("click",function(I){e.eBV(t);const n=e.XpG(2);return e.Njj(n.toggle(I))}),e.DNE(3,Zg,3,2,"ng-container",8)(4,tC,2,4,"span",9),e.k0s(),e.DNE(5,iC,4,14,"div",10)(6,oC,1,2,"span",3),e.j41(7,"span",11),e.DNE(8,aC,2,1,"span",8)(9,rC,2,4,"span",8),e.k0s()(),e.DNE(10,cC,2,5,"ul",12),e.k0s()}if(2&g){const t=e.XpG(2);e.Aen(t.node.style),e.Y8G("ngClass",e.l_i(24,Vg,t.node.styleClass||"",t.isLeaf()?"p-treenode-leaf":""))("ngStyle",e.eq3(27,_e,t.itemSize+"px")),e.BMQ("aria-label",t.node.label)("aria-checked",t.ariaChecked)("aria-setsize",t.node.children?t.node.children.length:0)("aria-selected",t.ariaSelected)("aria-expanded",t.node.expanded)("aria-posinset",t.index+1)("aria-level",t.level+1)("tabindex",0===t.index?0:-1)("data-id",t.node.key),e.R7$(),e.Y8G("ngStyle",e.eq3(29,Yg,t.level*t.indentation+"rem"))("draggable",t.tree.draggableNodes)("ngClass",e.sMw(31,Xg,t.tree.selectionMode&&!1!==t.node.selectable,t.draghoverNode,t.isSelected())),e.R7$(),e.BMQ("data-pc-section","toggler"),e.R7$(),e.Y8G("ngIf",!t.tree.togglerIconTemplate),e.R7$(),e.Y8G("ngIf",t.tree.togglerIconTemplate),e.R7$(),e.Y8G("ngIf","checkbox"==t.tree.selectionMode),e.R7$(),e.Y8G("ngIf",t.node.icon||t.node.expandedIcon||t.node.collapsedIcon),e.R7$(2),e.Y8G("ngIf",!t.tree.getTemplateForNode(t.node)),e.R7$(),e.Y8G("ngIf",t.tree.getTemplateForNode(t.node)),e.R7$(),e.Y8G("ngIf",!t.tree.virtualScroll&&t.node.children&&t.node.expanded)}}function dC(g,A){if(1&g){const t=e.RV6();e.j41(0,"li",4),e.bIt("drop",function(I){e.eBV(t);const n=e.XpG(2);return e.Njj(n.onDropPoint(I,1))})("dragover",function(I){e.eBV(t);const n=e.XpG(2);return e.Njj(n.onDropPointDragOver(I))})("dragenter",function(I){e.eBV(t);const n=e.XpG(2);return e.Njj(n.onDropPointDragEnter(I,1))})("dragleave",function(I){e.eBV(t);const n=e.XpG(2);return e.Njj(n.onDropPointDragLeave(I))}),e.k0s()}if(2&g){const t=e.XpG(2);e.Y8G("ngClass",e.eq3(2,de,t.draghoverNext)),e.BMQ("aria-hidden",!0)}}function _C(g,A){if(1&g&&(e.j41(0,"td",28)(1,"table",29)(2,"tbody")(3,"tr"),e.nrm(4,"td",30),e.k0s(),e.j41(5,"tr"),e.nrm(6,"td",30),e.k0s()()()()),2&g){const t=e.XpG(3);e.R7$(4),e.Y8G("ngClass",e.eq3(2,me,!t.firstChild)),e.R7$(2),e.Y8G("ngClass",e.eq3(4,me,!t.lastChild))}}function uC(g,A){if(1&g&&e.nrm(0,"PlusIcon",33),2&g){const t=e.XpG(5);e.Y8G("styleClass","p-tree-toggler-icon")("ariaLabel",t.tree.togglerAriaLabel)}}function mC(g,A){if(1&g&&e.nrm(0,"MinusIcon",33),2&g){const t=e.XpG(5);e.Y8G("styleClass","p-tree-toggler-icon")("ariaLabel",t.tree.togglerAriaLabel)}}function hC(g,A){if(1&g&&(e.qex(0),e.DNE(1,uC,1,2,"PlusIcon",32)(2,mC,1,2,"MinusIcon",32),e.bVm()),2&g){const t=e.XpG(4);e.R7$(),e.Y8G("ngIf",!t.node.expanded),e.R7$(),e.Y8G("ngIf",t.node.expanded)}}function fC(g,A){}function bC(g,A){1&g&&e.DNE(0,fC,0,0,"ng-template")}function TC(g,A){if(1&g&&(e.j41(0,"span",16),e.DNE(1,bC,1,0,null,17),e.k0s()),2&g){const t=e.XpG(4);e.R7$(),e.Y8G("ngTemplateOutlet",t.tree.togglerIconTemplate)("ngTemplateOutletContext",e.eq3(2,Y,t.node.expanded))}}function vC(g,A){if(1&g){const t=e.RV6();e.j41(0,"span",31),e.bIt("click",function(I){e.eBV(t);const n=e.XpG(3);return e.Njj(n.toggle(I))}),e.DNE(1,hC,3,2,"ng-container",8)(2,TC,2,4,"span",9),e.k0s()}if(2&g){const t=e.XpG(3);e.Y8G("ngClass","p-tree-toggler"),e.R7$(),e.Y8G("ngIf",!t.tree.togglerIconTemplate),e.R7$(),e.Y8G("ngIf",t.tree.togglerIconTemplate)}}function yC(g,A){if(1&g&&e.nrm(0,"span"),2&g){const t=e.XpG(3);e.HbH(t.getIcon())}}function xC(g,A){if(1&g&&(e.j41(0,"span"),e.EFF(1),e.k0s()),2&g){const t=e.XpG(3);e.R7$(),e.JRh(t.node.label)}}function EC(g,A){1&g&&e.eu8(0)}function SC(g,A){if(1&g&&(e.j41(0,"span"),e.DNE(1,EC,1,0,"ng-container",17),e.k0s()),2&g){const t=e.XpG(3);e.R7$(),e.Y8G("ngTemplateOutlet",t.tree.getTemplateForNode(t.node))("ngTemplateOutletContext",e.eq3(2,Y,t.node))}}function NC(g,A){if(1&g&&e.nrm(0,"p-treeNode",37),2&g){const C=A.first,I=A.last;e.Y8G("node",A.$implicit)("firstChild",C)("lastChild",I)}}function kC(g,A){if(1&g&&(e.j41(0,"td",34)(1,"div",35),e.DNE(2,NC,1,3,"p-treeNode",36),e.k0s()()),2&g){const t=e.XpG(3);e.Y8G("ngStyle",e.eq3(3,ue,t.node.expanded?"table-cell":"none")),e.R7$(2),e.Y8G("ngForOf",t.node.children)("ngForTrackBy",t.tree.trackBy)}}function DC(g,A){if(1&g){const t=e.RV6();e.j41(0,"table")(1,"tbody")(2,"tr"),e.DNE(3,_C,7,6,"td",23),e.j41(4,"td",24)(5,"div",25),e.bIt("click",function(I){e.eBV(t);const n=e.XpG(2);return e.Njj(n.onNodeClick(I))})("contextmenu",function(I){e.eBV(t);const n=e.XpG(2);return e.Njj(n.onNodeRightClick(I))})("touchend",function(){e.eBV(t);const I=e.XpG(2);return e.Njj(I.onNodeTouchEnd())})("keydown",function(I){e.eBV(t);const n=e.XpG(2);return e.Njj(n.onNodeKeydown(I))}),e.DNE(6,vC,3,3,"span",26)(7,yC,1,2,"span",3),e.j41(8,"span",11),e.DNE(9,xC,2,1,"span",8)(10,SC,2,4,"span",8),e.k0s()()(),e.DNE(11,kC,3,5,"td",27),e.k0s()()()}if(2&g){const t=e.XpG(2);e.HbH(t.node.styleClass),e.R7$(3),e.Y8G("ngIf",!t.root),e.R7$(),e.Y8G("ngClass",e.eq3(10,Lg,!t.node.expanded)),e.R7$(),e.Y8G("ngClass",e.l_i(12,Hg,t.tree.selectionMode,t.isSelected())),e.R7$(),e.Y8G("ngIf",!t.isLeaf()),e.R7$(),e.Y8G("ngIf",t.node.icon||t.node.expandedIcon||t.node.collapsedIcon),e.R7$(2),e.Y8G("ngIf",!t.tree.getTemplateForNode(t.node)),e.R7$(),e.Y8G("ngIf",t.tree.getTemplateForNode(t.node)),e.R7$(),e.Y8G("ngIf",t.node.children&&t.node.expanded)}}function GC(g,A){if(1&g&&e.DNE(0,zg,1,4,"li",1)(1,pC,11,35,"li",2)(2,dC,1,4,"li",1)(3,DC,12,15,"table",3),2&g){const t=e.XpG();e.Y8G("ngIf",t.tree.droppableNodes),e.R7$(),e.Y8G("ngIf",!t.tree.horizontal),e.R7$(),e.Y8G("ngIf",t.tree.droppableNodes&&t.lastChild),e.R7$(),e.Y8G("ngIf",t.tree.horizontal)}}const FC=["filter"],wC=["scroller"],jC=["wrapper"],RC=(g,A,t,C)=>({"p-tree p-component":!0,"p-tree-selectable":g,"p-treenode-dragover":A,"p-tree-loading":t,"p-tree-flex-scrollable":C}),PC=g=>({options:g}),MC=g=>({"max-height":g}),BC=g=>({"p-tree p-tree-horizontal p-component":!0,"p-tree-selectable":g});function VC(g,A){if(1&g&&e.nrm(0,"i"),2&g){const t=e.XpG(3);e.HbH("p-tree-loading-icon pi-spin "+t.loadingIcon)}}function YC(g,A){1&g&&e.nrm(0,"SpinnerIcon",17),2&g&&e.Y8G("spin",!0)("styleClass","p-tree-loading-icon")}function XC(g,A){}function $C(g,A){1&g&&e.DNE(0,XC,0,0,"ng-template")}function OC(g,A){if(1&g&&(e.j41(0,"span",18),e.DNE(1,$C,1,0,null,9),e.k0s()),2&g){const t=e.XpG(4);e.R7$(),e.Y8G("ngTemplateOutlet",t.loadingIconTemplate)}}function UC(g,A){if(1&g&&(e.qex(0),e.DNE(1,YC,1,2,"SpinnerIcon",15)(2,OC,2,1,"span",16),e.bVm()),2&g){const t=e.XpG(3);e.R7$(),e.Y8G("ngIf",!t.loadingIconTemplate),e.R7$(),e.Y8G("ngIf",t.loadingIconTemplate)}}function LC(g,A){if(1&g&&(e.j41(0,"div",13),e.DNE(1,VC,1,2,"i",14)(2,UC,3,2,"ng-container",11),e.k0s()),2&g){const t=e.XpG(2);e.R7$(),e.Y8G("ngIf",t.loadingIcon),e.R7$(),e.Y8G("ngIf",!t.loadingIcon)}}function HC(g,A){1&g&&e.eu8(0)}function zC(g,A){1&g&&e.nrm(0,"SearchIcon",23),2&g&&e.Y8G("styleClass","p-tree-filter-icon")}function KC(g,A){}function QC(g,A){1&g&&e.DNE(0,KC,0,0,"ng-template")}function WC(g,A){if(1&g&&(e.j41(0,"span",24),e.DNE(1,QC,1,0,null,9),e.k0s()),2&g){const t=e.XpG(3);e.R7$(),e.Y8G("ngTemplateOutlet",t.filterIconTemplate)}}function JC(g,A){if(1&g){const t=e.RV6();e.j41(0,"div",19)(1,"input",20,0),e.bIt("keydown.enter",function(I){return e.eBV(t),e.Njj(I.preventDefault())})("input",function(I){e.eBV(t);const n=e.XpG(2);return e.Njj(n._filter(I.target.value))}),e.k0s(),e.DNE(3,zC,1,1,"SearchIcon",21)(4,WC,2,1,"span",22),e.k0s()}if(2&g){const t=e.XpG(2);e.R7$(),e.BMQ("placeholder",t.filterPlaceholder),e.R7$(2),e.Y8G("ngIf",!t.filterIconTemplate),e.R7$(),e.Y8G("ngIf",t.filterIconTemplate)}}function ZC(g,A){if(1&g&&e.nrm(0,"p-treeNode",31,2),2&g){const t=A.$implicit,C=A.first,I=e.XpG(2).options,n=e.XpG(4);e.Y8G("level",t.level)("rowNode",t)("node",t.node)("parentNode",t.parent)("firstChild",C)("lastChild",t.lastChild)("index",t.index)("itemSize",I.itemSize)("indentation",n.indentation)("loadingMode",n.loadingMode)}}function qC(g,A){if(1&g&&(e.j41(0,"ul",29),e.DNE(1,ZC,2,10,"p-treeNode",30),e.k0s()),2&g){const t=e.XpG(),C=t.$implicit,I=t.options,n=e.XpG(4);e.Aen(I.contentStyle),e.Y8G("ngClass",I.contentStyleClass),e.BMQ("aria-label",n.ariaLabel)("aria-labelledby",n.ariaLabelledBy),e.R7$(),e.Y8G("ngForOf",C)("ngForTrackBy",n.trackBy)}}function eI(g,A){1&g&&e.DNE(0,qC,2,7,"ul",28),2&g&&e.Y8G("ngIf",A.$implicit)}function tI(g,A){1&g&&e.eu8(0)}function gI(g,A){if(1&g&&e.DNE(0,tI,1,0,"ng-container",33),2&g){const t=A.options,C=e.XpG(5);e.Y8G("ngTemplateOutlet",C.loaderTemplate)("ngTemplateOutletContext",e.eq3(2,PC,t))}}function CI(g,A){1&g&&(e.qex(0),e.DNE(1,gI,1,4,"ng-template",32),e.bVm())}function II(g,A){if(1&g){const t=e.RV6();e.j41(0,"p-scroller",26,1),e.bIt("onScroll",function(I){e.eBV(t);const n=e.XpG(3);return e.Njj(n.onScroll.emit(I))})("onScrollIndexChange",function(I){e.eBV(t);const n=e.XpG(3);return e.Njj(n.onScrollIndexChange.emit(I))})("onLazyLoad",function(I){e.eBV(t);const n=e.XpG(3);return e.Njj(n.onLazyLoad.emit(I))}),e.DNE(2,eI,1,1,"ng-template",27)(3,CI,2,0,"ng-container",11),e.k0s()}if(2&g){const t=e.XpG(3);e.Aen(e.eq3(9,_e,"flex"!==t.scrollHeight?t.scrollHeight:void 0)),e.Y8G("items",t.serializedValue)("tabindex",-1)("scrollHeight","flex"!==t.scrollHeight?void 0:"100%")("itemSize",t.virtualScrollItemSize||t._virtualNodeHeight)("lazy",t.lazy)("options",t.virtualScrollOptions),e.R7$(3),e.Y8G("ngIf",t.loaderTemplate)}}function nI(g,A){if(1&g&&e.nrm(0,"p-treeNode",38),2&g){const t=A.$implicit,C=A.first,I=A.last,n=A.index,i=e.XpG(5);e.Y8G("node",t)("firstChild",C)("lastChild",I)("index",n)("level",0)("loadingMode",i.loadingMode)}}function AI(g,A){if(1&g&&(e.j41(0,"ul",36),e.DNE(1,nI,1,6,"p-treeNode",37),e.k0s()),2&g){const t=e.XpG(4);e.BMQ("aria-label",t.ariaLabel)("aria-labelledby",t.ariaLabelledBy),e.R7$(),e.Y8G("ngForOf",t.getRootNode())("ngForTrackBy",t.trackBy)}}function iI(g,A){if(1&g&&(e.qex(0),e.j41(1,"div",34,3),e.DNE(3,AI,2,4,"ul",35),e.k0s(),e.bVm()),2&g){const t=e.XpG(3);e.R7$(),e.Y8G("ngStyle",e.eq3(2,MC,t.scrollHeight)),e.R7$(2),e.Y8G("ngIf",t.getRootNode())}}function oI(g,A){if(1&g&&(e.qex(0),e.DNE(1,II,4,11,"p-scroller",25)(2,iI,4,4,"ng-container",11),e.bVm()),2&g){const t=e.XpG(2);e.R7$(),e.Y8G("ngIf",t.virtualScroll),e.R7$(),e.Y8G("ngIf",!t.virtualScroll)}}function aI(g,A){if(1&g&&(e.qex(0),e.EFF(1),e.bVm()),2&g){const t=e.XpG(3);e.R7$(),e.SpI(" ",t.emptyMessageLabel," ")}}function lI(g,A){1&g&&e.eu8(0,null,4)}function rI(g,A){if(1&g&&(e.j41(0,"div",39),e.DNE(1,aI,2,1,"ng-container",40)(2,lI,2,0,"ng-container",9),e.k0s()),2&g){const t=e.XpG(2);e.R7$(),e.Y8G("ngIf",!t.emptyMessageTemplate)("ngIfElse",t.emptyFilter),e.R7$(),e.Y8G("ngTemplateOutlet",t.emptyMessageTemplate)}}function sI(g,A){1&g&&e.eu8(0)}function cI(g,A){if(1&g){const t=e.RV6();e.j41(0,"div",7),e.bIt("drop",function(I){e.eBV(t);const n=e.XpG();return e.Njj(n.onDrop(I))})("dragover",function(I){e.eBV(t);const n=e.XpG();return e.Njj(n.onDragOver(I))})("dragenter",function(){e.eBV(t);const I=e.XpG();return e.Njj(I.onDragEnter())})("dragleave",function(I){e.eBV(t);const n=e.XpG();return e.Njj(n.onDragLeave(I))}),e.DNE(1,LC,3,2,"div",8)(2,HC,1,0,"ng-container",9)(3,JC,5,3,"div",10)(4,oI,3,2,"ng-container",11)(5,rI,3,3,"div",12)(6,sI,1,0,"ng-container",9),e.k0s()}if(2&g){let t;const C=e.XpG();e.HbH(C.styleClass),e.Y8G("ngClass",e.ziG(10,RC,C.selectionMode,C.dragHover,C.loading,"flex"===C.scrollHeight))("ngStyle",C.style),e.R7$(),e.Y8G("ngIf",C.loading&&"mask"===C.loadingMode),e.R7$(),e.Y8G("ngTemplateOutlet",C.headerTemplate),e.R7$(),e.Y8G("ngIf",C.filter),e.R7$(),e.Y8G("ngIf",null==(t=C.getRootNode())?null:t.length),e.R7$(),e.Y8G("ngIf",!C.loading&&(null==C.getRootNode()||0===C.getRootNode().length)),e.R7$(),e.Y8G("ngTemplateOutlet",C.footerTemplate)}}function pI(g,A){1&g&&e.eu8(0)}function dI(g,A){if(1&g&&e.nrm(0,"i"),2&g){const t=e.XpG(3);e.HbH("p-tree-loading-icon pi-spin "+t.loadingIcon)}}function _I(g,A){1&g&&e.nrm(0,"SpinnerIcon",17),2&g&&e.Y8G("spin",!0)("styleClass","p-tree-loading-icon")}function uI(g,A){}function mI(g,A){1&g&&e.DNE(0,uI,0,0,"ng-template")}function hI(g,A){if(1&g&&(e.j41(0,"span",18),e.DNE(1,mI,1,0,null,9),e.k0s()),2&g){const t=e.XpG(4);e.R7$(),e.Y8G("ngTemplateOutlet",t.loadingIconTemplate)}}function fI(g,A){if(1&g&&(e.qex(0),e.DNE(1,_I,1,2,"SpinnerIcon",15)(2,hI,2,1,"span",16),e.bVm()),2&g){const t=e.XpG(3);e.R7$(),e.Y8G("ngIf",!t.loadingIconTemplate),e.R7$(),e.Y8G("ngIf",t.loadingIconTemplate)}}function bI(g,A){if(1&g&&(e.j41(0,"div",43),e.DNE(1,dI,1,2,"i",14)(2,fI,3,2,"ng-container",11),e.k0s()),2&g){const t=e.XpG(2);e.R7$(),e.Y8G("ngIf",t.loadingIcon),e.R7$(),e.Y8G("ngIf",!t.loadingIcon)}}function TI(g,A){if(1&g&&(e.j41(0,"table"),e.nrm(1,"p-treeNode",44),e.k0s()),2&g){const t=e.XpG(2);e.R7$(),e.Y8G("node",t.value[0])("root",!0)}}function vI(g,A){if(1&g&&(e.qex(0),e.EFF(1),e.bVm()),2&g){const t=e.XpG(3);e.R7$(),e.SpI(" ",t.emptyMessageLabel," ")}}function yI(g,A){1&g&&e.eu8(0,null,4)}function xI(g,A){if(1&g&&(e.j41(0,"div",39),e.DNE(1,vI,2,1,"ng-container",40)(2,yI,2,0,"ng-container",9),e.k0s()),2&g){const t=e.XpG(2);e.R7$(),e.Y8G("ngIf",!t.emptyMessageTemplate)("ngIfElse",t.emptyFilter),e.R7$(),e.Y8G("ngTemplateOutlet",t.emptyMessageTemplate)}}function EI(g,A){1&g&&e.eu8(0)}function SI(g,A){if(1&g&&(e.j41(0,"div",41),e.DNE(1,pI,1,0,"ng-container",9)(2,bI,3,2,"div",42)(3,TI,2,2,"table",11)(4,xI,3,3,"div",12)(5,EI,1,0,"ng-container",9),e.k0s()),2&g){const t=e.XpG();e.HbH(t.styleClass),e.Y8G("ngClass",e.eq3(9,BC,t.selectionMode))("ngStyle",t.style),e.R7$(),e.Y8G("ngTemplateOutlet",t.headerTemplate),e.R7$(),e.Y8G("ngIf",t.loading),e.R7$(),e.Y8G("ngIf",t.value&&t.value[0]),e.R7$(),e.Y8G("ngIf",!t.loading&&(null==t.getRootNode()||0===t.getRootNode().length)),e.R7$(),e.Y8G("ngTemplateOutlet",t.footerTemplate)}}let NI=(()=>{class g{static ICON_CLASS="p-treenode-icon ";rowNode;node;parentNode;root;index;firstChild;lastChild;level;indentation;itemSize;loadingMode;tree;timeout;draghoverPrev;draghoverNext;draghoverNode;get ariaSelected(){return"single"===this.tree.selectionMode||"multiple"===this.tree.selectionMode?this.isSelected():void 0}get ariaChecked(){return"checkbox"===this.tree.selectionMode?this.isSelected():void 0}constructor(t){this.tree=t}ngOnInit(){this.node.parent=this.parentNode;const C=this.tree.el.nativeElement.closest("p-dialog");this.parentNode&&!C&&(this.setAllNodesTabIndexes(),this.tree.syncNodeOption(this.node,this.tree.value,"parent",this.tree.getNodeWithKey(this.parentNode.key,this.tree.value)))}getIcon(){let t;return t=this.node.icon?this.node.icon:this.node.expanded&&this.node.children&&this.node.children?.length?this.node.expandedIcon:this.node.collapsedIcon,g.ICON_CLASS+" "+t}isLeaf(){return this.tree.isNodeLeaf(this.node)}toggle(t){this.node.expanded?this.collapse(t):this.expand(t),t.stopPropagation()}expand(t){this.node.expanded=!0,this.tree.virtualScroll&&(this.tree.updateSerializedValue(),this.focusVirtualNode()),this.tree.onNodeExpand.emit({originalEvent:t,node:this.node})}collapse(t){this.node.expanded=!1,this.tree.virtualScroll&&(this.tree.updateSerializedValue(),this.focusVirtualNode()),this.tree.onNodeCollapse.emit({originalEvent:t,node:this.node})}onNodeClick(t){this.tree.onNodeClick(t,this.node)}onNodeKeydown(t){"Enter"===t.key&&this.tree.onNodeClick(t,this.node)}onNodeTouchEnd(){this.tree.onNodeTouchEnd()}onNodeRightClick(t){this.tree.onNodeRightClick(t,this.node)}isSelected(){return this.tree.isSelected(this.node)}isSameNode(t){return t.currentTarget&&(t.currentTarget.isSameNode(t.target)||t.currentTarget.isSameNode(t.target.closest('[role="treeitem"]')))}onDropPoint(t,C){t.preventDefault();let I=this.tree.dragNode,o=this.tree.dragNodeTree!==this.tree||1===C||this.tree.dragNodeIndex!==this.index-1;if(this.tree.allowDrop(I,this.node,this.tree.dragNodeScope,"between")&&o){let s={...this.createDropPointEventMetadata(C)};this.tree.validateDrop?this.tree.onNodeDrop.emit({originalEvent:t,dragNode:I,dropNode:this.node,dropPoint:"between",index:this.index,accept:()=>{this.processPointDrop(s)}}):(this.processPointDrop(s),this.tree.onNodeDrop.emit({originalEvent:t,dragNode:I,dropNode:this.node,dropPoint:"between",index:this.index}))}this.draghoverPrev=!1,this.draghoverNext=!1}processPointDrop(t){let C=t.dropNode.parent?t.dropNode.parent.children:this.tree.value;t.dragNodeSubNodes.splice(t.dragNodeIndex,1);let I=this.index;t.position<0?(I=t.dragNodeSubNodes===C?t.dragNodeIndex>t.index?t.index:t.index-1:t.index,C.splice(I,0,t.dragNode)):(I=C.length,C.push(t.dragNode)),this.tree.dragDropService.stopDrag({node:t.dragNode,subNodes:t.dropNode.parent?t.dropNode.parent.children:this.tree.value,index:t.dragNodeIndex})}createDropPointEventMetadata(t){return{dragNode:this.tree.dragNode,dragNodeIndex:this.tree.dragNodeIndex,dragNodeSubNodes:this.tree.dragNodeSubNodes,dropNode:this.node,index:this.index,position:t}}onDropPointDragOver(t){t.dataTransfer.dropEffect="move",t.preventDefault()}onDropPointDragEnter(t,C){this.tree.allowDrop(this.tree.dragNode,this.node,this.tree.dragNodeScope,"between")&&(C<0?this.draghoverPrev=!0:this.draghoverNext=!0)}onDropPointDragLeave(t){this.draghoverPrev=!1,this.draghoverNext=!1}onDragStart(t){this.tree.draggableNodes&&!1!==this.node.draggable?(t.dataTransfer.setData("text","data"),this.tree.dragDropService.startDrag({tree:this,node:this.node,subNodes:this.node?.parent?this.node.parent.children:this.tree.value,index:this.index,scope:this.tree.draggableScope})):t.preventDefault()}onDragStop(t){this.tree.dragDropService.stopDrag({node:this.node,subNodes:this.node?.parent?this.node.parent.children:this.tree.value,index:this.index})}onDropNodeDragOver(t){t.dataTransfer.dropEffect="move",this.tree.droppableNodes&&(t.preventDefault(),t.stopPropagation())}onDropNode(t){if(this.tree.droppableNodes&&!1!==this.node?.droppable){let C=this.tree.dragNode;if(this.tree.allowDrop(C,this.node,this.tree.dragNodeScope)){let I={...this.createDropNodeEventMetadata()};this.tree.validateDrop?this.tree.onNodeDrop.emit({originalEvent:t,dragNode:C,dropNode:this.node,dropPoint:"node",index:this.index,accept:()=>{this.processNodeDrop(I)}}):(this.processNodeDrop(I),this.tree.onNodeDrop.emit({originalEvent:t,dragNode:C,dropNode:this.node,dropPoint:"node",index:this.index}))}}t.preventDefault(),t.stopPropagation(),this.draghoverNode=!1}createDropNodeEventMetadata(){return{dragNode:this.tree.dragNode,dragNodeIndex:this.tree.dragNodeIndex,dragNodeSubNodes:this.tree.dragNodeSubNodes,dropNode:this.node}}processNodeDrop(t){let C=t.dragNodeIndex;t.dragNodeSubNodes.splice(C,1),t.dropNode.children?t.dropNode.children.push(t.dragNode):t.dropNode.children=[t.dragNode],this.tree.dragDropService.stopDrag({node:t.dragNode,subNodes:t.dropNode.parent?t.dropNode.parent.children:this.tree.value,index:C})}onDropNodeDragEnter(t){this.tree.droppableNodes&&!1!==this.node?.droppable&&this.tree.allowDrop(this.tree.dragNode,this.node,this.tree.dragNodeScope)&&(this.draghoverNode=!0)}onDropNodeDragLeave(t){if(this.tree.droppableNodes){let C=t.currentTarget.getBoundingClientRect();(t.x>C.left+C.width||t.x<C.left||t.y>=Math.floor(C.top+C.height)||t.y<C.top)&&(this.draghoverNode=!1)}}onKeyDown(t){if(this.isSameNode(t)&&(!this.tree.contextMenu||"block"!==this.tree.contextMenu.containerViewChild?.nativeElement.style.display))switch(t.code){case"ArrowDown":this.onArrowDown(t);break;case"ArrowUp":this.onArrowUp(t);break;case"ArrowRight":this.onArrowRight(t);break;case"ArrowLeft":this.onArrowLeft(t);break;case"Enter":case"NumpadEnter":this.onEnter(t);break;case"Space":const C=t.target instanceof HTMLElement&&t.target.nodeName;["INPUT"].includes(C)||this.onEnter(t);break;case"Tab":this.setAllNodesTabIndexes()}}onArrowUp(t){const C="toggler"===t.target.getAttribute("data-pc-section")?t.target.closest('[role="treeitem"]'):t.target.parentElement;if(C.previousElementSibling)this.focusRowChange(C,C.previousElementSibling,this.findLastVisibleDescendant(C.previousElementSibling));else{let I=this.getParentNodeElement(C);I&&this.focusRowChange(C,I)}t.preventDefault()}onArrowDown(t){const C="toggler"===t.target.getAttribute("data-pc-section")?t.target.closest('[role="treeitem"]'):t.target,I=C.children[1];if(I&&I.children.length>0)this.focusRowChange(C,I.children[0]);else if(C.parentElement.nextElementSibling)this.focusRowChange(C,C.parentElement.nextElementSibling);else{let n=this.findNextSiblingOfAncestor(C.parentElement);n&&this.focusRowChange(C,n)}t.preventDefault()}onArrowRight(t){!this.node?.expanded&&!this.tree.isNodeLeaf(this.node)&&(this.expand(t),t.currentTarget.tabIndex=-1,setTimeout(()=>{this.onArrowDown(t)},1)),t.preventDefault()}onArrowLeft(t){const C="toggler"===t.target.getAttribute("data-pc-section")?t.target.closest('[role="treeitem"]'):t.target;if(0===this.level&&!this.node?.expanded)return!1;if(this.node?.expanded)return void this.collapse(t);let I=this.getParentNodeElement(C.parentElement);I&&this.focusRowChange(t.currentTarget,I),t.preventDefault()}isActionableElement(t){const C=t.target;return C instanceof HTMLElement&&("A"==C.nodeName||"BUTTON"==C.nodeName)}onEnter(t){this.tree.onNodeClick(t,this.node),this.setTabIndexForSelectionMode(t,this.tree.nodeTouched),this.isActionableElement(t)||t.preventDefault()}setAllNodesTabIndexes(){const t=r.D.find(this.tree.el.nativeElement,".p-treenode"),C=[...t].some(I=>"true"===I.getAttribute("aria-selected")||"true"===I.getAttribute("aria-checked"));[...t].forEach(I=>{I.tabIndex=-1}),C?[...t].filter(n=>"true"===n.getAttribute("aria-selected")||"true"===n.getAttribute("aria-checked"))[0].tabIndex=0:[...t][0].tabIndex=0}setTabIndexForSelectionMode(t,C){if(null!==this.tree.selectionMode){const I=[...r.D.find(this.tree.el.nativeElement,".p-treenode")];t.currentTarget.tabIndex=!1===C?-1:0,I.every(n=>-1===n.tabIndex)&&(I[0].tabIndex=0)}}findNextSiblingOfAncestor(t){let C=this.getParentNodeElement(t);return C?C.nextElementSibling?C.nextElementSibling:this.findNextSiblingOfAncestor(C):null}findLastVisibleDescendant(t){const I=Array.from(t.children).find(n=>r.D.hasClass(n,"p-treenode")).children[1];return I&&I.children.length>0?this.findLastVisibleDescendant(I.children[I.children.length-1]):t}getParentNodeElement(t){const C=t.parentElement?.parentElement?.parentElement;return"P-TREENODE"===C?.tagName?C:null}focusNode(t){this.tree.droppableNodes?t.children[1].focus():t.children[0].focus()}focusRowChange(t,C,I){t.tabIndex="-1",C.children[0].tabIndex="0",this.focusNode(I||C)}focusVirtualNode(){this.timeout=setTimeout(()=>{let t=r.D.findSingle(document.body,`[data-id="${this.node?.key??this.node?.data}"]`);r.D.focus(t)},1)}static \u0275fac=function(C){return new(C||g)(e.rXU((0,e.Rfq)(()=>K)))};static \u0275cmp=e.VBU({type:g,selectors:[["p-treeNode"]],hostAttrs:[1,"p-element"],inputs:{rowNode:"rowNode",node:"node",parentNode:"parentNode",root:[2,"root","root",e.L39],index:[2,"index","index",e.Udg],firstChild:[2,"firstChild","firstChild",e.L39],lastChild:[2,"lastChild","lastChild",e.L39],level:[2,"level","level",e.Udg],indentation:[2,"indentation","indentation",e.Udg],itemSize:[2,"itemSize","itemSize",e.Udg],loadingMode:"loadingMode"},features:[e.GFd],decls:1,vars:1,consts:[[3,"ngIf"],["class","p-treenode-droppoint",3,"ngClass","drop","dragover","dragenter","dragleave",4,"ngIf"],["role","treeitem",3,"ngClass","ngStyle","style","keydown",4,"ngIf"],[3,"class",4,"ngIf"],[1,"p-treenode-droppoint",3,"drop","dragover","dragenter","dragleave","ngClass"],["role","treeitem",3,"keydown","ngClass","ngStyle"],[1,"p-treenode-content",3,"click","contextmenu","touchend","drop","dragover","dragenter","dragleave","dragstart","dragend","ngStyle","draggable","ngClass"],["type","button","pRipple","","tabindex","-1",1,"p-tree-toggler","p-link",3,"click"],[4,"ngIf"],["class","p-tree-toggler-icon",4,"ngIf"],["class","p-checkbox p-component","aria-hidden","true",3,"ngClass",4,"ngIf"],[1,"p-treenode-label"],["class","p-treenode-children","role","group",3,"ngStyle",4,"ngIf"],[3,"styleClass",4,"ngIf"],[3,"styleClass"],[3,"spin","styleClass"],[1,"p-tree-toggler-icon"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["aria-hidden","true",1,"p-checkbox","p-component",3,"ngClass"],["role","checkbox",1,"p-checkbox-box",3,"ngClass"],["role","group",1,"p-treenode-children",3,"ngStyle"],[3,"node","parentNode","firstChild","lastChild","index","itemSize","level","loadingMode",4,"ngFor","ngForOf","ngForTrackBy"],[3,"node","parentNode","firstChild","lastChild","index","itemSize","level","loadingMode"],["class","p-treenode-connector",4,"ngIf"],[1,"p-treenode",3,"ngClass"],["tabindex","0",1,"p-treenode-content",3,"click","contextmenu","touchend","keydown","ngClass"],[3,"ngClass","click",4,"ngIf"],["class","p-treenode-children-container",3,"ngStyle",4,"ngIf"],[1,"p-treenode-connector"],[1,"p-treenode-connector-table"],[3,"ngClass"],[3,"click","ngClass"],[3,"styleClass","ariaLabel",4,"ngIf"],[3,"styleClass","ariaLabel"],[1,"p-treenode-children-container",3,"ngStyle"],[1,"p-treenode-children"],[3,"node","firstChild","lastChild",4,"ngFor","ngForOf","ngForTrackBy"],[3,"node","firstChild","lastChild"]],template:function(C,I){1&C&&e.DNE(0,GC,4,4,"ng-template",0),2&C&&e.Y8G("ngIf",I.node)},dependencies:()=>[l.YU,l.Sq,l.bT,l.T3,l.B3,k.n,se.S,B.D,P.v,ce.Q,z.N,pe.c,g],encapsulation:2})}return g})(),K=(()=>{class g{el;dragDropService;config;cd;value;selectionMode;loadingMode="mask";selection;style;styleClass;contextMenu;layout="vertical";draggableScope;droppableScope;draggableNodes;droppableNodes;metaKeySelection=!1;propagateSelectionUp=!0;propagateSelectionDown=!0;loading;loadingIcon;emptyMessage="";ariaLabel;togglerAriaLabel;ariaLabelledBy;validateDrop;filter;filterBy="label";filterMode="lenient";filterPlaceholder;filteredNodes;filterLocale;scrollHeight;lazy=!1;virtualScroll;virtualScrollItemSize;virtualScrollOptions;indentation=1.5;_templateMap;trackBy=(t,C)=>C;_virtualNodeHeight;get virtualNodeHeight(){return this._virtualNodeHeight}set virtualNodeHeight(t){this._virtualNodeHeight=t,console.warn("The virtualNodeHeight property is deprecated, use virtualScrollItemSize property instead.")}selectionChange=new e.bkB;onNodeSelect=new e.bkB;onNodeUnselect=new e.bkB;onNodeExpand=new e.bkB;onNodeCollapse=new e.bkB;onNodeContextMenuSelect=new e.bkB;onNodeDrop=new e.bkB;onLazyLoad=new e.bkB;onScroll=new e.bkB;onScrollIndexChange=new e.bkB;onFilter=new e.bkB;templates;filterViewChild;scroller;wrapperViewChild;serializedValue;headerTemplate;footerTemplate;loaderTemplate;emptyMessageTemplate;togglerIconTemplate;checkboxIconTemplate;loadingIconTemplate;filterIconTemplate;nodeTouched;dragNodeTree;dragNode;dragNodeSubNodes;dragNodeIndex;dragNodeScope;dragHover;dragStartSubscription;dragStopSubscription;constructor(t,C,I,n){this.el=t,this.dragDropService=C,this.config=I,this.cd=n}ngOnInit(){this.droppableNodes&&(this.dragStartSubscription=this.dragDropService.dragStart$.subscribe(t=>{this.dragNodeTree=t.tree,this.dragNode=t.node,this.dragNodeSubNodes=t.subNodes,this.dragNodeIndex=t.index,this.dragNodeScope=t.scope}),this.dragStopSubscription=this.dragDropService.dragStop$.subscribe(t=>{this.dragNodeTree=null,this.dragNode=null,this.dragNodeSubNodes=null,this.dragNodeIndex=null,this.dragNodeScope=null,this.dragHover=!1}))}ngOnChanges(t){t.value&&(this.updateSerializedValue(),this.hasFilterActive()&&this._filter(this.filterViewChild.nativeElement.value))}get horizontal(){return"horizontal"==this.layout}get emptyMessageLabel(){return this.emptyMessage||this.config.getTranslation(d.Yj.EMPTY_MESSAGE)}ngAfterContentInit(){this.templates.length&&(this._templateMap={}),this.templates.forEach(t=>{switch(t.getType()){case"header":this.headerTemplate=t.template;break;case"empty":this.emptyMessageTemplate=t.template;break;case"footer":this.footerTemplate=t.template;break;case"loader":this.loaderTemplate=t.template;break;case"togglericon":this.togglerIconTemplate=t.template;break;case"checkboxicon":this.checkboxIconTemplate=t.template;break;case"loadingicon":this.loadingIconTemplate=t.template;break;case"filtericon":this.filterIconTemplate=t.template;break;default:this._templateMap[t.name]=t.template}})}updateSerializedValue(){this.serializedValue=[],this.serializeNodes(null,this.getRootNode(),0,!0)}serializeNodes(t,C,I,n){C&&C.length&&C.forEach((i,o)=>{i.parent=t;const s={node:i,parent:t,level:I,visible:n&&(!t||t.expanded),lastChild:o===C.length-1,index:o};this.serializedValue.push(s),s.visible&&i.expanded&&this.serializeNodes(i,i.children,I+1,s.visible)})}onNodeClick(t,C){let I=t.target;if(!r.D.hasClass(I,"p-tree-toggler")&&!r.D.hasClass(I,"p-tree-toggler-icon")){if(this.selectionMode){if(!1===C.selectable)return void(C.style="--p-focus-ring-color: none;");if(C.style="--p-focus-ring-color: var(--primary-color)",this.hasFilteredNodes()&&!(C=this.getNodeWithKey(C.key,this.filteredNodes)))return;let n=this.findIndexInSelection(C),i=n>=0;if(this.isCheckboxSelectionMode())i?(this.propagateSelectionDown?this.propagateDown(C,!1):this.selection=this.selection.filter((o,s)=>s!=n),this.propagateSelectionUp&&C.parent&&this.propagateUp(C.parent,!1),this.selectionChange.emit(this.selection),this.onNodeUnselect.emit({originalEvent:t,node:C})):(this.propagateSelectionDown?this.propagateDown(C,!0):this.selection=[...this.selection||[],C],this.propagateSelectionUp&&C.parent&&this.propagateUp(C.parent,!0),this.selectionChange.emit(this.selection),this.onNodeSelect.emit({originalEvent:t,node:C}));else if(!this.nodeTouched&&this.metaKeySelection){let s=t.metaKey||t.ctrlKey;i&&s?(this.isSingleSelectionMode()?this.selectionChange.emit(null):(this.selection=this.selection.filter((_,c)=>c!=n),this.selectionChange.emit(this.selection)),this.onNodeUnselect.emit({originalEvent:t,node:C})):(this.isSingleSelectionMode()?this.selectionChange.emit(C):this.isMultipleSelectionMode()&&(this.selection=s&&this.selection||[],this.selection=[...this.selection,C],this.selectionChange.emit(this.selection)),this.onNodeSelect.emit({originalEvent:t,node:C}))}else this.isSingleSelectionMode()?i?(this.selection=null,this.onNodeUnselect.emit({originalEvent:t,node:C})):(this.selection=C,setTimeout(()=>{this.onNodeSelect.emit({originalEvent:t,node:C})})):i?(this.selection=this.selection.filter((s,_)=>_!=n),this.onNodeUnselect.emit({originalEvent:t,node:C})):(this.selection=[...this.selection||[],C],setTimeout(()=>{this.onNodeSelect.emit({originalEvent:t,node:C})})),this.selectionChange.emit(this.selection)}this.nodeTouched=!1}}onNodeTouchEnd(){this.nodeTouched=!0}onNodeRightClick(t,C){if(this.contextMenu){let n=t.target.getAttribute("class");if(n&&n.includes("p-tree-toggler"))return;this.findIndexInSelection(C)>=0||(this.isSingleSelectionMode()?this.selectionChange.emit(C):this.selectionChange.emit([C])),this.contextMenu.show(t),this.onNodeContextMenuSelect.emit({originalEvent:t,node:C})}}findIndexInSelection(t){return this.selectionMode&&this.selection?(this.isSingleSelectionMode()?[this.selection]:this.selection).findIndex(I=>I===t||I.key===t.key&&void 0!==I.key):-1}syncNodeOption(t,C,I,n){const i=this.hasFilteredNodes()?this.getNodeWithKey(t.key,C):null;i&&(i[I]=n||t[I])}hasFilteredNodes(){return this.filter&&this.filteredNodes&&this.filteredNodes.length}hasFilterActive(){return this.filter&&this.filterViewChild?.nativeElement?.value.length>0}getNodeWithKey(t,C){for(let I of C){if(I.key===t)return I;if(I.children){let n=this.getNodeWithKey(t,I.children);if(n)return n}}}propagateUp(t,C){if(t.children&&t.children.length){let n=0,i=!1;for(let o of t.children)this.isSelected(o)?n++:o.partialSelected&&(i=!0);if(C&&n==t.children.length)this.selection=[...this.selection||[],t],t.partialSelected=!1;else{if(!C){let o=this.findIndexInSelection(t);o>=0&&(this.selection=this.selection.filter((s,_)=>_!=o))}t.partialSelected=!!(i||n>0&&n!=t.children.length)}this.syncNodeOption(t,this.filteredNodes,"partialSelected")}let I=t.parent;I&&this.propagateUp(I,C)}propagateDown(t,C){let I=this.findIndexInSelection(t);if(C&&-1==I&&!1!==t.selectable?this.selection=[...this.selection||[],this.filterUnselectableChildren(t)]:!C&&I>-1&&(this.selection=this.selection.filter((n,i)=>i!=I)),t.partialSelected=!1,this.syncNodeOption(t,this.filteredNodes,"partialSelected"),t.children&&t.children.length)for(let n of t.children)this.propagateDown(n,C)}filterUnselectableChildren(t){let C=Object.assign({},t);if(C.children&&C.children.length)for(let I of C.children)!1===I.selectable&&(C.children=C.children.filter(n=>n!=I)),I=this.filterUnselectableChildren(I);return C}isSelected(t){return-1!=this.findIndexInSelection(t)}isSingleSelectionMode(){return this.selectionMode&&"single"==this.selectionMode}isMultipleSelectionMode(){return this.selectionMode&&"multiple"==this.selectionMode}isCheckboxSelectionMode(){return this.selectionMode&&"checkbox"==this.selectionMode}isNodeLeaf(t){return 0!=t.leaf&&!(t.children&&t.children.length)}getRootNode(){return this.filteredNodes?this.filteredNodes:this.value}getTemplateForNode(t){return this._templateMap?t.type?this._templateMap[t.type]:this._templateMap.default:null}onDragOver(t){this.droppableNodes&&(!this.value||0===this.value.length)&&(t.dataTransfer.dropEffect="move",t.preventDefault())}onDrop(t){if(this.droppableNodes&&(!this.value||0===this.value.length)){t.preventDefault();let C=this.dragNode;if(this.allowDrop(C,null,this.dragNodeScope)){let I=this.dragNodeIndex;this.value=this.value||[],this.validateDrop?this.onNodeDrop.emit({originalEvent:t,dragNode:C,dropNode:null,index:I,accept:()=>{this.processTreeDrop(C,I)}}):(this.onNodeDrop.emit({originalEvent:t,dragNode:C,dropNode:null,index:I}),this.processTreeDrop(C,I))}}}processTreeDrop(t,C){this.dragNodeSubNodes.splice(C,1),this.value.push(t),this.dragDropService.stopDrag({node:t})}onDragEnter(){this.droppableNodes&&this.allowDrop(this.dragNode,null,this.dragNodeScope)&&(this.dragHover=!0)}onDragLeave(t){if(this.droppableNodes){let C=t.currentTarget.getBoundingClientRect();(t.x>C.left+C.width||t.x<C.left||t.y>C.top+C.height||t.y<C.top)&&(this.dragHover=!1)}}allowDrop(t,C,I,n="node"){if(t){if(this.isValidDragScope(I)){let i=!0;if(C)if(t===C)i=!1;else{let o=C.parent;for(;null!=o;){if(o===t){i=!1;break}o=o.parent}}return i}return!1}return!1}isValidDragScope(t){let C=this.droppableScope;if(C){if("string"==typeof C){if("string"==typeof t)return C===t;if(Array.isArray(t))return-1!=t.indexOf(C)}else if(Array.isArray(C)){if("string"==typeof t)return-1!=C.indexOf(t);if(Array.isArray(t))for(let I of C)for(let n of t)if(I===n)return!0}return!1}return!0}_filter(t){let C=t;if(""===C)this.filteredNodes=null;else{this.filteredNodes=[];const I=this.filterBy.split(","),n=y.BF.removeAccents(C).toLocaleLowerCase(this.filterLocale),i="strict"===this.filterMode;for(let o of this.value){let s={...o},_={searchFields:I,filterText:n,isStrictMode:i};(i&&(this.findFilteredNodes(s,_)||this.isFilterMatched(s,_))||!i&&(this.isFilterMatched(s,_)||this.findFilteredNodes(s,_)))&&this.filteredNodes.push(s)}}this.updateSerializedValue(),this.onFilter.emit({filter:C,filteredValue:this.filteredNodes})}resetFilter(){this.filteredNodes=null,this.filterViewChild&&this.filterViewChild.nativeElement&&(this.filterViewChild.nativeElement.value="")}scrollToVirtualIndex(t){this.virtualScroll&&this.scroller?.scrollToIndex(t)}scrollTo(t){this.virtualScroll?this.scroller?.scrollTo(t):this.wrapperViewChild&&this.wrapperViewChild.nativeElement&&(this.wrapperViewChild.nativeElement.scrollTo?this.wrapperViewChild.nativeElement.scrollTo(t):(this.wrapperViewChild.nativeElement.scrollLeft=t.left,this.wrapperViewChild.nativeElement.scrollTop=t.top))}findFilteredNodes(t,C){if(t){let I=!1;if(t.children){let n=[...t.children];t.children=[];for(let i of n){let o={...i};this.isFilterMatched(o,C)&&(I=!0,t.children.push(o))}}if(I)return t.expanded=!0,!0}}isFilterMatched(t,C){let{searchFields:I,filterText:n,isStrictMode:i}=C,o=!1;for(let s of I)y.BF.removeAccents(String(y.BF.resolveFieldData(t,s))).toLocaleLowerCase(this.filterLocale).indexOf(n)>-1&&(o=!0);return(!o||i&&!this.isNodeLeaf(t))&&(o=this.findFilteredNodes(t,{searchFields:I,filterText:n,isStrictMode:i})||o),o}getIndex(t,C){const I=t.getItemOptions;return I?I(C).index:C}getBlockableElement(){return this.el.nativeElement.children[0]}ngOnDestroy(){this.dragStartSubscription&&this.dragStartSubscription.unsubscribe(),this.dragStopSubscription&&this.dragStopSubscription.unsubscribe()}static \u0275fac=function(C){return new(C||g)(e.rXU(e.aKT),e.rXU(d.$9,8),e.rXU(d.r1),e.rXU(e.gRc))};static \u0275cmp=e.VBU({type:g,selectors:[["p-tree"]],contentQueries:function(C,I,n){if(1&C&&e.wni(n,d.Ei,4),2&C){let i;e.mGM(i=e.lsd())&&(I.templates=i)}},viewQuery:function(C,I){if(1&C&&(e.GBs(FC,5),e.GBs(wC,5),e.GBs(jC,5)),2&C){let n;e.mGM(n=e.lsd())&&(I.filterViewChild=n.first),e.mGM(n=e.lsd())&&(I.scroller=n.first),e.mGM(n=e.lsd())&&(I.wrapperViewChild=n.first)}},hostAttrs:[1,"p-element"],inputs:{value:"value",selectionMode:"selectionMode",loadingMode:"loadingMode",selection:"selection",style:"style",styleClass:"styleClass",contextMenu:"contextMenu",layout:"layout",draggableScope:"draggableScope",droppableScope:"droppableScope",draggableNodes:[2,"draggableNodes","draggableNodes",e.L39],droppableNodes:[2,"droppableNodes","droppableNodes",e.L39],metaKeySelection:[2,"metaKeySelection","metaKeySelection",e.L39],propagateSelectionUp:[2,"propagateSelectionUp","propagateSelectionUp",e.L39],propagateSelectionDown:[2,"propagateSelectionDown","propagateSelectionDown",e.L39],loading:[2,"loading","loading",e.L39],loadingIcon:"loadingIcon",emptyMessage:"emptyMessage",ariaLabel:"ariaLabel",togglerAriaLabel:"togglerAriaLabel",ariaLabelledBy:"ariaLabelledBy",validateDrop:[2,"validateDrop","validateDrop",e.L39],filter:[2,"filter","filter",e.L39],filterBy:"filterBy",filterMode:"filterMode",filterPlaceholder:"filterPlaceholder",filteredNodes:"filteredNodes",filterLocale:"filterLocale",scrollHeight:"scrollHeight",lazy:[2,"lazy","lazy",e.L39],virtualScroll:[2,"virtualScroll","virtualScroll",e.L39],virtualScrollItemSize:[2,"virtualScrollItemSize","virtualScrollItemSize",e.Udg],virtualScrollOptions:"virtualScrollOptions",indentation:[2,"indentation","indentation",e.Udg],_templateMap:"_templateMap",trackBy:"trackBy",virtualNodeHeight:"virtualNodeHeight"},outputs:{selectionChange:"selectionChange",onNodeSelect:"onNodeSelect",onNodeUnselect:"onNodeUnselect",onNodeExpand:"onNodeExpand",onNodeCollapse:"onNodeCollapse",onNodeContextMenuSelect:"onNodeContextMenuSelect",onNodeDrop:"onNodeDrop",onLazyLoad:"onLazyLoad",onScroll:"onScroll",onScrollIndexChange:"onScrollIndexChange",onFilter:"onFilter"},features:[e.GFd,e.OA$],decls:2,vars:2,consts:[["filter",""],["scroller",""],["treeNode",""],["wrapper",""],["emptyFilter",""],[3,"ngClass","ngStyle","class","drop","dragover","dragenter","dragleave",4,"ngIf"],[3,"ngClass","ngStyle","class",4,"ngIf"],[3,"drop","dragover","dragenter","dragleave","ngClass","ngStyle"],["class","p-tree-loading-overlay p-component-overlay",4,"ngIf"],[4,"ngTemplateOutlet"],["class","p-tree-filter-container",4,"ngIf"],[4,"ngIf"],["class","p-tree-empty-message",4,"ngIf"],[1,"p-tree-loading-overlay","p-component-overlay"],[3,"class",4,"ngIf"],[3,"spin","styleClass",4,"ngIf"],["class","p-tree-loading-icon",4,"ngIf"],[3,"spin","styleClass"],[1,"p-tree-loading-icon"],[1,"p-tree-filter-container"],["type","search","autocomplete","off",1,"p-tree-filter","p-inputtext","p-component",3,"keydown.enter","input"],[3,"styleClass",4,"ngIf"],["class","p-tree-filter-icon",4,"ngIf"],[3,"styleClass"],[1,"p-tree-filter-icon"],["styleClass","p-tree-wrapper",3,"items","tabindex","style","scrollHeight","itemSize","lazy","options","onScroll","onScrollIndexChange","onLazyLoad",4,"ngIf"],["styleClass","p-tree-wrapper",3,"onScroll","onScrollIndexChange","onLazyLoad","items","tabindex","scrollHeight","itemSize","lazy","options"],["pTemplate","content"],["class","p-tree-container","role","tree",3,"ngClass","style",4,"ngIf"],["role","tree",1,"p-tree-container",3,"ngClass"],[3,"level","rowNode","node","parentNode","firstChild","lastChild","index","itemSize","indentation","loadingMode",4,"ngFor","ngForOf","ngForTrackBy"],[3,"level","rowNode","node","parentNode","firstChild","lastChild","index","itemSize","indentation","loadingMode"],["pTemplate","loader"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"p-tree-wrapper",3,"ngStyle"],["class","p-tree-container","role","tree",4,"ngIf"],["role","tree",1,"p-tree-container"],[3,"node","firstChild","lastChild","index","level","loadingMode",4,"ngFor","ngForOf","ngForTrackBy"],[3,"node","firstChild","lastChild","index","level","loadingMode"],[1,"p-tree-empty-message"],[4,"ngIf","ngIfElse"],[3,"ngClass","ngStyle"],["class","p-tree-loading-mask p-component-overlay",4,"ngIf"],[1,"p-tree-loading-mask","p-component-overlay"],[3,"node","root"]],template:function(C,I){1&C&&e.DNE(0,cI,7,15,"div",5)(1,SI,6,11,"div",6),2&C&&(e.Y8G("ngIf",!I.horizontal),e.R7$(),e.Y8G("ngIf",I.horizontal))},dependencies:()=>[l.YU,l.Sq,l.bT,l.T3,l.B3,d.Ei,H.H,V.W,z.N,NI],styles:["@layer primeng{.p-tree-container{margin:0;padding:0;list-style-type:none;overflow:auto}.p-treenode-children{margin:0;padding:0;list-style-type:none}.p-tree-wrapper{overflow:auto}.p-treenode-selectable{cursor:pointer;-webkit-user-select:none;user-select:none}.p-tree-toggler{cursor:pointer;-webkit-user-select:none;user-select:none;display:inline-flex;align-items:center;justify-content:center;overflow:hidden;position:relative;flex-shrink:0}.p-treenode-leaf>.p-treenode-content .p-tree-toggler{visibility:hidden}.p-treenode-content{display:flex;align-items:center}.p-tree-filter{width:100%}.p-tree-filter-container{position:relative;display:block;width:100%}.p-tree-filter-icon{position:absolute;top:50%;margin-top:-.5rem}.p-tree-loading{position:relative;min-height:4rem}.p-tree .p-tree-loading-overlay{position:absolute;display:flex;align-items:center;justify-content:center;z-index:2}.p-tree-flex-scrollable{display:flex;flex:1;height:100%;flex-direction:column}.p-tree-flex-scrollable .p-tree-wrapper{flex:1}.p-tree .p-treenode-droppoint{height:4px;list-style-type:none}.p-tree .p-treenode-droppoint-active{border:0 none}.p-tree-horizontal{width:auto;padding-left:0;padding-right:0;overflow:auto}.p-tree.p-tree-horizontal table,.p-tree.p-tree-horizontal tr,.p-tree.p-tree-horizontal td{border-collapse:collapse;margin:0;padding:0;vertical-align:middle}.p-tree-horizontal .p-treenode-content{font-weight:400;padding:.4em 1em .4em .2em;display:flex;align-items:center}.p-tree-horizontal .p-treenode-parent .p-treenode-content{font-weight:400;white-space:nowrap}.p-tree.p-tree-horizontal .p-treenode{background:url(data:image/gif;base64,R0lGODlhAQABAIAAALGxsf///yH/C1hNUCBEYXRhWE1QPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNC4xLWMwMzQgNDYuMjcyOTc2LCBTYXQgSmFuIDI3IDIwMDcgMjI6Mzc6MzcgICAgICAgICI+CiAgIDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+CiAgICAgIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICAgICAgICAgIHhtbG5zOnhhcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyI+CiAgICAgICAgIDx4YXA6Q3JlYXRvclRvb2w+QWRvYmUgRmlyZXdvcmtzIENTMzwveGFwOkNyZWF0b3JUb29sPgogICAgICAgICA8eGFwOkNyZWF0ZURhdGU+MjAxMC0wMy0xMVQxMDoxNjo0MVo8L3hhcDpDcmVhdGVEYXRlPgogICAgICAgICA8eGFwOk1vZGlmeURhdGU+MjAxMC0wMy0xMVQxMjo0NDoxOVo8L3hhcDpNb2RpZnlEYXRlPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIj4KICAgICAgICAgPGRjOmZvcm1hdD5pbWFnZS9naWY8L2RjOmZvcm1hdD4KICAgICAgPC9yZGY6RGVzY3JpcHRpb24+CiAgIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgCjw/eHBhY2tldCBlbmQ9InciPz4B//79/Pv6+fj39vX08/Lx8O/u7ezr6uno5+bl5OPi4eDf3t3c29rZ2NfW1dTT0tHQz87NzMvKycjHxsXEw8LBwL++vby7urm4t7a1tLOysbCvrq2sq6qpqKempaSjoqGgn56dnJuamZiXlpWUk5KRkI+OjYyLiomIh4aFhIOCgYB/fn18e3p5eHd2dXRzcnFwb25tbGtqaWhnZmVkY2JhYF9eXVxbWllYV1ZVVFNSUVBPTk1MS0pJSEdGRURDQkFAPz49PAA6OTg3NjU0MzIxMC8uLSwrKikoJyYlJCMiISAfHh0cGxoZGBcWFRQTEhEQDw4NDAsKCQgHBgUEAwIBAAAh+QQABwD/ACwAAAAAAQABAAACAkQBADs=) repeat-x scroll center center transparent;padding:.25rem 2.5rem}.p-tree.p-tree-horizontal .p-treenode.p-treenode-leaf,.p-tree.p-tree-horizontal .p-treenode.p-treenode-collapsed{padding-right:0}.p-tree.p-tree-horizontal .p-treenode-children{padding:0;margin:0}.p-tree.p-tree-horizontal .p-treenode-connector{width:1px}.p-tree.p-tree-horizontal .p-treenode-connector-table{height:100%;width:1px}.p-tree.p-tree-horizontal .p-treenode-connector-line{background:url(data:image/gif;base64,R0lGODlhAQABAIAAALGxsf///yH/C1hNUCBEYXRhWE1QPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNC4xLWMwMzQgNDYuMjcyOTc2LCBTYXQgSmFuIDI3IDIwMDcgMjI6Mzc6MzcgICAgICAgICI+CiAgIDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+CiAgICAgIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICAgICAgICAgIHhtbG5zOnhhcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyI+CiAgICAgICAgIDx4YXA6Q3JlYXRvclRvb2w+QWRvYmUgRmlyZXdvcmtzIENTMzwveGFwOkNyZWF0b3JUb29sPgogICAgICAgICA8eGFwOkNyZWF0ZURhdGU+MjAxMC0wMy0xMVQxMDoxNjo0MVo8L3hhcDpDcmVhdGVEYXRlPgogICAgICAgICA8eGFwOk1vZGlmeURhdGU+MjAxMC0wMy0xMVQxMjo0NDoxOVo8L3hhcDpNb2RpZnlEYXRlPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIj4KICAgICAgICAgPGRjOmZvcm1hdD5pbWFnZS9naWY8L2RjOmZvcm1hdD4KICAgICAgPC9yZGY6RGVzY3JpcHRpb24+CiAgIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgCjw/eHBhY2tldCBlbmQ9InciPz4B//79/Pv6+fj39vX08/Lx8O/u7ezr6uno5+bl5OPi4eDf3t3c29rZ2NfW1dTT0tHQz87NzMvKycjHxsXEw8LBwL++vby7urm4t7a1tLOysbCvrq2sq6qpqKempaSjoqGgn56dnJuamZiXlpWUk5KRkI+OjYyLiomIh4aFhIOCgYB/fn18e3p5eHd2dXRzcnFwb25tbGtqaWhnZmVkY2JhYF9eXVxbWllYV1ZVVFNSUVBPTk1MS0pJSEdGRURDQkFAPz49PAA6OTg3NjU0MzIxMC8uLSwrKikoJyYlJCMiISAfHh0cGxoZGBcWFRQTEhEQDw4NDAsKCQgHBgUEAwIBAAAh+QQABwD/ACwAAAAAAQABAAACAkQBADs=) repeat-y scroll 0 0 transparent;width:1px}.p-tree.p-tree-horizontal table{height:0}.p-scroller .p-tree-container{overflow:visible}}\n"],encapsulation:2})}return g})(),Q=(()=>{class g{static \u0275fac=function(C){return new(C||g)};static \u0275mod=e.$C({type:g});static \u0275inj=e.G2t({imports:[l.MD,d.Gg,k.Z,H.h,se.S,B.D,P.v,ce.Q,V.W,z.N,pe.c,d.Gg,H.h]})}return g})();var W=a(9335),he=a(1880);const kI=["container"],DI=["focusInput"],GI=["filter"],FI=["tree"],wI=["panel"],jI=["overlay"],RI=["firstHiddenFocusableEl"],PI=["lastHiddenFocusableEl"],MI=(g,A)=>({$implicit:g,placeholder:A}),fe=(g,A)=>({$implicit:g,options:A}),BI=g=>({"max-height":g}),VI=g=>({$implicit:g}),YI=(g,A)=>({$implicit:g,partialSelected:A});function XI(g,A){1&g&&e.eu8(0)}function $I(g,A){if(1&g&&(e.qex(0),e.DNE(1,XI,1,0,"ng-container",22),e.bVm()),2&g){const t=e.XpG();e.R7$(),e.Y8G("ngTemplateOutlet",t.valueTemplate)("ngTemplateOutletContext",e.l_i(2,MI,t.value,t.placeholder))}}function OI(g,A){if(1&g&&(e.qex(0),e.EFF(1),e.bVm()),2&g){const t=e.XpG(2);e.R7$(),e.SpI(" ",t.label||"empty"," ")}}function UI(g,A){if(1&g&&(e.j41(0,"div",24)(1,"span",25),e.EFF(2),e.k0s()()),2&g){const t=A.$implicit;e.R7$(2),e.JRh(t.label)}}function LI(g,A){if(1&g&&(e.qex(0),e.EFF(1),e.bVm()),2&g){const t=e.XpG(3);e.R7$(),e.JRh(t.placeholder||"empty")}}function HI(g,A){if(1&g&&e.DNE(0,UI,3,1,"div",23)(1,LI,2,1,"ng-container",16),2&g){const t=e.XpG(2);e.Y8G("ngForOf",t.value),e.R7$(),e.Y8G("ngIf",t.emptyValue)}}function zI(g,A){if(1&g&&e.DNE(0,OI,2,1,"ng-container",15)(1,HI,2,2,"ng-template",null,4,e.C5r),2&g){const t=e.sdS(2),C=e.XpG();e.Y8G("ngIf","comma"===C.display)("ngIfElse",t)}}function KI(g,A){if(1&g){const t=e.RV6();e.j41(0,"TimesIcon",28),e.bIt("click",function(I){e.eBV(t);const n=e.XpG(2);return e.Njj(n.clear(I))}),e.k0s()}2&g&&e.Y8G("styleClass","p-treeselect-clear-icon")}function QI(g,A){}function WI(g,A){1&g&&e.DNE(0,QI,0,0,"ng-template")}function JI(g,A){if(1&g){const t=e.RV6();e.j41(0,"span",29),e.bIt("click",function(I){e.eBV(t);const n=e.XpG(2);return e.Njj(n.clear(I))}),e.DNE(1,WI,1,0,null,30),e.k0s()}if(2&g){const t=e.XpG(2);e.R7$(),e.Y8G("ngTemplateOutlet",t.clearIconTemplate)}}function ZI(g,A){if(1&g&&(e.qex(0),e.DNE(1,KI,1,1,"TimesIcon",26)(2,JI,2,1,"span",27),e.bVm()),2&g){const t=e.XpG();e.R7$(),e.Y8G("ngIf",!t.clearIconTemplate),e.R7$(),e.Y8G("ngIf",t.clearIconTemplate)}}function qI(g,A){1&g&&e.nrm(0,"ChevronDownIcon",31),2&g&&e.Y8G("styleClass","p-treeselect-trigger-icon")}function en(g,A){}function tn(g,A){1&g&&e.DNE(0,en,0,0,"ng-template")}function gn(g,A){if(1&g&&(e.j41(0,"span",32),e.DNE(1,tn,1,0,null,30),e.k0s()),2&g){const t=e.XpG();e.R7$(),e.Y8G("ngTemplateOutlet",t.triggerIconTemplate)}}function Cn(g,A){1&g&&e.eu8(0)}function In(g,A){1&g&&e.nrm(0,"SearchIcon",31),2&g&&e.Y8G("styleClass","p-treeselect-filter-icon")}function nn(g,A){}function An(g,A){1&g&&e.DNE(0,nn,0,0,"ng-template")}function on(g,A){if(1&g&&(e.j41(0,"span",43),e.DNE(1,An,1,0,null,30),e.k0s()),2&g){const t=e.XpG(3);e.R7$(),e.Y8G("ngTemplateOutlet",t.filterIconTemplate)}}function an(g,A){1&g&&e.nrm(0,"TimesIcon")}function ln(g,A){}function rn(g,A){1&g&&e.DNE(0,ln,0,0,"ng-template")}function sn(g,A){if(1&g&&(e.j41(0,"span"),e.DNE(1,rn,1,0,null,30),e.k0s()),2&g){const t=e.XpG(3);e.R7$(),e.Y8G("ngTemplateOutlet",t.closeIconTemplate)}}function cn(g,A){if(1&g){const t=e.RV6();e.j41(0,"div",38),e.bIt("keydown.arrowdown",function(I){e.eBV(t);const n=e.XpG(2);return e.Njj(n.onArrowDown(I))}),e.j41(1,"div",39)(2,"input",40,9),e.bIt("keydown.enter",function(I){return e.eBV(t),e.Njj(I.preventDefault())})("input",function(I){e.eBV(t);const n=e.XpG(2);return e.Njj(n.onFilterInput(I))}),e.k0s(),e.DNE(4,In,1,1,"SearchIcon",18)(5,on,2,1,"span",41),e.k0s(),e.j41(6,"button",42),e.bIt("click",function(){e.eBV(t);const I=e.XpG(2);return e.Njj(I.hide())}),e.DNE(7,an,1,0,"TimesIcon",16)(8,sn,2,1,"span",16),e.k0s()()}if(2&g){const t=e.XpG(2);e.R7$(2),e.Y8G("value",t.filterValue),e.BMQ("placeholder",t.filterPlaceholder),e.R7$(2),e.Y8G("ngIf",!t.filterIconTemplate),e.R7$(),e.Y8G("ngIf",t.filterIconTemplate),e.R7$(2),e.Y8G("ngIf",!t.closeIconTemplate),e.R7$(),e.Y8G("ngIf",t.closeIconTemplate)}}function pn(g,A){1&g&&e.eu8(0)}function dn(g,A){if(1&g&&e.DNE(0,pn,1,0,"ng-container",30),2&g){const t=e.XpG(3);e.Y8G("ngTemplateOutlet",t.emptyTemplate)}}function _n(g,A){1&g&&(e.qex(0),e.DNE(1,dn,1,1,"ng-template",44),e.bVm())}function un(g,A){1&g&&e.eu8(0)}function mn(g,A){if(1&g&&e.DNE(0,un,1,0,"ng-container",22),2&g){const t=A.$implicit,C=e.XpG(3);e.Y8G("ngTemplateOutlet",C.itemTogglerIconTemplate)("ngTemplateOutletContext",e.eq3(2,VI,t))}}function hn(g,A){1&g&&e.DNE(0,mn,1,4,"ng-template",45)}function fn(g,A){1&g&&e.eu8(0)}function bn(g,A){if(1&g&&e.DNE(0,fn,1,0,"ng-container",22),2&g){const t=A.$implicit,C=A.partialSelected,I=e.XpG(3);e.Y8G("ngTemplateOutlet",I.itemCheckboxIconTemplate)("ngTemplateOutletContext",e.l_i(2,YI,t,C))}}function Tn(g,A){1&g&&e.DNE(0,bn,1,5,"ng-template",46)}function vn(g,A){1&g&&e.eu8(0)}function yn(g,A){if(1&g&&e.DNE(0,vn,1,0,"ng-container",30),2&g){const t=e.XpG(3);e.Y8G("ngTemplateOutlet",t.itemLoadingIconTemplate)}}function xn(g,A){1&g&&e.DNE(0,yn,1,1,"ng-template",47)}function En(g,A){1&g&&e.eu8(0)}function Sn(g,A){if(1&g){const t=e.RV6();e.j41(0,"div",33,5)(2,"span",34,6),e.bIt("focus",function(I){e.eBV(t);const n=e.XpG();return e.Njj(n.onFirstHiddenFocus(I))}),e.k0s(),e.DNE(4,Cn,1,0,"ng-container",22)(5,cn,9,6,"div",35),e.j41(6,"div",36)(7,"p-tree",37,7),e.bIt("selectionChange",function(I){e.eBV(t);const n=e.XpG();return e.Njj(n.onSelectionChange(I))})("onNodeExpand",function(I){e.eBV(t);const n=e.XpG();return e.Njj(n.nodeExpand(I))})("onNodeCollapse",function(I){e.eBV(t);const n=e.XpG();return e.Njj(n.nodeCollapse(I))})("onNodeSelect",function(I){e.eBV(t);const n=e.XpG();return e.Njj(n.onSelect(I))})("onNodeUnselect",function(I){e.eBV(t);const n=e.XpG();return e.Njj(n.onUnselect(I))}),e.DNE(9,_n,2,0,"ng-container",16)(10,hn,1,0,null,16)(11,Tn,1,0,null,16)(12,xn,1,0,null,16),e.k0s()(),e.DNE(13,En,1,0,"ng-container",22),e.j41(14,"span",34,8),e.bIt("focus",function(I){e.eBV(t);const n=e.XpG();return e.Njj(n.onLastHiddenFocus(I))}),e.k0s()()}if(2&g){const t=e.XpG();e.HbH(t.panelStyleClass),e.Y8G("ngStyle",t.panelStyle)("ngClass",t.panelClass),e.BMQ("id",t.listId),e.R7$(2),e.BMQ("tabindex",0)("data-p-hidden-accessible",!0)("data-p-hidden-focusable",!0),e.R7$(2),e.Y8G("ngTemplateOutlet",t.headerTemplate)("ngTemplateOutletContext",e.l_i(38,fe,t.value,t.options)),e.R7$(),e.Y8G("ngIf",t.filter),e.R7$(),e.Y8G("ngStyle",e.eq3(41,BI,t.scrollHeight)),e.R7$(),e.Y8G("value",t.options)("propagateSelectionDown",t.propagateSelectionDown)("propagateSelectionUp",t.propagateSelectionUp)("selectionMode",t.selectionMode)("selection",t.value)("metaKeySelection",t.metaKeySelection)("emptyMessage",t.emptyMessage)("filterBy",t.filterBy)("filterMode",t.filterMode)("filterPlaceholder",t.filterPlaceholder)("filterLocale",t.filterLocale)("filteredNodes",t.filteredNodes)("virtualScroll",t.virtualScroll)("virtualScrollItemSize",t.virtualScrollItemSize)("virtualScrollOptions",t.virtualScrollOptions)("_templateMap",t.templateMap)("loading",t.loading),e.R7$(2),e.Y8G("ngIf",t.emptyTemplate),e.R7$(),e.Y8G("ngIf",t.itemTogglerIconTemplate),e.R7$(),e.Y8G("ngIf",t.itemCheckboxIconTemplate),e.R7$(),e.Y8G("ngIf",t.itemLoadingIconTemplate),e.R7$(),e.Y8G("ngTemplateOutlet",t.footerTemplate)("ngTemplateOutletContext",e.l_i(43,fe,t.value,t.options)),e.R7$(),e.BMQ("tabindex",0)("data-p-hidden-accessible",!0)("data-p-hidden-focusable",!0)}}const Nn={provide:h.kq,useExisting:(0,e.Rfq)(()=>be),multi:!0};let be=(()=>{class g{config;cd;el;overlayService;inputId;scrollHeight="400px";disabled;metaKeySelection=!1;variant="outlined";display="comma";selectionMode="single";tabindex="0";ariaLabel;ariaLabelledBy;placeholder;panelClass;panelStyle;panelStyleClass;containerStyle;containerStyleClass;labelStyle;labelStyleClass;overlayOptions;emptyMessage="";appendTo;filter=!1;filterBy="label";filterMode="lenient";filterPlaceholder;filterLocale;filterInputAutoFocus=!0;propagateSelectionDown=!0;propagateSelectionUp=!0;showClear=!1;resetFilterOnHide=!0;virtualScroll;virtualScrollItemSize;virtualScrollOptions;autofocus;get options(){return this._options}set options(t){this._options=t,this.updateTreeState()}get showTransitionOptions(){return this._showTransitionOptions}set showTransitionOptions(t){this._showTransitionOptions=t,console.warn("The showTransitionOptions property is deprecated since v14.2.0, use overlayOptions property instead.")}get hideTransitionOptions(){return this._hideTransitionOptions}set hideTransitionOptions(t){this._hideTransitionOptions=t,console.warn("The hideTransitionOptions property is deprecated since v14.2.0, use overlayOptions property instead.")}loading;onNodeExpand=new e.bkB;onNodeCollapse=new e.bkB;onShow=new e.bkB;onHide=new e.bkB;onClear=new e.bkB;onFilter=new e.bkB;onFocus=new e.bkB;onBlur=new e.bkB;onNodeUnselect=new e.bkB;onNodeSelect=new e.bkB;_showTransitionOptions;_hideTransitionOptions;templates;containerEl;focusInput;filterViewChild;treeViewChild;panelEl;overlayViewChild;firstHiddenFocusableElementOnOverlay;lastHiddenFocusableElementOnOverlay;filteredNodes;filterValue=null;serializedValue;valueTemplate;headerTemplate;emptyTemplate;footerTemplate;clearIconTemplate;triggerIconTemplate;filterIconTemplate;closeIconTemplate;itemTogglerIconTemplate;itemCheckboxIconTemplate;itemLoadingIconTemplate;focused;overlayVisible;selfChange;value;expandedNodes=[];_options;templateMap;onModelChange=()=>{};onModelTouched=()=>{};listId="";constructor(t,C,I,n){this.config=t,this.cd=C,this.el=I,this.overlayService=n}ngOnInit(){this.listId=(0,y._Y)()+"_list",this.updateTreeState()}ngAfterContentInit(){this.templates.length&&(this.templateMap={}),this.templates.forEach(t=>{switch(t.getType()){case"value":this.valueTemplate=t.template;break;case"header":this.headerTemplate=t.template;break;case"empty":this.emptyTemplate=t.template;break;case"footer":this.footerTemplate=t.template;break;case"clearicon":this.clearIconTemplate=t.template;break;case"triggericon":this.triggerIconTemplate=t.template;break;case"filtericon":this.filterIconTemplate=t.template;break;case"closeicon":this.closeIconTemplate=t.template;break;case"itemtogglericon":this.itemTogglerIconTemplate=t.template;break;case"itemcheckboxicon":this.itemCheckboxIconTemplate=t.template;break;case"itemloadingicon":this.itemLoadingIconTemplate=t.template;break;default:t.name?this.templateMap[t.name]=t.template:this.valueTemplate=t.template}})}onOverlayAnimationStart(t){if("visible"===t.toState)if(this.filter)y.BF.isNotEmpty(this.filterValue)&&this.treeViewChild?._filter(this.filterValue),this.filterInputAutoFocus&&this.filterViewChild?.nativeElement.focus();else{let C=r.D.getFocusableElements(this.panelEl.nativeElement);C&&C.length>0&&C[0].focus()}}onOverlayBeforeHide(t){let C=r.D.getFocusableElements(this.containerEl.nativeElement);C&&C.length>0&&C[0].focus()}onSelectionChange(t){this.value=t,this.onModelChange(this.value),this.cd.markForCheck()}onClick(t){this.disabled||!this.overlayViewChild?.el?.nativeElement?.contains(t.target)&&!r.D.hasClass(t.target,"p-treeselect-close")&&!r.D.hasClass(t.target,"p-checkbox-box")&&!r.D.hasClass(t.target,"p-checkbox-icon")&&(this.overlayVisible?this.hide():this.show(),this.focusInput?.nativeElement.focus())}onKeyDown(t){switch(t.code){case"ArrowDown":this.overlayVisible||(this.show(),t.preventDefault()),this.onArrowDown(t),t.preventDefault();break;case"Space":case"Enter":this.overlayVisible||(this.show(),t.preventDefault());break;case"Escape":this.overlayVisible&&(this.hide(),this.focusInput?.nativeElement.focus(),t.preventDefault());break;case"Tab":this.onTabKey(t)}}onFilterInput(t){this.filterValue=t.target.value,this.treeViewChild?._filter(this.filterValue),this.onFilter.emit({filter:this.filterValue,filteredValue:this.treeViewChild?.filteredNodes}),setTimeout(()=>{this.overlayViewChild.alignOverlay()})}onArrowDown(t){if(this.overlayVisible&&this.panelEl?.nativeElement){let C=r.D.getFocusableElements(this.panelEl.nativeElement,".p-treenode");C&&C.length>0&&C[0].focus(),t.preventDefault()}}onFirstHiddenFocus(t){const C=t.relatedTarget===this.focusInput?.nativeElement?r.D.getFirstFocusableElement(this.overlayViewChild?.overlayViewChild?.nativeElement,':not([data-p-hidden-focusable="true"])'):this.focusInput?.nativeElement;r.D.focus(C)}onLastHiddenFocus(t){const C=t.relatedTarget===this.focusInput?.nativeElement?r.D.getLastFocusableElement(this.overlayViewChild?.overlayViewChild?.nativeElement,':not([data-p-hidden-focusable="true"])'):this.focusInput?.nativeElement;r.D.focus(C)}show(){this.overlayVisible=!0}hide(t){this.overlayVisible=!1,this.resetFilter(),this.onHide.emit(t),this.cd.markForCheck()}clear(t){this.value=null,this.resetExpandedNodes(),this.resetPartialSelected(),this.onModelChange(this.value),this.onClear.emit(),t.stopPropagation()}checkValue(){return null!==this.value&&y.BF.isNotEmpty(this.value)}onTabKey(t,C=!1){C||(this.overlayVisible&&this.hasFocusableElements()?(r.D.focus(t.shiftKey?this.lastHiddenFocusableElementOnOverlay.nativeElement:this.firstHiddenFocusableElementOnOverlay.nativeElement),t.preventDefault()):this.overlayVisible&&this.hide(this.filter))}hasFocusableElements(){return r.D.getFocusableElements(this.overlayViewChild.overlayViewChild.nativeElement,':not([data-p-hidden-focusable="true"])').length>0}resetFilter(){this.filter&&!this.resetFilterOnHide?(this.filteredNodes=this.treeViewChild?.filteredNodes,this.treeViewChild?.resetFilter()):this.filterValue=null}updateTreeState(){if(this.value){let t="single"===this.selectionMode?[this.value]:[...this.value];this.resetExpandedNodes(),this.resetPartialSelected(),t&&this.options&&this.updateTreeBranchState(null,null,t)}}updateTreeBranchState(t,C,I){if(t){if(this.isSelected(t)&&(this.expandPath(C),I.splice(I.indexOf(t),1)),I.length>0&&t.children)for(let n of t.children)this.updateTreeBranchState(n,[...C,t],I)}else for(let n of this.options)this.updateTreeBranchState(n,[],I)}expandPath(t){for(let C of t)C.expanded=!0;this.expandedNodes=[...t]}nodeExpand(t){this.onNodeExpand.emit(t),this.expandedNodes.push(t.node)}nodeCollapse(t){this.onNodeCollapse.emit(t),this.expandedNodes.splice(this.expandedNodes.indexOf(t.node),1)}resetExpandedNodes(){for(let t of this.expandedNodes)t.expanded=!1;this.expandedNodes=[]}resetPartialSelected(t=this.options){if(t)for(let C of t)C.partialSelected=!1,C.children&&C.children?.length>0&&this.resetPartialSelected(C.children)}findSelectedNodes(t,C,I){if(t){if(this.isSelected(t)&&(I.push(t),delete C[t.key]),Object.keys(C).length&&t.children)for(let n of t.children)this.findSelectedNodes(n,C,I)}else for(let n of this.options)this.findSelectedNodes(n,C,I)}isSelected(t){return-1!=this.findIndexInSelection(t)}findIndexInSelection(t){return this.value?("single"===this.selectionMode?[this.value]:this.value).findIndex(I=>I===t||I.key===t.key&&void 0!==I.key):-1}onSelect(t){this.onNodeSelect.emit(t),"single"===this.selectionMode&&(this.hide(),this.focusInput?.nativeElement.focus())}onUnselect(t){this.onNodeUnselect.emit(t)}onInputFocus(t){this.disabled||(this.focused=!0,this.onFocus.emit(t))}onInputBlur(t){this.focused=!1,this.onBlur.emit(t),this.onModelTouched()}writeValue(t){this.value=t,this.updateTreeState(),this.cd.markForCheck()}registerOnChange(t){this.onModelChange=t}registerOnTouched(t){this.onModelTouched=t}setDisabledState(t){setTimeout(()=>{this.disabled=t,this.cd.markForCheck()})}containerClass(){return{"p-treeselect p-component p-inputwrapper":!0,"p-treeselect-chip":"chip"===this.display,"p-disabled":this.disabled,"p-focus":this.focused,"p-variant-filled":"filled"===this.variant||"filled"===this.config.inputStyle()}}labelClass(){return{"p-treeselect-label":!0,"p-placeholder":this.label===this.placeholder,"p-treeselect-label-empty":!this.placeholder&&this.emptyValue}}get emptyValue(){return!this.value||0===Object.keys(this.value).length}get emptyOptions(){return!this.options||0===this.options.length}get label(){let t=this.value||[];return t.length?t.map(C=>C.label).join(", "):"single"===this.selectionMode&&this.value?t.label:this.placeholder}static \u0275fac=function(C){return new(C||g)(e.rXU(d.r1),e.rXU(e.gRc),e.rXU(e.aKT),e.rXU(d.si))};static \u0275cmp=e.VBU({type:g,selectors:[["p-treeSelect"]],contentQueries:function(C,I,n){if(1&C&&e.wni(n,d.Ei,4),2&C){let i;e.mGM(i=e.lsd())&&(I.templates=i)}},viewQuery:function(C,I){if(1&C&&(e.GBs(kI,5),e.GBs(DI,5),e.GBs(GI,5),e.GBs(FI,5),e.GBs(wI,5),e.GBs(jI,5),e.GBs(RI,5),e.GBs(PI,5)),2&C){let n;e.mGM(n=e.lsd())&&(I.containerEl=n.first),e.mGM(n=e.lsd())&&(I.focusInput=n.first),e.mGM(n=e.lsd())&&(I.filterViewChild=n.first),e.mGM(n=e.lsd())&&(I.treeViewChild=n.first),e.mGM(n=e.lsd())&&(I.panelEl=n.first),e.mGM(n=e.lsd())&&(I.overlayViewChild=n.first),e.mGM(n=e.lsd())&&(I.firstHiddenFocusableElementOnOverlay=n.first),e.mGM(n=e.lsd())&&(I.lastHiddenFocusableElementOnOverlay=n.first)}},hostAttrs:[1,"p-element","p-inputwrapper"],hostVars:6,hostBindings:function(C,I){2&C&&e.AVh("p-inputwrapper-filled",!I.emptyValue)("p-inputwrapper-focus",I.focused)("p-treeselect-clearable",I.showClear&&!I.disabled)},inputs:{inputId:"inputId",scrollHeight:"scrollHeight",disabled:[2,"disabled","disabled",e.L39],metaKeySelection:[2,"metaKeySelection","metaKeySelection",e.L39],variant:"variant",display:"display",selectionMode:"selectionMode",tabindex:"tabindex",ariaLabel:"ariaLabel",ariaLabelledBy:"ariaLabelledBy",placeholder:"placeholder",panelClass:"panelClass",panelStyle:"panelStyle",panelStyleClass:"panelStyleClass",containerStyle:"containerStyle",containerStyleClass:"containerStyleClass",labelStyle:"labelStyle",labelStyleClass:"labelStyleClass",overlayOptions:"overlayOptions",emptyMessage:"emptyMessage",appendTo:"appendTo",filter:[2,"filter","filter",e.L39],filterBy:"filterBy",filterMode:"filterMode",filterPlaceholder:"filterPlaceholder",filterLocale:"filterLocale",filterInputAutoFocus:[2,"filterInputAutoFocus","filterInputAutoFocus",e.L39],propagateSelectionDown:[2,"propagateSelectionDown","propagateSelectionDown",e.L39],propagateSelectionUp:[2,"propagateSelectionUp","propagateSelectionUp",e.L39],showClear:[2,"showClear","showClear",e.L39],resetFilterOnHide:[2,"resetFilterOnHide","resetFilterOnHide",e.L39],virtualScroll:"virtualScroll",virtualScrollItemSize:"virtualScrollItemSize",virtualScrollOptions:"virtualScrollOptions",autofocus:[2,"autofocus","autofocus",e.L39],options:"options",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",loading:[2,"loading","loading",e.L39]},outputs:{onNodeExpand:"onNodeExpand",onNodeCollapse:"onNodeCollapse",onShow:"onShow",onHide:"onHide",onClear:"onClear",onFilter:"onFilter",onFocus:"onFocus",onBlur:"onBlur",onNodeUnselect:"onNodeUnselect",onNodeSelect:"onNodeSelect"},features:[e.Jv_([Nn]),e.GFd],decls:17,vars:30,consts:[["container",""],["focusInput",""],["defaultValueTemplate",""],["overlay",""],["chipsValueTemplate",""],["panel",""],["firstHiddenFocusableEl",""],["tree",""],["lastHiddenFocusableEl",""],["filter",""],[3,"click","ngClass","ngStyle"],[1,"p-hidden-accessible"],["type","text","role","combobox","readonly","","pAutoFocus","",3,"focus","blur","keydown","disabled","autofocus"],[1,"p-treeselect-label-container"],[3,"ngClass","ngStyle"],[4,"ngIf","ngIfElse"],[4,"ngIf"],["role","button","aria-haspopup","tree",1,"p-treeselect-trigger"],[3,"styleClass",4,"ngIf"],["class","p-treeselect-trigger-icon",4,"ngIf"],[3,"visibleChange","onAnimationStart","onBeforeHide","onShow","onHide","visible","options","target","appendTo","showTransitionOptions","hideTransitionOptions"],["pTemplate","content"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["class","p-treeselect-token",4,"ngFor","ngForOf"],[1,"p-treeselect-token"],[1,"p-treeselect-token-label"],[3,"styleClass","click",4,"ngIf"],["class","p-treeselect-clear-icon",3,"click",4,"ngIf"],[3,"click","styleClass"],[1,"p-treeselect-clear-icon",3,"click"],[4,"ngTemplateOutlet"],[3,"styleClass"],[1,"p-treeselect-trigger-icon"],[1,"p-treeselect-panel","p-component",3,"ngStyle","ngClass"],["role","presentation",1,"p-hidden-accessible","p-hidden-focusable",3,"focus"],["class","p-treeselect-header",3,"keydown.arrowdown",4,"ngIf"],[1,"p-treeselect-items-wrapper",3,"ngStyle"],[3,"selectionChange","onNodeExpand","onNodeCollapse","onNodeSelect","onNodeUnselect","value","propagateSelectionDown","propagateSelectionUp","selectionMode","selection","metaKeySelection","emptyMessage","filterBy","filterMode","filterPlaceholder","filterLocale","filteredNodes","virtualScroll","virtualScrollItemSize","virtualScrollOptions","_templateMap","loading"],[1,"p-treeselect-header",3,"keydown.arrowdown"],[1,"p-treeselect-filter-container"],["type","search","autocomplete","off",1,"p-treeselect-filter","p-inputtext","p-component",3,"keydown.enter","input","value"],["class","p-treeselect-filter-icon",4,"ngIf"],[1,"p-treeselect-close","p-link",3,"click"],[1,"p-treeselect-filter-icon"],["pTemplate","empty"],["pTemplate","togglericon"],["pTemplate","checkboxicon"],["pTemplate","loadingicon"]],template:function(C,I){if(1&C){const n=e.RV6();e.j41(0,"div",10,0),e.bIt("click",function(o){return e.eBV(n),e.Njj(I.onClick(o))}),e.j41(2,"div",11)(3,"input",12,1),e.bIt("focus",function(o){return e.eBV(n),e.Njj(I.onInputFocus(o))})("blur",function(o){return e.eBV(n),e.Njj(I.onInputBlur(o))})("keydown",function(o){return e.eBV(n),e.Njj(I.onKeyDown(o))}),e.k0s()(),e.j41(5,"div",13)(6,"div",14),e.DNE(7,$I,2,5,"ng-container",15)(8,zI,3,2,"ng-template",null,2,e.C5r),e.k0s(),e.DNE(10,ZI,3,2,"ng-container",16),e.k0s(),e.j41(11,"div",17),e.DNE(12,qI,1,1,"ChevronDownIcon",18)(13,gn,2,1,"span",19),e.k0s(),e.j41(14,"p-overlay",20,3),e.mxI("visibleChange",function(o){return e.eBV(n),e.DH7(I.overlayVisible,o)||(I.overlayVisible=o),e.Njj(o)}),e.bIt("onAnimationStart",function(o){return e.eBV(n),e.Njj(I.onOverlayAnimationStart(o))})("onBeforeHide",function(o){return e.eBV(n),e.Njj(I.onOverlayBeforeHide(o))})("onShow",function(o){return e.eBV(n),e.Njj(I.onShow.emit(o))})("onHide",function(o){return e.eBV(n),e.Njj(I.hide(o))}),e.DNE(16,Sn,16,46,"ng-template",21),e.k0s()()}if(2&C){let n,i;const o=e.sdS(9);e.HbH(I.containerStyleClass),e.Y8G("ngClass",I.containerClass())("ngStyle",I.containerStyle),e.R7$(3),e.Y8G("disabled",I.disabled)("autofocus",I.autofocus),e.BMQ("id",I.inputId)("tabindex",I.disabled?-1:I.tabindex)("aria-controls",I.overlayVisible?I.listId:null)("aria-haspopup","tree")("aria-expanded",null!==(n=I.overlayVisible)&&void 0!==n&&n)("aria-labelledby",I.ariaLabelledBy)("aria-label",I.ariaLabel||("p-emptylabel"===I.label?void 0:I.label)),e.R7$(3),e.HbH(I.labelStyleClass),e.Y8G("ngClass",I.labelClass())("ngStyle",I.labelStyle),e.R7$(),e.Y8G("ngIf",I.valueTemplate)("ngIfElse",o),e.R7$(3),e.Y8G("ngIf",I.checkValue()&&!I.disabled&&I.showClear),e.R7$(),e.BMQ("aria-expanded",null!==(i=I.overlayVisible)&&void 0!==i&&i)("aria-label","treeselect trigger"),e.R7$(),e.Y8G("ngIf",!I.triggerIconTemplate),e.R7$(),e.Y8G("ngIf",I.triggerIconTemplate),e.R7$(),e.R50("visible",I.overlayVisible),e.Y8G("options",I.overlayOptions)("target","@parent")("appendTo",I.appendTo)("showTransitionOptions",I.showTransitionOptions)("hideTransitionOptions",I.hideTransitionOptions)}},dependencies:()=>[l.YU,l.Sq,l.bT,l.T3,l.B3,W.hJ,d.Ei,K,he.q,V.W,M.A,B.D],styles:["@layer primeng{.p-treeselect{display:inline-flex;cursor:pointer;position:relative;-webkit-user-select:none;user-select:none}.p-treeselect-trigger{display:flex;align-items:center;justify-content:center;flex-shrink:0}.p-treeselect-label-container{overflow:hidden;flex:1 1 auto;cursor:pointer;display:flex}.p-treeselect-label{display:block;white-space:nowrap;cursor:pointer;overflow:hidden;text-overflow:ellipsis}.p-treeselect-label-empty{overflow:hidden;visibility:hidden}.p-treeselect-token{cursor:default;display:inline-flex;align-items:center;flex:0 0 auto}.p-treeselect-items-wrapper{overflow:auto}.p-treeselect-header{display:flex;align-items:center;justify-content:space-between}.p-treeselect-filter-container{position:relative;flex:1 1 auto}.p-treeselect-filter-icon{position:absolute;top:50%;margin-top:-.5rem}.p-treeselect-filter-container .p-inputtext{width:100%}.p-treeselect-close{display:flex;align-items:center;justify-content:center;flex-shrink:0;overflow:hidden;position:relative;margin-left:auto}.p-treeselect-clear-icon{position:absolute;top:50%;margin-top:-.5rem}.p-fluid .p-treeselect{display:flex}.p-treeselect-clear-icon{position:absolute;top:50%;margin-top:-.5rem;cursor:pointer}.p-treeselect-clearable{position:relative}}\n"],encapsulation:2,changeDetection:0})}return g})(),kn=(()=>{class g{static \u0275fac=function(C){return new(C||g)};static \u0275mod=e.$C({type:g});static \u0275inj=e.G2t({imports:[l.MD,W.z_,k.Z,d.Gg,Q,he.u,V.W,M.A,B.D,W.z_,d.Gg,Q]})}return g})();function Dn(g,A){if(1&g){const t=e.RV6();e.j41(0,"p-checkbox",7),e.mxI("ngModelChange",function(I){const n=e.eBV(t).$implicit;return e.DH7(n.data.analyzable,I)||(n.data.analyzable=I),e.Njj(I)}),e.bIt("onChange",function(I){const n=e.eBV(t).$implicit,i=e.XpG();return e.Njj(i.updateCategoryAnalizability(n.data.iD,I))}),e.k0s(),e.EFF(1)}if(2&g){const t=A.$implicit;e.R50("ngModel",t.data.analyzable),e.Y8G("binary",!0),e.R7$(),e.SpI(" ",t.label," ")}}function Gn(g,A){if(1&g){const t=e.RV6();e.j41(0,"p-checkbox",7),e.mxI("ngModelChange",function(I){const n=e.eBV(t).$implicit;return e.DH7(n.data.analyzable,I)||(n.data.analyzable=I),e.Njj(I)}),e.bIt("onChange",function(I){const n=e.eBV(t).$implicit,i=e.XpG();return e.Njj(i.updateTypeAnalizability(n.data.iD,I))}),e.k0s(),e.EFF(1)}if(2&g){const t=A.$implicit;e.R50("ngModel",t.data.analyzable),e.Y8G("binary",!0),e.R7$(),e.SpI(" ",t.label," ")}}function Fn(g,A){}let wn=(()=>{class g extends D.x{constructor(t,C,I){super(I),this.messageService=t,this.categoryTreeService=C,this.filteredCategories=new T.t([]),this.selectedCategory=null,this.filterTextChanged=new T.t("")}onShow(t){t.filterValue=this.filterTextChanged.getValue()}ngOnInit(){this.titleService.setTitle("\u0414\u0435\u0440\u0435\u0432\u043e \u0442\u043e\u0432\u0430\u0440\u043e\u0432"),this.filterTextChanged.pipe((0,Mg.B)(500),(0,Bg.F)()).pipe((0,E.n)(t=>this.categoryTreeService.filterCategories(new le.z.FilterCategoryModel({term:t,count:10})).pipe((0,u.W)(C=>(this.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0444\u0438\u043b\u044c\u0442\u0440\u0430 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0439",severity:"error",detail:C}),m.w))))).subscribe(t=>{const C=t.map(I=>this.mapCategory(I,null,null));this.filteredCategories.next(C)})}onFilterNodeSelect(t){const C=t.node.leaf?t.node.parent.data.iD:t.node.iD;this.loadChildCategories(C,I=>this.topCategories=I.map(n=>this.mapCategory(n,null,C)))}clearCategoriesFilter(t){t.filterValue="",this.filterCategories("")}loadChildCategories(t,C){this.loading=!0,this.categoryTreeService.getCategories(t).pipe((0,u.W)(I=>(this.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0434\u0435\u0440\u0435\u0432\u0430 \u0442\u0438\u043f\u043e\u0432 \u0442\u043e\u0432\u0430\u0440\u043e\u0432",severity:"error",detail:I}),this.loading=!1,m.w))).subscribe(I=>{C(I.sort((n,i)=>n.name.localeCompare(i.name))),this.loading=!1})}mapProductType(t){return{label:t.name,children:[],leaf:!0,key:t.iD.toString(),icon:"pi pi-list",hasChildren:!1,type:"productType",data:t}}mapCategory(t,C,I){const n={label:t.name,expandedIcon:"pi pi-folder-open",collapsedIcon:"pi pi-folder",leaf:!1,key:t.iD.toString(),icon:"pi pi-folder",type:"category",data:t,parent:C};if(I==t.iD){let i=n;for(;i;)i.expanded=!0,i=i.parent}return n.children=t.children?.sort((i,o)=>i.name.localeCompare(o.name)).map(i=>this.mapCategory(i,n,I))??[],n.children=n.children.concat(t.types.sort((i,o)=>i.name.localeCompare(o.name)).map(i=>this.mapProductType(i))),n}filterCategories(t){this.filterTextChanged.next(t)}importProductTypes(){this.categoryTreeService.importCategoryTree().pipe((0,u.W)(t=>(this.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0434\u0435\u0440\u0435\u0432\u0430 \u0442\u0438\u043f\u043e\u0432 \u0442\u043e\u0432\u0430\u0440\u043e\u0432",severity:"error",detail:t}),m.w))).subscribe(()=>{this.messageService.add({summary:"\u0423\u0441\u043f\u0435\u0445",severity:"success",detail:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0434\u0435\u0440\u0435\u0432\u0430 \u0442\u0438\u043f\u043e\u0432 \u0442\u043e\u0432\u0430\u0440\u043e\u0432 \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u0430"})})}updateCategoryAnalizability(t,C){this.categoryTreeService.setCategoryAnalyzability(t,C.checked).pipe((0,u.W)(I=>(this.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f \u0444\u043b\u0430\u0433\u0430 \u0430\u043d\u0430\u043b\u0438\u0437\u0430 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438",severity:"error",detail:I}),m.w))).subscribe(()=>{this.messageService.add({summary:"\u0423\u0441\u043f\u0435\u0445",severity:"success",detail:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0434\u0435\u0440\u0435\u0432\u0430 \u0442\u0438\u043f\u043e\u0432 \u0442\u043e\u0432\u0430\u0440\u043e\u0432 \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u0430"})})}updateTypeAnalizability(t,C){this.categoryTreeService.setProductTypeAnalyzability(t,C.checked).pipe((0,u.W)(I=>(this.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f \u0444\u043b\u0430\u0433\u0430 \u0430\u043d\u0430\u043b\u0438\u0437\u0430 \u0442\u0438\u043f\u0430 \u0442\u043e\u0432\u0430\u0440\u043e\u0432",severity:"error",detail:I}),m.w))).subscribe(()=>{this.messageService.add({summary:"\u0423\u0441\u043f\u0435\u0445",severity:"success",detail:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0434\u0435\u0440\u0435\u0432\u0430 \u0442\u0438\u043f\u043e\u0432 \u0442\u043e\u0432\u0430\u0440\u043e\u0432 \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u0430"})})}static{this.\u0275fac=function(C){return new(C||g)(e.rXU(d.bg),e.rXU(le.z.CategoryTreeClient),e.rXU(N.hE))}}static{this.\u0275cmp=e.VBU({type:g,selectors:[["app-product-tree"]],features:[e.Vt3],decls:10,vars:6,consts:[["treeSelect",""],["containerStyleClass","w-full","appendTo","body","placeholder","Select Item",1,"md:w-20rem","w-full",3,"onShow","onClear","onNodeSelect","onFilter","options","filter","filterInputAutoFocus"],["pButton","",3,"click"],["filterMode","strict","filterPlaceholder","\u0424\u0438\u043b\u044c\u0442\u0440\u043e\u0432\u0430\u0442\u044c",1,"w-full","md:w-30rem",3,"value"],["pTemplate","category"],["pTemplate","productType"],["pTemplate","empty"],[3,"ngModelChange","onChange","ngModel","binary"]],template:function(C,I){if(1&C){const n=e.RV6();e.nrm(0,"p-toast"),e.j41(1,"p-treeSelect",1,0),e.nI1(3,"async"),e.bIt("onShow",function(){e.eBV(n);const o=e.sdS(2);return e.Njj(I.onShow(o))})("onClear",function(){e.eBV(n);const o=e.sdS(2);return e.Njj(I.clearCategoriesFilter(o))})("onNodeSelect",function(o){return e.eBV(n),e.Njj(I.onFilterNodeSelect(o))})("onFilter",function(){e.eBV(n);const o=e.sdS(2);return e.Njj(I.filterCategories(o.filterValue))}),e.k0s(),e.j41(4,"button",2),e.bIt("click",function(){return e.eBV(n),e.Njj(I.importProductTypes())}),e.EFF(5,"\u0418\u043c\u043f\u043e\u0440\u0442 \u0442\u0438\u043f\u043e\u0432 \u0442\u043e\u0432\u0430\u0440\u043e\u0432"),e.k0s(),e.j41(6,"p-tree",3),e.DNE(7,Dn,2,3,"ng-template",4)(8,Gn,2,3,"ng-template",5)(9,Fn,0,0,"ng-template",6),e.k0s()}2&C&&(e.R7$(),e.Y8G("options",e.bMT(3,4,I.filteredCategories))("filter",!0)("filterInputAutoFocus",!0),e.R7$(5),e.Y8G("value",I.topCategories))},dependencies:[d.Ei,v._f,re.Sc,h.BC,h.vS,S.y8,K,be,l.Jj]})}}return g})();const jn=()=>({"min-width":"75rem"}),Rn=()=>[10,25,50],Pn=()=>({width:"50vw"});function Mn(g,A){1&g&&(e.j41(0,"tr")(1,"th"),e.EFF(2,"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435"),e.k0s(),e.j41(3,"th",6),e.EFF(4,"\u0415\u0434\u0438\u043d\u0438\u0446\u0430 \u0438\u0437\u043c\u0435\u0440\u0435\u043d\u0438\u044f "),e.nrm(5,"p-sortIcon",7),e.k0s(),e.j41(6,"th"),e.EFF(7,"\u041a\u0432\u0430\u043d\u0442"),e.k0s(),e.j41(8,"th"),e.EFF(9,"\u0426\u0435\u043d\u044b"),e.k0s(),e.nrm(10,"th"),e.k0s())}function Bn(g,A){if(1&g&&(e.j41(0,"li"),e.EFF(1),e.k0s()),2&g){const t=A.$implicit;e.R7$(),e.SpI(" ",t.name," ")}}function Vn(g,A){if(1&g){const t=e.RV6();e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td")(8,"ul"),e.DNE(9,Bn,2,1,"li",8),e.k0s()(),e.j41(10,"td")(11,"p-button",9),e.bIt("click",function(){const I=e.eBV(t).$implicit,n=e.XpG(2);return e.Njj(n.showEditPackageTypeDialog(I))}),e.k0s(),e.j41(12,"p-button",10),e.bIt("click",function(){const I=e.eBV(t).$implicit,n=e.XpG(2);return e.Njj(n.removePackageType(I))}),e.k0s()()()}if(2&g){const t=A.$implicit,C=e.XpG(2);e.R7$(2),e.JRh(t.name),e.R7$(2),e.JRh(C.getMeasureUnitText(t.unitOfMeasure)),e.R7$(2),e.JRh(C.getQuantum(t)),e.R7$(3),e.Y8G("ngForOf",t.prices)}}function Yn(g,A){if(1&g&&(e.j41(0,"p-table",3),e.DNE(1,Mn,11,0,"ng-template",4)(2,Vn,13,4,"ng-template",5),e.k0s()),2&g){const t=e.XpG();e.Y8G("value",t.data)("tableStyle",e.lJ4(6,jn))("paginator",!0)("rows",50)("rowsPerPageOptions",e.lJ4(7,Rn))("totalRecords",t.totalRecords)}}function Xn(g,A){if(1&g){const t=e.RV6();e.j41(0,"button",21),e.bIt("click",function(){e.eBV(t);const I=e.XpG(2);return e.Njj(I.addPackageType())}),e.EFF(1,"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"),e.k0s()}}function $n(g,A){if(1&g){const t=e.RV6();e.j41(0,"button",21),e.bIt("click",function(){e.eBV(t);const I=e.XpG(2);return e.Njj(I.updatePackageType())}),e.EFF(1,"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c"),e.k0s()}}function On(g,A){if(1&g){const t=e.RV6();e.j41(0,"p-dialog",11),e.mxI("visibleChange",function(I){e.eBV(t);const n=e.XpG();return e.DH7(n.showDialog,I)||(n.showDialog=I),e.Njj(I)}),e.j41(1,"div",12)(2,"div",13)(3,"label",14),e.EFF(4,"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435"),e.k0s(),e.j41(5,"input",15),e.mxI("ngModelChange",function(I){e.eBV(t);const n=e.XpG();return e.DH7(n.newItem.name,I)||(n.newItem.name=I),e.Njj(I)}),e.k0s()(),e.j41(6,"div",13)(7,"label",16),e.EFF(8,"\u0422\u043e\u0447\u043d\u043e\u0441\u0442\u044c, \u0437\u043d\u0430\u043a\u043e\u0432 \u043f\u043e\u0441\u043b\u0435 \u0437\u0430\u043f\u044f\u0442\u043e\u0439"),e.k0s(),e.j41(9,"p-inputNumber",17),e.mxI("ngModelChange",function(I){e.eBV(t);const n=e.XpG();return e.DH7(n.newItem.decimalPlaces,I)||(n.newItem.decimalPlaces=I),e.Njj(I)}),e.k0s()(),e.j41(10,"div",13)(11,"label",18),e.EFF(12,"\u0415\u0434\u0438\u043d\u0438\u0446\u0430 \u0438\u0437\u043c\u0435\u0440\u0435\u043d\u0438\u044f"),e.k0s(),e.j41(13,"p-dropdown",19),e.mxI("ngModelChange",function(I){e.eBV(t);const n=e.XpG();return e.DH7(n.newItem.unitOfMeasure,I)||(n.newItem.unitOfMeasure=I),e.Njj(I)}),e.k0s()()(),e.DNE(14,Xn,2,0,"button",20)(15,$n,2,0,"button",20),e.k0s()}if(2&g){const t=e.XpG();e.Aen(e.lJ4(17,Pn)),e.Y8G("header",t.dialogTitle)("modal",!0),e.R50("visible",t.showDialog),e.Y8G("draggable",!1)("resizable",!1),e.R7$(5),e.R50("ngModel",t.newItem.name),e.R7$(4),e.R50("ngModel",t.newItem.decimalPlaces),e.Y8G("min",0)("max",5)("showButtons",!0),e.R7$(4),e.R50("ngModel",t.newItem.unitOfMeasure),e.Y8G("options",t.measureUnits)("autoDisplayFirst",!1),e.R7$(),e.Y8G("ngIf",t.isAdding),e.R7$(),e.Y8G("ngIf",!t.isAdding)}}let Un=(()=>{class g{constructor(t,C){this.purchaseService=t,this.messageService=C,this.measureUnits=[{value:p.D.UnitOfMeasure.Piece,name:"\u0448\u0442"},{value:p.D.UnitOfMeasure.SquareMeter,name:"\u043c2"},{value:p.D.UnitOfMeasure.Meter,name:"\u043c"}]}getMeasureUnitText(t){return this.measureUnits.find(C=>C.value==t)?.name??t.toString()}get data(){return this.purchaseService.getPackageTypes()}getQuantum(t){return Math.pow(10,-t.decimalPlaces)}showAddPackageTypeDialog(){this.isAdding=!0,this.dialogTitle="\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0442\u0438\u043f\u0430 \u0443\u043f\u0430\u043a\u043e\u0432\u043a\u0438",this.newItem={decimalPlaces:0},this.showDialog=!0}showEditPackageTypeDialog(t){this.isAdding=!1,this.dialogTitle="\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0442\u0438\u043f\u0430 \u0443\u043f\u0430\u043a\u043e\u0432\u043a\u0438",this.newItem=t,this.showDialog=!0}removePackageType(t){this.purchaseService.removePackageType(t.iD).pipe((0,u.W)(C=>(this.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f \u0442\u0438\u043f\u0430 \u0443\u043f\u0430\u043a\u043e\u0432\u043a\u0438",severity:"error",detail:C}),m.w))).subscribe()}addPackageType(){this.purchaseService.addPackageType(this.newItem).pipe((0,u.W)(t=>(this.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u0442\u0438\u043f\u0430 \u0443\u043f\u0430\u043a\u043e\u0432\u043a\u0438",severity:"error",detail:t}),m.w))).subscribe(()=>{this.showDialog=!1})}updatePackageType(){this.purchaseService.updatePackageType(this.newItem).pipe((0,u.W)(t=>(this.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f \u0442\u0438\u043f\u0430 \u0443\u043f\u0430\u043a\u043e\u0432\u043a\u0438",severity:"error",detail:t}),m.w))).subscribe(()=>{this.showDialog=!1})}static{this.\u0275fac=function(C){return new(C||g)(e.rXU(w),e.rXU(d.bg))}}static{this.\u0275cmp=e.VBU({type:g,selectors:[["app-package-type-list"]],decls:7,vars:2,consts:[[3,"click"],["dataKey","iD",3,"value","tableStyle","paginator","rows","rowsPerPageOptions","totalRecords",4,"ngIf"],[3,"header","modal","style","visible","draggable","resizable","visibleChange",4,"ngIf"],["dataKey","iD",3,"value","tableStyle","paginator","rows","rowsPerPageOptions","totalRecords"],["pTemplate","header"],["pTemplate","body"],["pSortableColumn","unitOfMeasure"],["field","unitOfMeasure"],[4,"ngFor","ngForOf"],["type","button","pRipple","","icon","pi pi-pencil",3,"click"],["icon","pi pi-trash",3,"click"],[3,"visibleChange","header","modal","visible","draggable","resizable"],[1,"card"],[1,"flex-auto","m-3"],["for","name",1,"block","font-bold"],["pInputText","","inputId","name",3,"ngModelChange","ngModel"],["for","decimalPlaces",1,"mb-2","block","font-bold"],["inputId","decimalPlaces",3,"ngModelChange","ngModel","min","max","showButtons"],["for","unitOfMeasure",1,"mb-2","block","font-bold"],["appendTo","body","placeholder","\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0435\u0434\u0438\u043d\u0438\u0446\u0443 \u0438\u0437\u043c\u0435\u0440\u0435\u043d\u0438\u0439","inputId","unitOfMeasure","optionLabel","name","optionValue","value",3,"ngModelChange","ngModel","options","autoDisplayFirst"],["pButton","",3,"click",4,"ngIf"],["pButton","",3,"click"]],template:function(C,I){1&C&&(e.nrm(0,"p-toast"),e.j41(1,"h1"),e.EFF(2,"\u0423\u043f\u0430\u043a\u043e\u0432\u043a\u0430 \u0442\u043e\u0432\u0430\u0440\u043e\u0432"),e.k0s(),e.j41(3,"p-button",0),e.bIt("click",function(){return I.showAddPackageTypeDialog()}),e.EFF(4,"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"),e.k0s(),e.DNE(5,Yn,3,8,"p-table",1)(6,On,16,18,"p-dialog",2)),2&C&&(e.R7$(5),e.Y8G("ngIf",I.data),e.R7$(),e.Y8G("ngIf",I.newItem))},dependencies:[d.Ei,v._f,v.$n,l.Sq,l.bT,U.l,j.ms,h.me,h.BC,h.vS,R.YI,L.S,f.XI,f.Tg,f.yc,S.y8]})}}return g})();var Ln=a(467),Te=a(491),ve=a(9615),ye=a(6296);const Hn=["fileUpload"],zn=[{path:"edit",component:Ng},{path:"",component:Re},{path:"product-tree",component:wn},{path:"package-type/list",component:Un},{path:"summary",component:Pg},{path:"price-analyzer",component:(()=>{class g{constructor(t,C){this.client=t,this.messageService=C,this.outputColumns=[],this.columns=[...Array(52).keys()].map(I=>({index:I,text:I>25?String.fromCharCode(I/26-1+65)+String.fromCharCode(65+I%26):String.fromCharCode(65+I)})),this.selectedSheet=0,this.sheets=[...Array(10).keys()],this.nameColumn=void 0,this.priceColumn=void 0,this.selectedRatesOfReturn=[],this.ratesOfReturn=[0,5,10,15,20,25,30,35,40,45,50],this.deliveryCost=50,this.returnCost=150,this.commissionPercent=20,this.returnPercentage=5}sendFile(){var t=this;return(0,Ln.A)(function*(){let C=yield t.fileUpload.files[0].arrayBuffer();const I=new Uint8Array(C);let n="";for(const i of I)n+=String.fromCharCode(i);t.client.analyzePrice(new p.D.AnalyzePriceModel({nameColumn:t.nameColumn,priceListContent:btoa(n),outputColumns:t.outputColumns,priceColumn:t.priceColumn,sheetIndex:t.selectedSheet,ratesOfReturn:t.selectedRatesOfReturn,deliveryCost:t.deliveryCost,returnCost:t.returnCost,commissionPercent:t.commissionPercent,returnPercentage:t.returnPercentage})).pipe((0,u.W)(i=>(t.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0438 \u0444\u0430\u0439\u043b\u0430",severity:"error",detail:i}),m.w))).subscribe(i=>{const o=document.createElement("a",{});o.setAttribute("class","hidden"),document.body.appendChild(o);const s=window.URL.createObjectURL(i.data);o.href=s;const _=t.fileUpload.files[0].name.split(".");_[_.length-2]+="-redicy",_[_.length-1]="xlsx",o.download=_.join("."),o.click(),window.URL.revokeObjectURL(s)})})()}static{this.\u0275fac=function(C){return new(C||g)(e.rXU(p.D.PriceAnalyzerClient),e.rXU(d.bg))}}static{this.\u0275cmp=e.VBU({type:g,selectors:[["app-price-analyzer"]],viewQuery:function(C,I){if(1&C&&e.GBs(Hn,5),2&C){let n;e.mGM(n=e.lsd())&&(I.fileUpload=n.first)}},decls:51,vars:29,consts:[["fileUpload",""],["header","\u0410\u043d\u0430\u043b\u0438\u0437 \u043f\u0440\u0430\u0439\u0441\u043e\u0432"],["accept",".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel","chooseIcon","pi pi-upload","maxFileSize","100000000",3,"showUploadButton"],[1,"p-fluid","p-grid"],[1,"p-field","lg:col-4","md:col-6","sm:col-12","mt-5"],[1,"p-float-label"],["appendTo","body","inputId","outputColumns","optionLabel","text","optionValue","index",3,"ngModelChange","ngModel","filter","options","showClear"],["for","outputColumns"],["appendTo","body","inputId","sheet",3,"ngModelChange","ngModel","options"],["for","sheet"],["appendTo","body","inputId","nameColumn","optionLabel","text","optionValue","index",3,"ngModelChange","ngModel","options"],["for","nameColumn"],["appendTo","body","inputId","priceColumn","optionLabel","text","optionValue","index",3,"ngModelChange","ngModel","options"],["for","priceColumn"],["appendTo","body","inputId","ratesOfReturn",3,"ngModelChange","ngModel","filter","options","showClear"],["for","ratesOfReturn"],["inputId","deliveryCost",3,"ngModelChange","ngModel","min","useGrouping"],["for","deliveryCost"],["inputId","returnCost",3,"ngModelChange","ngModel","min","useGrouping"],["for","returnCost"],["inputId","commissionPercent",3,"ngModelChange","ngModel","min","max","useGrouping"],["for","commissionPercent"],["inputId","returnPercentage",3,"ngModelChange","ngModel","min","useGrouping"],["for","returnPercentage"],["pButton","",1,"mt-2",3,"click","disabled"]],template:function(C,I){if(1&C){const n=e.RV6();e.j41(0,"p-card",1),e.nrm(1,"p-fileUpload",2,0),e.j41(3,"div",3)(4,"div",4)(5,"span",5)(6,"p-multiSelect",6),e.mxI("ngModelChange",function(o){return e.eBV(n),e.DH7(I.outputColumns,o)||(I.outputColumns=o),e.Njj(o)}),e.k0s(),e.j41(7,"label",7),e.EFF(8,"\u0412\u044b\u0432\u043e\u0434\u0438\u043c\u044b\u0435 \u043a\u043e\u043b\u043e\u043d\u043a\u0438"),e.k0s()()(),e.j41(9,"div",4)(10,"span",5)(11,"p-dropdown",8),e.mxI("ngModelChange",function(o){return e.eBV(n),e.DH7(I.selectedSheet,o)||(I.selectedSheet=o),e.Njj(o)}),e.k0s(),e.j41(12,"label",9),e.EFF(13,"\u041b\u0438\u0441\u0442"),e.k0s()()(),e.j41(14,"div",4)(15,"span",5)(16,"p-dropdown",10),e.mxI("ngModelChange",function(o){return e.eBV(n),e.DH7(I.nameColumn,o)||(I.nameColumn=o),e.Njj(o)}),e.k0s(),e.j41(17,"label",11),e.EFF(18,"\u041a\u043e\u043b\u043e\u043d\u043a\u0430 \u043d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u044f"),e.k0s()()(),e.j41(19,"div",4)(20,"span",5)(21,"p-dropdown",12),e.mxI("ngModelChange",function(o){return e.eBV(n),e.DH7(I.priceColumn,o)||(I.priceColumn=o),e.Njj(o)}),e.k0s(),e.j41(22,"label",13),e.EFF(23,"\u041a\u043e\u043b\u043e\u043d\u043a\u0430 \u0446\u0435\u043d\u044b"),e.k0s()()(),e.j41(24,"div",4)(25,"span",5)(26,"p-multiSelect",14),e.mxI("ngModelChange",function(o){return e.eBV(n),e.DH7(I.selectedRatesOfReturn,o)||(I.selectedRatesOfReturn=o),e.Njj(o)}),e.k0s(),e.j41(27,"label",15),e.EFF(28,"\u0420\u0430\u0441\u0447\u0451\u0442\u043d\u044b\u0435 \u043d\u043e\u0440\u043c\u044b \u043f\u0440\u0438\u0431\u044b\u043b\u0438"),e.k0s()()(),e.j41(29,"div",4)(30,"span",5)(31,"p-inputNumber",16),e.mxI("ngModelChange",function(o){return e.eBV(n),e.DH7(I.deliveryCost,o)||(I.deliveryCost=o),e.Njj(o)}),e.k0s(),e.j41(32,"label",17),e.EFF(33,"\u0414\u043e\u0441\u0442\u0430\u0432\u043a\u0430"),e.k0s()()(),e.j41(34,"div",4)(35,"span",5)(36,"p-inputNumber",18),e.mxI("ngModelChange",function(o){return e.eBV(n),e.DH7(I.returnCost,o)||(I.returnCost=o),e.Njj(o)}),e.k0s(),e.j41(37,"label",19),e.EFF(38,"\u0412\u043e\u0437\u0432\u0440\u0430\u0442"),e.k0s()()(),e.j41(39,"div",4)(40,"span",5)(41,"p-inputNumber",20),e.mxI("ngModelChange",function(o){return e.eBV(n),e.DH7(I.commissionPercent,o)||(I.commissionPercent=o),e.Njj(o)}),e.k0s(),e.j41(42,"label",21),e.EFF(43,"\u041a\u043e\u043c\u0438\u0441\u0441\u0438\u044f, %"),e.k0s()()(),e.j41(44,"div",4)(45,"span",5)(46,"p-inputNumber",22),e.mxI("ngModelChange",function(o){return e.eBV(n),e.DH7(I.returnPercentage,o)||(I.returnPercentage=o),e.Njj(o)}),e.k0s(),e.j41(47,"label",23),e.EFF(48,"% \u0432\u043e\u0437\u0432\u0440\u0430\u0442\u043e\u0432"),e.k0s()()()(),e.j41(49,"button",24),e.bIt("click",function(){return e.eBV(n),e.Njj(I.sendFile())}),e.EFF(50,"x "),e.k0s()()}if(2&C){const n=e.sdS(2);e.R7$(),e.Y8G("showUploadButton",!1),e.R7$(5),e.R50("ngModel",I.outputColumns),e.Y8G("filter",!1)("options",I.columns)("showClear",!0),e.R7$(5),e.R50("ngModel",I.selectedSheet),e.Y8G("options",I.sheets),e.R7$(5),e.R50("ngModel",I.nameColumn),e.Y8G("options",I.columns),e.R7$(5),e.R50("ngModel",I.priceColumn),e.Y8G("options",I.columns),e.R7$(5),e.R50("ngModel",I.selectedRatesOfReturn),e.Y8G("filter",!1)("options",I.ratesOfReturn)("showClear",!0),e.R7$(5),e.R50("ngModel",I.deliveryCost),e.Y8G("min",0)("useGrouping",!1),e.R7$(5),e.R50("ngModel",I.returnCost),e.Y8G("min",0)("useGrouping",!1),e.R7$(5),e.R50("ngModel",I.commissionPercent),e.Y8G("min",0)("max",10)("useGrouping",!1),e.R7$(5),e.R50("ngModel",I.returnPercentage),e.Y8G("min",0)("useGrouping",!1),e.R7$(3),e.Y8G("disabled",!n.files.length||null==I.nameColumn||!I.selectedRatesOfReturn.length)}},dependencies:[v._f,Te.Z,j.ms,ve.N,h.BC,h.vS,R.YI,ye.KF]})}}return g})()}];let Kn=(()=>{class g{static{this.\u0275fac=function(C){return new(C||g)}}static{this.\u0275mod=e.$C({type:g})}static{this.\u0275inj=e.G2t({imports:[x.iI.forChild(zn),x.iI]})}}return g})(),Qn=(()=>{class g{static{this.\u0275fac=function(C){return new(C||g)}}static{this.\u0275mod=e.$C({type:g})}static{this.\u0275inj=e.G2t({imports:[l.MD]})}}return g})(),Wn=(()=>{class g{static{this.\u0275fac=function(C){return new(C||g)}}static{this.\u0275mod=e.$C({type:g})}static{this.\u0275inj=e.G2t({providers:[p.D.PurchaseBatchClient,p.D.ProductClient,p.D.PackageTypeClient,p.D.SalesChannelClient,p.D.PriceAnalyzerClient,F.X.PurchaseBatchClient,F.X.PackageTypeClient,w],imports:[O.h6,ge.$$,v.tm,Ce.rO,Te.D,re.q4,l.MD,U.P,j.kr,ve.e,h.YN,R.O3,L.u,ye.iV,Qn,Kn,mt,f.bG,ae.$,S.MB,S.MB,Q,kn]})}}return g})()}}]);