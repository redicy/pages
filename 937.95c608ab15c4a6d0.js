"use strict";(self.webpackChunkseller=self.webpackChunkseller||[]).push([[937],{1937:(ft,f,c)=>{c.r(f),c.d(f,{ProductListModule:()=>gt});var d=c(177),k=c(9909),l=c(9437),s=c(983),P=c(2180),m=c(4153),t=c(4438),j=c(9058),g=c(5779),b=c(345),h=c(9417),r=c(544),E=c(9998),C=c(1141),M=c(4602),F=c(6160),G=c(1802),R=c(2242),I=c(4799);const T=()=>["name"],D=()=>[10,25,50],y=()=>({"min-width":"75rem"}),x=o=>({width:o});function L(o,u){1&o&&(t.j41(0,"tr")(1,"th",10),t.EFF(2," \u041a\u043e\u0434 "),t.nrm(3,"p-sortIcon",11),t.k0s(),t.j41(4,"th",12),t.EFF(5," \u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 "),t.nrm(6,"p-sortIcon",13),t.k0s(),t.j41(7,"th"),t.EFF(8,"\u0413\u0430\u0431\u0430\u0440\u0438\u0442\u044b"),t.k0s(),t.j41(9,"th"),t.EFF(10,"\u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u044b\u0439 \u043e\u0441\u0442\u0430\u0442\u043e\u043a \u043d\u0430 \u0441\u043a\u043b\u0430\u0434\u0435"),t.k0s(),t.j41(11,"th"),t.EFF(12,"\u041e\u0441\u0442\u0430\u0442\u043e\u043a \u043d\u0430 \u0441\u0432\u043e\u0451\u043c \u0441\u043a\u043b\u0430\u0434\u0435"),t.k0s(),t.nrm(13,"th")(14,"th"),t.k0s(),t.j41(15,"tr")(16,"th"),t.nrm(17,"p-columnFilter",14),t.k0s(),t.j41(18,"th"),t.nrm(19,"p-columnFilter",15),t.k0s(),t.nrm(20,"th")(21,"th")(22,"th")(23,"th")(24,"th"),t.k0s())}function S(o,u){if(1&o){const e=t.RV6();t.j41(0,"input",24),t.mxI("ngModelChange",function(n){t.eBV(e);const p=t.XpG().$implicit;return t.DH7(p.name,n)||(p.name=n),t.Njj(n)}),t.k0s()}if(2&o){const e=t.XpG().$implicit;t.R50("ngModel",e.name)}}function N(o,u){if(1&o&&t.EFF(0),2&o){const e=t.XpG().$implicit;t.SpI(" ",e.name," ")}}function v(o,u){if(1&o){const e=t.RV6();t.j41(0,"p-inputGroup")(1,"p-inputGroupAddon"),t.EFF(2,"\u0428"),t.k0s(),t.j41(3,"p-inputNumber",25),t.mxI("ngModelChange",function(n){t.eBV(e);const p=t.XpG().$implicit;return t.DH7(p.widthMM,n)||(p.widthMM=n),t.Njj(n)}),t.k0s(),t.j41(4,"p-inputGroupAddon"),t.EFF(5,"\u043c\u043c"),t.k0s()(),t.j41(6,"p-inputGroup")(7,"p-inputGroupAddon"),t.EFF(8,"\u0412"),t.k0s(),t.j41(9,"p-inputNumber",26),t.mxI("ngModelChange",function(n){t.eBV(e);const p=t.XpG().$implicit;return t.DH7(p.heightMM,n)||(p.heightMM=n),t.Njj(n)}),t.k0s(),t.j41(10,"p-inputGroupAddon"),t.EFF(11,"\u043c\u043c"),t.k0s()(),t.j41(12,"p-inputGroup")(13,"p-inputGroupAddon"),t.EFF(14,"\u0413"),t.k0s(),t.j41(15,"p-inputNumber",27),t.mxI("ngModelChange",function(n){t.eBV(e);const p=t.XpG().$implicit;return t.DH7(p.depthMM,n)||(p.depthMM=n),t.Njj(n)}),t.k0s(),t.j41(16,"p-inputGroupAddon"),t.EFF(17,"\u043c\u043c"),t.k0s()(),t.j41(18,"p-inputGroup")(19,"p-inputGroupAddon"),t.EFF(20,"\u0412\u0435\u0441"),t.k0s(),t.j41(21,"p-inputNumber",28),t.mxI("ngModelChange",function(n){t.eBV(e);const p=t.XpG().$implicit;return t.DH7(p.weightG,n)||(p.weightG=n),t.Njj(n)}),t.k0s(),t.j41(22,"p-inputGroupAddon"),t.EFF(23,"\u0433"),t.k0s()()}if(2&o){const e=t.XpG().$implicit;t.R7$(3),t.R50("ngModel",e.widthMM),t.R7$(6),t.R50("ngModel",e.heightMM),t.R7$(6),t.R50("ngModel",e.depthMM),t.R7$(6),t.R50("ngModel",e.weightG)}}function X(o,u){if(1&o&&(t.j41(0,"div",29),t.EFF(1),t.k0s(),t.j41(2,"div"),t.EFF(3),t.k0s()),2&o){let e,i;const n=t.XpG().$implicit;t.R7$(),t.E5c(" ",null!==(e=n.widthMM)&&void 0!==e?e:0," x ",null!==(e=n.heightMM)&&void 0!==e?e:0," x ",null!==(e=n.depthMM)&&void 0!==e?e:0," "),t.R7$(2),t.SpI("",null!==(i=n.weightG)&&void 0!==i?i:0,"\u0433")}}function w(o,u){if(1&o){const e=t.RV6();t.j41(0,"input",24),t.mxI("ngModelChange",function(n){t.eBV(e);const p=t.XpG().$implicit;return t.DH7(p.minimumWarehouseStock,n)||(p.minimumWarehouseStock=n),t.Njj(n)}),t.k0s()}if(2&o){const e=t.XpG().$implicit;t.R50("ngModel",e.minimumWarehouseStock)}}function V(o,u){if(1&o&&t.EFF(0),2&o){let e;const i=t.XpG().$implicit;t.SpI(" ",null!==(e=i.minimumWarehouseStock)&&void 0!==e?e:0," ")}}function $(o,u){if(1&o){const e=t.RV6();t.j41(0,"input",24),t.mxI("ngModelChange",function(n){t.eBV(e);const p=t.XpG().$implicit;return t.DH7(p.stockAmount,n)||(p.stockAmount=n),t.Njj(n)}),t.k0s()}if(2&o){const e=t.XpG().$implicit;t.R50("ngModel",e.stockAmount)}}function B(o,u){if(1&o&&t.EFF(0),2&o){let e;const i=t.XpG().$implicit;t.SpI(" ",null!==(e=i.stockAmount)&&void 0!==e?e:0," ")}}function A(o,u){if(1&o){const e=t.RV6();t.j41(0,"p-button",30),t.bIt("click",function(){t.eBV(e);const n=t.XpG().$implicit,p=t.XpG(),a=t.sdS(7);return t.Njj(p.onProductEditInit(a,n))}),t.k0s()}}function Y(o,u){if(1&o){const e=t.RV6();t.j41(0,"p-button",31),t.bIt("click",function(){t.eBV(e);const n=t.XpG().$implicit,p=t.XpG(),a=t.sdS(7);return t.Njj(p.onProductEditSave(a,n))}),t.k0s()}}function H(o,u){if(1&o){const e=t.RV6();t.j41(0,"p-button",32),t.bIt("click",function(){t.eBV(e);const n=t.XpG(2);return t.Njj(n.onProductEditCancel())}),t.k0s()}}function W(o,u){if(1&o){const e=t.RV6();t.j41(0,"p-button",33),t.bIt("click",function(n){t.eBV(e);const p=t.XpG().$implicit,a=t.XpG();return t.Njj(a.confirmProductRemoval(n,p))}),t.k0s()}}function O(o,u){if(1&o&&t.nrm(0,"button",34),2&o){const e=t.XpG(),n=e.$implicit;t.Y8G("icon",e.expanded?"pi pi-chevron-down":"pi pi-chevron-right")("pRowToggler",n)}}function z(o,u){if(1&o&&(t.j41(0,"tr",16)(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td")(4,"p-cellEditor"),t.DNE(5,S,1,1,"ng-template",17)(6,N,1,1,"ng-template",18),t.k0s()(),t.j41(7,"td")(8,"p-cellEditor"),t.DNE(9,v,24,4,"ng-template",17)(10,X,4,4,"ng-template",18),t.k0s()(),t.j41(11,"td")(12,"p-cellEditor"),t.DNE(13,w,1,1,"ng-template",17)(14,V,1,1,"ng-template",18),t.k0s()(),t.j41(15,"td")(16,"p-cellEditor"),t.DNE(17,$,1,1,"ng-template",17)(18,B,1,1,"ng-template",18),t.k0s()(),t.j41(19,"td"),t.DNE(20,A,1,0,"p-button",19)(21,Y,1,0,"p-button",20)(22,H,1,0,"p-button",21)(23,W,1,0,"p-button",22),t.k0s(),t.j41(24,"td"),t.DNE(25,O,1,2,"button",23),t.k0s()()),2&o){const e=u.editing,i=u.$implicit,n=t.XpG();t.Y8G("pEditableRow",i),t.R7$(2),t.JRh(i.iD),t.R7$(18),t.Y8G("ngIf",!e),t.R7$(),t.Y8G("ngIf",e),t.R7$(),t.Y8G("ngIf",e),t.R7$(),t.Y8G("ngIf",!n.editMode),t.R7$(2),t.Y8G("ngIf",i.iD)}}function J(o,u){1&o&&(t.j41(0,"tr")(1,"th"),t.EFF(2,"\u041a\u043e\u0434"),t.k0s(),t.j41(3,"th"),t.EFF(4," \u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 "),t.k0s(),t.j41(5,"th"),t.EFF(6," \u0413\u0430\u0431\u0430\u0440\u0438\u0442\u044b (\u0431\u0440\u0443\u0442\u0442\u043e) "),t.k0s(),t.j41(7,"th"),t.EFF(8,"\u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u044b\u0439 \u0437\u0430\u043f\u0430\u0441, \u0448\u0442"),t.k0s(),t.j41(9,"th"),t.EFF(10,"\u041f\u043e\u0434\u0433\u043e\u0442\u043e\u0432\u043a\u0430 \u043f\u043e\u0441\u0442\u0430\u0432\u043a\u0438, \u0434\u043d\u0435\u0439"),t.k0s(),t.j41(11,"th"),t.EFF(12,"\u0422\u043e\u0432\u0430\u0440\u043e\u0432 \u0432 \u0444\u0430\u0441\u043e\u0432\u043a\u0435"),t.k0s(),t.nrm(13,"th"),t.k0s())}function U(o,u){if(1&o){const e=t.RV6();t.j41(0,"input",24),t.mxI("ngModelChange",function(n){t.eBV(e);const p=t.XpG().$implicit;return t.DH7(p.name,n)||(p.name=n),t.Njj(n)}),t.k0s()}if(2&o){const e=t.XpG().$implicit;t.R50("ngModel",e.name)}}function K(o,u){if(1&o&&t.EFF(0),2&o){const e=t.XpG().$implicit;t.SpI(" ",e.name," ")}}function Q(o,u){if(1&o){const e=t.RV6();t.j41(0,"p-inputGroup")(1,"p-inputGroupAddon"),t.EFF(2,"\u0428"),t.k0s(),t.j41(3,"p-inputNumber",25),t.mxI("ngModelChange",function(n){t.eBV(e);const p=t.XpG().$implicit;return t.DH7(p.widthMM,n)||(p.widthMM=n),t.Njj(n)}),t.k0s(),t.j41(4,"p-inputGroupAddon"),t.EFF(5,"\u043c\u043c"),t.k0s()(),t.j41(6,"p-inputGroup")(7,"p-inputGroupAddon"),t.EFF(8,"\u0412"),t.k0s(),t.j41(9,"p-inputNumber",26),t.mxI("ngModelChange",function(n){t.eBV(e);const p=t.XpG().$implicit;return t.DH7(p.heightMM,n)||(p.heightMM=n),t.Njj(n)}),t.k0s(),t.j41(10,"p-inputGroupAddon"),t.EFF(11,"\u043c\u043c"),t.k0s()(),t.j41(12,"p-inputGroup")(13,"p-inputGroupAddon"),t.EFF(14,"\u0413"),t.k0s(),t.j41(15,"p-inputNumber",27),t.mxI("ngModelChange",function(n){t.eBV(e);const p=t.XpG().$implicit;return t.DH7(p.depthMM,n)||(p.depthMM=n),t.Njj(n)}),t.k0s(),t.j41(16,"p-inputGroupAddon"),t.EFF(17,"\u043c\u043c"),t.k0s()(),t.j41(18,"p-inputGroup")(19,"p-inputGroupAddon"),t.EFF(20,"\u0412\u0435\u0441"),t.k0s(),t.j41(21,"p-inputNumber",28),t.mxI("ngModelChange",function(n){t.eBV(e);const p=t.XpG().$implicit;return t.DH7(p.weightG,n)||(p.weightG=n),t.Njj(n)}),t.k0s(),t.j41(22,"p-inputGroupAddon"),t.EFF(23,"\u0433"),t.k0s()()}if(2&o){const e=t.XpG().$implicit;t.R7$(3),t.R50("ngModel",e.widthMM),t.R7$(6),t.R50("ngModel",e.heightMM),t.R7$(6),t.R50("ngModel",e.depthMM),t.R7$(6),t.R50("ngModel",e.weightG)}}function Z(o,u){if(1&o&&(t.j41(0,"div",29),t.EFF(1),t.k0s(),t.j41(2,"div"),t.EFF(3),t.k0s()),2&o){let e,i;const n=t.XpG().$implicit;t.R7$(),t.E5c(" ",null!==(e=n.widthMM)&&void 0!==e?e:0," x ",null!==(e=n.heightMM)&&void 0!==e?e:0," x ",null!==(e=n.depthMM)&&void 0!==e?e:0," "),t.R7$(2),t.SpI("",null!==(i=n.weightG)&&void 0!==i?i:0,"\u0433")}}function q(o,u){if(1&o){const e=t.RV6();t.j41(0,"input",24),t.mxI("ngModelChange",function(n){t.eBV(e);const p=t.XpG().$implicit;return t.DH7(p.minimumWarehouseStock,n)||(p.minimumWarehouseStock=n),t.Njj(n)}),t.k0s()}if(2&o){const e=t.XpG().$implicit;t.R50("ngModel",e.minimumWarehouseStock)}}function tt(o,u){if(1&o&&t.EFF(0),2&o){const e=t.XpG().$implicit;t.SpI(" ",e.minimumWarehouseStock," ")}}function et(o,u){if(1&o){const e=t.RV6();t.j41(0,"input",24),t.mxI("ngModelChange",function(n){t.eBV(e);const p=t.XpG().$implicit;return t.DH7(p.supplyPreparationTimeInDays,n)||(p.supplyPreparationTimeInDays=n),t.Njj(n)}),t.k0s()}if(2&o){const e=t.XpG().$implicit;t.R50("ngModel",e.supplyPreparationTimeInDays)}}function nt(o,u){if(1&o&&t.EFF(0),2&o){const e=t.XpG().$implicit;t.SpI(" ",e.supplyPreparationTimeInDays," ")}}function it(o,u){if(1&o){const e=t.RV6();t.j41(0,"p-inputNumber",39),t.mxI("ngModelChange",function(n){t.eBV(e);const p=t.XpG().$implicit;return t.DH7(p.productCount,n)||(p.productCount=n),t.Njj(n)}),t.k0s()}if(2&o){const e=t.XpG().$implicit;t.R50("ngModel",e.productCount),t.Y8G("useGrouping",!1)}}function ot(o,u){if(1&o&&t.EFF(0),2&o){const e=t.XpG().$implicit;t.SpI(" ",e.productCount," ")}}function pt(o,u){if(1&o){const e=t.RV6();t.j41(0,"p-button",30),t.bIt("click",function(){t.eBV(e);const n=t.XpG(),p=n.$implicit,a=n.rowIndex;t.XpG();const _=t.sdS(4),ht=t.XpG(2);return t.Njj(ht.onPackageEditInit(_,p,a))}),t.k0s()}}function ut(o,u){if(1&o){const e=t.RV6();t.j41(0,"p-button",40),t.bIt("click",function(){t.eBV(e);const n=t.XpG().$implicit,p=t.XpG(3);return t.Njj(p.onPackageEditSave(n))}),t.k0s()}}function ct(o,u){if(1&o){const e=t.RV6();t.j41(0,"p-button",32),t.bIt("click",function(){t.eBV(e);const n=t.XpG().rowIndex;t.XpG();const p=t.sdS(4),a=t.XpG(2);return t.Njj(a.onPackageEditCancel(p,n))}),t.k0s()}}function at(o,u){if(1&o){const e=t.RV6();t.j41(0,"tr",16)(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td")(4,"p-cellEditor"),t.DNE(5,U,1,1,"ng-template",17)(6,K,1,1,"ng-template",18),t.k0s()(),t.j41(7,"td")(8,"p-cellEditor"),t.DNE(9,Q,24,4,"ng-template",17)(10,Z,4,4,"ng-template",18),t.k0s()(),t.j41(11,"td")(12,"p-cellEditor"),t.DNE(13,q,1,1,"ng-template",17)(14,tt,1,1,"ng-template",18),t.k0s()(),t.j41(15,"td")(16,"p-cellEditor"),t.DNE(17,et,1,1,"ng-template",17)(18,nt,1,1,"ng-template",18),t.k0s()(),t.j41(19,"td")(20,"p-cellEditor"),t.DNE(21,it,1,2,"ng-template",17)(22,ot,1,1,"ng-template",18),t.k0s()(),t.j41(23,"td"),t.DNE(24,pt,1,0,"p-button",19)(25,ut,1,0,"p-button",38)(26,ct,1,0,"p-button",21),t.j41(27,"p-button",33),t.bIt("click",function(n){const p=t.eBV(e).$implicit,a=t.XpG(2).$implicit,_=t.XpG();return t.Njj(_.confirmProductPackageRemoval(n,p,a))}),t.k0s()()()}if(2&o){const e=u.$implicit,i=u.editing;t.Y8G("pEditableRow",e),t.R7$(2),t.JRh(e.iD),t.R7$(22),t.Y8G("ngIf",!i),t.R7$(),t.Y8G("ngIf",i),t.R7$(),t.Y8G("ngIf",i)}}function _t(o,u){if(1&o){const e=t.RV6();t.qex(0),t.j41(1,"button",4),t.bIt("click",function(){t.eBV(e);const n=t.sdS(4),p=t.XpG().$implicit,a=t.XpG();return t.Njj(a.addPackage(n,p))}),t.EFF(2,"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0444\u0430\u0441\u043e\u0432\u043a\u0443"),t.k0s(),t.j41(3,"p-table",37,1),t.DNE(5,J,14,0,"ng-template",6)(6,at,28,5,"ng-template",7),t.k0s(),t.bVm()}if(2&o){const e=t.XpG().$implicit;t.R7$(3),t.Y8G("value",e.packages)}}function rt(o,u){if(1&o&&(t.j41(0,"tr")(1,"td",35),t.DNE(2,_t,7,1,"ng-container",36),t.k0s()()),2&o){const e=u.$implicit;t.R7$(2),t.Y8G("ngIf",null==e.packages?null:e.packages.length)}}function lt(o,u){if(1&o&&(t.j41(0,"td"),t.nrm(1,"p-skeleton",43),t.k0s()),2&o){const e=u.$implicit,i=u.even;t.R7$(),t.Y8G("ngStyle",t.eq3(1,x,i?"year"===e.field?"30%":"40%":"60%"))}}function st(o,u){if(1&o&&(t.j41(0,"tr",41),t.DNE(1,lt,2,3,"td",42),t.k0s()),2&o){const e=u.columns;t.R7$(),t.Y8G("ngForOf",e)}}const mt=[{path:"",component:(()=>{class o extends P.x{constructor(e,i,n,p){super(p),this.productService=e,this.messageService=i,this.confirmationService=n,this.totalRecords=0,this.newProductName="",this.editMode=!1}ngOnInit(){this.titleService.setTitle("\u0423\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0442\u043e\u0432\u0430\u0440\u0430\u043c\u0438")}findProducts(e){this.productService.findProducts(e).pipe((0,l.W)(i=>(this.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430",severity:"error",detail:i}),s.w))).subscribe(i=>{this.data=i.items,this.totalRecords=i.totalCount})}onDataLazyLoad(e){const i=new m.D.FindProductsModel({offset:e.first,count:e.rows});if(this.fillFilterModel(i,e.filters),e.sortField){switch(e.sortField){case"name":i.orderField=m.D.FindProductsModelSortField.Name;break;case"iD":i.orderField=m.D.FindProductsModelSortField.ID}i.orderAscending=e.sortOrder>0}this.findProducts(i)}fillFilterModel(e,i){e.name=i.name?.value;const n=+i.iD?.value;e.iD=n>0?n:null}onProductEditInit(e,i){const n=this.editingProduct;this.editMode=!0;const p=i;p._edit={},Object.assign(p._edit,i,{_edit:void 0}),this.editingProduct={...i},n&&n!=i&&(e.cancelRowEdit(n),this.onProductEditCancel(n))}onProductEditSave(e,i){const n=i;0===i.iD?this.productService.addProduct(i).pipe((0,l.W)(p=>(this.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u0442\u043e\u0432\u0430\u0440\u0430",severity:"error",detail:p}),s.w))).subscribe(p=>{i.iD=p.iD,this.messageService.add({summary:"\u0422\u043e\u0432\u0430\u0440 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d",severity:"success"}),this.data[this.data.findIndex(a=>a==this.editingProduct)]=p}):this.productService.updateProduct(i).pipe((0,l.W)(p=>(this.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u0442\u043e\u0432\u0430\u0440\u0430",severity:"error",detail:p}),s.w))).subscribe(()=>{this.messageService.add({summary:"\u0422\u043e\u0432\u0430\u0440 \u043e\u0431\u043d\u043e\u0432\u043b\u0451\u043d",severity:"success"}),e.cancelRowEdit(n),n._edit=void 0,this.editMode=!1})}onProductEditCancel(e){e&&(e.iD||this.data.splice(this.data.findIndex(i=>i==e),1),e._edit=void 0)}onPackageEditInit(e,i,n){void 0!==this.editingPackageIndex&&this.editingPackageIndex!=n&&(e.cancelRowEdit(this.editingPackage),this.onPackageEditCancel(e,this.editingPackageIndex)),this.editingPackageIndex=n,this.editingPackage={...i}}onPackageEditSave(e){0===e.iD?this.productService.addProductPackage(e).pipe((0,l.W)(i=>(this.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u0444\u0430\u0441\u043e\u0432\u043a\u0438 \u0442\u043e\u0432\u0430\u0440\u0430",severity:"error",detail:i}),s.w))).subscribe(i=>{e.iD=i.iD,this.messageService.add({summary:"\u0424\u0430\u0441\u043e\u0432\u043a\u0430 \u0442\u043e\u0432\u0430\u0440\u0430 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0430",severity:"success"})}):this.productService.updateProductPackage(e).pipe((0,l.W)(i=>(this.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f \u0444\u0430\u0441\u043e\u0432\u043a\u0438 \u0442\u043e\u0432\u0430\u0440\u0430",severity:"error",detail:i}),s.w))).subscribe(()=>{this.messageService.add({summary:"\u0424\u0430\u0441\u043e\u0432\u043a\u0430 \u0442\u043e\u0432\u0430\u0440\u0430 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0430",severity:"success"})})}onPackageEditCancel(e,i){e.value[i]=this.editingPackage,this.editingPackageIndex=void 0}addPackage(e,i){i.packages??=[];const n=new m.D.ProductPackage({iD:0,productCount:1,name:i.name,productID:i.iD,supplyPreparationTimeInDays:0,minimumWarehouseStock:0,product:null});i.packages.push(n),e.initRowEdit(n)}addProduct(e){const i=new m.D.Product({iD:0,categoryID:1,name:this.newProductName,stockAmount:0,category:null,packages:[]});this.data.unshift(i),this.onProductEditInit(e,i),e.initRowEdit(i)}confirmProductRemoval(e,i){this.confirmationService.confirm({target:e.target,message:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0442\u043e\u0432\u0430\u0440?",header:"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0438\u0435 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f",icon:"pi pi-exclamation-triangle text-red-500",rejectIcon:"none",rejectButtonStyleClass:"p-button-text",defaultFocus:"none",accept:()=>{this.removeProduct(i)}})}removeProduct(e){this.productService.removeProduct(e.iD).pipe((0,l.W)(i=>(this.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f \u0442\u043e\u0432\u0430\u0440\u0430",severity:"error",detail:i}),s.w))).subscribe(()=>{const i=this.data.indexOf(e);this.data.splice(i,1),this.messageService.add({summary:"\u0422\u043e\u0432\u0430\u0440 \u0443\u0434\u0430\u043b\u0451\u043d",severity:"success"})})}confirmProductPackageRemoval(e,i,n){this.confirmationService.confirm({target:e.target,message:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0444\u0430\u0441\u043e\u0432\u043a\u0443 \u0442\u043e\u0432\u0430\u0440\u0430??",header:"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0438\u0435 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f",icon:"pi pi-exclamation-triangle",acceptIcon:"none",rejectIcon:"none",rejectButtonStyleClass:"p-button-text",accept:()=>{this.removeProductPackage(i,n)}})}removeProductPackage(e,i){this.productService.removeProductPackage(e.iD).pipe((0,l.W)(n=>(this.messageService.add({summary:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f \u0444\u0430\u0441\u043e\u0432\u043a\u0438",severity:"error",detail:n}),s.w))).subscribe(()=>{const n=i.packages.indexOf(e);i.packages.splice(n,1),this.messageService.add({summary:"\u0424\u0430\u0441\u043e\u0432\u043a\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u0430",severity:"success"})})}copyObject(e,i){for(const n of Object.keys(e)){const p=e[n],a=typeof p;(!p||"number"==a||"string"==a)&&(i[n]=p)}return i}static{this.\u0275fac=function(i){return new(i||o)(t.rXU(j.b),t.rXU(g.bg),t.rXU(g.td),t.rXU(b.hE))}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["app-product-list"]],features:[t.Vt3],decls:12,vars:14,consts:[["productTable",""],["packageTable",""],[1,"flex"],["pInputText","","placeholder","\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435","type","text",3,"ngModelChange","ngModel"],["pButton","",3,"click"],["dataKey","iD","editMode","row","sortField","name",3,"onLazyLoad","globalFilterFields","lazy","loading","paginator","rowsPerPageOptions","rows","sortOrder","tableStyle","totalRecords","value"],["pTemplate","header"],["pTemplate","body"],["pTemplate","rowexpansion"],["pTemplate","loadingbody"],["pSortableColumn","iD"],["field","iD"],["pSortableColumn","name"],["field","name"],["field","iD","type","text"],["field","name","type","text"],[3,"pEditableRow"],["pTemplate","input"],["pTemplate","output"],["icon","pi pi-pencil","pInitEditableRow","","pRipple","","type","button",3,"click",4,"ngIf"],["icon","pi pi-check","pRipple","","type","button",3,"click",4,"ngIf"],["icon","pi pi-times","pCancelEditableRow","","pRipple","","type","button",3,"click",4,"ngIf"],["icon","pi pi-trash","pRipple","","styleClass","p-button-danger","type","button",3,"click",4,"ngIf"],["class","p-button-text p-button-rounded p-button-plain","pButton","","pRipple","","type","button",3,"icon","pRowToggler",4,"ngIf"],["pInputText","","type","text",3,"ngModelChange","ngModel"],["placeholder","\u0428\u0438\u0440\u0438\u043d\u0430",3,"ngModelChange","ngModel"],["placeholder","\u0412\u044b\u0441\u043e\u0442\u0430",3,"ngModelChange","ngModel"],["placeholder","\u0413\u043b\u0443\u0431\u0438\u043d\u0430",3,"ngModelChange","ngModel"],["placeholder","\u0412\u0435\u0441",3,"ngModelChange","ngModel"],[1,"flex","white-space-nowrap"],["icon","pi pi-pencil","pInitEditableRow","","pRipple","","type","button",3,"click"],["icon","pi pi-check","pRipple","","type","button",3,"click"],["icon","pi pi-times","pCancelEditableRow","","pRipple","","type","button",3,"click"],["icon","pi pi-trash","pRipple","","styleClass","p-button-danger","type","button",3,"click"],["pButton","","pRipple","","type","button",1,"p-button-text","p-button-rounded","p-button-plain",3,"icon","pRowToggler"],["colspan","6"],[4,"ngIf"],["dataKey","iD","editMode","row",3,"value"],["icon","pi pi-check","pRipple","","pSaveEditableRow","","type","button",3,"click",4,"ngIf"],["type","text",3,"ngModelChange","ngModel","useGrouping"],["icon","pi pi-check","pRipple","","pSaveEditableRow","","type","button",3,"click"],[2,"height","46px"],[4,"ngFor","ngForOf"],[3,"ngStyle"]],template:function(i,n){if(1&i){const p=t.RV6();t.nrm(0,"p-toast")(1,"p-confirmDialog"),t.j41(2,"div",2)(3,"input",3),t.mxI("ngModelChange",function(_){return t.eBV(p),t.DH7(n.newProductName,_)||(n.newProductName=_),t.Njj(_)}),t.k0s(),t.j41(4,"button",4),t.bIt("click",function(){t.eBV(p);const _=t.sdS(7);return t.Njj(n.addProduct(_))}),t.EFF(5,"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0442\u043e\u0432\u0430\u0440"),t.k0s()(),t.j41(6,"p-table",5,0),t.bIt("onLazyLoad",function(_){return t.eBV(p),t.Njj(n.onDataLazyLoad(_))}),t.DNE(8,L,25,0,"ng-template",6)(9,z,26,7,"ng-template",7)(10,rt,3,1,"ng-template",8)(11,st,2,1,"ng-template",9),t.k0s()}2&i&&(t.R7$(3),t.R50("ngModel",n.newProductName),t.R7$(3),t.Y8G("globalFilterFields",t.lJ4(11,T))("lazy",!0)("loading",n.loading)("paginator",!0)("rowsPerPageOptions",t.lJ4(12,D))("rows",10)("sortOrder",1)("tableStyle",t.lJ4(13,y))("totalRecords",n.totalRecords)("value",n.data))},dependencies:[h.me,h.BC,h.vS,d.Sq,d.bT,d.B3,r.XI,g.Ei,r.Tg,r.FP,r.c5,r.yc,r.Xk,r.Hd,r.E7,r.Tf,r.rl,E.y8,C._f,C.$n,M.S,F.M,G.YI,R.S,I.T]})}}return o})()}];let dt=(()=>{class o{static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275mod=t.$C({type:o})}static{this.\u0275inj=t.G2t({imports:[k.iI.forChild(mt),k.iI]})}}return o})(),gt=(()=>{class o{static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275mod=t.$C({type:o})}static{this.\u0275inj=t.G2t({imports:[d.MD,dt]})}}return o})()}}]);